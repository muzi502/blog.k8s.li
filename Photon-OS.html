<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="rgba(0,0,0,0)"><meta name="generator" content="Hexo 6.2.0">

<link rel="preconnect" href="//fonts.loli.net" crossorigin>
<link rel="preconnect" href="null//null" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="rgba(0,0,0,0)">
  <link rel="manifest" href="/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-atom.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.k8s.li","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å‰æ®µæ—¶é—´æ¡åƒåœ¾ä¸œæ‹¼è¥¿å‡‘æäº†å° Homelab ğŸ‘‡ ç©ç© ğŸ‘‰ã€Šåƒåœ¾ä½¬çš„ Homelab æŠ˜è…¾è®°å½•ã€‹ ã€‚  æ€»ä½“æ¥è®²æ€§ä»·æ¯”é«˜ï¼ŒIntel i5-6600T çš„æ€§èƒ½å’Œ i5-6600 æŒå¹³ï¼Œæ¯”é‚£ç§ 8250U ä¹‹ç±»çš„ä½å‹ U è¦é«˜å¾ˆå¤šï¼Œè·‘ä¸€å †è™šæ‹Ÿæœºä¹Ÿä¸æˆé—®é¢˜ï¼Œç”šè‡³è·‘ä¸ªä¸‰ master + ä¸¤ node çš„ kubernetes é›†ç¾¤ä¹Ÿæ˜¯å¯ä»¥ ğŸ˜‚ã€‚è‡³äºåŠŸè€—ï¼Œæ•´æœºå¾…æœºæ—¶ä¸åˆ° 30W ï¼Œä¸€å¤©ä¸åˆ° 1 åº¦">
<meta property="og:type" content="blog">
<meta property="og:title" content="è½»é‡çº§å®¹å™¨ä¼˜åŒ–å‹ Linux å‘è¡Œç‰ˆ Photon OS">
<meta property="og:url" content="https://blog.k8s.li/Photon-OS.html">
<meta property="og:site_name" content="Reimu&#39;s blog">
<meta property="og:description" content="å‰æ®µæ—¶é—´æ¡åƒåœ¾ä¸œæ‹¼è¥¿å‡‘æäº†å° Homelab ğŸ‘‡ ç©ç© ğŸ‘‰ã€Šåƒåœ¾ä½¬çš„ Homelab æŠ˜è…¾è®°å½•ã€‹ ã€‚  æ€»ä½“æ¥è®²æ€§ä»·æ¯”é«˜ï¼ŒIntel i5-6600T çš„æ€§èƒ½å’Œ i5-6600 æŒå¹³ï¼Œæ¯”é‚£ç§ 8250U ä¹‹ç±»çš„ä½å‹ U è¦é«˜å¾ˆå¤šï¼Œè·‘ä¸€å †è™šæ‹Ÿæœºä¹Ÿä¸æˆé—®é¢˜ï¼Œç”šè‡³è·‘ä¸ªä¸‰ master + ä¸¤ node çš„ kubernetes é›†ç¾¤ä¹Ÿæ˜¯å¯ä»¥ ğŸ˜‚ã€‚è‡³äºåŠŸè€—ï¼Œæ•´æœºå¾…æœºæ—¶ä¸åˆ° 30W ï¼Œä¸€å¤©ä¸åˆ° 1 åº¦">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p.k8s.li/20200913_esxi_01.png">
<meta property="og:image" content="https://p.k8s.li/rancheroshowitworks.png">
<meta property="og:image" content="https://p.k8s.li/20200922-esxi_ova_01.png">
<meta property="og:image" content="https://p.k8s.li/20200922-esxi_photonos-01.png">
<meta property="og:image" content="https://p.k8s.li/20200925-pihole.png">
<meta property="article:published_time" content="2020-09-24T16:00:00.000Z">
<meta property="article:modified_time" content="2020-09-24T16:00:00.000Z">
<meta property="article:author" content="Reimu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="å®¹å™¨">
<meta property="article:tag" content="PhotonOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p.k8s.li/20200913_esxi_01.png">


<link rel="canonical" href="https://blog.k8s.li/Photon-OS.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.k8s.li/Photon-OS.html","path":"Photon-OS.html","title":"è½»é‡çº§å®¹å™¨ä¼˜åŒ–å‹ Linux å‘è¡Œç‰ˆ Photon OS"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>è½»é‡çº§å®¹å™¨ä¼˜åŒ–å‹ Linux å‘è¡Œç‰ˆ Photon OS | Reimu's blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Reimu's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Reimu's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-books"><a href="https://reading.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>Books</a></li><li class="menu-item menu-item-kindle"><a href="https://kindle.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-swatchbook fa-fw"></i>Kindle</a></li><li class="menu-item menu-item-friend"><a href="/friends.html" rel="section"><i class="fa fa-link fa-fw"></i>Friend</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-Container-OS"><span class="nav-number">1.</span> <span class="nav-text">Linux Container OS ?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GKE-%E7%9A%84-Container-Optimized-OS"><span class="nav-number">1.1.</span> <span class="nav-text">GKE çš„ Container-Optimized OS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AWS-%E7%9A%84-Bottlerocket-OS"><span class="nav-number">1.2.</span> <span class="nav-text">AWS çš„ Bottlerocket OS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optimized-performance-through-AWS-integrations"><span class="nav-number">1.3.</span> <span class="nav-text">Optimized performance through AWS integrations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoreOS-Container-Linux"><span class="nav-number">1.4.</span> <span class="nav-text">CoreOS Container Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A2%E5%B8%BD%E7%9A%84-RHCOS"><span class="nav-number">1.5.</span> <span class="nav-text">çº¢å¸½çš„ RHCOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RancherOS"><span class="nav-number">1.6.</span> <span class="nav-text">RancherOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VMware-%E7%9A%84-Photon-OS"><span class="nav-number">1.7.</span> <span class="nav-text">VMware çš„ Photon OS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E6%AF%94"><span class="nav-number">2.</span> <span class="nav-text">å¯¹æ¯”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">3.</span> <span class="nav-text">å®‰è£…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Download-Format"><span class="nav-number">3.1.</span> <span class="nav-text">Download Format</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Photon-OS-3-0-Revision-2-Update3-Binaries"><span class="nav-number">3.2.</span> <span class="nav-text">Photon OS 3.0 Revision 2 Update3 Binaries</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="nav-number">4.</span> <span class="nav-text">ç³»ç»Ÿä¿¡æ¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">ç³»ç»Ÿç®¡ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86"><span class="nav-number">5.1.</span> <span class="nav-text">ç½‘ç»œç®¡ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86"><span class="nav-number">5.2.</span> <span class="nav-text">åŒ…ç®¡ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91"><span class="nav-number">5.3.</span> <span class="nav-text">æºç ç¼–è¯‘</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="nav-number">6.</span> <span class="nav-text">è¿è¡Œå®¹å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pi-hole"><span class="nav-number">6.1.</span> <span class="nav-text">Pi-hole</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">7.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Reimu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Reimu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">115</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">147</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:muzi502.li@gmail.com" title="E-Mail â†’ mailto:muzi502.li@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi502" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa-brands fa-telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa-solid fa-square-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/Photon-OS.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Reimu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Reimu's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="è½»é‡çº§å®¹å™¨ä¼˜åŒ–å‹ Linux å‘è¡Œç‰ˆ Photon OS | Reimu's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          è½»é‡çº§å®¹å™¨ä¼˜åŒ–å‹ Linux å‘è¡Œç‰ˆ Photon OS
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-09-25 2020-09-25T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2020-09-25T00:00:00+08:00">2020-09-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/Photon-OS.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Photon-OS.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>16 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>å‰æ®µæ—¶é—´æ¡åƒåœ¾ä¸œæ‹¼è¥¿å‡‘æäº†å° Homelab ğŸ‘‡ ç©ç© ğŸ‘‰<a href="https://blog.k8s.li/homelab.html">ã€Šåƒåœ¾ä½¬çš„ Homelab æŠ˜è…¾è®°å½•ã€‹</a> ã€‚</p>
<p><img data-src="https://p.k8s.li/20200913_esxi_01.png"></p>
<p>æ€»ä½“æ¥è®²æ€§ä»·æ¯”é«˜ï¼ŒIntel i5-6600T çš„æ€§èƒ½å’Œ i5-6600 æŒå¹³ï¼Œæ¯”é‚£ç§ 8250U ä¹‹ç±»çš„ä½å‹ U è¦é«˜å¾ˆå¤šï¼Œè·‘ä¸€å †è™šæ‹Ÿæœºä¹Ÿä¸æˆé—®é¢˜ï¼Œç”šè‡³è·‘ä¸ªä¸‰ master + ä¸¤ node çš„ kubernetes é›†ç¾¤ä¹Ÿæ˜¯å¯ä»¥ ğŸ˜‚ã€‚è‡³äºåŠŸè€—ï¼Œæ•´æœºå¾…æœºæ—¶ä¸åˆ° 30W ï¼Œä¸€å¤©ä¸åˆ° 1 åº¦ç”µï¼Œä¸ç”¨æ‹…å¿ƒç”µè´¹çˆ†è¡¨äº†ï¼›è‡³äºä»·æ ¼ï¼Œä¸€é¢— Intel i5-6600T  ä¸åˆ° 450 å—é’±ï¼Œè¿˜ä¸é¦™å˜› ğŸ™ƒã€‚</p>
<p>åœ¨ ESXi è¿è¡Œç€ä¸€äº›è™šæ‹Ÿæœºï¼Œæ¯”å¦‚ç”¨ WireGuard æ‰“é€š VPS ä¹‹é—´çš„ç½‘ç»œï¼Œè¿è¡Œåœ¨ä¸€ä¸ª alpine è™šæ‹Ÿæœºé‡Œä½œä¸ºç½‘å…³æœºä½¿ç”¨ï¼›æ¯”å¦‚ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://pi-hole.net/">Pi-holeÂ®</a> æ¥æ„å»ºè‡ªå·±çš„ DNS æœåŠ¡å™¨ï¼Œç”¨æ¥æ‹¦æˆªå±è”½åŸŸåï¼›æ¯”å¦‚è¿è¡Œ time-machine æœåŠ¡ç”¨æ¥å®šæ—¶å¤‡ä»½ MacBook ï¼›æ¯”å¦‚ Windows è™šæ‹Ÿæœºé‡Œè¿è¡Œç€ä¸€äº›å›½äº§æ¯’ç˜¤è½¯ä»¶ ğŸ˜¡ï¼›æ¯”å¦‚ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://docs.drone.io/">Drone</a> è·‘ä¸€å¥—è½»é‡çº§çš„ CI æµæ°´çº¿ç³»ç»Ÿï¼Œæ€»ä¹‹å¯ç©æ€§éå¸¸é«˜å“¦ï¼Œåªè¦ä½ åˆæ—¶é—´çæŠ˜è…¾ï¼Œæ€»èƒ½æ‰¾ç‚¹ä¹å­ç© ğŸ˜‚ã€‚</p>
<h2 id="Linux-Container-OS"><a href="#Linux-Container-OS" class="headerlink" title="Linux Container OS ?"></a>Linux Container OS ?</h2><p>æœ‰äº†ä¸€å°è¿è¡Œç€ ESXi çš„ Homelab ï¼Œä»Šå¤©å°±ç©ä¸€ä¸‹ Linux container OS ï¼Œå³ Linux å®¹å™¨  OS ã€å®¹å™¨ä¼˜åŒ–å‹ OSï¼Œè¿™æ˜¯ä¸€ç±»ä¸“é—¨é’ˆå¯¹è¿è¡Œå®¹å™¨å®šåˆ¶åŒ–å¼€å‘çš„ Linux å‘è¡Œç‰ˆï¼Œè£å‰ªæ‰ä¸€äº›ä¸å¿…è¦çš„è½¯ä»¶å’Œå†…æ ¸æ¨¡å—ï¼Œä½¿ç³»ç»Ÿæ›´åŠ è½»é‡ä¸€äº›ã€‚è™½ç„¶æ¥è¯´æ°‘ç”¨çº§çš„ Intel i5-6600T æ€§èƒ½ä¹Ÿä¸ç®—å¤ªå·®ï¼Œä½†å’Œ E3  å°ç‹å­ï¼ŒE5 è€å¤§å“¥æ¯”è¿˜æ˜¯å·®ä¸ªåä¸‡å…«åƒé‡Œã€‚å› æ­¤ä¸ºäº†èŠ‚çœä¸€äº› CPU èµ„æºï¼Œå‡å°‘è™šæ‹ŸåŒ–å¸¦æ¥çš„å¼€é”€ï¼Œå°±é€‰æ‹©äº†å®¹å™¨åŒ–è¿è¡Œä¸€äº›åº”ç”¨ï¼ŒåŒæ—¶å†ä¸ºè¿™äº›å®¹å™¨æ‰¾ä¸€ä¸ªè½»é‡çº§çš„å®¿ä¸»æœº OS ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæƒ³è¦ä½¿ç”¨ Linux container OS çš„åŸå› ã€‚</p>
<h3 id="GKE-çš„-Container-Optimized-OS"><a href="#GKE-çš„-Container-Optimized-OS" class="headerlink" title="GKE çš„ Container-Optimized OS"></a>GKE çš„ <a target="_blank" rel="noopener" href="https://cloud.google.com/container-optimized-os/docs/">Container-Optimized OS</a></h3><p>Kubernetes çš„äº²çˆ¸çˆ¸ Google å®¶çš„ <a target="_blank" rel="noopener" href="https://cloud.google.com/kubernetes-engine">Google Kubernetes Engine</a> å³ GKE é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://cloud.google.com/container-optimized-os/docs/">Container-Optimized OS</a> æ¥è¿è¡Œå·¥ä½œè´Ÿè½½ï¼Œä¸è¿‡ä»…ä»…æ˜¯é’ˆå¯¹ GCE æ¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œå¯èƒ½åœ¨ OpenStack æˆ–è€… vSphere ä¸Šè¿è¡Œä¸èµ·æ¥ï¼Œ(ççŒœ ğŸ˜‚ã€‚</p>
<blockquote>
<p>Container-Optimized OS æ˜¯é€‚ç”¨äº <a target="_blank" rel="noopener" href="https://cloud.google.com/compute">Compute Engine</a> è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿæ˜ åƒï¼Œä¸“ä¸ºè¿è¡Œ Docker å®¹å™¨è€Œä¼˜åŒ–ã€‚å€ŸåŠ© Container-Optimized OSï¼Œæ‚¨å¯ä»¥å¿«é€Ÿã€é«˜æ•ˆã€å®‰å…¨åœ°åœ¨ Google Cloud Platform ä¸Šå¯åŠ¨ Docker å®¹å™¨ã€‚Container-Optimized OS ç”± Google ç»´æŠ¤ï¼ŒåŸºäº <a target="_blank" rel="noopener" href="https://www.chromium.org/chromium-os">Chromium OS</a> å¼€æ”¾æºä»£ç é¡¹ç›®ã€‚</p>
</blockquote>
<p>ç‰¹ç‚¹å°±æ˜¯ä¸åŒäºå…¶ä»–çš„ Linux å‘è¡Œç‰ˆï¼Œè¿™ä¸ªæ˜¯åŸºäº <a target="_blank" rel="noopener" href="https://www.chromium.org/chromium-os">Chromium OS</a> å®šåˆ¶åŒ–å¼€å‘çš„ï¼Œå¯¹å†…æ ¸ç‰ˆæœ¬é€‰ç”¨çš„ä¹Ÿæ¯”è¾ƒæ¿€è¿›ï¼Œä¸€èˆ¬æ˜¯ <code>4.19.112+</code> æˆ–è€… <code>5.x</code> ç‰ˆæœ¬ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨å†æ‹…å¿ƒåƒ CentOS 7.x ç³»åˆ—é‚£æ ·å„ç§å†…æ ¸ bug äº†ã€‚</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">items</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Node
  <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
    <span class="token key atrule">nodeInfo</span><span class="token punctuation">:</span>
      <span class="token key atrule">architecture</span><span class="token punctuation">:</span> amd64
      <span class="token key atrule">bootID</span><span class="token punctuation">:</span> 0c517083<span class="token punctuation">-</span>aaf6<span class="token punctuation">-</span>75fc4b2204ba
      <span class="token key atrule">containerRuntimeVersion</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>//19.3.1
      <span class="token key atrule">kernelVersion</span><span class="token punctuation">:</span> 4.19.112+
      <span class="token key atrule">kubeProxyVersion</span><span class="token punctuation">:</span> v1.16.13<span class="token punctuation">-</span>gke.1
      <span class="token key atrule">kubeletVersion</span><span class="token punctuation">:</span> v1.16.13<span class="token punctuation">-</span>gke.1
      <span class="token key atrule">machineID</span><span class="token punctuation">:</span> 33a96ff3203d88c0a542
      <span class="token key atrule">operatingSystem</span><span class="token punctuation">:</span> linux
      <span class="token key atrule">osImage</span><span class="token punctuation">:</span> Container<span class="token punctuation">-</span>Optimized OS from Google
      <span class="token key atrule">systemUUID</span><span class="token punctuation">:</span> 33a96ff33d88c0a542<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Chromium OS å°±æ˜¯ Google åŸºäº Linux å†…æ ¸å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ Google ä¹Ÿæœ‰è¿™ä¸ªå®åŠ›é’ˆå¯¹è‡ªå®¶çš„ GCP äº‘å¹³å°è¿›è¡Œå®šåˆ¶åŒ–å¼€å‘ä¸ª OS å‡ºæ¥ï¼Œä¸“é—¨ç»™ kubernetes é›†ç¾¤è¿è¡Œä½¿ç”¨ï¼Œå®šåˆ¶åŒ–å¼€å‘çš„å¥½å¤„å°±æ˜¯å¯ä»¥å¸¦æ¥æ›´å¤šçš„æ–°ç‰¹æ€§ï¼ŒäºŒä¸å—åˆ¶äºä¸Šæ¸¸çš„ Linux å‘è¡Œç‰ˆçš„é™åˆ¶ã€‚æ¯”å¦‚ä¸ä¹…å‰ Google å®£å¸ƒå°†ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://cilium.io/">Cilium</a> ä½œä¸º GKE çš„ä¸‹ä¸€ä»£æ•°æ®é¢ï¼Œ<a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/containers-kubernetes/bringing-ebpf-and-cilium-to-google-kubernetes-engine">New GKE Dataplane V2 increases security and visibility for containers</a> ï¼Œè€Œ Cilium è¿™é¡¹æŠ€æœ¯æ˜¯ä¾èµ–äºå¯¹ eBPF æŠ€æœ¯ï¼Œè€Œ eBPF åˆä¾èµ–äºå†…æ ¸ç‰¹æ€§çš„æ”¯æŒã€‚</p>
<h3 id="AWS-çš„-Bottlerocket-OS"><a href="#AWS-çš„-Bottlerocket-OS" class="headerlink" title="AWS çš„ Bottlerocket OS"></a>AWS çš„ <a target="_blank" rel="noopener" href="https://github.com/bottlerocket-os/bottlerocket">Bottlerocket OS</a></h3><p>è¿™ä¸ªæ˜¯ AWS æœ€è¿‘å¼€æºä¸“é—¨é’ˆå¯¹  EC2 è¿›è¡Œä¼˜åŒ–çš„ Linux Container OSï¼Œå’Œ GKE ä¸€æ ·ï¼Œåªæ˜¯é’ˆå¯¹äºè‡ªå®¶çš„ AWS å…¬æœ‰äº‘ï¼Œç”±äºæ˜¯æœ€è¿‘åˆšåˆšæ¨å‡ºçš„ï¼Œè¿˜æ²¡æ¥å¾—åŠå…³æ³¨ï¼Œæ‰€ä»¥å°±ä¸ä»‹ç»äº†ã€‚åŒ GKE çš„ Container-Optimized OS ä¸€æ ·ï¼Œä¸€èˆ¬å…¬æœ‰äº‘å®šåˆ¶åŒ–å¼€å‘çš„ Container OS ä»…ä»…åªé’ˆå¯¹è‡ªå®¶çš„äº‘å¹³å°ã€‚</p>
<blockquote>
<h3 id="Optimized-performance-through-AWS-integrations"><a href="#Optimized-performance-through-AWS-integrations" class="headerlink" title="Optimized performance through AWS integrations"></a>Optimized performance through AWS integrations</h3><p>AWS provided builds of Bottlerocket are optimized to run on Amazon EC2 and include support for the latest Amazon EC2 instance capabilities. They also have built-in integrations with AWS services for container orchestration, registries, and observability.</p>
</blockquote>
<h3 id="CoreOS-Container-Linux"><a href="#CoreOS-Container-Linux" class="headerlink" title="CoreOS Container Linux"></a>CoreOS Container Linux</h3><p>æ¥è‡ª CoreOS å›¢é˜Ÿçš„ CoreOS Container Linux ï¼Œå®ƒåº”è¯¥æ˜¯æœ€å¤è€çš„ Linux Container OS ï¼Œæ—©åœ¨ 2013 å¹´ 10 æœˆå°±å·²ç» release ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œé‚£æ—¶å€™çš„ docker è¿˜æ²¡æœ‰åœ¨ 0.x.x ç‰ˆæœ¬ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/coreos/manifest/releases/tag/v94.0.0">v94.0.0</a></p>
<ul>
<li>Git is now included by default as a number of people use it for shipping around assets, code, etc like a distributed rsync</li>
<li>Docker is upgraded to 0.6.3</li>
<li>xz is included to support new compression types</li>
<li>Custom OEMs can be provided via the cpio on PXE images</li>
</ul>
</blockquote>
<p>å®ƒæ²¡æœ‰åƒ yum æˆ– apt è¿™æ ·çš„åŒ…ç®¡ç†å™¨æ¥å®‰è£…è½¯ä»¶ï¼Œåœ¨ CoreOS ä¸­ä½ ä¸éœ€è¦å®‰è£…è½¯ä»¶ï¼Œå› ä¸ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½è¦ä½¿ç”¨ docker æ¥æ‰“åŒ…ã€‚</p>
<ul>
<li>æœ€å°åŒ–çš„æ“ä½œç³»ç»Ÿï¼š å ç”¨å†…å­˜å¾ˆå°‘ï¼Œæ¯”å…¸å‹çš„æœåŠ¡å™¨ç‰ˆæœ¬ Linux å°‘å  40% çš„å†…å­˜ã€‚</li>
<li>æ˜“äºå‡çº§ï¼š CoreOS é‡‡ç”¨åŒç³»ç»Ÿåˆ†åŒºï¼ˆä¸»åŠ¨åˆ†åŒº&#x2F;è¢«åŠ¨åˆ†åŒºï¼‰è®¾è®¡è€Œä¸æ˜¯é‡‡ç”¨ä¼ ç»Ÿçš„é€šè¿‡å‡çº§åŒ…æ¥å‡çº§ç³»ç»Ÿï¼Œè¿™ä½¿å¾—æ¯æ¬¡å‡çº§æ›´åŠ å¿«é€Ÿï¼Œå¯é å’Œæ˜“äºå›æ»šã€‚è¿™ä¸€ç‚¹æœ‰ç‚¹åƒ Android çš„ A&#x2F;B åˆ†åŒºï¼Ÿ</li>
<li>é›†æˆ Dockerï¼š CoreOS é»˜è®¤é›†æˆ Docker å¹¶ä½œäº†å¾ˆå¥½çš„æ”¯æŒå’Œä¼˜åŒ–ï¼Œçœå»ç”¨æˆ·å®‰è£…ï¼Œé…ç½®ï¼Œä¼˜åŒ– Docker çš„æ—¶é—´ï¼Œæå¤§åœ°æ–¹ä¾¿äº†ç”¨æˆ·ã€‚</li>
<li>æ˜“äºé›†ç¾¤åŒ–ï¼š CoreOS æœ¬èº«æä¾›äº†å¤§å‹ Docker å®¹å™¨é›†ç¾¤çš„æ•´ä½“è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å†…ç½®çš„ fleet å·¥å…·åœ¨å¤šå°ç³»ç»Ÿä¸­éƒ¨ç½²å®¹å™¨å¹¶è¿›è¡Œé›†ç¾¤åŒ–ç®¡ç†ã€‚åŒæ—¶é€šè¿‡æä¾› Discovery Serviceï¼Œä¾¿äºåŠ¨æ€éƒ¨ç½²å’Œç®¡ç†é›†ç¾¤ï¼Œè§£å†³æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿã€‚</li>
<li>è‡ªåŠ¨åŒ–çš„å¤§è§„æ¨¡éƒ¨ç½²ï¼š CoreOS è‡ªèº«æä¾›çš„è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿè‡ªåŠ¨åœ°å¤§è§„æ¨¡æ‰¹é‡éƒ¨ç½²å¹¶æ“ä½œç³»ç»Ÿï¼Œæå¤§åœ°å‡å°‘ç”¨æˆ·å·¥ä½œé‡ã€‚</li>
<li>ä½¿ç”¨ systemd åšä¸ºç³»ç»ŸæœåŠ¡ç®¡ç†å·¥å…·ï¼Œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œsystemd æœ‰ç°ä»£åŒ–çš„æ—¥å¿—åŠŸèƒ½ï¼ŒåŒæ—¶é‡‡ç”¨ socket å¼ä¸ D-Bus æ€»çº¿å¼æ¿€æ´»æœåŠ¡.</li>
</ul>
<p>ä¸è¿‡ CoreOS æ—©åœ¨ä»Šå¹´å››æœˆä»½å°±å·²ç» EOF äº†ï¼Œ<a target="_blank" rel="noopener" href="https://getfedora.org/coreos/">Fedora CoreOS</a> æˆä¸º CoreOS çš„ç»§ä»»è€…ï¼š</p>
<blockquote>
<p>As weâ€™ve <a target="_blank" rel="noopener" href="https://groups.google.com/d/msg/coreos-user/zgqkG88DS3U/PFP9yrKbAgAJ">previously announced</a>, <a target="_blank" rel="noopener" href="https://getfedora.org/coreos/">Fedora CoreOS</a> is the official successor to CoreOS Container Linux. Fedora CoreOS is a <a target="_blank" rel="noopener" href="https://fedoramagazine.org/fedora-coreos-out-of-preview/">new Fedora Edition</a> built specifically for running containerized workloads securely and at scale. It combines the provisioning tools and automatic update model of Container Linux with the packaging technology, OCI support, and SELinux security of Atomic Host. For more on the Fedora CoreOS philosophy, goals, and design, see the <a target="_blank" rel="noopener" href="https://fedoramagazine.org/introducing-fedora-coreos/">announcement of the preview release</a> and the <a target="_blank" rel="noopener" href="https://docs.fedoraproject.org/en-US/fedora-coreos/">Fedora CoreOS documentation</a>.</p>
</blockquote>
<h3 id="çº¢å¸½çš„-RHCOS"><a href="#çº¢å¸½çš„-RHCOS" class="headerlink" title="çº¢å¸½çš„ RHCOS"></a>çº¢å¸½çš„ <a target="_blank" rel="noopener" href="https://docs.openshift.com/container-platform/4.1/architecture/architecture-rhcos.html">RHCOS</a></h3><p>æ¥è‡ªçº¢å¸½å­å®¶çš„ <a target="_blank" rel="noopener" href="https://docs.openshift.com/container-platform/4.1/architecture/architecture-rhcos.html">Red Hat Enterprise Linux CoreOS (RHCOS)</a>ï¼Œæ˜¯åŸºäºä¸è¿‡è¿™ä¸ª OS ä»…ä»…é€‚ç”¨äºå®ƒè‡ªå®¶çš„ <a target="_blank" rel="noopener" href="https://docs.openshift.com/">OpenShift</a>ï¼Œè€Œä¸”å®¹å™¨è¿è¡Œæ—¶ä»…æ”¯æŒ CRI-Oã€‚</p>
<blockquote>
<p>At the moment, CRI-O is only available as a container engine within OpenShift Container Platform clusters.</p>
</blockquote>
<p>å› ä¸º CoreOS å›¢é˜Ÿç°å¦‚ä»Šå·²ç»è¢« Red HatÂ® æ”¶è´­äº†ï¼Œæ­£å¦‚åœ¨ <a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.2/html/architecture/architecture-rhcos">OpenShift æ–‡æ¡£</a> ä¸­æåˆ°çš„ï¼š Red Hat Enterprise Linux CoreOS (RHCOS) ä»£è¡¨äº†ä¸‹ä¸€ä»£å•ç”¨é€”å®¹å™¨æ“ä½œç³»ç»ŸæŠ€æœ¯ã€‚RHCOS ç”±åˆ›å»ºäº† Red Hat Enterprise Linux Atomic Host å’Œ CoreOS Container Linux çš„åŒä¸€å¼€å‘å›¢é˜Ÿæ‰“é€ ï¼Œå®ƒå°† Red Hat Enterprise Linux (RHEL) çš„è´¨é‡æ ‡å‡†ä¸ Container Linux çš„è‡ªåŠ¨åŒ–è¿œç¨‹å‡çº§åŠŸèƒ½ç»“åˆåœ¨ä¸€èµ·ã€‚</p>
<h3 id="RancherOS"><a href="#RancherOS" class="headerlink" title="RancherOS"></a>RancherOS</h3><p>RancherOS æ˜¯ Rancher å›¢é˜Ÿæ‰€ç»´æŠ¤çš„å¼€æºé¡¹ç›®ï¼Œä¹Ÿæ˜¯å¯¹æ ‡ CoreOS ä¸€æ ·ï¼Œä¸“é—¨ç”¨æ¥è¿è¡Œå®¹å™¨ï¼Œå¹¶ä¸”å¯ä»¥è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆè‡³å°‘å®˜æ–¹åšäº†è¿™ä¹ˆæ ·çš„æ‰¿è¯ºï¼Œå’±ä¹Ÿæ²¡åœ¨ç”Ÿäº§ç”¨è¿‡ï¼Œä¸å¥½è¯´ã€‚åœ¨ RancherOS ä¸­æ‰€æœ‰çš„è¿›ç¨‹ï¼ˆåŒ…æ‹¬ç³»ç»Ÿæ‰€æœ‰çš„æœåŠ¡ï¼Œæ¯”å¦‚ udev å’Œ syslogï¼‰éƒ½æ˜¯ç”¨ docker æ¥ç®¡ç†ï¼Œè¿™ä¸€ç‚¹è¦æ¯” CoreOS æ›´åŠ æ¿€è¿›ä¸€äº›ï¼Œè€Œ CoreOS è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿ Linux å‘è¡Œç‰ˆä¸­çš„ systemd æ¥ç®¡ç†ç³»ç»Ÿä¸­çš„æœåŠ¡ã€‚RancherOS é€šè¿‡ç§»é™¤ä¼ ç»Ÿ Linux å‘è¡Œç‰ˆä¸­ä¸å¿…è¦çš„æœåŠ¡å’Œåº“æ¥æœ€å°åŒ–ç³»ç»Ÿï¼Œä½¿ä»–ä¸“æ³¨å•ä¸€çš„åŠŸèƒ½ï¼Œå³è¿è¡Œ docker å®¹å™¨ã€‚ä¸è¿‡ä¹‹å‰ä½“éªŒäº†ä¸€ç•ªï¼Œå ç”¨èµ„æºæ¯”è¾ƒå¤š ğŸ˜‚ï¼Œå¥½åƒå¹¶æ²¡æœ‰å¤ªå¤§çš„ä¼˜åŠ¿ï¼ˆ</p>
<p><code>Everything in RancherOS is a Docker container.</code> æ„Ÿè§‰è¿™ä¸ªè¦æ¯” CoreOS æ›´åŠ å®¹å™¨åŒ–ï¼Œç”šè‡³ä½¿ç”¨ docker å–ä»£äº† systemd æ¥ç®¡ç†ç³»ç»Ÿçš„å„ç§æœåŠ¡ã€‚ç³»ç»Ÿå¯åŠ¨åè¿è¡Œä¸¤ä¸ª docker æœåŠ¡è¿›ç¨‹ï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿ docker ï¼Œåœ¨æ­¤ä¹‹ä¸Šåœ¨è¿è¡Œç³»ç»ŸæœåŠ¡å®¹å™¨ï¼Œå’Œç”¨æˆ·å±‚é¢çš„ docker ã€‚ä¸è¿‡çœ‹ä¸€ä¸‹ä¸‹é¢çš„è¿™å¼ å›¾ä½ å°±ä¼šæ˜ç™½ã€‚æ€»çš„æ¥è®² RancherOS æ˜¯ä½¿ç”¨ docker æ¥ç®¡ç†æ•´ä¸ªç³»ç»Ÿçš„æœåŠ¡çš„ï¼ŒåŒ…æ‹¬ç”¨æˆ·å±‚é¢çš„ docker ã€‚</p>
<p><img data-src="https://p.k8s.li/rancheroshowitworks.png"></p>
<h3 id="VMware-çš„-Photon-OS"><a href="#VMware-çš„-Photon-OS" class="headerlink" title="VMware çš„ Photon OS"></a>VMware çš„ <a target="_blank" rel="noopener" href="https://vmware.github.io/photon/">Photon OS</a></h3><p>ä»Šå¤©çš„ä¸»è§’ï¼ŒVMware  å¼€æºçš„ Photon OSï¼Œè¿™ä¸ª OS ä½ å¯èƒ½æ²¡å¬è¯´è¿‡ï¼Œä½† VMware å¼€æºçš„ Harbor æƒ³å¿…å¾ˆç†Ÿæ‚‰ï¼Œè€Œ Harbor çš„åŸºç¡€é•œåƒä½¿ç”¨çš„å°±æ˜¯ä»–å®¶çš„ Photon OSğŸ˜‚ã€‚</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">root [ /harbor ]# cat /etc/os-release
<span class="token key attr-name">NAME</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">VMware Photon OS</span>"</span>
<span class="token key attr-name">VERSION</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">2.0</span>"</span>
<span class="token key attr-name">ID</span><span class="token punctuation">=</span><span class="token value attr-value">photon</span>
<span class="token key attr-name">VERSION_ID</span><span class="token punctuation">=</span><span class="token value attr-value">2.0</span>
<span class="token key attr-name">PRETTY_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">VMware Photon OS/Linux</span>"</span>
<span class="token key attr-name">ANSI_COLOR</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">1;34</span>"</span>
<span class="token key attr-name">HOME_URL</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">https://vmware.github.io/photon/</span>"</span>
<span class="token key attr-name">BUG_REPORT_URL</span><span class="token punctuation">=</span><span class="token value attr-value">"<span class="token inner-value">https://github.com/vmware/photon/issues</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨ Photon OS çš„æ„å»ºè„šæœ¬ <a target="_blank" rel="noopener" href="https://github.com/vmware/photon/blob/master/build.py">build.py</a> ä¸­å¯ä»¥çœ‹åˆ°å®ƒæ„å»ºçš„äº§ç‰©æ”¯æŒ ISO å’Œ docker é•œåƒï¼Œä»¥åŠä¼—å¤šå…¬æœ‰äº‘çš„è™šæ‹Ÿæœºæ ¼å¼ï¼Œä¸¤è€…éƒ½æ˜¯æ¥è‡ªç›¸åŒçš„æºç ï¼Œæ ¹æ®æ„å»ºå‡ºæ¥çš„æ˜¯å½¢å¼ä¸åŒï¼Œæ‰€åŒ…å«çš„è½¯ä»¶ä¹Ÿä¸åŒã€‚å› ä¸ºè£å‰ªæ‰äº†ä¸€äº›ä¸å¿…è¦çš„ç³»ç»ŸæœåŠ¡ï¼Œ docker é•œåƒæ ¼å¼çš„è¦æ›´ç²¾ç®€ä¸€äº›ã€‚</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json">targetList = <span class="token punctuation">&#123;</span>
        <span class="token property">"image"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"iso"</span><span class="token punctuation">,</span> <span class="token string">"ami"</span><span class="token punctuation">,</span> <span class="token string">"gce"</span><span class="token punctuation">,</span> <span class="token string">"azure"</span><span class="token punctuation">,</span> <span class="token string">"rpi3"</span><span class="token punctuation">,</span> <span class="token string">"ova"</span><span class="token punctuation">,</span> <span class="token string">"ova_uefi"</span><span class="token punctuation">,</span> <span class="token string">"all"</span><span class="token punctuation">,</span> <span class="token string">"src-iso"</span><span class="token punctuation">,</span>
                <span class="token string">"photon-docker-image"</span><span class="token punctuation">,</span> <span class="token string">"k8s-docker-images"</span><span class="token punctuation">,</span> <span class="token string">"all-images"</span><span class="token punctuation">,</span> <span class="token string">"minimal-iso"</span><span class="token punctuation">,</span> <span class="token string">"rt-iso"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token property">"rpmBuild"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"packages"</span><span class="token punctuation">,</span> <span class="token string">"packages-minimal"</span><span class="token punctuation">,</span> <span class="token string">"packages-initrd"</span><span class="token punctuation">,</span> <span class="token string">"packages-docker"</span><span class="token punctuation">,</span>
                <span class="token string">"updated-packages"</span><span class="token punctuation">,</span> <span class="token string">"tool-chain-stage1"</span><span class="token punctuation">,</span> <span class="token string">"tool-chain-stage2"</span><span class="token punctuation">,</span> <span class="token string">"check"</span><span class="token punctuation">,</span>
                <span class="token string">"ostree-repo"</span><span class="token punctuation">,</span> <span class="token string">"generate-yaml-files"</span><span class="token punctuation">,</span> <span class="token string">"create-repo"</span><span class="token punctuation">,</span> <span class="token string">"distributed-build"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token property">"buildEnvironment"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"packages-cached"</span><span class="token punctuation">,</span> <span class="token string">"sources"</span><span class="token punctuation">,</span> <span class="token string">"sources-cached"</span><span class="token punctuation">,</span> <span class="token string">"publish-rpms"</span><span class="token punctuation">,</span>
                <span class="token string">"publish-x-rpms"</span><span class="token punctuation">,</span> <span class="token string">"publish-rpms-cached"</span><span class="token punctuation">,</span> <span class="token string">"publish-x-rpms-cached"</span><span class="token punctuation">,</span> <span class="token string">"photon-stage"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ€»çš„æ¥è®²ï¼Œä¸Šé¢æåˆ°çš„å‡ ç§å®¹å™¨ä¼˜åŒ–å‹ OS ä¸­ ï¼ŒPhoton OS æ¯”è¾ƒå¼€æ”¾ä¸€äº›ï¼Œè™½ç„¶æ¥è¯´æ˜¯é’ˆå¯¹äºè‡ªå®¶ vSphere è¿›è¡Œä¼˜åŒ–çš„ï¼Œä½†å…¶ä»–å…¬æœ‰äº‘å’Œç§æœ‰äº‘ä¹Ÿæ˜¯æ”¯æŒï¼Œç”šè‡³è¿˜æ”¯æŒæ ‘è“æ´¾ ğŸ“ï¼æ‰€ä»¥ä¸ªäººç”¨æˆ·æƒ³æ‹¿æ¥ç©ç©ï¼Œè¿˜æ˜¯ä¸é”™æ»´ã€‚å°¤å…¶æ˜¯é’ˆå¯¹å’±è¿™ç§ç© ESXi è½¯è·¯ç”±çš„åƒåœ¾ä½¬ï¼Œåœ¨ Photon OS ä¸Šè·‘ä¸€äº›å®¹å™¨åº”ç”¨ï¼Œå†é€‚åˆä¸è¿‡äº†ã€‚</p>
<h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><table>
<thead>
<tr>
<th align="center">Providers</th>
<th align="center">Name</th>
<th align="center">STAR</th>
<th align="center">FORK</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Google</td>
<td align="center"><a target="_blank" rel="noopener" href="https://github.com/GoogleCloudPlatform/cos-customizer">Container-Optimized OS</a></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">Amazon</td>
<td align="center"><a target="_blank" rel="noopener" href="https://github.com/bottlerocket-os/bottlerocket">Bottlerocket OS</a></td>
<td align="center">4.8K</td>
<td align="center">185</td>
</tr>
<tr>
<td align="center">CoreOS</td>
<td align="center">CoreOS Container Linux</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">Red Hat</td>
<td align="center">RHCOS</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">Rancher</td>
<td align="center"><a target="_blank" rel="noopener" href="https://github.com/rancher/os">Rancher OS</a></td>
<td align="center">6k</td>
<td align="center">625</td>
</tr>
<tr>
<td align="center">Flatcar</td>
<td align="center"><a target="_blank" rel="noopener" href="https://github.com/flatcar-linux/Flatcar">Flatcar Linux</a></td>
<td align="center">117</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">VMware</td>
<td align="center"><a target="_blank" rel="noopener" href="https://github.com/vmware/photon">Photon OS</a></td>
<td align="center">2.1k</td>
<td align="center">591</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">Providers</th>
<th align="center">Name</th>
<th align="center">Runtime</th>
<th align="center">Support Platform</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Google</td>
<td align="center">Container-Optimized OS</td>
<td align="center">docker</td>
<td align="center">GCP</td>
</tr>
<tr>
<td align="center">Amazon</td>
<td align="center">Bottlerocket OS</td>
<td align="center">docker</td>
<td align="center">AWS</td>
</tr>
<tr>
<td align="center">CoreOS</td>
<td align="center">CoreOS Container Linux</td>
<td align="center">docker</td>
<td align="center">AWS&#x2F;GCP&#x2F;OpenStack&#x2F;VMware<BR>Alibaba Cloud&#x2F;Azure&#x2F;DigitalOcean</td>
</tr>
<tr>
<td align="center">Red Hat</td>
<td align="center">RHCOS</td>
<td align="center">CRI-O</td>
<td align="center">AWS&#x2F;vSphere&#x2F;Bare Metal</td>
</tr>
<tr>
<td align="center">Rancher</td>
<td align="center">Rancher OS</td>
<td align="center">docker</td>
<td align="center">AWS&#x2F;GCP&#x2F;OpenStack&#x2F;VMware<BR>Alibaba Cloud&#x2F;Azure&#x2F;DigitalOcean</td>
</tr>
<tr>
<td align="center">Flatcar</td>
<td align="center">Flatcar Linux</td>
<td align="center">docker</td>
<td align="center">AWS&#x2F;GCP&#x2F;OpenStack&#x2F;VMware<BR>Alibaba Cloud&#x2F;Azure&#x2F;DigitalOcean</td>
</tr>
<tr>
<td align="center">VMware</td>
<td align="center">Photon OS</td>
<td align="center">docker</td>
<td align="center">AWS&#x2F;GCE&#x2F;Azure&#x2F;OpenStack<br>vSphere&#x2F;bare metal&#x2F;Raspberry Pi 3</td>
</tr>
</tbody></table>
<p>ç›®å‰æ¥è®² Photon OS ä½œä¸º Harbor çš„åŸºç¡€é•œåƒï¼Œåœ¨å®¹å™¨æ–¹é¢æ¯”è¾ƒçªå‡ºä¸€äº›ï¼Œä½†ä½œä¸ºå®¹å™¨çš„å®¿ä¸»æœº OS ï¼Œè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚ç”±äºæˆ‘æ˜¯ä½¿ç”¨çš„ VMware å®¶çš„ ESXi è™šæ‹ŸåŒ–ï¼Œé‚£ä¹ˆé€‰æ‹©ä»–å®¶çš„ Photon OS æ˜¯æœ€å¥½çš„å–½ï¼Œè€Œä¸” Photon OS æ˜¯é’ˆå¯¹ ESXi åšè¿‡ä¼˜åŒ–çš„ï¼Œå†…æ ¸éƒ½æ˜¯é’ˆå¯¹ ESXi è™šæ‹ŸåŒ–è¿›è¡Œäº†å®šåˆ¶åŒ–çš„å¼€å‘ï¼Œæ‰€ä»¥ç†è®ºä¸Šé€‰æ‹© Photon OS åº”è¯¥æ˜¯æœ€åˆé€‚çš„ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="Download-Format"><a href="#Download-Format" class="headerlink" title="Download Format"></a><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">Download Format</a></h3><table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>ISO Image</td>
<td>Contains everything needed to install either the minimal or full installation of Photon OS. The bootable ISO has a manual installer or can be used with PXE&#x2F;kickstart environments for automated installations.</td>
</tr>
<tr>
<td>OVA</td>
<td>Pre-installed minimal environment, customized for VMware hypervisor environments. These customizations include a highly sanitized and optimized kernel to give improved boot and runtime performance for containers and Linux applications. Since an OVA is a complete virtual machine definition, weâ€™ve made available a Photon OS OVA that has virtual hardware version 11; this will allow for compatibility with several versions of VMware platforms or allow for the latest and greatest virtual hardware enhancements.</td>
</tr>
<tr>
<td>Amazon AMI</td>
<td>Pre-packaged and tested version of Photon OS made ready to deploy in your Amazon EC2 cloud environment. Previously, weâ€™d published documentation on how to create an Amazon compatible instance, but, now weâ€™ve done the work for you.</td>
</tr>
<tr>
<td>Google GCE Image</td>
<td>Pre-packaged and tested Google GCE image that is ready to deploy in your Google Compute Engine Environment, with all modifications and package requirements for running Photon OS in GCE.</td>
</tr>
<tr>
<td>Azure VHD</td>
<td>Pre-packaged and tested Azure HD image that is ready to deploy in your Microsoft Azure Cloud, with all modifications and package requirements for running Photon OS in Azure.</td>
</tr>
<tr>
<td>Raspberry Pi3 Image</td>
<td>Pre-packaged and tested Raspberry Pi3 Image (Version 3.0 onwards) on ARM64 architecture.</td>
</tr>
</tbody></table>
<p>Photon OS æä¾›äº†å¤šç§å®‰è£…æ–¹å¼ï¼Œå…¶ä¸­ ISO æ˜¯é€šç”¨æ€§çš„ï¼Œå°±å’Œå®‰è£…å…¶ä»– Linux å‘è¡Œç‰ˆçš„è¿‡ç¨‹å·®ä¸å¤šï¼ŒOVA æ˜¯è™šæ‹Ÿæœºæ¨¡æ¿ï¼Œå¯ä»¥å¯¼å…¥åˆ° VMware è™šæ‹ŸåŒ–å¹³å°ä¸Šä½¿ç”¨ï¼ŒçœåŒºå®‰è£…çš„æ­¥éª¤ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚OVA è™šæ‹Ÿæœºæ¨¡æ¿çš„ç‰ˆæœ¬ä¸º 11 ï¼Œæ ¹æ® <a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/1003746">Virtual machine hardware versions</a> ä¸­çš„å®šä¹‰ï¼Œéœ€è¦ ESXi 6.0 Fusion 7.x Workstation 11.x Player 7.x ç‰ˆæœ¬ä»¥ä¸Šçš„è™šæ‹ŸåŒ–æ”¯æŒã€‚</p>
<table>
<thead>
<tr>
<th><strong>Virtual Hardware Version</strong></th>
<th><strong>Products</strong></th>
</tr>
</thead>
<tbody><tr>
<td>18</td>
<td>ESXi 7.0.1</td>
</tr>
<tr>
<td>17</td>
<td>ESXi 7.0.0</td>
</tr>
<tr>
<td>16</td>
<td>Fusion 11.x Workstation Pro 15.x Workstation Player 15.x</td>
</tr>
<tr>
<td>15</td>
<td>VMware Cloud on AWS ESXi 6.7 U2</td>
</tr>
<tr>
<td>14</td>
<td>ESXi 6.7 Fusion 10.x Workstation Pro 14.x Workstation Player 14.x</td>
</tr>
<tr>
<td>13</td>
<td>ESXi 6.5</td>
</tr>
<tr>
<td>12</td>
<td>Fusion 8.x Workstation Pro 12.x Workstation Player 12.x</td>
</tr>
<tr>
<td>11</td>
<td>ESXi 6.0 Fusion 7.x Workstation 11.x Player 7.x</td>
</tr>
<tr>
<td>10</td>
<td>ESXi 5.5 Fusion 6.x Workstation 10.x Player 6.x</td>
</tr>
</tbody></table>
<p>å¦å¤–è¿˜æ”¯æŒ <code>Raspberry Pi 3</code> ï¼Œä¸è¿‡éœ€è¦æ‹¿æºç è‡ªè¡Œç¼–è¯‘é•œåƒï¼Œç„¶ååˆ·åˆ°æ ‘è“æ´¾ä¸Šï¼Œä½ åƒç°çš„æ ‘è“æ´¾åˆæœ‰ç”¨é€”å•¦ ğŸ˜‚ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">ä¸‹è½½æ–¹å¼</a> ğŸ‘‡</p>
<h3 id="Photon-OS-3-0-Revision-2-Update3-Binaries"><a href="#Photon-OS-3-0-Revision-2-Update3-Binaries" class="headerlink" title="Photon OS 3.0 Revision 2 Update3 Binaries"></a>Photon OS 3.0 Revision 2 Update3 Binaries</h3><p>Aug 14, 2020 An update to 3.0 revision 2 Update3 binaries are now available.</p>
<table>
<thead>
<tr>
<th>Download</th>
<th>Size</th>
<th>md5 checksum</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://packages.vmware.com/photon/3.0/Rev3/iso/photon-3.0-a383732.iso">Full ISO x86_64</a></td>
<td>5.2G</td>
<td>2dd9f18c5162a7367f2463f4a9bb4890</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://packages.vmware.com/photon/3.0/Rev3/iso/photon-minimal-3.0-a383732.iso">Minimal ISO x86_64</a></td>
<td>299M</td>
<td>0119f0f275f246fd382d419ff41898a4</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://packages.vmware.com/photon/3.0/Rev3/iso/photon-rt-3.0-a383732.iso">ISO x86_64 Real-Time flavour</a></td>
<td>489M</td>
<td>d2bfce95b54a29174b5beaef9962dbc1</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://packages.vmware.com/photon/3.0/Rev3/ova/photon-hw11-3.0-a383732.ova">OVA-hw11</a></td>
<td>188M</td>
<td>ba52abd88c5b22cd4498cf0e88457f28</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://packages.vmware.com/photon/3.0/Rev3/ova/photon-hw13_uefi-3.0-a383732.ova">OVA-hw13_uefi</a></td>
<td>214M</td>
<td>95614f3b08c1a93306ababcc826572df</td>
</tr>
</tbody></table>
<p>åœ¨æ­¤ä½¿ç”¨ OVA-hw11 æ ¼å¼çš„ OVA è™šæ‹Ÿæœºæ¨¡æ¿ï¼Œåé¢é‚£ä¸ªå¸¦ uefi çš„éœ€è¦è®¾ç½®è™šæ‹Ÿæœºä¸º EFI æ¨¡å¼å¯åŠ¨ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<ul>
<li>åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™ä½¿ç”¨ OVA æ–‡ä»¶å¯¼å…¥</li>
</ul>
<p><img data-src="https://p.k8s.li/20200922-esxi_ova_01.png"></p>
<ul>
<li>é»˜è®¤çš„ç”¨æˆ·åä¸º <code>root</code> ï¼Œå¯†ç ä¸º <code>changeme</code>ï¼Œç™»å½•ä¹‹åå†è¾“å…¥ä¸€é <code>changeme</code>ï¼Œç„¶åä¿®æ”¹ä¸ºæ–°çš„å¯†ç ã€‚</li>
</ul>
<p><img data-src="https://p.k8s.li/20200922-esxi_photonos-01.png"></p>
<h2 id="ç³»ç»Ÿä¿¡æ¯"><a href="#ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯"></a>ç³»ç»Ÿä¿¡æ¯</h2><ul>
<li>å†…æ ¸ç‰ˆæœ¬ä¸º <code>4.19.132-5.ph3-esx</code>ï¼Œ4.19 æ˜¯ä¸ª LTS ç‰ˆæœ¬çš„å†…æ ¸ï¼Œç»“å°¾çš„ <code>esx</code> åˆ™ä»£è¡¨ç€ä¸º <code>ESXi</code> è™šæ‹ŸåŒ–å®šåˆ¶çš„å†…æ ¸ã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Linux photon-machine <span class="token number">4.19</span>.132-5.ph3-esx <span class="token comment">#1-photon SMP Wed Aug 12 21:02:13 UTC 2020 x86_64 GNU/Linux</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>rpm åŒ…æ•°é‡ä»…ä»…ä¸º 146 ä¸ªï¼Œä¸€èˆ¬çš„ CentOS å‘è¡Œç‰ˆè‡ªå¸¦çš„ rpm åŒ…æ•°é‡ä¸º 300 ä¸ªå·¦å³ã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># rpm -qa | wc</span>
    <span class="token number">146</span>     <span class="token number">146</span>    <span class="token number">4307</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>ç³»ç»Ÿè¿›ç¨‹ä¿¡æ¯ï¼Œè¿˜æ˜¯é‡‡ç”¨ systemd æ¥ç®¡ç†è¿›ç¨‹</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># systemctl status</span>
â— photon-machine
    State: running
     Jobs: <span class="token number">0</span> queued
   Failed: <span class="token number">0</span> <span class="token function">units</span>
    Since: Tue <span class="token number">2020</span>-09-22 08:07:29 UTC<span class="token punctuation">;</span> 10min ago
   CGroup: /
           â”œâ”€user.slice
           â”‚   â”œâ”€session-c2.scope
           â”‚   â”‚ â”œâ”€413 sshd: root@pts/0
           â”‚   â”‚ â”œâ”€420 -bash
           â”‚   â”‚ â”œâ”€443 systemctl status
           â”‚   â”‚ â””â”€444 systemctl status
           â”‚   â””â”€user@0.service
           â”‚     â””â”€init.scope
           â”‚       â”œâ”€393 /lib/systemd/systemd --user
           â”‚       â””â”€394 <span class="token punctuation">(</span>sd-pam<span class="token punctuation">)</span>
           â”œâ”€init.scope
           â”‚ â””â”€1 /lib/systemd/systemd
           â””â”€system.slice
             â”œâ”€systemd-networkd.service
             â”‚ â””â”€245 /lib/systemd/systemd-networkd
             â”œâ”€systemd-udevd.service
             â”‚ â””â”€124 /lib/systemd/systemd-udevd
             â”œâ”€vgauthd.service
             â”‚ â””â”€159 /usr/bin/VGAuthService -s
             â”œâ”€systemd-journald.service
             â”‚ â””â”€97 /lib/systemd/systemd-journald
             â”œâ”€sshd.service
             â”‚ â””â”€352 /usr/sbin/sshd -D
             â”œâ”€vmtoolsd.service
             â”‚ â””â”€161 /usr/bin/vmtoolsd
             â”œâ”€systemd-resolved.service
             â”‚ â””â”€247 /lib/systemd/systemd-resolved
             â”œâ”€dbus.service
             â”‚ â””â”€157 /usr/bin/dbus-daemon --system --address<span class="token operator">=</span>systemd: --nofork --nopidfile --systemd-activation --syslog-only
             â”œâ”€systemd-timesyncd.service
             â”‚ â””â”€151 /lib/systemd/systemd-timesyncd
             â””â”€systemd-logind.service
               â””â”€158 /lib/systemd/systemd-logind<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ç£ç›˜æ ¹ç›®å½•åªä½¿ç”¨äº†ä¸åˆ° 600M</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">root@photon-machine [ ~ ]# df -h
Filesystem      Size  Used Avail Use% Mounted on
&#x2F;dev&#x2F;root        16G  577M   15G   4% &#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>å†…å­˜ä¹Ÿåªä½¿ç”¨äº† 43Miï¼Œå¯åŠ¨ dockerd ä¹‹åå†…å­˜å ç”¨ 108Miï¼Œæ¢æˆ containerd å°†ä¼šå°ä¸€äº›ã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># free -h</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          <span class="token number">2</span>.0Gi        43Mi       <span class="token number">1</span>.8Gi       <span class="token number">0</span>.0Ki       103Mi       <span class="token number">1</span>.8Gi
<span class="token comment"># å¯åŠ¨ dockerd å®ˆæŠ¤è¿›ç¨‹ä¹‹åå†…å­˜å ç”¨ 108Mi</span>
root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># free -h</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          <span class="token number">2</span>.0Gi       108Mi       <span class="token number">1</span>.6Gi       <span class="token number">0</span>.0Ki       298Mi       <span class="token number">1</span>.8Gi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>å†…æ ¸æ¨¡å—çš„æ•°é‡ä¹Ÿæ¯”è¾ƒå°‘ 30 ä¸ªå·¦å³ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ä¸€äº›ç½‘ç»œç›¸å…³çš„å†…æ ¸æ¨¡å—ã€‚å¸¸è§„çš„ Linux å‘è¡Œç‰ˆçš„å†…æ ¸æ¨¡å—å¾€å¾€åœ¨ 60 ä¸ªä»¥ä¸Šã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># lsmod</span>
Module                  Size  Used by
xt_conntrack           <span class="token number">16384</span>  <span class="token number">2</span>
ip6table_mangle        <span class="token number">16384</span>  <span class="token number">0</span>
ip6table_nat           <span class="token number">16384</span>  <span class="token number">0</span>
nf_nat_ipv6            <span class="token number">16384</span>  <span class="token number">1</span> ip6table_nat
iptable_mangle         <span class="token number">16384</span>  <span class="token number">0</span>
iptable_nat            <span class="token number">16384</span>  <span class="token number">0</span>
nf_nat_ipv4            <span class="token number">16384</span>  <span class="token number">1</span> iptable_nat
nf_nat                 <span class="token number">28672</span>  <span class="token number">2</span> nf_nat_ipv6,nf_nat_ipv4
ip6table_filter        <span class="token number">16384</span>  <span class="token number">1</span>
ip6_tables             <span class="token number">24576</span>  <span class="token number">3</span> ip6table_filter,ip6table_nat,ip6table_mangle
iptable_filter         <span class="token number">16384</span>  <span class="token number">1</span>
xt_LOG                 <span class="token number">16384</span>  <span class="token number">0</span>
nf_conntrack           <span class="token number">90112</span>  <span class="token number">4</span> xt_conntrack,nf_nat,nf_nat_ipv6,nf_nat_ipv4
nf_defrag_ipv6         <span class="token number">20480</span>  <span class="token number">1</span> nf_conntrack
nf_defrag_ipv4         <span class="token number">16384</span>  <span class="token number">1</span> nf_conntrack
mousedev               <span class="token number">20480</span>  <span class="token number">0</span>
vfat                   <span class="token number">20480</span>  <span class="token number">1</span>
fat                    <span class="token number">61440</span>  <span class="token number">1</span> vfat
evdev                  <span class="token number">20480</span>  <span class="token number">1</span>
vmwgfx                <span class="token number">253952</span>  <span class="token number">1</span>
psmouse                <span class="token number">90112</span>  <span class="token number">0</span>
drm_kms_helper        <span class="token number">106496</span>  <span class="token number">1</span> vmwgfx
ttm                    <span class="token number">86016</span>  <span class="token number">1</span> vmwgfx
drm                   <span class="token number">323584</span>  <span class="token number">4</span> vmwgfx,drm_kms_helper,ttm
sr_mod                 <span class="token number">24576</span>  <span class="token number">0</span>
i2c_core               <span class="token number">40960</span>  <span class="token number">2</span> drm_kms_helper,drm
cdrom                  <span class="token number">49152</span>  <span class="token number">1</span> sr_mod
rdrand_rng             <span class="token number">16384</span>  <span class="token number">0</span>
rng_core               <span class="token number">16384</span>  <span class="token number">1</span> rdrand_rng
ipv6                  <span class="token number">368640</span>  <span class="token number">16</span> nf_nat_ipv6,ip6table_mangle
root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># lsmod | wc</span>
     <span class="token number">31</span>     <span class="token number">109</span>    <span class="token number">1273</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ç³»ç»Ÿè‡ªå¸¦çš„ docker ç‰ˆæœ¬ä¸º <code>19.03.10</code>ï¼Œå­˜å‚¨é©±åŠ¨ä½¿ç”¨çš„æ˜¯ <code>overlay2</code></li>
</ul>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">Client:
 Debug Mode: false

Server:
 Containers: 0
  Running: 0
  Paused: 0
  Stopped: 0
 Images: 0
 Server Version: 19.03.10
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: b34a5c8af56e510852c35414db4c1f4fa6172339
 runc version: d736ef14f0288d6993a1845745d6756cfc9ddd5a
 init version: fec3683
 Security Options:
  apparmor
  seccomp
   Profile: default
 Kernel Version: 4.19.132-5.ph3-esx
 Operating System: VMware Photon OS/Linux
 OSType: linux
 Architecture: x86_64
 CPUs: 1
 Total Memory: 1.951GiB
 Name: photon-machine
 ID: HXBT:Z4LZ:4HZM:3YII:U7ZA:RVOH:Z7CL:L4FA:YGA4:Y2V6:DSVR:NWPD
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false
 Product License: Community Engine<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="ç³»ç»Ÿç®¡ç†"><a href="#ç³»ç»Ÿç®¡ç†" class="headerlink" title="ç³»ç»Ÿç®¡ç†"></a>ç³»ç»Ÿç®¡ç†</h2><h3 id="ç½‘ç»œç®¡ç†"><a href="#ç½‘ç»œç®¡ç†" class="headerlink" title="ç½‘ç»œç®¡ç†"></a>ç½‘ç»œç®¡ç†</h3><ul>
<li>æŸ¥çœ‹ç½‘å¡çŠ¶æ€ï¼Œå¯ä½¿ç”¨è‡ªå¸¦çš„ <code>networkctl</code> å‘½ä»¤è¡Œå·¥å…·ï¼Œåƒ ifconfigã€ipã€ss ç­‰å‘½ä»¤éƒ½å·²ç»é»˜è®¤å®‰è£…ã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> /mnt/RPMS <span class="token punctuation">]</span><span class="token comment"># networkctl status eth0</span>
â— <span class="token number">2</span>: eth0
       Link File: /usr/lib/systemd/network/99-default.link
    Network File: /etc/systemd/network/99-dhcp-en.network
            Type: ether
           State: routable <span class="token punctuation">(</span>configured<span class="token punctuation">)</span>
            Path: pci-0000:0b:00.0
          Driver: vmxnet3
          Vendor: VMware
           Model: VMXNET3 Ethernet Controller
      HW Address: 00:0c:29:74:13:16 <span class="token punctuation">(</span>VMware, Inc.<span class="token punctuation">)</span>
         Address: <span class="token number">192.168</span>.0.235
                  fe80::20c:29ff:fe74:1316
         Gateway: <span class="token number">192.168</span>.0.1 <span class="token punctuation">(</span>NETGEAR<span class="token punctuation">)</span>
             DNS: <span class="token number">119.29</span>.29.29
                  <span class="token number">223.6</span>.6.6
        CLIENTID: ffb6220feb00020000ab113bc2c88225c0d29b
    Connected To: n/a on port 00:e0:4c:68:54:12
                  n/a on port 00:e0:4c:68:54:13
                  n/a on port 00:e0:4c:68:54:15<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ç³»ç»Ÿå®‰è£…æ—¶é»˜è®¤ä½¿ç”¨çš„ DHCP è·å– IP ï¼Œå¯ä»¥ä½¿ç”¨ systemd æ¥è®¾ç½®é™æ€ IP</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é¦–å…ˆä¿®æ”¹ DHCP çš„ systemd æ–‡ä»¶ï¼Œå…³é—­ DHCP</span>
<span class="token function">sed</span> -i <span class="token string">'s/yes/no/'</span> /etc/systemd/network/99-dhcp-en.network
<span class="token comment"># åˆ›å»ºé™æ€ IP çš„ systemd æ–‡ä»¶</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/systemd/network/10-static-en.network <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"

[Match]
Name=eth0

[Network]
Address=198.168.0.235/24
Gateway=198.168.0.1
DNS=192.168.0.100
EOF</span>

<span class="token comment"># ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶æƒé™ä¸º 644 ï¼Œä¸ç„¶å¯åŠ¨çš„æ—¶å€™ä¼šæŠ¥é”™æç¤ºæƒé™é—®é¢˜</span>
<span class="token function">chmod</span> <span class="token number">644</span> /etc/systemd/network/10-static-en.network
<span class="token comment"># é‡å¯ä¸€ä¸‹ç½‘ç»œ</span>
systemctl restart systemd-networkd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>æŒ‚è½½ NFS æ–‡ä»¶ç³»ç»Ÿéœ€è¦å®‰è£… <code>nfs-utils</code></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">tdnf <span class="token function">install</span> nfs-utils -y
<span class="token function">mount</span> <span class="token number">192.168</span>.0.100:/nfs /mnt/nfs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="åŒ…ç®¡ç†"><a href="#åŒ…ç®¡ç†" class="headerlink" title="åŒ…ç®¡ç†"></a>åŒ…ç®¡ç†</h3><p>Photon OS ä½¿ç”¨çš„æ˜¯ yum&#x2F;tdnf ä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œä½¿ç”¨æ–¹æ³•å’Œ RedHat ç³»çš„å‘è¡Œç‰ˆåŸºæœ¬ç›¸åŒï¼Œrepo ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span> /etc/yum.repos.d/
lightwave.repo
photon-extras.repo
photon-iso.repo
photon-updates.repo
photon.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="æºç ç¼–è¯‘"><a href="#æºç ç¼–è¯‘" class="headerlink" title="æºç ç¼–è¯‘"></a>æºç ç¼–è¯‘</h3><h2 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h2><h3 id="Pi-hole"><a href="#Pi-hole" class="headerlink" title="Pi-hole"></a>Pi-hole</h3><blockquote>
<p>Pi-hole æ˜¯ä¸€æ¬¾å¼€æºä¸”å…è´¹çš„ DNS æ²‰æ´æœåŠ¡å™¨ï¼ˆDNS sinkholeï¼‰ï¼Œèƒ½å¤Ÿåœ¨ä¸å®‰è£…ä»»ä½•å®¢æˆ·ç«¯ä¾§è½¯ä»¶çš„å‰æä¸‹ä¸ºè®¾å¤‡æä¾›ç½‘ç»œå†…å®¹å±è”½æœåŠ¡ï¼Œéå¸¸è½»é‡æ˜“ç”¨ã€‚æ­é…ä¸Šå®¶ä¸­åƒç°å·²ä¹…çš„æ ‘è“æ´¾ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿè½»æ¾æ‰“é€ å±äºè‡ªå·±çš„å¹¿å‘Šå±è”½åŠ©æ‰‹ã€‚<br>åœ¨<a target="_blank" rel="noopener" href="https://pi-hole.net/">å®˜ç½‘</a>çš„ä»‹ç»ä¸­ï¼ŒPi-hole ä¸»è¦å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ˜“äºå®‰è£…å’Œé…ç½®ï¼ˆå·ç§° 10 åˆ†é’Ÿå®‰è£…é…ç½®ä¸€æ¡é¾™ï¼‰ã€‚</li>
<li>å…¨å¹³å°ï¼Œå¹¿å‘Šå±è”½æœåŠ¡å¯ä½œç”¨äºä»»ä½•è®¾å¤‡ï¼ŒåŒ…æ‹¬ PCã€æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€‚</li>
<li>è½»é‡ï¼Œå¯¹ç¡¬ä»¶è¦æ±‚æä½ã€‚</li>
<li>åŠŸèƒ½ç¨³å®šä¸”å¼ºå¤§ï¼Œèƒ½è½»æ¾ hold ä½ç™¾ä¸‡çº§åˆ«çš„è¯·æ±‚ã€‚</li>
<li>æä¾›äº†ç¾è§‚çš„ Web æ•°æ®ç›‘æ§ä»ªè¡¨ç›˜ã€‚</li>
<li>å¼€æºä¸”å…è´¹ã€‚</li>
</ul>
</blockquote>
<ul>
<li>é¦–å…ˆéœ€è¦å…³é—­ systemd è‡ªå¸¦çš„ DNS æœåŠ¡ï¼Œä¸ç„¶ Pi-hole åšæŒºçš„ 53 ç«¯å£ä¼šè¢«å ç”¨</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop systemd-resolved
systemctl disable systemd-resolved<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>å®‰è£… docker-composeï¼Œä¿®æ”¹ docker-compose.yaml æ–‡ä»¶</li>
</ul>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3"</span>
<span class="token comment"># More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">pihole</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> pihole
    <span class="token key atrule">image</span><span class="token punctuation">:</span> pihole/pihole<span class="token punctuation">:</span>latest
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"53:53/tcp"</span>
      <span class="token punctuation">-</span> <span class="token string">"53:53/udp"</span>
      <span class="token punctuation">-</span> <span class="token string">"67:67/udp"</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80/tcp"</span>
      <span class="token punctuation">-</span> <span class="token string">"443:443/tcp"</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">TZ</span><span class="token punctuation">:</span> <span class="token string">'Asia/Shanghai'</span>
      <span class="token key atrule">WEBPASSWORD</span><span class="token punctuation">:</span> <span class="token string">'changeme'</span>
    <span class="token comment"># Volumes store your data between container upgrades</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'./etc-pihole/:/etc/pihole/'</span>
      <span class="token punctuation">-</span> <span class="token string">'./etc-dnsmasq.d/:/etc/dnsmasq.d/'</span>
    <span class="token comment"># Recommended but not required (DHCP needs NET_ADMIN)</span>
    <span class="token comment">#   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>docker-compose up èµ°èµ·ï¼</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@PhotonOS <span class="token punctuation">[</span> /opt/docker/pihole <span class="token punctuation">]</span><span class="token comment"># docker-compose up</span>
Creating network <span class="token string">"pihole_default"</span> with the default driver
Creating pihole <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Attaching to pihole
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>s6-init<span class="token punctuation">]</span> making user provided files available at /var/run/s6/etc<span class="token punctuation">..</span>.exited <span class="token number">0</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>s6-init<span class="token punctuation">]</span> ensuring user provided files have correct perms<span class="token punctuation">..</span>.exited <span class="token number">0</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>fix-attrs.d<span class="token punctuation">]</span> applying ownership <span class="token operator">&amp;</span> permissions fixes<span class="token punctuation">..</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>fix-attrs.d<span class="token punctuation">]</span> 01-resolver-resolv: applying<span class="token punctuation">..</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>fix-attrs.d<span class="token punctuation">]</span> 01-resolver-resolv: exited <span class="token number">0</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>fix-attrs.d<span class="token punctuation">]</span> done.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>cont-init.d<span class="token punctuation">]</span> executing container initialization scripts<span class="token punctuation">..</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>cont-init.d<span class="token punctuation">]</span> <span class="token number">20</span>-start.sh: executing<span class="token punctuation">..</span>.
pihole    <span class="token operator">|</span>  ::: Starting <span class="token function">docker</span> specific checks <span class="token operator">&amp;</span> setup <span class="token keyword">for</span> <span class="token function">docker</span> pihole/pihole
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Update <span class="token builtin class-name">local</span> cache of available packages
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Existing PHP installation detected <span class="token builtin class-name">:</span> PHP version <span class="token number">7.0</span>.33-0+deb9u8
pihole    <span class="token operator">|</span>
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Installing configs from /etc/.pihole<span class="token punctuation">..</span>.
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Existing dnsmasq.conf found<span class="token punctuation">..</span>. it is not a Pi-hole file, leaving alone<span class="token operator">!</span>
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Copying 01-pihole.conf to /etc/dnsmasq.d/01-pihole.conf
pihole    <span class="token operator">|</span> chown: cannot access <span class="token string">''</span><span class="token builtin class-name">:</span> No such <span class="token function">file</span> or directory
pihole    <span class="token operator">|</span> chmod: cannot access <span class="token string">''</span><span class="token builtin class-name">:</span> No such <span class="token function">file</span> or directory
pihole    <span class="token operator">|</span> chown: cannot access <span class="token string">'/etc/pihole/dhcp.leases'</span><span class="token builtin class-name">:</span> No such <span class="token function">file</span> or directory
pihole    <span class="token operator">|</span> ::: Pre existing WEBPASSWORD found
pihole    <span class="token operator">|</span> Using default DNS servers: <span class="token number">8.8</span>.8.8 <span class="token operator">&amp;</span> <span class="token number">8.8</span>.4.4
pihole    <span class="token operator">|</span> DNSMasq binding to default interface: eth0
pihole    <span class="token operator">|</span> Added ENV to php:
pihole    <span class="token operator">|</span>                     <span class="token string">"PHP_ERROR_LOG"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"/var/log/lighttpd/error.log"</span>,
pihole    <span class="token operator">|</span>                     <span class="token string">"ServerIP"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"0.0.0.0"</span>,
pihole    <span class="token operator">|</span>                     <span class="token string">"VIRTUAL_HOST"</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"0.0.0.0"</span>,
pihole    <span class="token operator">|</span> Using IPv4 and IPv6
pihole    <span class="token operator">|</span> ::: Preexisting ad list /etc/pihole/adlists.list detected <span class="token variable"><span class="token punctuation">((</span>exiting setup_blocklists early<span class="token punctuation">))</span></span>
pihole    <span class="token operator">|</span> https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
pihole    <span class="token operator">|</span> https://mirror1.malwaredomains.com/files/justdomains
pihole    <span class="token operator">|</span> ::: Testing pihole-FTL DNS: FTL started<span class="token operator">!</span>
pihole    <span class="token operator">|</span> ::: Testing lighttpd config: Syntax OK
pihole    <span class="token operator">|</span> ::: All config checks passed, cleared <span class="token keyword">for</span> startup <span class="token punctuation">..</span>.
pihole    <span class="token operator">|</span>  ::: Docker start setup complete
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Neutrino emissions detected<span class="token punctuation">..</span>.
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Pulling blocklist <span class="token builtin class-name">source</span> list into range
pihole    <span class="token operator">|</span>
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Preparing new gravity database
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Target: https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Received <span class="token number">55654</span> domains
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Target: https://mirror1.malwaredomains.com/files/justdomains
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Status: No changes detected
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Received <span class="token number">26854</span> domains
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Storing downloaded domains <span class="token keyword">in</span> new gravity database
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Building tree
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Swapping databases
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Number of gravity domains: <span class="token number">82508</span> <span class="token punctuation">(</span><span class="token number">82465</span> unique domains<span class="token punctuation">)</span>
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Number of exact blacklisted domains: <span class="token number">0</span>
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Number of regex blacklist filters: <span class="token number">0</span>
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Number of exact whitelisted domains: <span class="token number">0</span>
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>i<span class="token punctuation">]</span> Number of regex whitelist filters: <span class="token number">0</span>
  <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Cleaning up stray matter
pihole    <span class="token operator">|</span>
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> DNS <span class="token function">service</span> is running
pihole    <span class="token operator">|</span>   <span class="token punctuation">[</span>âœ“<span class="token punctuation">]</span> Pi-hole blocking is Enabled
pihole    <span class="token operator">|</span>   Pi-hole version is v5.1.2 <span class="token punctuation">(</span>Latest: v5.1.2<span class="token punctuation">)</span>
pihole    <span class="token operator">|</span>   AdminLTE version is v5.1.1 <span class="token punctuation">(</span>Latest: v5.1.1<span class="token punctuation">)</span>
pihole    <span class="token operator">|</span>   FTL version is v5.2 <span class="token punctuation">(</span>Latest: v5.2<span class="token punctuation">)</span>
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>cont-init.d<span class="token punctuation">]</span> <span class="token number">20</span>-start.sh: exited <span class="token number">0</span>.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>cont-init.d<span class="token punctuation">]</span> done.
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>services.d<span class="token punctuation">]</span> starting services
pihole    <span class="token operator">|</span> Starting pihole-FTL <span class="token punctuation">(</span>no-daemon<span class="token punctuation">)</span> as root
pihole    <span class="token operator">|</span> Starting lighttpd
pihole    <span class="token operator">|</span> Starting crond
pihole    <span class="token operator">|</span> <span class="token punctuation">[</span>services.d<span class="token punctuation">]</span> done.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ <code>http://ip:port/admin</code> å³å¯è¿›å…¥ Pi-hole çš„åå°ç®¡ç†é¡µé¢ï¼Œåœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹åˆ° DNS è§£æçš„è¯¦ç»†è®°å½•ï¼Œå…³äº Pi-hole çš„ä½¿ç”¨å¯ä»¥å‚è€ƒä¸€äº›å¤§ä½¬çš„åšå®¢ï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://wzyboy.im/post/1372.html">æ­å»º Pi-Hole ä¸ºç½‘ä¸Šå†²æµªä¿é©¾æŠ¤èˆª</a>ã€‚</li>
</ul>
<p><img data-src="https://p.k8s.li/20200925-pihole.png"></p>
<p>å¦‚æœæƒ³è¦è®©å†…ç½‘çš„æœºå™¨éƒ½èµ° Pi-hole æ¥è¿›è¡Œ DNS ï¼Œå¯ä»¥å°†è·¯ç”±å™¨çš„ DHCP çš„  DNS çš„ IP è®¾ç½®ä¸º Pi-hole çš„ IPã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/containers-kubernetes/bringing-ebpf-and-cilium-to-google-kubernetes-engine">New GKE Dataplane V2 increases security and visibility for containers</a></li>
<li><a target="_blank" rel="noopener" href="https://moelove.info/2020/09/02/%E8%A2%AB-Google-%E9%80%89%E6%8B%A9%E7%9A%84%E4%B8%8B%E4%B8%80%E4%BB%A3%E6%95%B0%E6%8D%AE%E9%9D%A2-Cilium-%E6%98%AF%E4%BB%80%E4%B9%88/">è¢« Google é€‰æ‹©çš„ä¸‹ä¸€ä»£æ•°æ®é¢ Cilium æ˜¯ä»€ä¹ˆ</a></li>
</ul>

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/%E5%AE%B9%E5%99%A8/" rel="tag"># å®¹å™¨</a>
              <a href="/tags/PhotonOS/" rel="tag"># PhotonOS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/lsi-9211-4i-ir-to-it.html" rel="prev" title="ç»™é˜µåˆ—å¡åˆ·ä¸ªæœºï¼ŒIR æ¨¡å¼è½¬ IT æ¨¡å¼">
                  <i class="fa fa-chevron-left"></i> ç»™é˜µåˆ—å¡åˆ·ä¸ªæœºï¼ŒIR æ¨¡å¼è½¬ IT æ¨¡å¼
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020-booklist.html" rel="next" title="2020 å¹´è¯»ä¹¦ç¬”è®°å’Œæ€è€ƒ">
                  2020 å¹´è¯»ä¹¦ç¬”è®°å’Œæ€è€ƒ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Reimu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.7m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">25:30</span>
  </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"muzi","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
