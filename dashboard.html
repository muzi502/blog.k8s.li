<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://blog.k8s.li').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"buttons","active":null,"storage":true,"lazyload":true,"nav":{"disqus":{"text":"Load Disqus","order":-1}}},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":false,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>
  <meta name="description" content="0.è¸©å‘éƒ¨ç½²å®Œ kubernets dashborad åï¼Œå®˜æ–¹ç»™å‡ºçš„å››ç§è®¿é—®æ¨¡å¼ï¼Œéƒ½å¾ˆå‘ğŸ˜«ã€‚ 1.kubectl proxyåªèƒ½é€šè¿‡æœ¬æœºè®¿é—®ï¼Œéƒ¨ç½²åœ¨ VPS ä¸Šçš„æ˜¯æ— æ³•ç™»å½•çš„ã€‚ 2.NodePort12In case you are trying to expose Dashboard using NodePort on a multi-node cluster, then you have">
<meta property="og:type" content="article">
<meta property="og:title" content="deploy kubernets dashborad with https">
<meta property="og:url" content="https://blog.k8s.li/dashboard.html">
<meta property="og:site_name" content="æœ¨å­">
<meta property="og:description" content="0.è¸©å‘éƒ¨ç½²å®Œ kubernets dashborad åï¼Œå®˜æ–¹ç»™å‡ºçš„å››ç§è®¿é—®æ¨¡å¼ï¼Œéƒ½å¾ˆå‘ğŸ˜«ã€‚ 1.kubectl proxyåªèƒ½é€šè¿‡æœ¬æœºè®¿é—®ï¼Œéƒ¨ç½²åœ¨ VPS ä¸Šçš„æ˜¯æ— æ³•ç™»å½•çš„ã€‚ 2.NodePort12In case you are trying to expose Dashboard using NodePort on a multi-node cluster, then you have">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-06-17T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-30T14:38:18.392Z">
<meta property="article:author" content="æœ¨å­">
<meta property="article:tag" content="kubernetes">
<meta property="article:tag" content="k8s">
<meta name="twitter:card" content="summary">
<link rel="canonical" href="https://blog.k8s.li/dashboard.html">
<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>
  <title>deploy kubernets dashborad with https | æœ¨å­</title>
  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }
  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>
<link rel="alternate" href="/atom.xml" title="æœ¨å­" type="application/atom+xml">
</head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">
    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æœ¨å­</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>
<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">
    <a href="/" rel="section"><i class="fa fa-fw fa-desktop"></i>Home</a>
  </li>
        <li class="menu-item menu-item-books">
    <a href="/booklist.html" rel="section"><i class="fa fa-fw fa-book"></i>Books</a>
  </li>
        <li class="menu-item menu-item-kindle">
    <a href="https://kindle.502.li/" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>Kindle</a>
  </li>
        <li class="menu-item menu-item-friend">
    <a href="/link/" rel="section"><i class="fa fa-fw fa-link"></i>Friend</a>
  </li>
        <li class="menu-item menu-item-about">
    <a href="/about.html" rel="section"><i class="fa fa-fw fa-user-circle-o"></i>About</a>
  </li>
  </ul>
</nav>
</div>
    </header>
  <div class="reading-progress-bar"></div>
    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div class="content">
  <div class="posts-expand">
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/dashboard.html">
    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://blog.k8s.li/avatar.png">
      <meta itemprop="name" content="æœ¨å­">
      <meta itemprop="description" content="">
    </span>
    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœ¨å­">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          deploy kubernets dashborad with https
        </h2>
        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-18 2019-06-18T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2019-06-18T00:00:00+08:00">2019-06-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-05-30 2021-05-30T22:38:18+08:00" itemprop="dateModified" datetime="2021-05-30T22:38:18+08:00">2021-05-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">æŠ€æœ¯</span>
                  </a>
                </span>
            </span>
  <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    <a title="disqus" href="/dashboard.html#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="dashboard.html" itemprop="commentCount"></span>
    </a>
  </span>
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.4k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>6 åˆ†é’Ÿ</span>
            </span>
        </div>
      </header>
    <div class="post-body" itemprop="articleBody">
        <h2 id="0-è¸©å‘"><a href="#0-è¸©å‘" class="headerlink" title="0.è¸©å‘"></a>0.è¸©å‘</h2><p>éƒ¨ç½²å®Œ kubernets dashborad åï¼Œå®˜æ–¹ç»™å‡ºçš„å››ç§è®¿é—®æ¨¡å¼ï¼Œéƒ½å¾ˆå‘ğŸ˜«ã€‚</p>
<h3 id="1-kubectl-proxy"><a href="#1-kubectl-proxy" class="headerlink" title="1.kubectl proxy"></a>1.kubectl proxy</h3><p>åªèƒ½é€šè¿‡æœ¬æœºè®¿é—®ï¼Œéƒ¨ç½²åœ¨ VPS ä¸Šçš„æ˜¯æ— æ³•ç™»å½•çš„ã€‚</p>
<h3 id="2-NodePort"><a href="#2-NodePort" class="headerlink" title="2.NodePort"></a>2.NodePort</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In case you are trying to expose Dashboard using NodePort on a multi-node cluster, then you have to find out IP of the node on which Dashboard is running to access it. Instead of accessing https:&#x2F;&#x2F;&lt;master-ip&gt;:&lt;nodePort&gt; you should access https:&#x2F;&#x2F;&lt;node-ip&gt;:&lt;nodePort&gt;.</span><br><span class="line">æš´æ¼ node IP ä¸€ä¸ªç«¯å£æ¥è®¿é—®ï¼ŒåŒæ ·æµè§ˆå™¨ä¼šæç¤ºè¯ä¹¦é—®é¢˜æ‹’ç»è®¿é—®ï¼Œæµ‹è¯• chrome edge ie å‡æ— æ³•è®¿é—®ï¼Œéœ€è¦è‡ªå·±åŠ ä¸ªè¯ä¹¦æ‰è¡Œã€‚ä¸‹é¢å°±è®²è§£ç”¨è‡ªå·±çš„åŸŸåç­¾ä¸ªè¯ä¹¦æ¥ç”¨ã€‚NodePort æ˜¯å°†èŠ‚ç‚¹ç›´æ¥æš´éœ²åœ¨å¤–ç½‘çš„ä¸€ç§æ–¹å¼ï¼Œåªå»ºè®®åœ¨å¼€å‘ç¯å¢ƒï¼Œå•èŠ‚ç‚¹çš„å®‰è£…æ–¹å¼ä¸­ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="3-API-Server"><a href="#3-API-Server" class="headerlink" title="3.API Server"></a>3.API Server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In case Kubernetes API server is exposed and accessible from outside you can directly access dashboard at: https:&#x2F;&#x2F;&lt;master-ip&gt;:&lt;apiserver-port&gt;&#x2F;api&#x2F;v1&#x2F;namespaces&#x2F;kube-system&#x2F;services&#x2F;https:kubernetes-dashboard:&#x2F;proxy&#x2F;</span><br><span class="line"></span><br><span class="line">Note: This way of accessing Dashboard is only possible if you choose to install your user certificates in the browser. In example certificates used by kubeconfig file to contact API Server can be used.</span><br></pre></td></tr></table></figure>
<h3 id="4-Ingress"><a href="#4-Ingress" class="headerlink" title="4.Ingress"></a>4.Ingress</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dashboard can be also exposed using Ingress resource. For more information check: https:&#x2F;&#x2F;kubernetes.io&#x2F;docs&#x2F;concepts&#x2F;services-networking&#x2F;ingress.</span><br></pre></td></tr></table></figure>
<h2 id="2-ä½¿ç”¨acme-shè„šæœ¬åˆ¶ä½œè¯ä¹¦"><a href="#2-ä½¿ç”¨acme-shè„šæœ¬åˆ¶ä½œè¯ä¹¦" class="headerlink" title="2.ä½¿ç”¨acme.shè„šæœ¬åˆ¶ä½œè¯ä¹¦"></a>2.ä½¿ç”¨acme.shè„šæœ¬åˆ¶ä½œè¯ä¹¦</h2><p>acme.shè„šæœ¬ä» letsencrypt å¯ä»¥ç”Ÿæˆå…è´¹çš„è¯ä¹¦<br><a href="https://github.com/Neilpang/acme.sh" target="_blank" rel="noopener">acme</a><br><a href="https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener">wiki</a></p>
<p>1.å®‰è£…è„šæœ¬</p>
<figure class="highlight plain"><figcaption><span>~ && curl</span><a href="https://get.acme.sh" target="_blank" rel="noopener">| sh && alias acme.sh</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2.é…ç½®å¥½ nginx</span><br><span class="line">æˆ‘çš„ nginx åœ¨å¦ä¸€å°æœºå™¨ä¸Šï¼Œéœ€è¦åœ¨åŸŸåè§£æé‚£é‡Œæ·»åŠ Aè®°å½•è§£æåˆ° nginx æœåŠ¡å™¨ä¸Šã€‚æ·»åŠ å­åŸŸåä¸º k8sï¼Œå¹¶åœ¨ nginx é‚£é‡Œé…ç½®å¥½ã€‚</span><br><span class="line">è¿™ä¸€æ­¥ä¸€å®šè¦åšï¼Œä¸ç„¶çš„è¯æ— æ³•é€šè¿‡httpéªŒè¯è¯¥åŸŸåæ‰€å±ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€‰ç”¨ dns çš„æ–¹å¼æ¥éªŒè¯ï¼Œåœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        listen [::]:80;</span><br><span class="line">        server_name k8s.502.li;</span><br><span class="line">        set $base &#x2F;var&#x2F;www&#x2F;k8s;</span><br><span class="line">        root $base&#x2F;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.ç”Ÿæˆè¯ä¹¦ï¼Œé»˜è®¤ä¼šä¿å­˜åœ¨~/.acme.sh/mydomain.com<br>acme.sh â€“issue  -d mydomain.com   â€“nginx</p>
<p>4.ä¸Šä¼ è¯ä¹¦åˆ° k8s-master èŠ‚ç‚¹<br>åªéœ€è¦ mydomain.com.cer å’Œ mydomain.com.key è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­æŠŠ mydomain.com.cer å‘½åä¸º dashboard.crt ï¼Œmydomain.com.key å‘½åä¸º dashboard.key ã€‚ç„¶åä½ æƒ³åŠæ³•æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶ä¼ åˆ° k8s-master æœºå™¨ ~/certs ç›®å½•ä¸‹ã€‚</p>
<h2 id="3-éƒ¨ç½²kubernetes-dashboard"><a href="#3-éƒ¨ç½²kubernetes-dashboard" class="headerlink" title="3.éƒ¨ç½²kubernetes-dashboard"></a>3.éƒ¨ç½²kubernetes-dashboard</h2><p>1.å¼•ç”¨å®˜æ–¹çš„æ–‡æ¡£ğŸ˜‚<br>Custom certificates have to be stored in a secret named kubernetes-dashboard-certs in kube-system namespace. Assuming that you have dashboard.crt and dashboard.key files stored under $HOME/certs directory, you should create secret with contents of these files:</p>
<figure class="highlight plain"><figcaption><span>create secret generic kubernetes-dashboard-certs --from-file</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.ä¸‹è½½å¹¶ä¿®æ”¹kubernetes-dashboard.yamlæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;wget https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kubernetes&#x2F;dashboard&#x2F;v1.10.1&#x2F;src&#x2F;deploy&#x2F;alternative&#x2F;kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åæ·»åŠ <code>type: NodePort</code>,æ³¨æ„ç¼©è¿›ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8443</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br></pre></td></tr></table></figure>
<p>3.éƒ¨ç½²å¯åŠ¨ kubernetes-dashboard</p>
<figure class="highlight plain"><figcaption><span>create -f kubernetes-dashboard.yaml```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4.è·å– kubernetes-dashboard çš„è®¿é—®ç«¯å£å’ŒIP</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;kubectl -n kube-system get svc kubernetes-dashboard</span><br></pre></td></tr></table></figure>
<p>5.åˆ›å»ºæˆæƒç”¨æˆ·è·å– token</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&gt;</span> <span class="string">dashboard-adminuser.yaml</span> <span class="string">&lt;&lt;EOF</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">admin-user</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="string">kubectl</span> <span class="string">apply</span> <span class="string">-f</span>  <span class="string">dashboard-adminuser.yaml</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cat</span> <span class="string">&gt;</span> <span class="string">admin-user-role-binding.yaml</span> <span class="string">&lt;&lt;EOF</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">admin-user</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cluster-admin</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">admin-user</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="string">kubectl</span> <span class="string">apply</span> <span class="string">-f</span>  <span class="string">admin-user-role-binding.yaml</span></span><br></pre></td></tr></table></figure>
<p>è·å–ç™»å½•è¦ç”¨åˆ°çš„ token</p>
<figure class="highlight plain"><figcaption><span>-n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '&#123;print $1&#125;')```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;kubectl create secret generic kubernetes-dashboard-certs --from-file&#x3D;certs -n kube-system</span><br></pre></td></tr></table></figure>
    </div>
      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/kubernetes/" rel="tag"><i class="fa fa-tag"></i> kubernetes</a>
              <a href="/tags/k8s/" rel="tag"><i class="fa fa-tag"></i> k8s</a>
          </div>
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/8964.html" rel="prev" title="å¼±è€…çš„æŠµæŠ—">
      <i class="fa fa-chevron-left"></i> å¼±è€…çš„æŠµæŠ—
    </a></div>
      <div class="post-nav-item">
    <a href="/get-someone-info.html" rel="next" title="åˆ©ç”¨ç¤¾äº¤ç½‘ç»œè·å–éª—å­çš„ä¿¡æ¯">
      åˆ©ç”¨ç¤¾äº¤ç½‘ç»œè·å–éª—å­çš„ä¿¡æ¯ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
  </article>
  </div>
          </div>
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
        </div>
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>
  <aside class="sidebar">
    <div class="sidebar-inner">
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>
      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-è¸©å‘"><span class="nav-number">1.</span> <span class="nav-text">0.è¸©å‘</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-kubectl-proxy"><span class="nav-number">1.1.</span> <span class="nav-text">1.kubectl proxy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-NodePort"><span class="nav-number">1.2.</span> <span class="nav-text">2.NodePort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-API-Server"><span class="nav-number">1.3.</span> <span class="nav-text">3.API Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Ingress"><span class="nav-number">1.4.</span> <span class="nav-text">4.Ingress</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-ä½¿ç”¨acme-shè„šæœ¬åˆ¶ä½œè¯ä¹¦"><span class="nav-number">2.</span> <span class="nav-text">2.ä½¿ç”¨acme.shè„šæœ¬åˆ¶ä½œè¯ä¹¦</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-éƒ¨ç½²kubernetes-dashboard"><span class="nav-number">3.</span> <span class="nav-text">3.éƒ¨ç½²kubernetes-dashboard</span></a></li></ol></div>
      </div>
      <!--/noindex-->
      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="æœ¨å­"
      src="https://blog.k8s.li/avatar.png">
  <p class="site-author-name" itemprop="name">æœ¨å­</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">120</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:blog@502.li" title="E-Mail â†’ mailto:blog@502.li" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi_ii" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fa fa-fw fa-telegram"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://kindle.502.li/" title="Kindle â†’ https:&#x2F;&#x2F;kindle.502.li" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>Kindle</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tg.k8s.li/" title="Channel â†’ https:&#x2F;&#x2F;tg.k8s.li" rel="noopener" target="_blank"><i class="fa fa-fw fa-telegram"></i>Channel</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a>
      </span>
  </div>
      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-inner">
<div class="copyright">
  &copy; 2018 â€“ 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æœ¨å­</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.4m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">39:50</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>
      </div>
    </footer>
  </div>
  <script src="/lib/anime.min.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>
<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://muzi.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "https://blog.k8s.li/dashboard.html",
            identifier: "dashboard.html",
            title: "deploy kubernets dashborad with https"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://muzi.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>
</body>
</html>
