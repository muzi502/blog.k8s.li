<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://blog.k8s.li').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"buttons","active":null,"storage":true,"lazyload":true,"nav":{"disqus":{"text":"Load Disqus","order":-1}}},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":false,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>
  <meta name="description" content="ä»Šå¤©æ”¶åˆ°ä¸€ä»½é¢è¯•é¢˜ï¼Œå†…å®¹çœ‹ä¼¼å¾ˆç®€å•ï¼š   CentOS7ï¼Œnginx æœ€æ–°ç‰ˆï¼Œphp 7.xï¼Œmysql ä¸åšè¦æ±‚ + wordpress  ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº è¯·æŠŠå­¦ä¹ è®°å½•ä»¥ URLï¼Œæˆªå›¾ç­‰æ–¹å¼ä¿ç•™ã€‚æœ€ç»ˆã€‚æˆ‘åœ¨æ‰‹æœºä¸Šå¯ä»¥çœ‹åˆ°wordpressç«™ç‚¹å°±å¥½ã€‚æ—¶é—´1å°æ—¶ä»¥å†…ï¼Œæ–¹æ³•æ–¹å¼ä¸é™    è™½ç„¶çœ‹èµ·æ¥å’Œç®€å•ï¼Œæ¯”å¦‚ç”¨ docker-compose ä¸€é”®å°±èƒ½å®Œæˆéƒ¨ç½²å®Œæˆï¼Œä¸è¿‡ä¸ºäº†æŠŠ">
<meta property="og:type" content="article">
<meta property="og:title" content="ä¸€æ¬¡æœ‰è¶£çš„é¢è¯•ï¼šWordPress éƒ¨ç½²">
<meta property="og:url" content="https://blog.k8s.li/interview-wordpress-install.html">
<meta property="og:site_name" content="æœ¨å­">
<meta property="og:description" content="ä»Šå¤©æ”¶åˆ°ä¸€ä»½é¢è¯•é¢˜ï¼Œå†…å®¹çœ‹ä¼¼å¾ˆç®€å•ï¼š   CentOS7ï¼Œnginx æœ€æ–°ç‰ˆï¼Œphp 7.xï¼Œmysql ä¸åšè¦æ±‚ + wordpress  ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº è¯·æŠŠå­¦ä¹ è®°å½•ä»¥ URLï¼Œæˆªå›¾ç­‰æ–¹å¼ä¿ç•™ã€‚æœ€ç»ˆã€‚æˆ‘åœ¨æ‰‹æœºä¸Šå¯ä»¥çœ‹åˆ°wordpressç«™ç‚¹å°±å¥½ã€‚æ—¶é—´1å°æ—¶ä»¥å†…ï¼Œæ–¹æ³•æ–¹å¼ä¸é™    è™½ç„¶çœ‹èµ·æ¥å’Œç®€å•ï¼Œæ¯”å¦‚ç”¨ docker-compose ä¸€é”®å°±èƒ½å®Œæˆéƒ¨ç½²å®Œæˆï¼Œä¸è¿‡ä¸ºäº†æŠŠ">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-04-15T16:00:00.000Z">
<meta property="article:modified_time" content="2020-04-27T16:00:00.000Z">
<meta property="article:author" content="æœ¨å­">
<meta property="article:tag" content="nginx">
<meta property="article:tag" content="WordPress">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="PHP">
<meta property="article:tag" content="Webp">
<meta name="twitter:card" content="summary">
<link rel="canonical" href="https://blog.k8s.li/interview-wordpress-install.html">
<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>
  <title>ä¸€æ¬¡æœ‰è¶£çš„é¢è¯•ï¼šWordPress éƒ¨ç½² | æœ¨å­</title>
  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }
  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>
<link rel="alternate" href="/atom.xml" title="æœ¨å­" type="application/atom+xml">
</head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">
    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æœ¨å­</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>
<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">
    <a href="/" rel="section"><i class="fa fa-fw fa-desktop"></i>Home</a>
  </li>
        <li class="menu-item menu-item-books">
    <a href="/booklist.html" rel="section"><i class="fa fa-fw fa-book"></i>Books</a>
  </li>
        <li class="menu-item menu-item-kindle">
    <a href="https://kindle.502.li/" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>Kindle</a>
  </li>
        <li class="menu-item menu-item-friend">
    <a href="/link/" rel="section"><i class="fa fa-fw fa-link"></i>Friend</a>
  </li>
        <li class="menu-item menu-item-about">
    <a href="/about.html" rel="section"><i class="fa fa-fw fa-user-circle-o"></i>About</a>
  </li>
  </ul>
</nav>
</div>
    </header>
  <div class="reading-progress-bar"></div>
    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div class="content">
  <div class="posts-expand">
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/interview-wordpress-install.html">
    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://blog.k8s.li/avatar.png">
      <meta itemprop="name" content="æœ¨å­">
      <meta itemprop="description" content="">
    </span>
    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœ¨å­">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          ä¸€æ¬¡æœ‰è¶£çš„é¢è¯•ï¼šWordPress éƒ¨ç½²
        </h2>
        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-16 2020-04-16T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2020-04-16T00:00:00+08:00">2020-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-04-28 2020-04-28T00:00:00+08:00" itemprop="dateModified" datetime="2020-04-28T00:00:00+08:00">2020-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">æŠ€æœ¯</span>
                  </a>
                </span>
            </span>
  <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    <a title="disqus" href="/interview-wordpress-install.html#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="interview-wordpress-install.html" itemprop="commentCount"></span>
    </a>
  </span>
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>21 åˆ†é’Ÿ</span>
            </span>
        </div>
      </header>
    <div class="post-body" itemprop="articleBody">
        <p>ä»Šå¤©æ”¶åˆ°ä¸€ä»½é¢è¯•é¢˜ï¼Œå†…å®¹çœ‹ä¼¼å¾ˆç®€å•ï¼š</p>
<blockquote>
<ol>
<li><p>CentOS7ï¼Œnginx æœ€æ–°ç‰ˆï¼Œphp 7.xï¼Œmysql ä¸åšè¦æ±‚ + wordpress</p>
</li>
<li><p>ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº</p>
<p>è¯·æŠŠå­¦ä¹ è®°å½•ä»¥ URLï¼Œæˆªå›¾ç­‰æ–¹å¼ä¿ç•™ã€‚æœ€ç»ˆã€‚æˆ‘åœ¨æ‰‹æœºä¸Šå¯ä»¥çœ‹åˆ°wordpressç«™ç‚¹å°±å¥½ã€‚æ—¶é—´1å°æ—¶ä»¥å†…ï¼Œæ–¹æ³•æ–¹å¼ä¸é™</p>
</li>
</ol>
</blockquote>
<p>è™½ç„¶çœ‹èµ·æ¥å’Œç®€å•ï¼Œæ¯”å¦‚ç”¨ <code>docker-compose</code> ä¸€é”®å°±èƒ½å®Œæˆéƒ¨ç½²å®Œæˆï¼Œä¸è¿‡ä¸ºäº†æŠŠéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜è¯¦ç»†åœ°è®°å½•ä¸‹æ¥ï¼Œä»¥åŠå‚è€ƒçš„ä¸€äº›æ–‡æ¡£ç­‰ï¼Œé€šè¿‡ä¸€ç¯‡æ­£å¼çš„åšå®¢å±•ç°å‡ºæ¥ï¼Œè¿™æ ·æ•ˆæœä¼šå¥½ä¸€äº›ã€‚åŒæ—¶å’±ä½œä¸ºå®Œç¾ä¸»ä¹‰è€…ï¼Œå¸Œæœ›ç»™å†åšä¸€äº›é¢å¤–çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚ HTTPS ï¼Œä»¥åŠä¸ä¹…å‰å’Œå’±ç»™åšå®¢åŠ çš„ Webp Server ğŸ˜‚ã€‚<a href="https://blog.k8s.li/oh-my-webpsh.html">è®©å›¾ç‰‡é£èµ·æ¥ oh-my-webp.sh ï¼</a> å’±æ¥æ¨é”€ <a href="https://github.com/webp-sh/webp_server_go" target="_blank" rel="noopener">Webp Server Go</a> å•¦ ï¼ˆå°å£°ã€‚</p>
<p>å¦å¤–æä¸€ç‚¹çš„æ˜¯ï¼Œå¦‚æœä½ æ·±å…¥ç†è§£ LNMP æŠ€æœ¯æ ˆçš„è¯ï¼Œè¿˜æ˜¯æ¨èä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼æ¯”å¦‚ yum å®‰è£…æˆ–æºç ç¼–è¯‘å®‰è£…ï¼Œé‚£æ ·ä¼šèƒ½ç†è§£è¿™äº›æœåŠ¡ä¹‹é—´çš„å·¥ä½œæµç¨‹ï¼Œä¼šå¯¹æ•´ä¸ªç³»ç»Ÿæœ‰æ·±å…¥çš„äº†è§£ã€‚è€Œ <code>docker-compose</code> ç®€å•ç²—æš´çš„æ–¹å¼ä¸ºæˆ‘ä»¬å±è”½äº†è¿™äº›ç»†èŠ‚ï¼Œä¼šè®©æˆ‘ä»¬æ”¾å¼ƒå»æ€è€ƒè¿™äº›åº•å±‚çš„ç»†èŠ‚ï¼Œå¯¹äºæˆ‘ä»¬å­¦ä¹ è¿™é—¨æŠ€æœ¯æ ˆæ¥è®²ï¼Œè¿˜æ˜¯å¼Šå¤§äºåˆ©ã€‚ä¸è¿‡ä»Šå¤©ä¸ºäº†å¿«é€Ÿéƒ¨ç½²èµ·æ¥ï¼Œè¿˜æ˜¯é€‰ç”¨ docker-compose å§ğŸ˜‚</p>
<h2 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h2><blockquote>
<p>Get WordPress Use the software that powers over 35% of the web.</p>
</blockquote>
<p>WordPress æƒ³å¿…å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰å•¦ï¼Œæ¯•ç«Ÿæ”¶æ˜¯å…¨çƒå†…å®¹ç®¡ç†ç³»ç»Ÿé‡Œçš„è€å¤§å“¥ï¼Œå¸¸å¹´å æ®åœ¨ç¬¬ä¸€çš„ä½ç½®ï¼ˆå æœ‰ç‡ 35%ï¼‰ã€‚å®˜ç½‘ <a href="https://wordpress.org" target="_blank" rel="noopener">wordpress.org</a></p>
<h2 id="ä»»åŠ¡2-ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº"><a href="#ä»»åŠ¡2-ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº" class="headerlink" title="ä»»åŠ¡2 ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº"></a>ä»»åŠ¡2 ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº</h2><p>è¿™ä¸ªä»»åŠ¡ä¸ WordPress ä¸å¤ªç›¸å…³ï¼Œæ‰€ä»¥å°±å…ˆå®Œæˆè¿™ä¸ªã€‚æ‹¿åˆ°æœºå™¨å ssh ç™»å½•åˆ°ç³»ç»Ÿï¼Œå…ˆä½¿ç”¨å¸¸ç”¨çš„å‘½ä»¤çœ‹ä¸€ä¸‹æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œå¦å¤–åœ¨è‡ªå·±çš„åŸŸåä¸Šæ·»åŠ äº† A  è®°å½•<code>wordpress.k8s.li</code> åˆ°è¿™å°æœåŠ¡å™¨  IP ï¼Œå¹¶å¼€å¯ HTTPS ï¼Œé˜²æ­¢è¢« DDOS æ”»å‡»ï¼Œæ¯•ç«Ÿæœ‰ CloudFlare çš„ Anycast CDN ç»™æˆ‘ä»¬åœ¨å‰å¤´æ‰›ä¸€æŠŠğŸ˜‚è¿˜æ˜¯ä¸é”™æ»´ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@interview ~]# uname -a</span><br><span class="line">Linux interview 3.10.0-1062.12.1.el7.x86_64 #1 SMP Tue Feb 4 23:02:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line">[root@interview ~]# cat /proc/cpuinfo</span><br><span class="line">processor       : 0</span><br><span class="line">vendor_id       : GenuineIntel</span><br><span class="line">cpu family      : 6</span><br><span class="line">model           : 45</span><br><span class="line">model name      : Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz</span><br><span class="line">stepping        : 7</span><br><span class="line">microcode       : 0x710</span><br><span class="line">cpu MHz         : 2594.123</span><br><span class="line">cache size      : 20480 KB</span><br><span class="line">physical id     : 0</span><br><span class="line">siblings        : 1</span><br><span class="line">core id         : 0</span><br><span class="line">cpu cores       : 1</span><br><span class="line">apicid          : 0</span><br><span class="line">initial apicid  : 0</span><br><span class="line">fpu             : yes</span><br><span class="line">fpu_exception   : yes</span><br><span class="line">cpuid level     : 13</span><br><span class="line">wp              : yes</span><br><span class="line">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush mmx fxsr sse sse2 syscall nx rdtscp lm constant_tsc rep_good nopl eagerfpu pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes hypervisor lahf_lm</span><br><span class="line">bogomips        : 5187.68</span><br><span class="line">clflush size    : 64</span><br><span class="line">cache_alignment : 64</span><br><span class="line">address sizes   : 46 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">[root@interview ~]# free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           985M        150M        451M         12M        382M        680M</span><br><span class="line">Swap:            0B          0B          0B</span><br></pre></td></tr></table></figure>
<ul>
<li><code>unanme -a</code> æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬ ï¼Œ<code>3.10.0-1062</code> çš„å†…æ ¸çœ‹æ ·å­æ˜¯ CentOS7.7</li>
<li><code>cat /proc/cpuinfo</code> æŸ¥çœ‹ä¸€ä¸‹ CPU çš„ä¿¡æ¯ï¼ŒE5-2670 çš„ CPU ï¼Œå±äº Intel ç¬¬å…­ä»£ CPU ç³»åˆ—ã€‚</li>
<li><code>free</code> æŸ¥çœ‹ä¸€ä¸‹å†…å­˜çš„æƒ…å†µï¼Œ1GB çš„å°å†…å­˜ğŸ˜‚</li>
</ul>
<blockquote>
<p>Q2 ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº</p>
</blockquote>
<p>è¿™ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•ï¼Œä¹‹å‰è‡ªå·±çš„ GCE å°é¸¡ 512M å†…å­˜ä¸Šä¹Ÿæ˜¯ä½¿ç”¨æ–‡ä»¶çš„æ–¹å¼åˆ›å»º 2GB çš„äº¤æ¢åˆ†åŒºğŸ˜‚ã€‚æ‰€ä»¥å¯¹è¿™ä¸ªæ­¥éª¤æ—©å°±ç†Ÿè®°äºå¿ƒï¼Œå¹¶ä¸éœ€è¦æœç´¢å°±èƒ½æå®šğŸ˜‹ã€‚ä½¿ç”¨ dd å‘½ä»¤å³å¯ç”Ÿæˆä¸€ä¸ª 2GB å¤§å°çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@interview ~]# dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;swapfile bs&#x3D;4M count&#x3D;500</span><br><span class="line">500+0 records in</span><br><span class="line">500+0 records out</span><br><span class="line">2097152000 bytes (2.1 GB) copied, 11.0648 s, 190 MB&#x2F;s</span><br></pre></td></tr></table></figure>
<p><code>2097152000 bytes (2.1 GB) copied, 11.0648 s, 190 MB/s</code> æ€ä¹ˆä¼šæ˜¯ 2.1 GB å‘¢ï¼Ÿï¼Œå¤šå‡ºæ¥ 0.1GB ï¼Œå¼ºè¿«ç—‡å—ä¸äº†ã€‚æƒ³èµ·æ¥äº†ï¼Œå¯èƒ½æ˜¯ <code>bs=4M</code> å‚æ•°çš„é—®é¢˜ã€‚äºæ˜¯æˆ‘åœ¨æˆ‘çš„ debian æœºå™¨ä¸Šæµ‹è¯•äº†ä¸€ä¸‹</p>
<p>é¡ºå¸¦ man ä¸€ä¸‹ dd çœ‹çœ‹ bs å‚æ•°æ˜¯æ€ä¹ˆå®šä¹‰çš„</p>
<blockquote>
<p>  bs=BYTES read and write up to BYTES bytes at a time (default: 512); overrides ibs and obs</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â•­â”€debian@debian ~</span><br><span class="line">â•°â”€$ dd if=/dev/zero of=./test bs=4MB count=4</span><br><span class="line">4+0 records in</span><br><span class="line">4+0 records out</span><br><span class="line">16000000 bytes (16 MB, 15 MiB) copied, 0.0147078 s, 1.1 GB/s</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯æ–‡ä»¶å¤§å°å•ä½ä¸åŒï¼Œä¸€ä¸ªæ˜¯ <code>MB</code> å¦ä¸€ä¸ªæ˜¯ <code>MiB</code> ï¼Œåœ¨ Google ä¸Šæœç´¢äº†ä¸€ä¸‹ ã€‚çœ‹åˆ°ä¸Šçš„ä¸€ä¸ªå›ç­” <a href="https://www.quora.com/What-is-the-difference-between-1-MiB-and-1-MB-and-why-should-we-care" target="_blank" rel="noopener">What is the difference between 1 MiB and 1 MB and why should we care?</a> ã€‚ä¹Ÿæƒ³èµ·äº†å‰ä¸¤å¤©çœ‹åˆ° <a href="https://draveness.me/" target="_blank" rel="noopener">é¢å‘ä¿¡ä»°ç¼–ç¨‹</a> å¤§ä½¬çš„ä¸€ä¸ªæ¨æ–‡ï¼š</p>
<blockquote class="twitter-tweet"><p lang="zh" dir="ltr">æœ€è¿‘æ‰å‘ç° MB å’Œ MiB æ˜¯ä¸ä¸€æ ·çš„ï¼š<br><br>+ MiB æ˜¯ 1024 çš„å€æ•°<br>+ MB æ˜¯ 1000 çš„å€æ•°<br><br>Git ä¸‹è½½æ—¶çš„å•ä½æ˜¯ MiBï¼Œä½†æ˜¯ macOS é‡Œæ˜¾ç¤ºçš„ç¡®å® MBï¼Œéƒ¨åˆ†æœåŠ¡ä¼šæŠŠä¸¤è€…ç”¨æ··ï¼Œæ¯”å¦‚ DigitalOcean é‡Œçš„ S3 æœåŠ¡ï¼Œä¸‹è½½æ–‡ä»¶çš„æ—¶å€™æˆ‘è¿˜ä»¥ä¸ºåªä¸‹è½½äº†ä¸€éƒ¨åˆ†ğŸ˜‚ <a href="https://twitter.com/hashtag/%E5%86%B7%E7%9F%A5%E8%AF%86?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#å†·çŸ¥è¯†</a> <a href="https://t.co/U1IoRlgjXJ" target="_blank" rel="noopener">pic.twitter.com/U1IoRlgjXJ</a></p>&mdash; Draveness (@draven0xff) <a href="https://twitter.com/draven0xff/status/1249290829161590786?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">April 12, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>æ¥ä¸‹æ¥ä½¿ç”¨ <code>mkswap</code> å‘½ä»¤å°†åˆšåˆšåˆ›å»ºå¥½çš„ <code>/swapfile</code> æ–‡ä»¶æ ¼å¼åŒ–ä¸ºäº¤æ¢åˆ†åŒºæ‰€éœ€è¦çš„æ ¼å¼ï¼Œå¹¶ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶æƒé™ä¸º 600 ï¼Œå³åªèƒ½ç”± root ç”¨æˆ·è¯»ï¼Œä¸ç„¶é»˜è®¤çš„ 755 ä¼šè¢«å…¶ä»–ç”¨æˆ·çœ‹åˆ°ï¼Œè€Œé‡Œé¢çš„å†…å®¹æ˜¯å†…å­˜é‡Œçš„ä¿¡æ¯ï¼Œæ‰€ä»¥å®‰å…¨èµ·è§è¿˜æ˜¯ä¿®æ”¹ä¸€ä¸‹æƒé™ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@interview ~]# mkswap /swapfile</span><br><span class="line">Setting up swapspace version 1, size = 2047996 KiB</span><br><span class="line">no label, UUID=a4eab465-75d1-4830-b870-c222c7e2e87b</span><br><span class="line">[root@interview ~]#</span><br><span class="line">[root@interview ~]# chmod 600 /swapfile</span><br><span class="line">[root@interview ~]# swapon !$</span><br><span class="line">swapon /swapfile</span><br><span class="line">[root@interview ~]# free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           985M        212M        140M         12M        633M        612M</span><br><span class="line">Swap:          2.0G          0B        2.0G</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ä»»åŠ¡äºŒå®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é¢˜ç›®çš„æ ¸å¿ƒå®‰è£… WordPress å•¦</p>
<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><p>åˆšå¼€å§‹æ‰“ç®—ä½¿ç”¨å¸¸è§„çš„æ–¹æ³•æ¥éƒ¨ç½² WordPress çš„ï¼Œä½¿ç”¨ Google æœç´¢å…³é”®å­— <code>CentOS install WordPress</code> ï¼Œæ’åç¬¬äºŒçš„æ˜¯ <code>DigitalOcean</code> å®˜æ–¹åšå®¢é‡Œçš„ <a href="https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-on-centos-7" target="_blank" rel="noopener">How To Install WordPress on CentOS 7</a>ã€‚å®˜æ–¹åšå®¢é‡Œæåˆ°ï¼š</p>
<blockquote>
<p>Additionally, youâ€™ll need to have a LAMP (Linux, Apache, MySQL, and PHP) stack installed on your CentOS 7 server. If you donâ€™t have these components already installed or configured, you can use this guide to learn how to install LAMP on CentOS 7.</p>
</blockquote>
<p>è™½ç„¶ WordPress å®˜æ–¹æ²¡æœ‰ç»™å‡ºè¯¦ç»†çš„æ­å»ºæ­¥éª¤ï¼Œä½†å¯ä»¥å‚è€ƒ DigitalOcean å®˜æ–¹çš„å†…å®¹ï¼Œæ¯•ç«Ÿå…¬æœ‰äº‘æœåŠ¡æä¾›å•†çš„æŠ€æœ¯ä¸“å®¶å†™çš„åšå®¢æ›´å¯é ä¸€äº›ã€‚ç”±äºè¦æ±‚çš„æ˜¯ nginx æœ€æ–°ç‰ˆæœ¬ï¼Œyum å®‰è£…çš„ nginx ç‰ˆæœ¬å¯èƒ½ä¼šæ—§ä¸€äº›ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@interview wordpress]# yum list nginx</span><br><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: centos-distro.1gservers.com</span><br><span class="line"> * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line"> * extras: mirror.dal.nexril.net</span><br><span class="line"> * updates: mirror.dal10.us.leaseweb.net</span><br><span class="line">Available Packages</span><br><span class="line">nginx.x86_64       1:1.16.1-1.el7            epel</span><br></pre></td></tr></table></figure>
<p><code>yum list nginx</code> é‡Œçš„ä¿¡æ¯æ˜¾ç¤º nginx ç‰ˆæœ¬ä¸º 1.16.1 å¹¶ä¸æ˜¯ <a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">å®˜ç½‘</a> ä¸Šçš„æœ€æ–°ç‰ˆ <code>1.17.10</code> ï¼Œæºç ç¼–è¯‘çš„æ—¶é—´å¯èƒ½ä¼šæœ‰ç‚¹é•¿ï¼Œå› ä¸ºå‰å¤©çœ‹åˆ°ä¸€ä¸ªæ¨æ–‡è¯´ä»–ä½¿ç”¨ GCP çš„å°é¸¡ç¼–è¯‘ nginx å¤§æ¦‚èŠ±äº† 3 ä¸ªå°æ—¶ğŸ˜‚ã€‚è€Œæˆ‘é¢è¯•è§„å®šçš„æ—¶é—´æ˜¯è¦æ±‚ 1 ä¸ªå°æ—¶å†…è§£å†³ã€‚æˆ‘å»ï¼Œæƒ³è¦æœ€æ–°ç‰ˆ nginx ï¼Œè€Œä¸”æœ€çœæ—¶é—´çš„åŠæ³•çœ‹æ¥åªç”¨ docker çš„æ–¹å¼å®‰è£… nginx äº† ï¼Œä½¿ç”¨ nginx å®˜æ–¹çš„é•œåƒ nginx:latest å³ä¸º nginx æœ€æ–°çš„ç‰ˆæœ¬ã€‚Google æœç´¢ <code>docker hub nginx</code> æ¥åˆ° docker å®˜æ–¹çš„  nginx é•œåƒä»“åº“ <a href="https://hub.docker.com/_/nginx" target="_blank" rel="noopener">nginx</a> ã€‚æˆ‘å“­äº†ï¼Œè™½ç„¶æ˜¯ 1.17 ç‰ˆæœ¬ï¼Œä½†æ˜¯ 1.17.9 ç‰ˆæœ¬è€Œä¸æ˜¯ 1.17.10 ï¼Œå°±å·®äº†ä¸€ç‚¹ç‚¹å•Šï¼æ€æ¡Œå„¿ï¼ˆã€‚å°†å°±ç€ç”¨å§ï¼Œè™½ç„¶å·®äº†é‚£ä¹ˆä¸€ç‚¹ç‚¹ã€‚</p>
<blockquote class="twitter-tweet"><p lang="zh" dir="ltr">å°æŠ˜è…¾äº†ä¸€æŠŠï¼šåœ¨é—²ç½®çš„æ‰‹æœºä¸Šè·‘äº†ä¸ªRuby on Railsç½‘ç«™ï¼Œå®ƒè¿˜å¸¦æœ‰HTTPSè¯ä¹¦ä¸”å…¬ç½‘å¯ä»¥è®¿é—®ã€‚æœ›ç€å±å¹•ä¸Šæ»šåŠ¨çš„Nginxæ—¥å¿—æ„Ÿè§‰è¿˜æŒºä¸å¯æ€è®®çš„ã€‚<br><br>ç³»ç»Ÿæ˜¯Androidä¸Šè·‘çš„Debianã€‚<br><br>å¦å¤–ç”¨è¿™å‡ å¹´å‰çš„æ‰‹æœºç¼–è¯‘Nginxå±…ç„¶åªèŠ±äº†å¤§æ¦‚3å°æ—¶ï¼Œæ¯”GCPæœ€ä½æ¡£çš„VPSè¿˜å¿«ã€‚ <a href="https://t.co/5PGy96al5D" target="_blank" rel="noopener">pic.twitter.com/5PGy96al5D</a></p>&mdash; ä¸å®‡ | DING Yu (@felixding) <a href="https://twitter.com/felixding/status/1249675123218497536?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">April 13, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>äº‹å®è¯æ˜æˆ‘æ¨æ–­é”™äº†ï¼Œç¬¬äºŒå¤©æˆ‘åœ¨æˆ‘çš„å¦ä¸€å°æœºå™¨ä¸Šç¼–è¯‘ nginx èŠ±äº†ä¸åˆ° 1 åˆ†é’Ÿï¼Œè¢«å¤§ä½¬å‘æƒ¨äº†å•ŠğŸ˜‚ã€‚åœ¨ GCE å°é¸¡ä¸Šç¼–è¯‘ nginx æ ¹æœ¬ä¸å¯èƒ½éœ€è¦ 3 å°æ—¶å§ï¼Œ3 åˆ†é’Ÿæ‰å¯¹çš„å§ã€‚å½“åˆçœ‹åˆ°åå°±æ„Ÿè§‰ç¼–è¯‘ nginx éœ€è¦ 3ä¸ªå°æ—¶å°±æœ‰ç‚¹é—®é¢˜ï¼Œä½†å¹¶æ²¡æœ‰äº²è‡ªå»éªŒè¯ã€‚å”‰ï¼Œè¿˜æ˜¯è‡ªå·±ä¸å¤Ÿç»†è‡´å•Šï¼Œ<strong>ä¸€çŸ¥åŠè§£çœŸæ˜¯å¾ˆå±é™©çš„äº‹å„¿ï¼</strong></p>
<h3 id="install-docker"><a href="#install-docker" class="headerlink" title="install docker"></a>install docker</h3><p>å®‰è£… docker çš„æ–¹å¼å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œä½¿ç”¨ä¸€ä¸ª curl å‘½ä»¤å°±èƒ½æå®š <code>curl -fsSL https://get.docker.com | bash -s docker</code> å¦‚æœåœ¨å›½å†…ç¯å¢ƒçš„è¯ï¼Œåé¢åŠ ä¸Š  <code>--mirror Aliyun</code>  å‚æ•°å°±èƒ½ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒç«™ï¼Œè¿™æ ·ä¼šæ›´å¿«ä¸€äº›ã€‚å³ <code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</code> ã€‚</p>
<p>ä¸è¿‡æˆ‘è¿˜æ˜¯ä»ç¬¬ä¸€æ¬¡æ¥è§¦çš„è§’åº¦æ¥å®‰è£… docker ï¼ŒGoogle æœç´¢ <code>centos install docker</code> ç‚¹è¿›å…¥ç¬¬ä¸€ä¸ªæœç´¢ç»“æœå³ä¸ºå®˜ç½‘ <a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">Install Docker Engine on CentOS</a> ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´å°±æ²¡æœ‰æŒ‰ç…§å®˜ç½‘çš„æ­¥éª¤æ¥ï¼Œè€Œæ˜¯ä½¿ç”¨å®˜æ–¹çš„ä¸€é”®è„šæœ¬æ¥å®‰è£…ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@interview ~]# curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">[root@interview ~]# ls</span><br><span class="line">get-docker.sh</span><br><span class="line">[root@interview ~]# chmod +x get-docker.sh</span><br><span class="line">[root@interview ~]# ./get-docker.sh</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆä¹‹åä½¿ç”¨ <code>docker info</code> æ¥æŸ¥çœ‹ä¸€ä¸‹ docker ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç›®å‰æœ€æ–°ç‰ˆæœ¬çš„ docker é»˜è®¤ä¼˜å…ˆé‡‡ç”¨ <strong>overlay2</strong> çš„å­˜å‚¨é©±åŠ¨ï¼Œå¯¹äºå·²æ”¯æŒè¯¥é©±åŠ¨çš„ Linux å‘è¡Œç‰ˆï¼Œä¸éœ€è¦ä»»ä½•è¿›è¡Œä»»ä½•é¢å¤–çš„é…ç½®ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯<code>devicemapper</code> å­˜å‚¨é©±åŠ¨å·²ç»åœ¨ docker 18.09 ç‰ˆæœ¬ä¸­è¢«åºŸå¼ƒï¼Œdocker å®˜æ–¹æ¨èä½¿ç”¨ <code>overlay2</code> æ›¿ä»£<code>devicemapper</code>ï¼Œåœ¨æˆ‘å¸ç”Ÿäº§ç¯å¢ƒæ›¾ç»å› ä¸º <code>devicemapper</code> é‡åˆ°è¿‡å­˜å‚¨æŒ‚ä¸èµ·çš„å‘ğŸ˜‘ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[root@interview</span> <span class="string">~]#</span> <span class="string">docker</span> <span class="string">info</span></span><br><span class="line"><span class="attr">Client:</span></span><br><span class="line"> <span class="attr">Debug Mode:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">Server:</span></span><br><span class="line"> <span class="attr">Containers:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">Running:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">Paused:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">Stopped:</span> <span class="number">0</span></span><br><span class="line"> <span class="attr">Images:</span> <span class="number">0</span></span><br><span class="line"> <span class="attr">Server Version:</span> <span class="number">19.03</span><span class="number">.8</span></span><br><span class="line"> <span class="attr">Storage Driver:</span> <span class="string">overlay2</span></span><br><span class="line">  <span class="attr">Backing Filesystem:</span> <span class="string">&lt;unknown&gt;</span></span><br><span class="line">  <span class="attr">Supports d_type:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">Native Overlay Diff:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">Logging Driver:</span> <span class="string">json-file</span></span><br><span class="line"> <span class="attr">Cgroup Driver:</span> <span class="string">cgroupfs</span></span><br><span class="line"> <span class="attr">Plugins:</span></span><br><span class="line">  <span class="attr">Volume:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">Network:</span> <span class="string">bridge</span> <span class="string">host</span> <span class="string">ipvlan</span> <span class="string">macvlan</span> <span class="literal">null</span> <span class="string">overlay</span></span><br><span class="line">  <span class="attr">Log:</span> <span class="string">awslogs</span> <span class="string">fluentd</span> <span class="string">gcplogs</span> <span class="string">gelf</span> <span class="string">journald</span> <span class="string">json-file</span> <span class="string">local</span> <span class="string">logentries</span> <span class="string">splunk</span> <span class="string">syslog</span></span><br><span class="line"> <span class="attr">Swarm:</span> <span class="string">inactive</span></span><br><span class="line"> <span class="attr">Runtimes:</span> <span class="string">runc</span></span><br><span class="line"> <span class="attr">Default Runtime:</span> <span class="string">runc</span></span><br><span class="line"> <span class="attr">Init Binary:</span> <span class="string">docker-init</span></span><br><span class="line"> <span class="attr">containerd version:</span> <span class="string">7ad184331fa3e55e52b890ea95e65ba581ae3429</span></span><br><span class="line"> <span class="attr">runc version:</span> <span class="string">dc9208a3303feef5b3839f4323d9beb36df0a9dd</span></span><br><span class="line"> <span class="attr">init version:</span> <span class="string">fec3683</span></span><br><span class="line"> <span class="attr">Security Options:</span></span><br><span class="line">  <span class="string">seccomp</span></span><br><span class="line">   <span class="attr">Profile:</span> <span class="string">default</span></span><br><span class="line"> <span class="attr">Kernel Version:</span> <span class="number">3.10</span><span class="number">.0</span><span class="number">-1062.12</span><span class="number">.1</span><span class="string">.el7.x86_64</span></span><br><span class="line"> <span class="attr">Operating System:</span> <span class="string">CentOS</span> <span class="string">Linux</span> <span class="number">7</span> <span class="string">(Core)</span></span><br><span class="line"> <span class="attr">OSType:</span> <span class="string">linux</span></span><br><span class="line"> <span class="attr">Architecture:</span> <span class="string">x86_64</span></span><br><span class="line"> <span class="attr">CPUs:</span> <span class="number">1</span></span><br><span class="line"> <span class="attr">Total Memory:</span> <span class="number">985.</span><span class="string">3MiB</span></span><br><span class="line"> <span class="attr">Name:</span> <span class="string">interview</span></span><br><span class="line"> <span class="attr">ID:</span> <span class="string">YSZO:TT5U:GDLH:3FYT:LFGP:NLOS:L4YI:5LFU:3EAV:KHP2:F746:I5P3</span></span><br><span class="line"> <span class="attr">Docker Root Dir:</span> <span class="string">/var/lib/docker</span></span><br><span class="line"> <span class="attr">Debug Mode:</span> <span class="literal">false</span></span><br><span class="line"> <span class="attr">Registry:</span> <span class="string">https://index.docker.io/v1/</span></span><br><span class="line"> <span class="attr">Labels:</span></span><br><span class="line"> <span class="attr">Experimental:</span> <span class="literal">false</span></span><br><span class="line"> <span class="attr">Insecure Registries:</span></span><br><span class="line">  <span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/8</span></span><br><span class="line"> <span class="attr">Live Restore Enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="install-docker-compose"><a href="#install-docker-compose" class="headerlink" title="install docker-compose"></a>install docker-compose</h3><p>å®‰è£…å®Œ docker ä¹‹åï¼Œæ¥ä¸‹æ¥å®‰è£… docker-compose ï¼Œä½¿ç”¨ Google æœç´¢ <code>centos install docker-compose</code> ç‚¹è¿›å…¥ç¬¬ä¸€ä¸ªæœç´¢ç»“æœå³ä¸ºå®˜ç½‘çš„ <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener">Install Docker Compose</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@interview ~] sudo curl -L "https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span><br><span class="line">[root@interview ~]# docker-compose version</span><br><span class="line">bash: /usr/local/bin/docker-compose: Permission denied</span><br><span class="line">[root@interview ~]# chmod +x /usr/local/bin/docker-compose</span><br><span class="line">[root@interview ~]# docker-compose version</span><br><span class="line">docker-compose version 1.25.4, build 8d51620a</span><br><span class="line">docker-py version: 4.1.0</span><br><span class="line">CPython version: 3.7.5</span><br><span class="line">OpenSSL version: OpenSSL 1.1.0l  10 Sep 2019</span><br></pre></td></tr></table></figure>
<p>é‡åˆ°äº† <code>Permission denied</code> é—®é¢˜ï¼ŒåŸæ¥æ˜¯å¿˜è®°åŠ æƒé™äº† <code>chmod +x /usr/local/bin/docker-compose</code> ä¸€ä¸‹å³å¯ã€‚</p>
<h3 id="WordPress-1"><a href="#WordPress-1" class="headerlink" title="WordPress"></a>WordPress</h3><p>å®˜æ–¹ <a href="https://docs.docker.com/compose/wordpress/" target="_blank" rel="noopener">Quickstart: Compose and WordPress</a> çš„ <code>docker-compose.yaml</code> ä¸­çš„ web æœåŠ¡å™¨æ˜¯ä½¿ç”¨çš„ apache è€Œä¸æ˜¯ nginx ï¼Œå› æ­¤è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ docker-compose.yamlï¼Œå‰æ®µæ—¶é—´åœ¨æŠ˜è…¾ Webp Server Go çš„æ—¶å€™é‡åˆ°è¿‡è¿™ç§éœ€æ±‚ã€‚äºæ˜¯åœ¨ GitHub ä¸Šæœç´¢ <code>wordpress nginx docker-compose</code> æ‰¾åˆ°äº†åˆé€‚çš„ repo å³ <a href="https://github.com/mjstealey/wordpress-nginx-docker" target="_blank" rel="noopener">wordpress-nginx-docker</a> ã€‚çœ‹ä¸€ä¸‹ docker-compose.yaml æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3.6'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">wordpress:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">wordpress:$&#123;WORDPRESS_VERSION:-php7.3-fpm&#125;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">wordpress</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config/php.conf.ini:/usr/local/etc/php/conf.d/conf.ini</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./wordpress:/var/www/html</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_NAME=$&#123;WORDPRESS_DB_NAME:-wordpress&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_TABLE_PREFIX=$&#123;WORDPRESS_TABLE_PREFIX:-wp_&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_HOST=$&#123;WORDPRESS_DB_HOST:-mysql&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_USER=$&#123;WORDPRESS_DB_USER:-root&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_PASSWORD=$&#123;WORDPRESS_DB_PASSWORD:-password&#125;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb:$&#123;MARIADB_VERSION:-latest&#125;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=$&#123;MYSQL_ROOT_PASSWORD:-password&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=$&#123;MYSQL_USER:-root&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=$&#123;MYSQL_PASSWORD:-password&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=$&#123;MYSQL_DATABASE:-wordpress&#125;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:$&#123;NGINX_VERSION:-latest&#125;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'80:80'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'443:443'</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;NGINX_CONF_DIR:-./nginx&#125;:/etc/nginx/conf.d</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;NGINX_LOG_DIR:-./logs/nginx&#125;:/var/log/nginx</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;WORDPRESS_DATA_DIR:-./wordpress&#125;:/var/www/html</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;SSL_CERTS_DIR:-./certs&#125;:/etc/letsencrypt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;SSL_CERTS_DATA_DIR:-./certs-data&#125;:/data/letsencrypt</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">wordpress</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">adminer:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">adminer</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:8080</span></span><br></pre></td></tr></table></figure>
<p>å…±æœ‰ 4 ä¸ªå®¹å™¨ï¼š wordpressã€mysqlã€nginxã€adminerï¼Œé»˜è®¤ä¸éœ€è¦ä¿®æ”¹æ—¢å¯ä»¥éƒ¨ç½²èµ·æ¥ã€‚adminer æ˜¯ä¸ª web ç«¯ç®¡ç† MySQL æ•°æ®åº“çš„ï¼Œå¯ä»¥åˆ æ‰ä¸éœ€è¦ã€‚</p>
<p>ç”±äºé»˜è®¤çš„ç³»ç»Ÿä¸å¸¦ git ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€ä¸‹ git <code>yum install git</code>ï¼Œç„¶åæŠŠ repo clone ä¸‹æ¥ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/mjstealey/wordpress-nginx-docker</span><br><span class="line">cd wordpress-nginx-docker</span><br><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½¿ç”¨ <code>docker-compose up</code> å‘½ä»¤å°±èƒ½å¯åŠ¨ä¸€ä¸ª WordPress ç«™ç‚¹äº†ã€‚é€šè¿‡è®¿é—®åŸŸå <a href="https://wordpress.k8s.li/" target="_blank" rel="noopener"> wordpress.k8s.li</a> å³å¯è®¿é—®åˆšåˆšåˆ›å»ºå¥½çš„ç½‘ç«™äº†ã€‚</p>
<h3 id="Webp-Server"><a href="#Webp-Server" class="headerlink" title="Webp Server"></a>Webp Server</h3><p>ä¸ºäº†ä¼˜åŒ–ä¸€ä¸‹åšå®¢å›¾ç‰‡é™æ€èµ„æºçš„åŠ è½½é€Ÿåº¦ï¼Œå¯ä»¥ä¸º WordPress åŠ ä¸Šä¸€ä¸ª Webp Server æœåŠ¡ï¼Œå°†åŸå›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼ã€‚éœ€è¦ä¿®æ”¹ä¸€ä¸‹ nginx çš„é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span><span class="regexp"> ^~</span> /wp-content/uploads/ &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://webp-server:3333;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ docker-compose.yaml æ–‡ä»¶ä¸­åŠ å…¥ webp server çš„å®¹å™¨</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3.6'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">wordpress:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">wordpress:$&#123;WORDPRESS_VERSION:-php7.3-fpm&#125;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">wordpress</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config/php.conf.ini:/usr/local/etc/php/conf.d/conf.ini</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./wordpress:/var/www/html</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_NAME=$&#123;WORDPRESS_DB_NAME:-wordpress&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_TABLE_PREFIX=$&#123;WORDPRESS_TABLE_PREFIX:-wp_&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_HOST=$&#123;WORDPRESS_DB_HOST:-mysql&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_USER=$&#123;WORDPRESS_DB_USER:-root&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WORDPRESS_DB_PASSWORD=$&#123;WORDPRESS_DB_PASSWORD:-password&#125;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb:$&#123;MARIADB_VERSION:-latest&#125;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=$&#123;MYSQL_ROOT_PASSWORD:-password&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=$&#123;MYSQL_USER:-root&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=$&#123;MYSQL_PASSWORD:-password&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=$&#123;MYSQL_DATABASE:-wordpress&#125;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:$&#123;NGINX_VERSION:-latest&#125;</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'80:80'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'443:443'</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;NGINX_CONF_DIR:-./nginx&#125;:/etc/nginx/conf.d</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;NGINX_LOG_DIR:-./logs/nginx&#125;:/var/log/nginx</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;WORDPRESS_DATA_DIR:-./wordpress&#125;:/var/www/html</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;SSL_CERTS_DIR:-./certs&#125;:/etc/letsencrypt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;SSL_CERTS_DATA_DIR:-./certs-data&#125;:/data/letsencrypt</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">wordpress</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webp-server:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">webpsh/webps:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">webp-server</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./webp-server/config.json:/etc/config.json</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./wordpress:/var/www/html</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3333</span><span class="string">:3333</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹å¥½ docker-compose.yaml æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸º  webp-server å‡†å¤‡ä¸€ä¸ª config.json æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ <code>./webp-server/config.json</code>  ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"HOST"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">  <span class="attr">"PORT"</span>: <span class="string">"3333"</span>,</span><br><span class="line">  <span class="attr">"QUALITY"</span>: <span class="string">"80"</span>,</span><br><span class="line">  <span class="attr">"IMG_PATH"</span>: <span class="string">"/var/www/html"</span>,</span><br><span class="line">  <span class="attr">"EXHAUST_PATH"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"ALLOWED_TYPES"</span>: [<span class="string">"jpg"</span>,<span class="string">"png"</span>,<span class="string">"jpeg"</span>,<span class="string">"bmp"</span>,<span class="string">"gif"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ <code>docker-compose restart</code> å‘½ä»¤é‡å¯ä¸€ä¸‹å®¹å™¨ï¼Œä¹‹åå† WordPress ç«¯ä¸Šä¼ ä¸€å¼ å›¾ç‰‡æµ‹è¯•ä¸€ä¸‹ã€‚ä¸Šä¼ å®Œæˆä¹‹åï¼Œæ‹¿åˆ°å›¾ç‰‡çš„ url ï¼Œç„¶åä½¿ç”¨ wget å‘½ä»¤æµ‹è¯•ä¸€ä¸‹ï¼Œæ˜¾ç¤º <code>Length: 102288 (100K)  [image/webp]</code> å°±è¯´æ˜æˆ‘ä»¬çš„ webp server å·²ç»æˆåŠŸè¿è¡Œå•¦ğŸ˜‚ã€‚å®Œæ•´çš„ repo åœ¨æˆ‘çš„ GitHub ä¸Š <a href="https://github.com/muzi502/Wwordpress" target="_blank" rel="noopener">Wwordpress</a> ï¼Œæ¬¢è¿æ¥é£Ÿç”¨å‘€ğŸ˜‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â•­â”€root@sg-02 /opt/wordpress-nginx-docker â€¹masterâ€º</span><br><span class="line">â•°â”€# wget  http://dl.amd64.xyz/wp-content/uploads/2020/04/74898710_p21.jpg</span><br><span class="line">--2020-04-17 01:06:29--  http://dl.amd64.xyz/wp-content/uploads/2020/04/74898710_p21.jpg</span><br><span class="line">Resolving dl.amd64.xyz (dl.amd64.xyz)... 3.1.38.108</span><br><span class="line">Connecting to dl.amd64.xyz (dl.amd64.xyz)|3.1.38.108|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 102288 (100K) [image/webp]</span><br><span class="line">Saving to: â€˜74898710_p21.jpgâ€™</span><br><span class="line"></span><br><span class="line">74898710_p21.jpg             100%[=======&gt;]  99.89K  --.-KB/s    in 0.001s</span><br><span class="line"></span><br><span class="line">2020-04-17 01:06:29 (130 MB/s) - â€˜74898710_p21.jpgâ€™ saved [102288/102288]</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><p><a href="https://wordpress.org/" target="_blank" rel="noopener">wordpress.org</a></p>
</li>
<li><p><a href="https://hub.docker.com/_/wordpress/" target="_blank" rel="noopener">dockerhub WordPress</a></p>
</li>
<li><p><a href="https://www.nginx.com/" target="_blank" rel="noopener">nginx.com</a></p>
</li>
<li><p><a href="https://github.com/mjstealey/wordpress-nginx-docker" target="_blank" rel="noopener">wordpress-nginx-docker</a></p>
</li>
<li><p><a href="https://github.com/muzi502/Wwordpress" target="_blank" rel="noopener">Wwordpress</a></p>
</li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-on-centos-7" target="_blank" rel="noopener">How To Install WordPress on CentOS 7</a></p>
</li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-centos-7" target="_blank" rel="noopener">How To Install Linux, Apache, MySQL, PHP (LAMP) stack On CentOS 7</a></p>
</li>
<li><p><a href="https://docs.docker.com/compose/wordpress/" target="_blank" rel="noopener">Quickstart: Compose and WordPress</a></p>
</li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-docker-compose" target="_blank" rel="noopener">How To Install WordPress With Docker Compose</a></p>
</li>
<li><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">Install Docker Engine on CentOS</a></p>
</li>
<li><p><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener">Install Docker Compose</a></p>
</li>
<li><p><a href="https://www.howtoforge.com/tutorial/how-to-build-nginx-from-source-on-ubuntu-1804-lts/" target="_blank" rel="noopener">How to Build NGINX from source on Ubuntu 18.04 LTS</a></p>
</li>
<li><p><a href="https://blog.k8s.li/oh-my-webpsh.html">è®©å›¾ç‰‡é£èµ·æ¥ oh-my-webp.sh ï¼</a></p>
</li>
</ul>
<h2 id="end"><a href="#end" class="headerlink" title="end"></a>end</h2><p>è‡³æ­¤éƒ¨ç½²ä¸€ä¸ª WordPress çš„æµç¨‹å°±ç»“æŸå•¦ï¼Œä¸ºäº†è¿½æ±‚é€Ÿåº¦å°±æ”¾å¼ƒäº†å¯¹ä¸€äº›ç»†èŠ‚çš„æ·±ç©¶ï¼Œå¾—ä¸å¿å¤±å•Šã€‚</p>
<p>æœ‰äº›å†…å®¹çœ‹ä¼¼ç®€å•ï¼Œä½†æƒ³æŠŠè¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠæƒ³æ³•è½ç¬”æˆå­—ï¼Œå½¢æˆä¸€ç¯‡åšå®¢ï¼Œè¿˜æ˜¯éœ€è¦è¯­è¨€ç»„ç»‡èƒ½åŠ›ï¼Œçœ‹æ¥è‡ªå·±è¿™æ–¹é¢è¿˜æ˜¯æœ‰äº›æ¬ ç¼ºã€‚</p>
    </div>
      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/nginx/" rel="tag"><i class="fa fa-tag"></i> nginx</a>
              <a href="/tags/WordPress/" rel="tag"><i class="fa fa-tag"></i> WordPress</a>
              <a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a>
              <a href="/tags/PHP/" rel="tag"><i class="fa fa-tag"></i> PHP</a>
              <a href="/tags/Webp/" rel="tag"><i class="fa fa-tag"></i> Webp</a>
          </div>
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/kubeadm-deploy-k8s-v1.17.4.html" rel="prev" title="ä½¿ç”¨ kubeadm å¿«é€Ÿéƒ¨ç½²ä½“éªŒ K8s">
      <i class="fa fa-chevron-left"></i> ä½¿ç”¨ kubeadm å¿«é€Ÿéƒ¨ç½²ä½“éªŒ K8s
    </a></div>
      <div class="post-nav-item">
    <a href="/kubelet-mount-volumes-analysis.html" rel="next" title="kubelet æŒ‚è½½ volume åŸç†åˆ†æ">
      kubelet æŒ‚è½½ volume åŸç†åˆ†æ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
  </article>
  </div>
          </div>
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
        </div>
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>
  <aside class="sidebar">
    <div class="sidebar-inner">
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>
      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#WordPress"><span class="nav-number">1.</span> <span class="nav-text">WordPress</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»»åŠ¡2-ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº"><span class="nav-number">2.</span> <span class="nav-text">ä»»åŠ¡2 ä»¥æ–‡ä»¶çš„æ–¹å¼åˆ›å»ºå¹¶æŒ‚è½½2Gçš„swapåˆ†åŒº</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#install"><span class="nav-number">3.</span> <span class="nav-text">install</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#install-docker"><span class="nav-number">3.1.</span> <span class="nav-text">install docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install-docker-compose"><span class="nav-number">3.2.</span> <span class="nav-text">install docker-compose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WordPress-1"><span class="nav-number">3.3.</span> <span class="nav-text">WordPress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Webp-Server"><span class="nav-number">3.4.</span> <span class="nav-text">Webp Server</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‚è€ƒ"><span class="nav-number">4.</span> <span class="nav-text">å‚è€ƒ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#end"><span class="nav-number">5.</span> <span class="nav-text">end</span></a></li></ol></div>
      </div>
      <!--/noindex-->
      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="æœ¨å­"
      src="https://blog.k8s.li/avatar.png">
  <p class="site-author-name" itemprop="name">æœ¨å­</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">120</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:blog@502.li" title="E-Mail â†’ mailto:blog@502.li" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi_ii" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fa fa-fw fa-telegram"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://kindle.502.li/" title="Kindle â†’ https:&#x2F;&#x2F;kindle.502.li" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>Kindle</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tg.k8s.li/" title="Channel â†’ https:&#x2F;&#x2F;tg.k8s.li" rel="noopener" target="_blank"><i class="fa fa-fw fa-telegram"></i>Channel</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a>
      </span>
  </div>
      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-inner">
<div class="copyright">
  &copy; 2018 â€“ 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æœ¨å­</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.4m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">39:50</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>
      </div>
    </footer>
  </div>
  <script src="/lib/anime.min.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>
<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://muzi.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "https://blog.k8s.li/interview-wordpress-install.html",
            identifier: "interview-wordpress-install.html",
            title: "ä¸€æ¬¡æœ‰è¶£çš„é¢è¯•ï¼šWordPress éƒ¨ç½²"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://muzi.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>
</body>
</html>
