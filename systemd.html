<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="rgba(0,0,0,0)"><meta name="generator" content="Hexo 6.3.0">

<link rel="preconnect" href="//fonts.loli.net" crossorigin>
<link rel="preconnect" href="null//null" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="rgba(0,0,0,0)">
  <link rel="manifest" href="/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-atom.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.k8s.li","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å°æ’æ›²æœ€è¿‘ åœŸè±†å“¥ åœ¨æ£é¼“ Webp Server Go çš„æ—¶å€™å‘å’±ä¸€å¼  systemctl status webp çš„ä¿¡æ¯ï¼š  å’¦ï¼Ÿå’±çš„ systemctl status webp ä¸ºå•¥å­æ²¡å¾— CPU å’Œ Memory ä¿¡æ¯å‘ï¼Ÿ  ç„¶åå’ŒåœŸè±†å“¥è¯·æ•™äº†ä¸€ä¸‹ï¼Œå’±ä¹Ÿæƒ³è¦ã€‚äºæ˜¯åœŸè±†å“¥å‘å’±ä¸€ç¯‡ systemd â€“ systemctl ä¸æ˜¾ç¤ºå†…å­˜ CPU ä¿¡æ¯ åšå®¢ï¼Œäºæ˜¯æ‹œå¸ˆå­¦è‰ºå°± get åˆ°å•¦ ğŸ˜‹ã€‚åªéœ€">
<meta property="og:type" content="blog">
<meta property="og:title" content="Linux çš„å°ä¼™ä¼´ systemd è¯¦è§£">
<meta property="og:url" content="https://blog.k8s.li/systemd.html">
<meta property="og:site_name" content="Reimu&#39;s blog">
<meta property="og:description" content="å°æ’æ›²æœ€è¿‘ åœŸè±†å“¥ åœ¨æ£é¼“ Webp Server Go çš„æ—¶å€™å‘å’±ä¸€å¼  systemctl status webp çš„ä¿¡æ¯ï¼š  å’¦ï¼Ÿå’±çš„ systemctl status webp ä¸ºå•¥å­æ²¡å¾— CPU å’Œ Memory ä¿¡æ¯å‘ï¼Ÿ  ç„¶åå’ŒåœŸè±†å“¥è¯·æ•™äº†ä¸€ä¸‹ï¼Œå’±ä¹Ÿæƒ³è¦ã€‚äºæ˜¯åœŸè±†å“¥å‘å’±ä¸€ç¯‡ systemd â€“ systemctl ä¸æ˜¾ç¤ºå†…å­˜ CPU ä¿¡æ¯ åšå®¢ï¼Œäºæ˜¯æ‹œå¸ˆå­¦è‰ºå°± get åˆ°å•¦ ğŸ˜‹ã€‚åªéœ€">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p.k8s.li/20200318080736564.png">
<meta property="og:image" content="https://p.k8s.li/20200318080903595.png">
<meta property="og:image" content="https://p.k8s.li/20200318211715509.png">
<meta property="og:image" content="https://p.k8s.li/systemd_components-svg.png">
<meta property="og:image" content="https://p.k8s.li/linux_kernel_unified_hierarchy_cgroups_and_systemd-svg.png">
<meta property="article:published_time" content="2020-03-18T16:00:00.000Z">
<meta property="article:modified_time" content="2020-03-18T16:00:00.000Z">
<meta property="article:author" content="Reimu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="blog">
<meta property="article:tag" content="ç¬”è®°">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p.k8s.li/20200318080736564.png">


<link rel="canonical" href="https://blog.k8s.li/systemd.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.k8s.li/systemd.html","path":"systemd.html","title":"Linux çš„å°ä¼™ä¼´ systemd è¯¦è§£"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Linux çš„å°ä¼™ä¼´ systemd è¯¦è§£ | Reimu's blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Reimu's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Reimu's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-books"><a href="https://reading.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>Books</a></li><li class="menu-item menu-item-kindle"><a href="https://kindle.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-swatchbook fa-fw"></i>Kindle</a></li><li class="menu-item menu-item-friend"><a href="/friends.html" rel="section"><i class="fa fa-link fa-fw"></i>Friend</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E6%8F%92%E6%9B%B2"><span class="nav-number">1.</span> <span class="nav-text">å°æ’æ›²</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="nav-number">2.</span> <span class="nav-text">Linux å¯åŠ¨æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#BIOS-x2F-EFI-%E9%98%B6%E6%AE%B5"><span class="nav-number">2.1.</span> <span class="nav-text">BIOS&#x2F;EFI é˜¶æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BootLoader-%E9%98%B6%E6%AE%B5"><span class="nav-number">2.2.</span> <span class="nav-text">BootLoader é˜¶æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kernel-%E9%98%B6%E6%AE%B5"><span class="nav-number">2.3.</span> <span class="nav-text">kernel é˜¶æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#init-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5"><span class="nav-number">2.4.</span> <span class="nav-text">init åˆå§‹åŒ–é˜¶æ®µ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%A7%92-systemd"><span class="nav-number">3.</span> <span class="nav-text">ä¸»è§’ systemd</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-%E7%AE%80%E4%BB%8B"><span class="nav-number">3.1.</span> <span class="nav-text">systemd ç®€ä»‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87"><span class="nav-number">3.2.</span> <span class="nav-text">systemd è®¾è®¡ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84"><span class="nav-number">3.3.</span> <span class="nav-text">systemd ä½“ç³»æ¶æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-unit"><span class="nav-number">3.4.</span> <span class="nav-text">systemd unit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-unit-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.5.</span> <span class="nav-text">systemd unit é…ç½®æ–‡ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%93%BE%E6%8E%A5%E6%96%87%E4%BB%B6"><span class="nav-number">3.6.</span> <span class="nav-text">é“¾æ¥æ–‡ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="nav-number">3.7.</span> <span class="nav-text">systemd å¯åŠ¨æµç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E6%A0%91"><span class="nav-number">3.8.</span> <span class="nav-text">è¿›ç¨‹æ ‘</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%A1%E7%90%86-systemd"><span class="nav-number">4.</span> <span class="nav-text">ç®¡ç† systemd</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#systemctl-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">4.1.</span> <span class="nav-text">systemctl åŸºæœ¬ç”¨æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#journal"><span class="nav-number">4.2.</span> <span class="nav-text">journal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#systemd-analyze"><span class="nav-number">4.3.</span> <span class="nav-text">systemd-analyze</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A8%E8%8D%90-x2F-%E5%8F%82%E8%80%83"><span class="nav-number">5.</span> <span class="nav-text">æ¨è&#x2F;å‚è€ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BA%90%E7%A0%81"><span class="nav-number">5.1.</span> <span class="nav-text">æºç </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%A1%A3"><span class="nav-number">5.2.</span> <span class="nav-text">æ–‡æ¡£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2"><span class="nav-number">5.3.</span> <span class="nav-text">åšå®¢</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Reimu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Reimu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">120</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">155</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:muzi502.li@gmail.com" title="E-Mail â†’ mailto:muzi502.li@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi502" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa-brands fa-telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa-solid fa-square-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/systemd.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Reimu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Reimu's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Linux çš„å°ä¼™ä¼´ systemd è¯¦è§£ | Reimu's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux çš„å°ä¼™ä¼´ systemd è¯¦è§£
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-19 2020-03-19T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2020-03-19T00:00:00+08:00">2020-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/systemd.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="systemd.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>23k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>21 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="å°æ’æ›²"><a href="#å°æ’æ›²" class="headerlink" title="å°æ’æ›²"></a>å°æ’æ›²</h2><p>æœ€è¿‘ <a target="_blank" rel="noopener" href="https://www.bennythink.com/">åœŸè±†å“¥</a> åœ¨æ£é¼“ <a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go">Webp Server Go</a> çš„æ—¶å€™å‘å’±ä¸€å¼  <code>systemctl status webp</code> çš„ä¿¡æ¯ï¼š</p>
<p><img data-src="https://p.k8s.li/20200318080736564.png"></p>
<p>å’¦ï¼Ÿå’±çš„ <code>systemctl status webp</code> ä¸ºå•¥å­æ²¡å¾— CPU å’Œ Memory ä¿¡æ¯å‘ï¼Ÿ</p>
<p><img data-src="https://p.k8s.li/20200318080903595.png"></p>
<p>ç„¶åå’ŒåœŸè±†å“¥è¯·æ•™äº†ä¸€ä¸‹ï¼Œå’±ä¹Ÿæƒ³è¦ã€‚äºæ˜¯åœŸè±†å“¥å‘å’±ä¸€ç¯‡ <a target="_blank" rel="noopener" href="https://www.bennythink.com/systemd-accounting.html">systemd â€“ systemctl ä¸æ˜¾ç¤ºå†…å­˜ CPU ä¿¡æ¯</a> åšå®¢ï¼Œäºæ˜¯æ‹œå¸ˆå­¦è‰ºå°± get åˆ°å•¦ ğŸ˜‹ã€‚åªéœ€è¦åœ¨ systemd çš„é…ç½®æ–‡ä»¶ä¸­ <code>/etc/systemd/system.conf</code> è¿½åŠ </p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token key attr-name">DefaultCPUAccounting</span><span class="token punctuation">=</span><span class="token value attr-value">yes</span>
<span class="token key attr-name">DefaultMemoryAccounting</span><span class="token punctuation">=</span><span class="token value attr-value">yes</span>
<span class="token key attr-name">DefaultTasksAccounting</span><span class="token punctuation">=</span><span class="token value attr-value">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>ç„¶åå† <code>systemctl daemon-reload</code> ä¸€æŠŠæ¢­å°±å¯ä»¥å•¦ ğŸ˜‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@blog /home/ubuntu
â•°â”€<span class="token comment"># systemctl status webps</span>
â— webps.service - WebP Server
   Loaded: loaded <span class="token punctuation">(</span>/opt/webps/webps.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Sat <span class="token number">2020</span>-03-14 <span class="token number">10</span>:32:31 UTC<span class="token punctuation">;</span> <span class="token number">4</span> days ago
     Docs: https://github.com/n0vad3v/webp_server_go
 Main PID: <span class="token number">20691</span> <span class="token punctuation">(</span>webp-server<span class="token punctuation">)</span>
    Tasks: <span class="token number">36</span> <span class="token punctuation">(</span>limit: <span class="token number">684</span><span class="token punctuation">)</span>
   Memory: <span class="token number">9</span>.1M
      CPU: <span class="token number">20</span>.421s
   CGroup: /system.slice/webps.service
           â””â”€20691 /opt/webps/webp-server <span class="token parameter variable">--config</span> /opt/webps/config.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200318211715509.png"></p>
<p>ä¸è¿‡ï¼Œå’±è¿˜æ˜¯è¦æ·±å…¥åœ°å­¦ä¹ ä¸€ä¸‹ <code>systemd</code> ï¼Œäºæ˜¯å°±æ°´äº†è¿™ç¯‡åšå®¢ ğŸ˜‚</p>
<h2 id="Linux-å¯åŠ¨æµç¨‹"><a href="#Linux-å¯åŠ¨æµç¨‹" class="headerlink" title="Linux å¯åŠ¨æµç¨‹"></a>Linux å¯åŠ¨æµç¨‹</h2><p>æåˆ° systemd ä¸å¾—ä¸æä¸€ä¸‹ Linux çš„å¯åŠ¨æµç¨‹ï¼Œè¿™æ ·æ‰èƒ½æ¸…æ¥š  systemd åœ¨ Linux ç³»ç»Ÿä¸­çš„åœ°ä½å’Œä½œç”¨ ğŸ˜‹ã€‚æ‰€ä»¥å°±ç®€æ˜æ‰¼è¦ç¬¬ä»‹ç»ä¸€ä¸‹ Linux å¯åŠ¨çš„æµç¨‹ã€‚</p>
<p>Linux ä»æŒ‰ä¸‹ç”µæºé”®åˆ°è¿›å…¥ç”¨æˆ·äº¤äº’ç•Œé¢æ•´ä¸ªå¯åŠ¨æµç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>BIOS é˜¶æ®µ</li>
<li>BootLoader é˜¶æ®µ</li>
<li>kernel åŠ è½½é˜¶æ®µ</li>
<li>initï¼šsystemd&#x2F;sysvinit åˆå§‹åŒ–é˜¶æ®µ</li>
</ul>
<h3 id="BIOS-x2F-EFI-é˜¶æ®µ"><a href="#BIOS-x2F-EFI-é˜¶æ®µ" class="headerlink" title="BIOS&#x2F;EFI é˜¶æ®µ"></a>BIOS&#x2F;EFI é˜¶æ®µ</h3><p>BIOS æƒ³å¿…å¤§å®¶éƒ½ç†Ÿæ‚‰ï¼Œä¹Ÿå°±æ˜¯åšä¸€äº›åŸºæœ¬çš„ç¡¬ä»¶è‡ªæ£€å‡†å¤‡ä»¥åŠåŠ è½½ bootloader ç¨‹åºã€‚åœ¨æŒ‰ä¸‹ç”µæºç”µæºé”®ï¼ˆå†·å¯åŠ¨ï¼‰åï¼Œ CPU çš„ç¨‹åºè®¡æ•°å™¨è¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªç‰¹å®šçš„å…§å­˜åœ°å€ï¼Œå­˜å‚¨åœ¨åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰ä¸­çš„ BIOS å°±æ˜¯ä»è¿™ä¸ªç‰¹å®šçš„å…§å­˜åœ°å€å¼€å§‹æ‰§è¡Œã€‚<strong>æ‰€ä»¥æ²¡æœ‰ CPU æ˜¯æ— æ³•å¯åŠ¨ä¸»æ¿ä¸Šçš„ BIOS çš„</strong> ï¼Œåº”è¯¥ï¼ˆå°å£°ã€‚æ³¨æ„ï¼šå¯¹äºåµŒå…¥å¼ç³»ç»Ÿä¸­çš„ CPU ï¼Œå°†ä¼šåŠ è½½å¼•å¯¼åŒºå»å¯åŠ¨ flash&#x2F;ROM ä¸­å·²çŸ¥åœ°å€çš„ç¨‹åºã€‚</p>
<p>BIOS å¯åŠ¨åå°±å¼€å§‹æ‰§è¡Œç¡¬ä»¶çš„åŸºæœ¬åˆå§‹åŒ–ä¹Ÿç§°ä¹‹ä¸ºï¼ˆPOST: ä¸Šç”µè‡ªæ£€ï¼‰ï¼Œå¹¶æ ¹æ®å¼•å¯¼è®¾å¤‡çš„ä¼˜å…ˆçº§å°†ç³»ç»Ÿæ§åˆ¶æƒäº¤ç»™ç¡¬ä»¶å¯åŠ¨é¡¹ï¼ˆæ¯”å¦‚ç¡¬ç›˜&#x2F;ç½‘ç»œ&#x2F;U ç›˜ç­‰ï¼‰ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬ BIOS ä¸Šçš„å¯åŠ¨èœå•ï¼Œè¿™ä¸€æ­¥æ˜¯å¯ä»¥è¢«æ‰“æ–­çš„ã€‚å½“æˆ‘ä»¬æŒ‰ä¸‹ F12 æˆ–è€… ESC é”®ï¼ˆæ ¹æ®ä¸»æ¿èŠ¯ç‰‡ç»„è€Œå¼‚ï¼‰å°±ä¼šå¼¹å‡ºé€‰æ‹©å¯åŠ¨é¡¹çš„ç•Œé¢ï¼Œè€Œä¸”è¿™äº›æŒ‰é”®é«˜åº¦ä¾èµ–ç¡¬ä»¶ã€‚</p>
<p>BIOS é€‰æ‹©å¥½ç¡¬ä»¶å¯åŠ¨é¡¹ä¹‹åå°±å¼€å§‹æ‰§è¡Œç¡¬ä»¶è®¾å¤‡ä¸Šçš„åˆçº§å¼•å¯¼ç¨‹åºä»£ç ï¼Œå¯¹äº MBR ç¡¬ç›˜æ¥è®²æ˜¯æœ€å¼€å§‹çš„ä¸€ä¸ªæ‰‡åŒºï¼ˆ512 å­—èŠ‚ï¼‰å°‡è¢«åŠ è½½åˆ°å…§å­˜ï¼Œä¸¦æ‰§è¡Œè¡Œå…¶ä¸­çš„åˆå§‹åŒ–ä»£ç æ¥åŠ è½½ä¸‹ä¸€é˜¶æ®µçš„ Bootloader ã€‚</p>
<p>PSï¼šMBR <strong>ä¸»å¼•å¯¼è®°å½•</strong>æ˜¯ä¸€ä¸ª 512 å­—èŠ‚çš„æ‰‡åŒºï¼Œä½äºç¡¬ç›˜çš„ç¬¬ä¸€æ‰‡åŒºï¼ˆ0 é“ 0 æŸ± 1 æ‰‡åŒºï¼‰ã€‚å¯¹äº GPT&#x2F;EFI æ¥è®²~~ï¼Œæœ‰ç‚¹å¤´å¤§ï¼Œæš‚ä¸”å…ˆä¸è°ˆ ğŸ˜‚ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ dd å‘½ä»¤è¯»å– MBR é‡Œçš„å†…å®¹ <code>dd if=/dev/sda of=mbr.bin bs=512 count=1</code></p>
<p>ä½¿ç”¨ od å‘½ä»¤æ¥æŸ¥çœ‹ <code>od -xa mbr.bin</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># od -xa mbr.bin</span>
0000000    63eb    0090    0000    0000    0000    0000    0000    0000
          k   c dle nul nul nul nul nul nul nul nul nul nul nul nul nul
0000020    0000    0000    0000    0000    0000    0000    0000    0000
        nul nul nul nul nul nul nul nul nul nul nul nul nul nul nul nul
*
0000120    0000    0000    0000    0000    0000    <span class="token number">8000</span>    0800    0000
        nul nul nul nul nul nul nul nul nul nul nul nul nul  bs nul nul
0000140    0000    0000    faff    <span class="token number">9090</span>    c2f6    <span class="token number">7480</span>    f605    70c2
        nul nul nul nul del   z dle dle   <span class="token function">v</span>   B nul   t enq   <span class="token function">v</span>   B   p
0000160    0274    80b2    79ea    007c    <span class="token number">3100</span>    8ec0    8ed8    bcd0
          t stx   <span class="token number">2</span> nul   j   y   <span class="token operator">|</span> nul nul   <span class="token number">1</span>   @  so   X  so   P   <span class="token operator">&lt;</span>
0000200    <span class="token number">2000</span>    a0fb    7c64    ff3c    0274    c288    bb52    0417
        nul  sp   <span class="token punctuation">&#123;</span>  sp   d   <span class="token operator">|</span>   <span class="token operator">&lt;</span> del   t stx  bs   B   R   <span class="token punctuation">;</span> etb eot
0000220    07f6    <span class="token number">7403</span>    be06    7d88    17e8    be01    7c05    41b4
          <span class="token function">v</span> bel etx   t ack   <span class="token operator">></span>  bs   <span class="token punctuation">&#125;</span>   h etb soh   <span class="token operator">></span> enq   <span class="token operator">|</span>   <span class="token number">4</span>   A
0000240    aabb    cd55    5a13    <span class="token number">7252</span>    813d    55fb    75aa    <span class="token number">8337</span>
â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="BootLoader-é˜¶æ®µ"><a href="#BootLoader-é˜¶æ®µ" class="headerlink" title="BootLoader é˜¶æ®µ"></a>BootLoader é˜¶æ®µ</h3><p>ä¸»å¼•å¯¼è®°å½•åŠ è½½å®Œ Bootloaderï¼ˆä¸»è¦ä¸º GRUBï¼‰åˆ° RAM ä¸­ä¹‹åï¼ŒGRUB ä¼šæ ¹æ®éœ€æ±‚æ˜¾ç¤ºä¸€ä¸ªå¯ç”¨çš„å†…æ ¸åˆ—è¡¨ï¼ˆå®šä¹‰åœ¨&#x2F;etc&#x2F;grub.confï¼Œä»¥åŠ&#x2F;etc&#x2F;grub&#x2F;menu.lst å’Œ&#x2F;etc&#x2F;grub.conf çš„è½¯è¿æ¥ï¼‰ã€‚æ ¹æ® GRUB çš„é…ç½®åŠ è½½é»˜è®¤å†…æ ¸é•œåƒå’Œ initrd é•œåƒåˆ°å†…å­˜ä¸­ï¼Œå½“æ‰€æœ‰é•œåƒå‡†å¤‡å¥½åï¼Œå³è·³è½¬åˆ°å†…æ ¸é•œåƒã€‚</p>
<h3 id="kernel-é˜¶æ®µ"><a href="#kernel-é˜¶æ®µ" class="headerlink" title="kernel é˜¶æ®µ"></a>kernel é˜¶æ®µ</h3><p>BootLoader é˜¶æ®µå®Œæˆä¹‹åå†…æ ¸é•œåƒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç³»ç»Ÿçš„æ§åˆ¶æƒå°±äº¤ç»™å†…æ ¸é•œåƒï¼Œç”±æ­¤å†…æ ¸é˜¶æ®µå¼€å§‹äº†ã€‚å†…æ ¸é•œåƒä¸æ˜¯ä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„å†…æ ¸ï¼Œè€Œæ˜¯ä¸€ä¸ªè¢«å‹ç¼©çš„å†…æ ¸é•œåƒ ï¼ˆzImage æˆ– bzImageï¼‰ã€‚åœ¨å†…æ ¸é•œåƒçš„å¤´éƒ¨æœ‰ä¸€ä¸ªå°å‹ç¨‹åº routine ï¼Œå…¶åšå°‘é‡çš„ç¡¬ä»¶è®¾ç½®ï¼Œç„¶åè‡ªè§£å‹å‹ç¼©çš„å†…æ ¸é•œåƒå¹¶æ”¾åˆ°é«˜ç«¯å†…å­˜ã€‚å¦‚æœå­˜åœ¨åˆå§‹ç£ç›˜é•œåƒï¼ˆinitrdï¼‰ï¼Œroutine å°†æ‹·è´ initrd ä»¥ä¾›ç¨åå®‰è£…ä½¿ç”¨ï¼Œç„¶å routine å°†è°ƒç”¨å†…æ ¸å¼€å§‹å†…æ ¸å¯åŠ¨ã€‚</p>
<blockquote>
<p>åœ¨å†…æ ¸å¼•å¯¼è¿‡ç¨‹ä¸­ï¼Œåˆå§‹ RAM ç£ç›˜ï¼ˆinitrdï¼‰æ˜¯ç”± BootLoader åŠ è½½åˆ°å†…å­˜ä¸­çš„ï¼Œå®ƒä¼šè¢«å¤åˆ¶åˆ° RAM ä¸­å¹¶æŒ‚è½½åˆ°ç³»ç»Ÿä¸Šã€‚è¿™ä¸ª initrd ä½œä¸º RAM ä¸­çš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ï¼Œå¹¶å…è®¸å†…æ ¸åœ¨æ²¡æœ‰æŒ‚è½½ä»»ä½•ç‰©ç†ç£ç›˜çš„æƒ…å†µä¸‹å®Œæ•´åœ°å®ç°å¼•å¯¼ã€‚ç”±äºä¸å¤–å›´è®¾å¤‡è¿›è¡Œäº¤äº’æ‰€éœ€è¦çš„æ¨¡å—å¯æ˜¯ initrd çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å†…æ ¸å¯ä»¥éå¸¸å°ï¼Œä½†æ˜¯ä»ç„¶æ”¯æŒå¤§é‡å¯èƒ½çš„ç¡¬ä»¶é…ç½®ã€‚åœ¨å†…æ ¸å¯åŠ¨åï¼Œå°±å¯ä»¥æ­£å¼è£…å¤‡æ ¹æ–‡ä»¶ç³»ç»Ÿäº†ï¼ˆé€šè¿‡ pivot_rootï¼‰ï¼Œæ­¤æ—¶ä¼šå°† initrd æ ¹æ–‡ä»¶ç³»ç»Ÿå¸è½½æ‰ï¼Œå¹¶æŒ‚è½½çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚<br>initrd å‡½æ•°è®©æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå°å‹çš„ Linux å†…æ ¸ï¼Œå…¶ä¸­åŒ…æ‹¬ä½œä¸ºå¯åŠ è½½æ¨¡å—ç¼–è¯‘çš„é©±åŠ¨ç¨‹åºã€‚è¿™äº›å¯åŠ è½½çš„æ¨¡å—ä¸ºå†…æ ¸æä¾›äº†è®¿é—®ç£ç›˜å’Œç£ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿçš„æ–¹æ³•ï¼Œå¹¶ä¸ºå…¶ä»–ç¡¬ä»¶æä¾›äº†é©±åŠ¨ç¨‹åºã€‚ç”±äºæ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤ initrd å‡½æ•°ä¼šæä¾›ä¸€ç§å¯åŠ¨æ–¹æ³•æ¥è·å¾—å¯¹ç£ç›˜çš„è®¿é—®ï¼Œå¹¶æŒ‚è½½çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨æ²¡æœ‰ç¡¬ç›˜çš„åµŒå…¥å¼ç›®æ ‡ä¸­ï¼Œinitrd å¯ä»¥æ˜¯æœ€ç»ˆçš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ˆNFSï¼‰æ¥æŒ‚è½½æœ€ç»ˆçš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚</p>
</blockquote>
<p>å¯ä»¥ä½¿ç”¨ dmesg æ¥æŸ¥çœ‹ä»åŠ è½½å†…æ ¸åçš„æµç¨‹ï¼Œä¸‹ä¸€ç¯‡åšå®¢ä¼šå†™ä» dmesg æ—¥å¿—åˆ†æ Linux å†…æ ¸å¯åŠ¨æµç¨‹ï¼ˆæŒ–å‘</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@blog /home/ubuntu
â•°â”€<span class="token comment"># dmesg</span>
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span> Linux version <span class="token number">5.0</span>.0-1031-gcp <span class="token punctuation">(</span>buildd@lcy01-amd64-020<span class="token punctuation">)</span> <span class="token punctuation">(</span>gcc version <span class="token number">7.4</span>.0 <span class="token punctuation">(</span>Ubuntu <span class="token number">7.4</span>.0-1ubuntu1~18.04.1<span class="token punctuation">))</span> <span class="token comment">#32-Ubuntu SMP Tue Feb 11 03:55:48 UTC 2020 (Ubuntu 5.0.0-1031.32-gcp 5.0.21)</span>
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span> Command line: <span class="token assign-left variable">BOOT_IMAGE</span><span class="token operator">=</span>/boot/vmlinuz-5.0.0-1031-gcp <span class="token assign-left variable">root</span><span class="token operator">=</span>PARTUUID<span class="token operator">=</span>9b22aacc-c8b9-497a-9583-a20c1be968c4 ro <span class="token assign-left variable">scsi_mod.use_blk_mq</span><span class="token operator">=</span>Y <span class="token assign-left variable">console</span><span class="token operator">=</span>ttyS0
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span> KERNEL supported cpus:
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span>   Intel GenuineIntel
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span>   AMD AuthenticAMD
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span>   Hygon HygonGenuine
<span class="token punctuation">[</span>    <span class="token number">0.000000</span><span class="token punctuation">]</span>   Centaur CentaurHauls
â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦
<span class="token punctuation">[</span>    <span class="token number">2.486896</span><span class="token punctuation">]</span> Write protecting the kernel read-only data: 22528k
<span class="token punctuation">[</span>    <span class="token number">2.489395</span><span class="token punctuation">]</span> Freeing unused kernel image memory: 2016K
<span class="token punctuation">[</span>    <span class="token number">2.490937</span><span class="token punctuation">]</span> Freeing unused kernel image memory: 1708K
<span class="token punctuation">[</span>    <span class="token number">2.500867</span><span class="token punctuation">]</span> x86/mm: Checked W+X mappings: passed, no W+X pages found.
<span class="token punctuation">[</span>    <span class="token number">2.503126</span><span class="token punctuation">]</span> x86/mm: Checking user space page tables
<span class="token punctuation">[</span>    <span class="token number">2.513767</span><span class="token punctuation">]</span> x86/mm: Checked W+X mappings: passed, no W+X pages found.
<span class="token punctuation">[</span>    <span class="token number">2.516258</span><span class="token punctuation">]</span> Run /sbin/init as init process
<span class="token punctuation">[</span>    <span class="token number">3.992535</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: systemd <span class="token number">237</span> running <span class="token keyword">in</span> system mode. <span class="token punctuation">(</span>+PAM +AUDIT +SELINUX +IMA +APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD <span class="token parameter variable">-IDN2</span> +IDN <span class="token parameter variable">-PCRE2</span> default-hierarchy<span class="token operator">=</span>hybrid<span class="token punctuation">)</span>
<span class="token punctuation">[</span>    <span class="token number">4.002297</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Detected virtualization kvm.
<span class="token punctuation">[</span>    <span class="token number">4.004593</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Detected architecture x86-64.
<span class="token punctuation">[</span>    <span class="token number">4.031531</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Set <span class="token function">hostname</span> to <span class="token operator">&lt;</span>blog<span class="token operator">></span>.
<span class="token punctuation">[</span>    <span class="token number">5.343604</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Reached target Swap.
<span class="token punctuation">[</span>    <span class="token number">5.355156</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started Dispatch Password Requests to Console Directory Watch.
<span class="token punctuation">[</span>    <span class="token number">5.367360</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Created slice User and Session Slice.
<span class="token punctuation">[</span>    <span class="token number">5.379321</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Set up automount Arbitrary Executable File Formats File System Automount Point.
<span class="token punctuation">[</span>    <span class="token number">5.395189</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started Forward Password Requests to Wall Directory Watch.
<span class="token punctuation">[</span>    <span class="token number">5.411078</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Reached target Local Encrypted Volumes.
<span class="token punctuation">[</span>    <span class="token number">5.644759</span><span class="token punctuation">]</span> EXT4-fs <span class="token punctuation">(</span>sda1<span class="token punctuation">)</span>: re-mounted. Opts: <span class="token punctuation">(</span>null<span class="token punctuation">)</span>
<span class="token punctuation">[</span>   <span class="token number">11.663490</span><span class="token punctuation">]</span> bpfilter: Loaded bpfilter_umh pid <span class="token number">456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="init-åˆå§‹åŒ–é˜¶æ®µ"><a href="#init-åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="init åˆå§‹åŒ–é˜¶æ®µ"></a>init åˆå§‹åŒ–é˜¶æ®µ</h3><p>ä¸€æ—¦å†…æ ¸è‡ªè§£å‹å®Œæˆï¼Œå¯åŠ¨å¹¶åˆå§‹åŒ–åï¼Œå†…æ ¸å¯åŠ¨ç¬¬ä¸€ä¸ª<strong>ç”¨æˆ·ç©ºé—´åº”ç”¨ç¨‹åº</strong>ï¼Œå³ systemd è¿›ç¨‹ï¼ˆå…¶æ˜¯è€å¼ System V ç³»ç»Ÿçš„ init ç¨‹åºçš„æ›¿ä»£å“)ï¼Œå¹¶è½¬ç§»æ§åˆ¶æƒåˆ° systemdã€‚è¿™æ˜¯è°ƒç”¨çš„ç¬¬ä¸€ä¸ªä½¿ç”¨æ ‡å‡† C åº“ç¼–è¯‘çš„ç¨‹åºï¼Œåœ¨æ­¤è¿›ç¨‹ä¹‹å‰ï¼Œè¿˜æ²¡æœ‰æ‰§è¡Œä»»ä½•æ ‡å‡†çš„ C åº”ç”¨ç¨‹åºã€‚è‡³æ­¤æ•´ä¸ªç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹çš„ç»“æŸï¼Œkernel å’Œ systemd å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œæ¥ä¸‹æ¥å°±ç”± systemd æ¥å¯åŠ¨å„é¡¹ç¨‹åºã€‚</p>
<p>ä» dmesg çš„è¾“å‡ºæ—¥å¿—æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›´åˆ° 2.516258 ç§’æ‰å¼€å§‹æ‰§è¡Œ <code>/sbin/init</code> å‘½ä»¤ï¼Œè€Œå¯¹äºé‡‡ç”¨ systemd çš„å‘è¡Œç‰ˆæ¥è¯´ï¼Œ<code>/sbin/init</code> æ˜¯æŒ‡å‘ <code>/sbin/init -&gt; /lib/systemd/systemd</code> ï¼Œçš„é“¾æ¥æ–‡ä»¶ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨å¯åŠ¨ systemd ğŸ˜‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>    <span class="token number">2.516258</span><span class="token punctuation">]</span> Run /sbin/init as init process
<span class="token punctuation">[</span>    <span class="token number">3.992535</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: systemd <span class="token number">237</span> running <span class="token keyword">in</span> system mode. <span class="token punctuation">(</span>+PAM +AUDIT +SELINUX +IMA +APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD <span class="token parameter variable">-IDN2</span> +IDN <span class="token parameter variable">-PCRE2</span> default-hierarchy<span class="token operator">=</span>hybrid<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="ä¸»è§’-systemd"><a href="#ä¸»è§’-systemd" class="headerlink" title="ä¸»è§’ systemd"></a>ä¸»è§’ systemd</h2><p>ä¸ºä»€ä¹ˆæ–‡ç« é¢˜åä¸º <strong>Linux çš„å°ä¼™ä¼´ systemd</strong> å‘ï¼Œå…¶å®å¹¿ä¹‰ä¸Šæ¥è®² Linux æ˜¯ä¼—å¤š Linux ç³»ç»Ÿå‘è¡Œç‰ˆçš„é›†åˆï¼Œä½†ä¸¥æ ¼æ¥è®² Linux ä»…ä»…æ˜¯ä¸€ä¸ª OS çš„ kernel è€Œå·²ï¼Œä»…ä»…æœ‰ä¸€ä¸ªå†…æ ¸æ˜¯æ— æ³•ç»„æˆä¸€ä¸ªç³»ç»Ÿçš„ï¼Œæ‰€ä»¥ Linux kernel è¿˜éœ€è¦ä»–çš„å‡ ä¸ªå…„å¼Ÿæ¯”å¦‚ GNU ã€ systemd ã€X Window ã€GNOME ã€ KDE ã€Xfce ç­‰ç­‰å…¶ä»–ç”¨æˆ·å±‚é¢çš„ç¨‹åºæ¥æ„å»ºå‡ºä¸€å¥—å®Œæ•´çš„æ“ä½œç³»ç»Ÿå‡ºæ¥ã€‚</p>
<p>è¿˜æœ‰å¦‚æœä½ è¦æ˜¯å½“ç€è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šä¸»å¸­ RMS <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%90%86%E6%9F%A5%E5%BE%B7%C2%B7%E6%96%AF%E6%89%98%E6%9B%BC">ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼</a> è¯´ Linux çš„è¯ï¼Œä»–ä¼šç»™ä½ å‘ç«å“¦ï¼Œä½ è¦è¯´ GNU&#x2F;Linux æ‰è¡Œ ğŸ˜‚ã€‚</p>
<p>å°† Debian å“²å­¦ä¸æ–¹æ³•è®ºï¼ŒGNU å·¥å…·é›†ã€Linux å†…æ ¸ï¼Œä»¥åŠå…¶ä»–é‡è¦çš„è‡ªç”±è½¯ä»¶ç»“åˆåœ¨ä¸€èµ·æ‰€æ„æˆçš„ç‹¬ç‰¹çš„è½¯ä»¶å‘è¡Œç‰ˆç§°ä¸º Debian GNU&#x2F;Linuxã€‚å½“ä½ å°† Debian çš„å®‰è£…é•œåƒåˆ»å½•åˆ° U ç›˜ä¹‹åæ˜¾ç¤ºçš„åç§°å°±æ˜¯ <code>Debian GNU/Linux</code> ã€‚å…³äº GNU å’Œ Linux çš„æ•…äº‹å¯ä»¥å»çœ‹ä¸€å“ˆ <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-cn/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%9D%A9%E5%91%BD">æ“ä½œç³»ç»Ÿé©å‘½</a> çºªå½•ç‰‡ï¼Œä»¥åŠ RMS çš„è‡ªä¼ ã€Šè‹¥ä¸ºè‡ªç”±æ•…ï¼šè‡ªç”±è½¯ä»¶ä¹‹çˆ¶ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼ä¼ ã€‹ä»¥åŠ Linus çš„è‡ªä¼ ã€Šåªæ˜¯ä¸ºäº†å¥½ç©å„¿ã€‹ã€‚</p>
<h3 id="systemd-ç®€ä»‹"><a href="#systemd-ç®€ä»‹" class="headerlink" title="systemd ç®€ä»‹"></a>systemd ç®€ä»‹</h3><p>è®²å®Œäº† Linux ç³»ç»Ÿå¯åŠ¨çš„æµç¨‹ï¼Œæ¥ä¸‹æ¥å°±åˆ°äº†æœ¬æ–‡çš„ä¸»è§’ <code>systemd</code> ä¸Šåœºå•¦ã€‚å‰½çªƒä¸€æ®µ archlinux.org ä¸Šçš„æ–‡æ¡£æ¥ä»‹ç»ä¸€ä¸‹ systemd ã€‚ï¼ˆarchlinux çš„æ–‡æ¡£æ˜¯åšçš„æœ€å¥½çš„å“¦ï¼</p>
<blockquote>
<p><em>systemd</em> æ˜¯ä¸€ä¸ª Linux ç³»ç»ŸåŸºç¡€ç»„ä»¶çš„é›†åˆï¼Œæä¾›äº†ä¸€ä¸ªç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ï¼Œè¿è¡Œä¸º PID 1 å¹¶è´Ÿè´£å¯åŠ¨å…¶å®ƒç¨‹åºã€‚åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ”¯æŒå¹¶è¡ŒåŒ–ä»»åŠ¡ï¼›</li>
<li>åŒæ—¶é‡‡ç”¨ socket å¼ä¸ <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/D-Bus_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">D-Bus</a> æ€»çº¿å¼æ¿€æ´»æœåŠ¡ï¼›</li>
<li>æŒ‰éœ€å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼›</li>
<li>åˆ©ç”¨ Linux çš„ <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Cgroups">cgroups</a> ç›‘è§†è¿›ç¨‹ï¼› # æœ¬æ–‡å¼€ç¯‡è®²åˆ°çš„ systemctl æ˜¾ç¤º CPU å’Œ  Mem ä¿¡æ¯å°±æ˜¯åŸºäºæ­¤å“¦ã€‚</li>
<li>æ”¯æŒå¿«ç…§å’Œç³»ç»Ÿæ¢å¤ï¼›</li>
<li>ç»´æŠ¤æŒ‚è½½ç‚¹å’Œè‡ªåŠ¨æŒ‚è½½ç‚¹ï¼›</li>
<li>å„æœåŠ¡é—´åŸºäºä¾èµ–å…³ç³»è¿›è¡Œç²¾å¯†æ§åˆ¶ã€‚</li>
<li>systemd* æ”¯æŒ SysV å’Œ LSB åˆå§‹è„šæœ¬ï¼Œå¯ä»¥æ›¿ä»£ sysvinitã€‚</li>
<li>é™¤æ­¤ä¹‹å¤–ï¼ŒåŠŸèƒ½è¿˜åŒ…æ‹¬æ—¥å¿—è¿›ç¨‹ã€æ§åˆ¶åŸºç¡€ç³»ç»Ÿé…ç½®ï¼Œç»´æŠ¤ç™»é™†ç”¨æˆ·åˆ—è¡¨ä»¥åŠç³»ç»Ÿè´¦æˆ·ã€è¿è¡Œæ—¶ç›®å½•å’Œè®¾ç½®ï¼Œå¯ä»¥è¿è¡Œå®¹å™¨å’Œè™šæ‹Ÿæœºï¼Œå¯ä»¥ç®€å•çš„ç®¡ç†ç½‘ç»œé…ç½®ã€ç½‘ç»œæ—¶é—´åŒæ­¥ã€æ—¥å¿—è½¬å‘å’Œåç§°è§£æç­‰ã€‚</li>
</ul>
</blockquote>
<p>è¿˜æœ‰ä¸€æ®µæ‘˜è‡ª <a target="_blank" rel="noopener" href="https://systemd.io/">systemd.io</a></p>
<blockquote>
<p>systemd is a suite of basic building blocks for a Linux system. It provides a system and service manager that runs as PID 1 and starts the rest of the system.</p>
<p>systemd provides aggressive parallelization capabilities, uses socket and D-Bus activation for starting services, offers on-demand starting of daemons, keeps track of processes using Linux control groups, maintains mount and automount points, and implements an elaborate transactional dependency-based service control logic. systemd supports SysV and LSB init scripts and works as a replacement for sysvinit.</p>
<p>Other parts include a logging daemon, utilities to control basic system configuration like the hostname, date, locale, maintain a list of logged-in users and running containers and virtual machines, system accounts, runtime directories and settings, and daemons to manage simple network configuration, network time synchronization, log forwarding, and name resolution.</p>
</blockquote>
<h3 id="systemd-è®¾è®¡ç›®æ ‡"><a href="#systemd-è®¾è®¡ç›®æ ‡" class="headerlink" title="systemd è®¾è®¡ç›®æ ‡"></a>systemd è®¾è®¡ç›®æ ‡</h3><ul>
<li>æ”¹è¿›æ•ˆèƒ½ã€‚ä½¿ç”¨äºŒè¿›åˆ¶ä»£ç æ›¿æ¢æ¾æ•£çš„ SYSV å¯åŠ¨è„šæœ¬ï¼Œå‡å°‘é¢‘ç¹çš„è¿›ç¨‹åˆ›å»ºï¼Œåº“åŠ è½½ï¼Œå†…æ ¸&#x2F;ç”¨æˆ·åˆ‡æ¢ã€‚</li>
<li>åˆ©ç”¨ Dbus è¿›ç¨‹é—´é€šè®¯ä¸ socket æ¿€æ´»æœºåˆ¶ï¼Œè§£å†³ä»»åŠ¡å¯åŠ¨æ—¶çš„ä¾èµ–é—®é¢˜ï¼Œå®ç°å¯åŠ¨å¹¶è¡ŒåŒ–ã€‚</li>
<li>å®ç°ä»»åŠ¡ï¼ˆdaemonsï¼‰çš„ç²¾ç¡®æ§åˆ¶ã€‚ä½¿ç”¨å†…æ ¸çš„ cgroup æœºåˆ¶ï¼Œä¸ä¾èµ– pid æ¥è¿½è¸ªè¿›ç¨‹ï¼Œå³ä½¿æ˜¯ä¸¤æ¬¡ fork ä¹‹åç”Ÿæˆçš„å®ˆæŠ¤è¿›ç¨‹ä¹Ÿä¸ä¼šè„±ç¦» systemd çš„æ§åˆ¶ã€‚</li>
<li>ç»Ÿä¸€ä»»åŠ¡å®šä¹‰ã€‚ç”¨æˆ·ä¸éœ€è¦è‡ªè¡Œç¼–å†™ shell è„šæœ¬ï¼Œè€Œä»…ä¾æ® systemd åˆ¶å®šçš„ unit è§„åˆ™ã€‚</li>
</ul>
<h3 id="systemd-ä½“ç³»æ¶æ„"><a href="#systemd-ä½“ç³»æ¶æ„" class="headerlink" title="systemd ä½“ç³»æ¶æ„"></a>systemd ä½“ç³»æ¶æ„</h3><p><img data-src="https://p.k8s.li/systemd_components-svg.png"></p>
<ul>
<li>æœ€åº•å±‚ï¼šsystemd å†…æ ¸å±‚é¢ä¾èµ– cgroupã€autofsã€kdbus</li>
<li>ç¬¬äºŒå±‚ï¼šsystemd libraries æ˜¯ systemd ä¾èµ–åº“</li>
<li>ç¬¬ä¸‰å±‚ï¼šsystemd Core æ˜¯ systemd è‡ªå·±çš„åº“</li>
<li>ç¬¬å››å±‚ï¼šsystemd daemons ä»¥åŠ targets æ˜¯è‡ªå¸¦çš„ä¸€äº›åŸºæœ¬ unitã€targetï¼Œç±»ä¼¼äº sysvinit ä¸­è‡ªå¸¦çš„è„šæœ¬</li>
<li>æœ€ä¸Šå±‚å°±æ˜¯å’Œ  systemd äº¤äº’çš„ä¸€äº›å·¥å…·</li>
</ul>
<p><img data-src="https://p.k8s.li/linux_kernel_unified_hierarchy_cgroups_and_systemd-svg.png"></p>
<h3 id="systemd-unit"><a href="#systemd-unit" class="headerlink" title="systemd unit"></a>systemd unit</h3><p>systemd å°†å„ç§ç³»ç»Ÿå¯åŠ¨å’Œè¿è¡Œç›¸å…³çš„å¯¹è±¡ï¼Œ è¡¨ç¤ºä¸ºå„ç§ä¸åŒç±»å‹çš„å•å…ƒ <code>unit</code>ï¼Œ å¹¶æä¾›äº† å¤„ç†ä¸åŒå•å…ƒä¹‹é—´ä¾èµ–å…³ç³»çš„èƒ½åŠ›ã€‚</p>
<table>
<thead>
<tr>
<th align="center">type</th>
<th align="center">name</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Service unit</td>
<td align="center">.service</td>
<td align="left">ç”¨äºå°è£…ä¸€ä¸ªåå°æœåŠ¡è¿›ç¨‹</td>
</tr>
<tr>
<td align="center">Target unit</td>
<td align="center">.target</td>
<td align="left">ç”¨äºå°†å¤šä¸ªå•å…ƒåœ¨é€»è¾‘ä¸Šç»„åˆåœ¨ä¸€èµ·ã€‚</td>
</tr>
<tr>
<td align="center">Device unit</td>
<td align="center">.device</td>
<td align="left">ç”¨äºå®šä¹‰å†…æ ¸è¯†åˆ«çš„è®¾å¤‡ï¼Œåœ¨ sysfs(5) é‡Œé¢ä½œä¸º udev(7) è®¾å¤‡æ ‘å±•ç¤º</td>
</tr>
<tr>
<td align="center">Socket unit</td>
<td align="center">.socket</td>
<td align="left">ç”¨äºæ ‡è¯†è¿›ç¨‹é—´é€šä¿¡ç”¨åˆ°çš„ socket æ–‡ä»¶</td>
</tr>
<tr>
<td align="center">Snapshot unit</td>
<td align="center">.snapshot</td>
<td align="left">ç®¡ç†ç³»ç»Ÿå¿«ç…§</td>
</tr>
<tr>
<td align="center">Swap unit</td>
<td align="center">.swap</td>
<td align="left">ç”¨äºæ ‡è¯† swap æ–‡ä»¶æˆ–è®¾å¤‡</td>
</tr>
<tr>
<td align="center">Mount unit</td>
<td align="center">.mount</td>
<td align="left">ç”¨äºå°è£…ä¸€ä¸ªæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹(ä¹Ÿå‘åå…¼å®¹ä¼ ç»Ÿçš„ &#x2F;etc&#x2F;fstab æ–‡ä»¶)</td>
</tr>
<tr>
<td align="center">Automount unit</td>
<td align="center">.automount</td>
<td align="left">ç”¨äºå°è£…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½ç‚¹</td>
</tr>
<tr>
<td align="center">Path unit</td>
<td align="center">.path</td>
<td align="left">ç”¨äºæ ¹æ®æ–‡ä»¶ç³»ç»Ÿä¸Šç‰¹å®šå¯¹è±¡çš„å˜åŒ–æ¥å¯åŠ¨å…¶ä»–æœåŠ¡ã€‚</td>
</tr>
<tr>
<td align="center">Time unit</td>
<td align="center">.timer</td>
<td align="left">ç”¨äºå°è£…ä¸€ä¸ªåŸºäºæ—¶é—´è§¦å‘çš„åŠ¨ä½œã€‚å–ä»£ä¼ ç»Ÿçš„ crond ç­‰ä»»åŠ¡è®¡åˆ’æœåŠ¡</td>
</tr>
<tr>
<td align="center">Slice unit</td>
<td align="center">*.slice</td>
<td align="left">ç”¨äºæ§åˆ¶ç‰¹å®š CGroup å†…æ‰€æœ‰è¿›ç¨‹çš„æ€»ä½“èµ„æºå ç”¨ã€‚</td>
</tr>
</tbody></table>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ systemd åªåœ¨å†…å­˜ä¸­åŠ è½½æœ€å°åŒ–çš„ä¸€ç»„å•å…ƒã€‚ åªæœ‰è‡³å°‘æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ä¹‹ä¸€çš„å•å…ƒï¼Œæ‰ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼š</p>
<ul>
<li>å¤„äº æ´»åŠ¨(active)ã€å¯åŠ¨ä¸­(activating)ã€åœæ­¢ä¸­(deactivating)ã€å¤±è´¥(failed) çŠ¶æ€ä¹‹ä¸€(ä¹Ÿå°±æ˜¯åœæ­¢(inactive)ä¹‹å¤–çš„çŠ¶æ€)</li>
<li>è‡³å°‘æœ‰ä¸€ä¸ªä½œä¸šæ­£åœ¨ä½œä¸šé˜Ÿåˆ—ä¸­</li>
<li>è‡³å°‘æœ‰ä¸€ä¸ªå…¶ä»–å·²ç»åŠ è½½åˆ°å†…å­˜ä¸­çš„å•å…ƒä¾èµ–äºå®ƒ</li>
<li>ä»ç„¶å æœ‰æŸäº›èµ„æº (ä¾‹å¦‚ä¸€ä¸ªå·²åœæ­¢çš„æœåŠ¡å•å…ƒçš„è¿›ç¨‹å¿½ç•¥äº†ç»ˆæ­¢è¯·æ±‚ï¼Œä»åœ¨é€—ç•™)</li>
<li>è¢« D-Bus è°ƒç”¨ä»¥ç¨‹åºåŒ–çš„æ–¹å¼å›ºå®šåˆ°äº†å†…å­˜ä¸­</li>
</ul>
<blockquote>
<p>åªè¦æœ‰éœ€è¦ï¼Œsystemd å°±ä¼šè‡ªåŠ¨ä»ç£ç›˜åŠ è½½æ‰€éœ€çš„å•å…ƒã€‚ å› æ­¤å®é™…ä¸Šç”¨æˆ·å¹¶ä¸èƒ½æ˜¾è€Œæ˜“è§çš„çœ‹åˆ°æŸä¸ªå•å…ƒæ˜¯å¦å·²è¢«åŠ è½½åˆ°å†…å­˜ã€‚ ä½¿ç”¨ <strong>systemctl list-units â€“all</strong> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰å·²åŠ è½½åˆ°å†…å­˜ä¸­çš„æ‰€æœ‰å•å…ƒã€‚ ä¸æ»¡è¶³åŠ è½½æ¡ä»¶(è§ä¸Šæ–‡)çš„å•å…ƒä¼šè¢«ç«‹å³ä»å†…å­˜ä¸­å¸è½½ï¼Œå¹¶ä¸”å®ƒçš„è®°å¸æ•°æ®(accounting data)ä¹Ÿä¼šè¢«æ¸…ç©ºã€‚ ä¸è¿‡ï¼Œå› ä¸ºæ¯å½“ä¸€ä¸ªå•å…ƒå…³é—­æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€æ¡æ—¥å¿—è®°å½•å£°æ˜è¯¥å•å…ƒæ‰€æ¶ˆè€—çš„èµ„æºï¼Œ æ‰€ä»¥è¿™äº›æ•°æ®é€šå¸¸ä¸ä¼šå½»åº•æ¶ˆå¤±ã€‚</p>
</blockquote>
<h3 id="systemd-unit-é…ç½®æ–‡ä»¶"><a href="#systemd-unit-é…ç½®æ–‡ä»¶" class="headerlink" title="systemd unit é…ç½®æ–‡ä»¶"></a>systemd unit é…ç½®æ–‡ä»¶</h3><ul>
<li>åœ¨ CentOS&#x2F;RedHat å‘è¡Œç‰ˆä¸­ <code>man systemd.unit</code></li>
</ul>
<pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">Table 1.  Load path when running in system mode (--system).
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Path                    â”‚ Description                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚/etc/systemd/system     â”‚ Local configuration         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚/run/systemd/system     â”‚ Runtime units               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚/usr/lib/systemd/system â”‚ Units of installed packages â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>åœ¨ Ubuntu&#x2F;Debian å‘è¡Œç‰ˆä¸­ <code>man systemd.unit</code></li>
</ul>
<pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">Table 1.  Load path when running in system mode (--system).
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Path                â”‚ Description                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚/etc/systemd/system â”‚ Local configuration         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚/run/systemd/system â”‚ Runtime units               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚/lib/systemd/system â”‚ Units of installed packages â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸åŒçš„å‘è¡Œç‰ˆ systemd unit çš„ path ä¸ä¸€æ ·å“¦ï¼Œä¸è¿‡ systemd çš„é…ç½®æ–‡ä»¶ä¸»è¦ä½äºä»¥ä¸‹ä¸‰ä¸ªç›®å½•ä¸­</p>
<ul>
<li><p><code>/usr/lib/systemd/system</code> æˆ– <code>/lib/systemd</code> : ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…çš„è½¯ä»¶çš„ systemd unit ä»¶å®é™…é…ç½®æ–‡ä»¶çš„å­˜æ”¾ä½ç½®</p>
</li>
<li><p><code>/run/systemd/system</code>ï¼šåœ¨è¿è¡Œæ—¶åˆ›å»ºçš„ s ystemd unit æ–‡ä»¶ã€‚è¯¥ç›®å½•ä¼˜å…ˆäºå·²å®‰è£…æœåŠ¡å•å…ƒæ–‡ä»¶çš„ç›®å½•ã€‚</p>
<p><code>/etc/systemd/system</code>:  ä¼˜å…ˆçº§æœ€é«˜ï¼Œç”± systemctl å‘½ä»¤åˆ›å»ºçš„ systemd unit æ–‡ä»¶ä»¥åŠä¸ºæ‰©å±•æœåŠ¡è€Œæ·»åŠ çš„ unit æ–‡ä»¶éƒ½å°†å¯ç”¨ã€‚</p>
</li>
</ul>
<p>åœ¨ä½¿ç”¨ yum&#x2F;apt æˆ–å…¶ä»–åŒ…ç®¡ç†å™¨ï¼Œä»¥åŠ rpm&#x2F;deb ç­‰è½¯ä»¶åŒ…å®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œå¦‚æœè¯¥è½¯ä»¶æ”¯æŒ systemd ç®¡ç†çš„è¯ï¼Œå°±ä¼šè‡ªåŠ¨åœ¨ <code>/usr/lib/systemd/system</code> ç›®å½•æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚å¯ä»¥ç”¨è¿‡  systemctl cat name æ¥æŸ¥çœ‹è¯¥è½¯ä»¶çš„  systemd å•å…ƒæ–‡ä»¶ï¼Œæ¯”å¦‚æŸ¥çœ‹ä¸€ä¸‹ nginx çš„ <code>nginx.service</code> æ–‡ä»¶</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@sg-02 ~
â•°â”€<span class="token comment"># systemctl cat nginx                                                                                         1 â†µ</span>
<span class="token comment"># /lib/systemd/system/nginx.service</span>
<span class="token comment"># Stop dance for nginx</span>
<span class="token comment"># =======================</span>
<span class="token comment">#</span>
<span class="token comment"># ExecStop sends SIGSTOP (graceful stop) to the nginx process.</span>
<span class="token comment"># If, after 5s (--retry QUIT/5) nginx is still running, systemd takes control</span>
<span class="token comment"># and sends SIGTERM (fast shutdown) to the main process.</span>
<span class="token comment"># After another 5s (TimeoutStopSec=5), and if nginx is alive, systemd sends</span>
<span class="token comment"># SIGKILL to all the remaining processes in the process group (KillMode=mixed).</span>
<span class="token comment">#</span>
<span class="token comment"># nginx signals reference doc:</span>
<span class="token comment"># http://nginx.org/en/docs/control.html</span>
<span class="token comment">#</span>
<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>A high performance web server and a reverse proxy server
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>man:nginx<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token assign-left variable">PIDFile</span><span class="token operator">=</span>/run/nginx.pid
<span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token parameter variable">-t</span> <span class="token parameter variable">-q</span> <span class="token parameter variable">-g</span> <span class="token string">'daemon on; master_process on;'</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token parameter variable">-g</span> <span class="token string">'daemon on; master_process on;'</span>
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token parameter variable">-g</span> <span class="token string">'daemon on; master_process on;'</span> <span class="token parameter variable">-s</span> reload
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>-/sbin/start-stop-daemon <span class="token parameter variable">--quiet</span> <span class="token parameter variable">--stop</span> <span class="token parameter variable">--retry</span> QUIT/5 <span class="token parameter variable">--pidfile</span> /run/nginx.pid
<span class="token assign-left variable">TimeoutStopSec</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>mixed

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦‚æœè½¯ä»¶æ²¡æœ‰è‡ªå¸¦ systemd é…ç½®æ–‡ä»¶çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ“ä¸€ä¸ªé…ç½®æ–‡ä»¶å‡ºæ¥ï¼Œå¹¶å¤åˆ¶åˆ°ç›¸åº”çš„ç›®å½•ä¸‹å³å¯ã€‚æ¯”æˆ‘æˆ‘ä»¬çš„ <a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go">Webp Server Go</a> çš„ <code>webps.service</code></p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">WebP Server Go</span>
<span class="token key attr-name">Documentation</span><span class="token punctuation">=</span><span class="token value attr-value">https://github.com/webp-sh/webp_server_go</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">nginx.target</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span>
<span class="token key attr-name">StandardError</span><span class="token punctuation">=</span><span class="token value attr-value">journal</span>
<span class="token key attr-name">WorkingDirectory</span><span class="token punctuation">=</span><span class="token value attr-value">/opt/webps</span>
<span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/opt/webps/webp-server --config /opt/webps/config.json</span>
<span class="token key attr-name">Restart</span><span class="token punctuation">=</span><span class="token value attr-value">always</span>
<span class="token key attr-name">RestartSec</span><span class="token punctuation">=</span><span class="token value attr-value">3s</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å…³äº systemd çš„å•å…ƒé…ç½®æ–‡ä»¶å¦‚ä½•ä¹¦å†™ï¼Œå› ä¸ºæ ¹æ®ä¸åŒçš„å•å…ƒç±»å‹åŒ…å«çš„é…ç½®é¡¹å®åœ¨æ˜¯å·¨å¤šã€‚ä¸æ˜¯ä¸‰è¨€ä¸¤è¯­å°±èƒ½è®²æ¸…çš„ï¼Œæ‰€ä»¥å¤§å®¶è¿˜æ˜¯å‚è€ƒä¸€ä¸‹ systemd çš„å®˜æ–¹æ–‡æ¡£&#x2F;ç¤¾åŒºç¿»è¯‘æ–‡æ¡£ã€‚æ¯”å¦‚ <a target="_blank" rel="noopener" href="http://www.jinbuguo.com/systemd/systemd.index.html">systemd (ç®€ä½“ä¸­æ–‡)</a>ã€‚</p>
<h3 id="é“¾æ¥æ–‡ä»¶"><a href="#é“¾æ¥æ–‡ä»¶" class="headerlink" title="é“¾æ¥æ–‡ä»¶"></a>é“¾æ¥æ–‡ä»¶</h3><p>å½“æˆ‘ä»¬ä½¿ç”¨ reboot ã€poweroff ã€shutdown ç­‰å‘½ä»¤çš„æ—¶å€™ï¼Œå…¶å®å¹¶ä¸æ˜¯æ‰§è¡Œè¯¥å‘½ä»¤æœ¬èº«ï¼ŒèƒŒåæ˜¯è°ƒç”¨çš„ systemctl å‘½ä»¤ã€‚systemctl å‘½ä»¤ä¼šå°† reboot è¿™äº›å‘½ä»¤ä½œä¸º $1 å‚æ•°ä¼ é€’è¿›å»ã€‚æ‰€ä»¥æ‰§è¡Œ reboot å’Œ systemctl reboot æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /sbin
â•°â”€<span class="token comment"># ls -alh /usr/bin /sbin /bin /usr/local/bin  | grep systemctl</span>
-rwxr-xr-x  <span class="token number">1</span> root root 179K Feb  <span class="token number">5</span> 01:07 systemctl
lrwxrwxrwx  <span class="token number">1</span> root root      <span class="token number">14</span> Feb  <span class="token number">5</span> 01:07 <span class="token function">halt</span> -<span class="token operator">></span> /bin/systemctl
lrwxrwxrwx  <span class="token number">1</span> root root      <span class="token number">14</span> Feb  <span class="token number">5</span> 01:07 poweroff -<span class="token operator">></span> /bin/systemctl
lrwxrwxrwx  <span class="token number">1</span> root root      <span class="token number">14</span> Feb  <span class="token number">5</span> 01:07 <span class="token function">reboot</span> -<span class="token operator">></span> /bin/systemctl
lrwxrwxrwx  <span class="token number">1</span> root root      <span class="token number">14</span> Feb  <span class="token number">5</span> 01:07 runlevel -<span class="token operator">></span> /bin/systemctl
lrwxrwxrwx  <span class="token number">1</span> root root      <span class="token number">14</span> Feb  <span class="token number">5</span> 01:07 <span class="token function">shutdown</span> -<span class="token operator">></span> /bin/systemctl
lrwxrwxrwx  <span class="token number">1</span> root root      <span class="token number">14</span> Feb  <span class="token number">5</span> 01:07 telinit -<span class="token operator">></span> /bin/systemctl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿˜æœ‰å‰æ–‡æåˆ°çš„æœ‰ä¸€ç‚¹å°±æ˜¯ç»å¤§å¤šæ•°ä½¿ç”¨ systemd çš„å‘è¡Œç‰ˆéƒ½è®¾ç½®äº†ä¸€ä¸ªè½¯è¿æ¥ï¼Œç”± <code>/sbin/init -&gt; /lib/systemd/systemd</code>ã€‚å¦å¤–åœ¨ <code>/etc/systemd</code> ä¸‹ä¹Ÿæœ‰å¾ˆå¤šé“¾æ¥æ–‡ä»¶ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»åˆ†æä¸€ä¸‹ã€‚</p>
<h3 id="systemd-å¯åŠ¨æµç¨‹"><a href="#systemd-å¯åŠ¨æµç¨‹" class="headerlink" title="systemd å¯åŠ¨æµç¨‹"></a>systemd å¯åŠ¨æµç¨‹</h3><p>å›åˆ° Linux å¯åŠ¨æµç¨‹ï¼Œå½“å†…æ ¸åŠ è½½åˆ°å†…å­˜ä¸­åå¼€å§‹æ‰§è¡Œ systemd ã€‚æ ¹æ® dmesg çš„æ—¥å¿—æˆ‘ä»¬å¯ä»¥äº†è§£åˆ° systemd å¯åŠ¨åæ‰§è¡Œäº†å“ªä¸€äº›æ“ä½œã€‚</p>
<pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token punctuation">[</span>    <span class="token number">2.516258</span><span class="token punctuation">]</span> Run <span class="token operator">/</span>sbin<span class="token operator">/</span>init as init process
<span class="token punctuation">[</span>    <span class="token number">3.992535</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> systemd <span class="token number">237</span> running in system mode<span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token operator">+</span>PAM <span class="token operator">+</span>AUDIT <span class="token operator">+</span>SELINUX <span class="token operator">+</span>IMA <span class="token operator">+</span>APPARMOR <span class="token operator">+</span>SMACK <span class="token operator">+</span>SYSVINIT <span class="token operator">+</span>UTMP <span class="token operator">+</span>LIBCRYPTSETUP <span class="token operator">+</span>GCRYPT <span class="token operator">+</span>GNUTLS <span class="token operator">+</span>ACL <span class="token operator">+</span>XZ <span class="token operator">+</span>LZ4 <span class="token operator">+</span>SECCOMP <span class="token operator">+</span>BLKID <span class="token operator">+</span>ELFUTILS <span class="token operator">+</span>KMOD <span class="token operator">-</span>IDN2 <span class="token operator">+</span>IDN <span class="token operator">-</span>PCRE2 <span class="token keyword">default</span><span class="token operator">-</span>hierarchy<span class="token operator">=</span>hybrid<span class="token punctuation">)</span>
<span class="token punctuation">[</span>    <span class="token number">4.002297</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Detected virtualization kvm<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">4.004593</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Detected architecture x86<span class="token operator">-</span><span class="token number">64</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">4.031531</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Set hostname to <span class="token operator">&lt;</span>blog<span class="token operator">></span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.343604</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Reached target Swap<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.355156</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Started Dispatch Password Requests to Console Directory Watch<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.367360</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Created slice User <span class="token keyword">and</span> Session Slice<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.379321</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Set up automount Arbitrary Executable File Formats File System Automount Point<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.395189</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Started Forward Password Requests to Wall Directory Watch<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.411078</span><span class="token punctuation">]</span> systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Reached target Local Encrypted Volumes<span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.644759</span><span class="token punctuation">]</span> EXT4<span class="token operator">-</span>fs <span class="token punctuation">(</span>sda1<span class="token punctuation">)</span><span class="token punctuation">:</span> re<span class="token operator">-</span>mounted<span class="token punctuation">.</span> Opts<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>    <span class="token number">5.702603</span><span class="token punctuation">]</span> RPC<span class="token punctuation">:</span> Registered named UNIX socket transport <span class="token keyword">module</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.704115</span><span class="token punctuation">]</span> RPC<span class="token punctuation">:</span> Registered udp transport <span class="token keyword">module</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.705318</span><span class="token punctuation">]</span> RPC<span class="token punctuation">:</span> Registered tcp transport <span class="token keyword">module</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.706573</span><span class="token punctuation">]</span> RPC<span class="token punctuation">:</span> Registered tcp NFSv4<span class="token number">.1</span> backchannel transport <span class="token keyword">module</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.825727</span><span class="token punctuation">]</span> Loading iSCSI transport <span class="token keyword">class</span> v2<span class="token number">.0</span><span class="token operator">-</span><span class="token number">870</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>    <span class="token number">5.912079</span><span class="token punctuation">]</span> iscsi<span class="token punctuation">:</span> registered transport <span class="token punctuation">(</span>tcp<span class="token punctuation">)</span>
<span class="token punctuation">[</span>    <span class="token number">5.942499</span><span class="token punctuation">]</span> systemd<span class="token operator">-</span>journald<span class="token punctuation">[</span><span class="token number">196</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Received request to flush runtime journal from PID <span class="token number">1</span>
<span class="token punctuation">[</span>    <span class="token number">5.973269</span><span class="token punctuation">]</span> systemd<span class="token operator">-</span>journald<span class="token punctuation">[</span><span class="token number">196</span><span class="token punctuation">]</span><span class="token punctuation">:</span> File <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>log<span class="token operator">/</span>journal<span class="token operator">/</span><span class="token number">7</span>bc72ce3e0aa559e38159aa4fa0547f9<span class="token operator">/</span>system<span class="token punctuation">.</span>journal corrupted <span class="token keyword">or</span> uncleanly shut down<span class="token punctuation">,</span> renaming <span class="token keyword">and</span> replacing<span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>ä¸‹é¢çš„å›¾è¡¨è§£é‡Šäº† è¿™äº›å…·æœ‰ç‰¹å®šå«ä¹‰çš„ target å•å…ƒä¹‹é—´çš„ä¾èµ–å…³ç³» ä»¥åŠå„è‡ªåœ¨å¯åŠ¨æµç¨‹ä¸­çš„ä½ç½®ã€‚å›¾ä¸­çš„ç®­å¤´è¡¨ç¤ºäº†å•å…ƒä¹‹é—´çš„ä¾èµ–å…³ç³»ä¸å…ˆåé¡ºåºï¼Œ æ•´ä¸ªå›¾è¡¨æŒ‰ç…§è‡ªä¸Šè€Œä¸‹çš„æ—¶é—´é¡ºåºæ‰§è¡Œã€‚</p>
</blockquote>
<pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">local</span><span class="token operator">-</span>fs<span class="token operator">-</span>pre<span class="token punctuation">.</span>target
            <span class="token operator">|</span>
            v
   <span class="token punctuation">(</span>various mounts <span class="token keyword">and</span>   <span class="token punctuation">(</span>various swap   <span class="token punctuation">(</span>various cryptsetup
    fsck services<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>     devices<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>        devices<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>       <span class="token punctuation">(</span>various low<span class="token operator">-</span>level   <span class="token punctuation">(</span>various low<span class="token operator">-</span>level
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>             services<span class="token punctuation">:</span> udevd<span class="token punctuation">,</span>     API VFS mounts<span class="token punctuation">:</span>
            v                  v                  v             tmpfiles<span class="token punctuation">,</span> random     mqueue<span class="token punctuation">,</span> configfs<span class="token punctuation">,</span>
     <span class="token keyword">local</span><span class="token operator">-</span>fs<span class="token punctuation">.</span>target      swap<span class="token punctuation">.</span>target     cryptsetup<span class="token punctuation">.</span>target    seed<span class="token punctuation">,</span> sysctl<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>      debugfs<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                    <span class="token operator">|</span>                    <span class="token operator">|</span>
            \__________________<span class="token operator">|</span>_________________ <span class="token operator">|</span> <span class="token constant">`_______________</span>` <span class="token operator">|</span>____________________<span class="token operator">/</span>
                                                 \<span class="token operator">|/</span>
                                                  v
                                           sysinit<span class="token punctuation">.</span>target
                                                  <span class="token operator">|</span>
             <span class="token constant">`________________________________</span>` <span class="token operator">/|</span>\________________________________________
            <span class="token operator">/</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                    <span class="token operator">|</span>                    \
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                    <span class="token operator">|</span>                    <span class="token operator">|</span>
            v                  v                  <span class="token operator">|</span>                    v                    v
        <span class="token punctuation">(</span>various           <span class="token punctuation">(</span>various               <span class="token operator">|</span>                <span class="token punctuation">(</span>various          rescue<span class="token punctuation">.</span>service
       timers<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>          paths<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>              <span class="token operator">|</span>               sockets<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>               <span class="token operator">|</span>
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                    <span class="token operator">|</span>                    v
            v                  v                  <span class="token operator">|</span>                    v             <span class="token operator">*</span>rescue<span class="token punctuation">.</span>target
      timers<span class="token punctuation">.</span>target      paths<span class="token punctuation">.</span>target             <span class="token operator">|</span>             sockets<span class="token punctuation">.</span>target
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                    <span class="token operator">|</span>
            v                  \_________________ <span class="token operator">|</span> <span class="token constant">`_______________</span>` <span class="token operator">/</span>
                                                 \<span class="token operator">|/</span>
                                                  v
                                            basic<span class="token punctuation">.</span>target
                                                  <span class="token operator">|</span>
             <span class="token constant">`________________________________</span>` <span class="token operator">/|</span>                                 emergency<span class="token punctuation">.</span>service
            <span class="token operator">/</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                                         <span class="token operator">|</span>
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>                                         v
            v                  v                  v                                <span class="token operator">*</span>emergency<span class="token punctuation">.</span>target
        display<span class="token operator">-</span>        <span class="token punctuation">(</span>various system    <span class="token punctuation">(</span>various system
    manager<span class="token punctuation">.</span>service         services           services<span class="token punctuation">)</span>
            <span class="token operator">|</span>             required <span class="token keyword">for</span>            <span class="token operator">|</span>
            <span class="token operator">|</span>            graphical UIs<span class="token punctuation">)</span>           v
            <span class="token operator">|</span>                  <span class="token operator">|</span>          <span class="token operator">*</span>multi<span class="token operator">-</span>user<span class="token punctuation">.</span>target
            <span class="token operator">|</span>                  <span class="token operator">|</span>                  <span class="token operator">|</span>
            \_________________ <span class="token operator">|</span> <span class="token constant">`_____________</span>` <span class="token operator">/</span>
                              \<span class="token operator">|/</span>
                               v
                  <span class="token operator">*</span>graphical<span class="token punctuation">.</span>target
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>systemd æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯ <strong>default.target</strong>ã€‚ä½†å®é™…ä¸Š default.target æ˜¯æŒ‡å‘ <strong>graphical.target</strong> çš„è½¯é“¾æ¥ã€‚Graphical.target çš„å®é™…ä½ç½®æ˜¯ <code>/usr/lib/systemd/system/graphical.target</code>ã€‚</li>
</ul>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">â•­â”€root@ ~
â•°â”€# cat /usr/lib/systemd/system/graphical.target
<span class="token comment">#  This file is part of systemd.</span>
<span class="token comment">#</span>
<span class="token comment">#  systemd is free software; you can redistribute it and/or modify it</span>
<span class="token comment">#  under the terms of the GNU Lesser General Public License as published by</span>
<span class="token comment">#  the Free Software Foundation; either version 2.1 of the License, or</span>
<span class="token comment">#  (at your option) any later version.</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Graphical Interface</span>
<span class="token key attr-name">Documentation</span><span class="token punctuation">=</span><span class="token value attr-value">man:systemd.special(7)</span>
<span class="token key attr-name">Requires</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span>
<span class="token key attr-name">Wants</span><span class="token punctuation">=</span><span class="token value attr-value">display-manager.service</span>
<span class="token key attr-name">Conflicts</span><span class="token punctuation">=</span><span class="token value attr-value">rescue.service rescue.target</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target rescue.service rescue.target display-manager.service</span>
<span class="token key attr-name">AllowIsolate</span><span class="token punctuation">=</span><span class="token value attr-value">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>åœ¨ <strong>default.target</strong> è¿™ä¸ªé˜¶æ®µï¼Œä¼šå¯åŠ¨ <strong>multi-user.target</strong> è€Œè¿™ä¸ª target å°†è‡ªå·±çš„å­å•å…ƒæ”¾åœ¨ç›®å½• <code>/etc/systemd/system/multi-user.target.wants</code> é‡Œã€‚è¿™ä¸ª target ä¸ºå¤šç”¨æˆ·æ”¯æŒè®¾å®šç³»ç»Ÿç¯å¢ƒã€‚é root ç”¨æˆ·ä¼šåœ¨è¿™ä¸ªé˜¶æ®µçš„å¼•å¯¼è¿‡ç¨‹ä¸­å¯ç”¨ã€‚é˜²ç«å¢™ç›¸å…³çš„æœåŠ¡ä¹Ÿä¼šåœ¨è¿™ä¸ªé˜¶æ®µå¯åŠ¨ã€‚<strong>multi-user.target</strong> ä¼šå°†æ§åˆ¶æƒäº¤ç»™å¦ä¸€å±‚ <strong>basic.target</strong>ã€‚</li>
</ul>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">â•­â”€root@docker-230 ~
â•°â”€# cat /usr/lib/systemd/system/multi-user.target
<span class="token comment">#  This file is part of systemd.</span>
<span class="token comment">#</span>
<span class="token comment">#  systemd is free software; you can redistribute it and/or modify it</span>
<span class="token comment">#  under the terms of the GNU Lesser General Public License as published by</span>
<span class="token comment">#  the Free Software Foundation; either version 2.1 of the License, or</span>
<span class="token comment">#  (at your option) any later version.</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Multi-User System</span>
<span class="token key attr-name">Documentation</span><span class="token punctuation">=</span><span class="token value attr-value">man:systemd.special(7)</span>
<span class="token key attr-name">Requires</span><span class="token punctuation">=</span><span class="token value attr-value">basic.target</span>
<span class="token key attr-name">Conflicts</span><span class="token punctuation">=</span><span class="token value attr-value">rescue.service rescue.target</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">basic.target rescue.service rescue.target</span>
<span class="token key attr-name">AllowIsolate</span><span class="token punctuation">=</span><span class="token value attr-value">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>basic.target</strong> å•å…ƒç”¨äºå¯åŠ¨æ™®é€šæœåŠ¡ç‰¹åˆ«æ˜¯å›¾å½¢ç®¡ç†æœåŠ¡ã€‚å®ƒé€šè¿‡ <code>/etc/systemd/system/basic.target.wants</code> ç›®å½•æ¥å†³å®šå“ªäº›æœåŠ¡ä¼šè¢«å¯åŠ¨ï¼Œ<strong>basic.target</strong> ä¹‹åå°†æ§åˆ¶æƒäº¤ç»™ <strong>sysinit.target</strong>.</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@docker-230 ~
â•°â”€<span class="token comment"># tree /etc/systemd/system/multi-user.target.wants</span>
/etc/systemd/system/multi-user.target.wants
â”œâ”€â”€ auditd.service -<span class="token operator">></span> /usr/lib/systemd/system/auditd.service
â”œâ”€â”€ chronyd.service -<span class="token operator">></span> /usr/lib/systemd/system/chronyd.service
â”œâ”€â”€ crond.service -<span class="token operator">></span> /usr/lib/systemd/system/crond.service
â”œâ”€â”€ docker.service -<span class="token operator">></span> /usr/lib/systemd/system/docker.service
â”œâ”€â”€ firewalld.service -<span class="token operator">></span> /usr/lib/systemd/system/firewalld.service
â”œâ”€â”€ gitlab-runsvdir.service -<span class="token operator">></span> /usr/lib/systemd/system/gitlab-runsvdir.service
â”œâ”€â”€ irqbalance.service -<span class="token operator">></span> /usr/lib/systemd/system/irqbalance.service
â”œâ”€â”€ kdump.service -<span class="token operator">></span> /usr/lib/systemd/system/kdump.service
â”œâ”€â”€ NetworkManager.service -<span class="token operator">></span> /usr/lib/systemd/system/NetworkManager.service
â”œâ”€â”€ remote-fs.target -<span class="token operator">></span> /usr/lib/systemd/system/remote-fs.target
â”œâ”€â”€ rhel-configure.service -<span class="token operator">></span> /usr/lib/systemd/system/rhel-configure.service
â”œâ”€â”€ rsyslog.service -<span class="token operator">></span> /usr/lib/systemd/system/rsyslog.service
â”œâ”€â”€ sshd.service -<span class="token operator">></span> /usr/lib/systemd/system/sshd.service
â””â”€â”€ tuned.service -<span class="token operator">></span> /usr/lib/systemd/system/tuned.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>sysinit.target</strong> ä¼šå¯åŠ¨é‡è¦çš„ç³»ç»ŸæœåŠ¡ä¾‹å¦‚ç³»ç»ŸæŒ‚è½½ï¼Œå†…å­˜äº¤æ¢ç©ºé—´å’Œè®¾å¤‡ï¼Œå†…æ ¸è¡¥å……é€‰é¡¹ç­‰ç­‰ã€‚sysinit.target åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šä¼ é€’ç»™ <strong>local-fs.target</strong>ã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@docker-230 ~
â•°â”€<span class="token comment"># tree /etc/systemd/system/basic.target.wants</span>
/etc/systemd/system/basic.target.wants
â”œâ”€â”€ microcode.service -<span class="token operator">></span> /usr/lib/systemd/system/microcode.service
â””â”€â”€ rhel-dmesg.service -<span class="token operator">></span> /usr/lib/systemd/system/rhel-dmesg.service

<span class="token number">0</span> directories, <span class="token number">2</span> files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>local-fs.target</code>ï¼Œè¿™ä¸ª target å•å…ƒä¸ä¼šå¯åŠ¨ç”¨æˆ·ç›¸å…³çš„æœåŠ¡ï¼Œå®ƒåªå¤„ç†åº•å±‚æ ¸å¿ƒæœåŠ¡ã€‚è¿™ä¸ª target ä¼šæ ¹æ® &#x2F;etc&#x2F;fstab å’Œ &#x2F;etc&#x2F;inittab æ¥æ‰§è¡Œç›¸å…³æ“ä½œã€‚</li>
</ul>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">â•­â”€root@docker-230 ~
â•°â”€# cat /usr/lib/systemd/system/sysinit.target
<span class="token comment">#  This file is part of systemd.</span>
<span class="token comment">#</span>
<span class="token comment">#  systemd is free software; you can redistribute it and/or modify it</span>
<span class="token comment">#  under the terms of the GNU Lesser General Public License as published by</span>
<span class="token comment">#  the Free Software Foundation; either version 2.1 of the License, or</span>
<span class="token comment">#  (at your option) any later version.</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">System Initialization</span>
<span class="token key attr-name">Documentation</span><span class="token punctuation">=</span><span class="token value attr-value">man:systemd.special(7)</span>
<span class="token key attr-name">Conflicts</span><span class="token punctuation">=</span><span class="token value attr-value">emergency.service emergency.target</span>
<span class="token key attr-name">Wants</span><span class="token punctuation">=</span><span class="token value attr-value">local-fs.target swap.target</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">local-fs.target swap.target emergency.service emergency.target</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="è¿›ç¨‹æ ‘"><a href="#è¿›ç¨‹æ ‘" class="headerlink" title="è¿›ç¨‹æ ‘"></a>è¿›ç¨‹æ ‘</h3><p>æˆ‘ä»¬ä½¿ç”¨ pstree å‘½ä»¤æ¥çœ‹ä¸€å“ˆè¿›ç¨‹æ ‘çš„çŠ¶æ€ï¼Œç”¨æˆ·ç©ºé—´çš„è¿›ç¨‹éƒ½æŒ‚åœ¨  PID ä¸º 1 çš„ systemd ä¸‹ã€‚ç”± systemd æ¥ç®¡ç†è¿›ç¨‹ä¼˜ç‚¹å¤šå¤š ğŸ˜‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@sg-02 ~
â•°â”€<span class="token comment"># pstree -p</span>
systemd<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>â”€â”¬â”€accounts-daemon<span class="token punctuation">(</span><span class="token number">661</span><span class="token punctuation">)</span>â”€â”¬â”€<span class="token punctuation">&#123;</span>accounts-daemon<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">689</span><span class="token punctuation">)</span>
           â”‚                      â””â”€<span class="token punctuation">&#123;</span>accounts-daemon<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">729</span><span class="token punctuation">)</span>
           â”œâ”€agetty<span class="token punctuation">(</span><span class="token number">971</span><span class="token punctuation">)</span>
           â”œâ”€agetty<span class="token punctuation">(</span><span class="token number">992</span><span class="token punctuation">)</span>
           â”œâ”€aria2c<span class="token punctuation">(</span><span class="token number">1010</span><span class="token punctuation">)</span>
           â”œâ”€atd<span class="token punctuation">(</span><span class="token number">653</span><span class="token punctuation">)</span>
           â”œâ”€containerd<span class="token punctuation">(</span><span class="token number">2915</span><span class="token punctuation">)</span>â”€â”¬â”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2928</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2929</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2930</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2934</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2935</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2950</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2951</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2978</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">5360</span><span class="token punctuation">)</span>
           â”‚                  â””â”€<span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">8299</span><span class="token punctuation">)</span>
           â”œâ”€cron<span class="token punctuation">(</span><span class="token number">639</span><span class="token punctuation">)</span>â”€â”€â”€cron<span class="token punctuation">(</span><span class="token number">20506</span><span class="token punctuation">)</span>â”€â”€â”€sh<span class="token punctuation">(</span><span class="token number">20507</span><span class="token punctuation">)</span>â”€â”€â”€monitor.sh<span class="token punctuation">(</span><span class="token number">20509</span><span class="token punctuation">)</span>â”€â”€â”€ffmpeg<span class="token punctuation">(</span><span class="token number">20514</span><span class="token punctuation">)</span>
           â”œâ”€dbus-daemon<span class="token punctuation">(</span><span class="token number">664</span><span class="token punctuation">)</span>
           â”œâ”€dockerd<span class="token punctuation">(</span><span class="token number">17771</span><span class="token punctuation">)</span>â”€â”¬â”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17783</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17784</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17785</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17791</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17793</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17800</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">17803</span><span class="token punctuation">)</span>
           â”‚                â”œâ”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">3030</span><span class="token punctuation">)</span>
           â”‚                â””â”€<span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">3031</span><span class="token punctuation">)</span>
           â”œâ”€fail2ban-server<span class="token punctuation">(</span><span class="token number">755</span><span class="token punctuation">)</span>â”€â”¬â”€<span class="token punctuation">&#123;</span>fail2ban-server<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">1059</span><span class="token punctuation">)</span>
           â”‚                      â””â”€<span class="token punctuation">&#123;</span>fail2ban-server<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">1060</span><span class="token punctuation">)</span>
           â”œâ”€iscsid<span class="token punctuation">(</span><span class="token number">896</span><span class="token punctuation">)</span>
           â”œâ”€iscsid<span class="token punctuation">(</span><span class="token number">897</span><span class="token punctuation">)</span>
           â”œâ”€lvmetad<span class="token punctuation">(</span><span class="token number">392</span><span class="token punctuation">)</span>
           â”œâ”€networkd-dispat<span class="token punctuation">(</span><span class="token number">622</span><span class="token punctuation">)</span>â”€â”€â”€<span class="token punctuation">&#123;</span>networkd-dispat<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">982</span><span class="token punctuation">)</span>
           â”œâ”€nginx<span class="token punctuation">(</span><span class="token number">3305</span><span class="token punctuation">)</span>â”€â”€â”€nginx<span class="token punctuation">(</span><span class="token number">17700</span><span class="token punctuation">)</span>
           â”œâ”€php-fpm7.2<span class="token punctuation">(</span><span class="token number">7497</span><span class="token punctuation">)</span>â”€â”¬â”€php-fpm7.2<span class="token punctuation">(</span><span class="token number">1295</span><span class="token punctuation">)</span>
           â”‚                  â”œâ”€php-fpm7.2<span class="token punctuation">(</span><span class="token number">1296</span><span class="token punctuation">)</span>
           â”‚                  â””â”€php-fpm7.2<span class="token punctuation">(</span><span class="token number">5611</span><span class="token punctuation">)</span>
           â”œâ”€polkitd<span class="token punctuation">(</span><span class="token number">808</span><span class="token punctuation">)</span>â”€â”¬â”€<span class="token punctuation">&#123;</span>polkitd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">820</span><span class="token punctuation">)</span>
           â”‚              â””â”€<span class="token punctuation">&#123;</span>polkitd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">822</span><span class="token punctuation">)</span>
           â”œâ”€rngd<span class="token punctuation">(</span><span class="token number">981</span><span class="token punctuation">)</span>
           â”œâ”€rpcbind<span class="token punctuation">(</span><span class="token number">7125</span><span class="token punctuation">)</span>
           â”œâ”€rsyslogd<span class="token punctuation">(</span><span class="token number">11567</span><span class="token punctuation">)</span>â”€â”¬â”€<span class="token punctuation">&#123;</span>rsyslogd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">11598</span><span class="token punctuation">)</span>
           â”‚                 â”œâ”€<span class="token punctuation">&#123;</span>rsyslogd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">11599</span><span class="token punctuation">)</span>
           â”‚                 â””â”€<span class="token punctuation">&#123;</span>rsyslogd<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">11600</span><span class="token punctuation">)</span>
           â”œâ”€ss-server<span class="token punctuation">(</span><span class="token number">17126</span><span class="token punctuation">)</span>â”€â”€â”€obfs-server<span class="token punctuation">(</span><span class="token number">17138</span><span class="token punctuation">)</span>
             â”œâ”€sshd<span class="token punctuation">(</span><span class="token number">5357</span><span class="token punctuation">)</span>â”€â”¬â”€sshd<span class="token punctuation">(</span><span class="token number">15490</span><span class="token punctuation">)</span>â”€â”€â”€sshd<span class="token punctuation">(</span><span class="token number">15598</span><span class="token punctuation">)</span>â”€â”€â”€zsh<span class="token punctuation">(</span><span class="token number">15619</span><span class="token punctuation">)</span>â”€â”€â”€pstree<span class="token punctuation">(</span><span class="token number">20539</span><span class="token punctuation">)</span>
           â”‚            â”œâ”€sshd<span class="token punctuation">(</span><span class="token number">20413</span><span class="token punctuation">)</span>â”€â”€â”€sshd<span class="token punctuation">(</span><span class="token number">20414</span><span class="token punctuation">)</span>
           â”‚            â””â”€sshd<span class="token punctuation">(</span><span class="token number">20517</span><span class="token punctuation">)</span>
           â”œâ”€systemd<span class="token punctuation">(</span><span class="token number">5715</span><span class="token punctuation">)</span>â”€â”€â”€<span class="token punctuation">(</span>sd-pam<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5718</span><span class="token punctuation">)</span>
           â”œâ”€systemd-journal<span class="token punctuation">(</span><span class="token number">12866</span><span class="token punctuation">)</span>
           â”œâ”€systemd-logind<span class="token punctuation">(</span><span class="token number">652</span><span class="token punctuation">)</span>
           â”œâ”€systemd-network<span class="token punctuation">(</span><span class="token number">12827</span><span class="token punctuation">)</span>
           â”œâ”€systemd-resolve<span class="token punctuation">(</span><span class="token number">12839</span><span class="token punctuation">)</span>
           â”œâ”€systemd-timesyn<span class="token punctuation">(</span><span class="token number">12852</span><span class="token punctuation">)</span>â”€â”€â”€<span class="token punctuation">&#123;</span>systemd-timesyn<span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">12861</span><span class="token punctuation">)</span>
           â””â”€systemd-udevd<span class="token punctuation">(</span><span class="token number">8171</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="ç®¡ç†-systemd"><a href="#ç®¡ç†-systemd" class="headerlink" title="ç®¡ç† systemd"></a>ç®¡ç† systemd</h2><p>è®²å®Œäº† systemd çš„åŸºç¡€çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥å°±å¼€å§‹åŠ¨æ‰‹å®è·µï¼Œæ§åˆ¶ systemd çš„ä¸»è¦å‘½ä»¤ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>systemctl å‘½ä»¤æ§åˆ¶ <code>systemd</code> çš„ç®¡ç†ç³»ç»Ÿå’ŒæœåŠ¡çš„å‘½ä»¤è¡Œå·¥å…·</li>
<li>systemsdm å‘½ä»¤æ§åˆ¶ <code>systemd</code> çš„ç®¡ç†å’ŒæœåŠ¡çš„å›¾å½¢åŒ–å·¥å…·</li>
<li>journalctl å‘½ä»¤æŸ¥è©¢ <code>systemd</code> æ—¥å¿—ç³»ç»Ÿ</li>
<li>loginctl å‘½ä»¤æ§åˆ¶ <code>systemd</code> ç™»å…¥ç®¡ç†å™¨</li>
<li>systemd-analyze åˆ†æç³»ç»Ÿå¯åŠ¨æ•ˆèƒ½ï¼ˆç±»ä¼¼å¼€æœºæ—¶é—´ï¼Ÿ</li>
</ul>
<h3 id="systemctl-åŸºæœ¬ç”¨æ³•"><a href="#systemctl-åŸºæœ¬ç”¨æ³•" class="headerlink" title="systemctl åŸºæœ¬ç”¨æ³•"></a>systemctl åŸºæœ¬ç”¨æ³•</h3><h4 id="å¯åŠ¨-x2F-é‡å¯-x2F-åœæ­¢æœåŠ¡"><a href="#å¯åŠ¨-x2F-é‡å¯-x2F-åœæ­¢æœåŠ¡" class="headerlink" title="å¯åŠ¨&#x2F;é‡å¯&#x2F;åœæ­¢æœåŠ¡"></a>å¯åŠ¨&#x2F;é‡å¯&#x2F;åœæ­¢æœåŠ¡</h4><ul>
<li><code>systemctl start NAME</code></li>
<li><code>systemctl restart NAME</code></li>
<li><code>systemctl stop NAME</code></li>
</ul>
<h4 id="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"><a href="#æŸ¥çœ‹æœåŠ¡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æœåŠ¡çŠ¶æ€"></a>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</h4><p>å°±å¦‚æ–‡ç« å¼€å¤´æ‰€æåˆ°çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æœ€ä¸‹é¢é‚£ç§å¸¦æ—¶é—´æˆ³çš„æ˜¯è¾“å‡ºçš„æ—¥å¿—</p>
<ul>
<li><code>systemctl status NAME</code></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@blog /home/ubuntu
â•°â”€<span class="token comment"># systemctl status webps                                                                                    130 â†µ</span>
â— webps.service - WebP Server
   Loaded: loaded <span class="token punctuation">(</span>/opt/webps/webps.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Wed <span class="token number">2020</span>-03-18 <span class="token number">13</span>:58:00 UTC<span class="token punctuation">;</span> 22h ago
     Docs: https://github.com/n0vad3v/webp_server_go
 Main PID: <span class="token number">5732</span> <span class="token punctuation">(</span>webp-server<span class="token punctuation">)</span>
    Tasks: <span class="token number">52</span> <span class="token punctuation">(</span>limit: <span class="token number">684</span><span class="token punctuation">)</span>
   Memory: <span class="token number">185</span>.2M
      CPU: 1min <span class="token number">30</span>.092s
   CGroup: /system.slice/webps.service
           â””â”€5732 /opt/webps/webp-server <span class="token parameter variable">--config</span> /opt/webps/config.json

Mar <span class="token number">19</span> 05:23:20 blog webp-server<span class="token punctuation">[</span><span class="token number">5732</span><span class="token punctuation">]</span>: Save to exhaushttps://p.k8s.li/20200109192923891.png.1584538399.webp ok<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="åˆ—å‡ºæ‰€æœ‰å•å…ƒï¼š"><a href="#åˆ—å‡ºæ‰€æœ‰å•å…ƒï¼š" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰å•å…ƒï¼š"></a>åˆ—å‡ºæ‰€æœ‰å•å…ƒï¼š</h4><ul>
<li><code>systemctl list-unit-files</code></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@docker-230 ~
â•°â”€<span class="token comment"># systemctl list-unit-files</span>
UNIT FILE                                     STATE
proc-sys-fs-binfmt_misc.automount             static
dev-hugepages.mount                           static
dev-mqueue.mount                              static<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="åˆ—å‡ºæ¿€æ´»çš„å•å…ƒ"><a href="#åˆ—å‡ºæ¿€æ´»çš„å•å…ƒ" class="headerlink" title="åˆ—å‡ºæ¿€æ´»çš„å•å…ƒ"></a>åˆ—å‡ºæ¿€æ´»çš„å•å…ƒ</h4><ul>
<li><code>systemctl list-units</code> ç­‰åŒäº <code>systemctl</code></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@docker-230 ~
â•°â”€<span class="token comment"># systemctl list-units                                                                                      127 â†µ</span>
  UNIT                                         LOAD   ACTIVE SUB       DESCRIPTION
  proc-sys-fs-binfmt_misc.automount            loaded active waiting   Arbitrary Executable File Formats File System
  sys-devices-pci0000:00-0000:00:15.0-0000:03:00.0-host2-target2:0:0-2:0:0:0-block-sda-sda1.device loaded active plu
  sys-devices-pci0000:00-0000:00:15.0-0000:03:00.0-host2-target2:0:0-2:0:0:0-block-sda-sda2.device loaded active plu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="é‡æ–°è½½å…¥-systemdï¼Œæ‰«ææ–°çš„æˆ–æœ‰å˜åŠ¨çš„å•å…ƒï¼š"><a href="#é‡æ–°è½½å…¥-systemdï¼Œæ‰«ææ–°çš„æˆ–æœ‰å˜åŠ¨çš„å•å…ƒï¼š" class="headerlink" title="é‡æ–°è½½å…¥ systemdï¼Œæ‰«ææ–°çš„æˆ–æœ‰å˜åŠ¨çš„å•å…ƒï¼š"></a>é‡æ–°è½½å…¥ systemdï¼Œæ‰«ææ–°çš„æˆ–æœ‰å˜åŠ¨çš„å•å…ƒï¼š</h4><p>å½“å‘ systemd çš„ç›®å½•ä¸­æ·»åŠ æ˜¾å¾— unit æ–‡ä»¶åéœ€è¦ reload ä¸€ä¸‹æ‰èƒ½ç”Ÿæ•ˆ</p>
<ul>
<li><code>systemctl daemon-reload</code></li>
</ul>
<h4 id="æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨"><a href="#æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨" class="headerlink" title="æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨"></a>æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨</h4><ul>
<li><code>systemctl is-enabled crond</code></li>
</ul>
<h4 id="è®¾ç½®-x2F-å–æ¶ˆæœåŠ¡å¼€æœºè‡ªå¯"><a href="#è®¾ç½®-x2F-å–æ¶ˆæœåŠ¡å¼€æœºè‡ªå¯" class="headerlink" title="è®¾ç½®&#x2F;å–æ¶ˆæœåŠ¡å¼€æœºè‡ªå¯"></a>è®¾ç½®&#x2F;å–æ¶ˆæœåŠ¡å¼€æœºè‡ªå¯</h4><ul>
<li><code>systemctl enable NAME</code></li>
<li><code>systemctl disable NAME</code></li>
</ul>
<h4 id="è¿œç¨‹æ§åˆ¶å…¶ä»–æœåŠ¡å™¨çš„-systemd"><a href="#è¿œç¨‹æ§åˆ¶å…¶ä»–æœåŠ¡å™¨çš„-systemd" class="headerlink" title="è¿œç¨‹æ§åˆ¶å…¶ä»–æœåŠ¡å™¨çš„ systemd"></a>è¿œç¨‹æ§åˆ¶å…¶ä»–æœåŠ¡å™¨çš„ systemd</h4><p><code>systemctl</code> å‚æ•°ä¸­æ·»åŠ  <code>-H &lt;ç”¨æˆ·å&gt;@&lt;ä¸»æœºå&gt;</code> å¯ä»¥å®ç°å¯¹å…¶ä»–æœºå™¨çš„è¿œç¨‹æ§åˆ¶ï¼Œè¯¥åŠŸèƒ½ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/SSH_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">SSH</a> è¿æ¥ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@blog /home/ubuntu
â•°â”€<span class="token comment"># systemctl status nginx -H sg2</span>
â— nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded <span class="token punctuation">(</span>/lib/systemd/system/nginx.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Mon <span class="token number">2020</span>-02-17 08:41:11 UTC<span class="token punctuation">;</span> <span class="token number">1</span> months <span class="token number">0</span> days ago
     Docs: man:nginx<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">3305</span>
    Tasks: <span class="token number">2</span> <span class="token punctuation">(</span>limit: <span class="token number">1152</span><span class="token punctuation">)</span>
   CGroup: /system.slice/nginx.service
           â”œâ”€ <span class="token number">3305</span> nginx: master process /usr/sbin/nginx <span class="token parameter variable">-g</span> daemon on<span class="token punctuation">;</span> master_process on<span class="token punctuation">;</span>
           â””â”€17700 nginx: worker process<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ä½¿ç”¨-systemctl-å‘½ä»¤æ€æ­»æœåŠ¡"><a href="#ä½¿ç”¨-systemctl-å‘½ä»¤æ€æ­»æœåŠ¡" class="headerlink" title="ä½¿ç”¨ systemctl å‘½ä»¤æ€æ­»æœåŠ¡"></a>ä½¿ç”¨ systemctl å‘½ä»¤æ€æ­»æœåŠ¡</h4><ul>
<li><code>systemctl kill NAME</code></li>
</ul>
<h3 id="journal"><a href="#journal" class="headerlink" title="journal"></a>journal</h3><p>systemd çš„ç¬¬äºŒä¸ªä¸»è¦éƒ¨åˆ†æ˜¯ journal æ—¥å¿—ç³»ç»Ÿï¼Œç±»ä¼¼äº syslog ä½†ä¹Ÿæœ‰äº›æ˜¾è‘—åŒºåˆ«ã€‚å¦‚æœä½ å–œæ¬¢ç”¨ <code>sed ã€grep ã€awk</code> ä¸‰å‰‘å®¢æ¥å¤„ç†æ—¥å¿—ï¼Œé‚£ä¹ˆå½“ä½ é¢å¯¹ journal æ—¥å¿—ç³»ç»Ÿçš„æ—¶å€™ä½ å°±å‡†å¤‡<strong>æ€æ¡Œå„¿</strong>å§ï¼å› ä¸ºè¿™æ˜¯ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ï¼Œæ— æ³•ä½¿ç”¨å¸¸è§„çš„å‘½ä»¤è¡Œæ–‡æœ¬å¤„ç†å·¥å…·æ¥è§£æå®ƒ ğŸ˜‚</p>
<h3 id="systemd-analyze"><a href="#systemd-analyze" class="headerlink" title="systemd-analyze"></a>systemd-analyze</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@docker-230 ~
â•°â”€<span class="token comment"># systemd-analyze</span>
Startup finished <span class="token keyword">in</span> 489ms <span class="token punctuation">(</span>kernel<span class="token punctuation">)</span> + <span class="token number">1</span>.547s <span class="token punctuation">(</span>initrd<span class="token punctuation">)</span> + <span class="token number">10</span>.333s <span class="token punctuation">(</span>userspace<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">12</span>.369s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="æ¨è-x2F-å‚è€ƒ"><a href="#æ¨è-x2F-å‚è€ƒ" class="headerlink" title="æ¨è&#x2F;å‚è€ƒ"></a>æ¨è&#x2F;å‚è€ƒ</h2><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/systemd/systemd">github.com&#x2F;systemd&#x2F;systemd</a></li>
<li><a target="_blank" rel="noopener" href="https://systemd.io/">systemd.io</a></li>
</ul>
<h3 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h3><ul>
<li><a target="_blank" rel="noopener" href="http://www.jinbuguo.com/systemd/systemd.exec.html">systemd.exec ä¸­æ–‡æ‰‹å†Œ</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">systemd (ç®€ä½“ä¸­æ–‡)</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.debian.org/systemd">wiki.debian.org&#x2F;systemd</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/doc/manuals/debian-reference/ch03.zh-tw.html">ç¬¬ 3 ç«  ç³»çµ±åˆå§‹åŒ–</a></li>
<li><a target="_blank" rel="noopener" href="https://openwrt.org/docs/techref/architecture">OpenWrt â€“ operating system architecture</a></li>
<li><a target="_blank" rel="noopener" href="http://manpages.ubuntu.com/manpages/cosmic/zh_CN/man7/bootup.7.html">bootup - ç³»ç»Ÿå¯åŠ¨æµç¨‹</a></li>
<li><a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/chap-managing_services_with_systemd">CHAPTER 10. MANAGING SERVICES WITH SYSTEMD</a></li>
</ul>
<h3 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h3><ul>
<li><a target="_blank" rel="noopener" href="https://coolshell.cn/articles/17998.html">LINUX PID 1 å’Œ SYSTEMD</a> è€—å­çš„åšå®¢ï¼Œå¿…é¡»å¢™è£‚æ¨èé˜…è¯»å“ˆï¼Œå…¶ä»–çš„å¯ä»¥ä¸è¯»ï¼Œä½†è¿™ä¸€ç¯‡åšå®¢å¿…é¡»è¦è¯»å“¦ ï¼šï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://lp007819.wordpress.com/2015/01/11/systemd%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/">systemd çš„ä¸€äº›æ€»ç»“</a></li>
<li><a target="_blank" rel="noopener" href="https://linux.cn/article-5457-1.html">èµ°è¿› Linux ä¹‹ systemd å¯åŠ¨è¿‡ç¨‹</a></li>
<li><a target="_blank" rel="noopener" href="https://hotttao.github.io/2018/08/03/linux_mt/14-Linux%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%8F%8A%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86/CentOS7-Systemd%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">13.3 Centos7 Systemd å¯åŠ¨æµç¨‹</a></li>
<li><a target="_blank" rel="noopener" href="https://www.itwire.com/business-it-news/open-source/65402-torvalds-says-he-has-no-strong-opinions-on-systemd">Torvalds says he has no strong opinions on systemd</a></li>
<li><a target="_blank" rel="noopener" href="http://0pointer.de/blog/projects/systemd.html">Rethinking PID 1</a></li>
<li><a target="_blank" rel="noopener" href="http://0pointer.de/blog/projects/the-biggest-myths.html">The Biggest Myths</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bennythink.com/linux-keep-running.html">Linux æ€ä¹ˆè®©ç¨‹åºæŒç»­è¿è¡Œï¼šç®€å•è¯´è¯´å‡ ç§å¥½ç©çš„åŠæ³•</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bennythink.com/systemd-accounting.html">systemd â€“ systemctl ä¸æ˜¾ç¤ºå†…å­˜ CPU ä¿¡æ¯</a></li>
<li><a target="_blank" rel="noopener" href="https://lp007819.wordpress.com/2015/01/17/systemd-journal-%E4%BB%8B%E7%BB%8D/">systemd journal ä»‹ç»</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.lujun9972.win/blog/2018/08/08/%E4%BD%BF%E7%94%A8journalctl%E6%9F%A5%E7%9C%8Bsystemd%E6%97%A5%E5%BF%97/index.html">ä½¿ç”¨ journalctl æŸ¥çœ‹ systemd æ—¥å¿—</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.lujun9972.win/blog/2019/11/30/%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E6%84%8F%E5%A4%96%E9%87%8D%E5%90%AFlinux(%E5%9F%BA%E4%BA%8Esystemd)/index.html">å¦‚ä½•é˜²æ­¢æ„å¤–é‡å¯ Linux(åŸºäº systemd)</a></li>
</ul>

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/blog/" rel="tag"># blog</a>
              <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"># ç¬”è®°</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/N1-openwrt.html" rel="prev" title="N1 ç›’å­åˆ·å…¥ OpenWrt å¹¶éƒ¨ç½² K3s">
                  <i class="fa fa-chevron-left"></i> N1 ç›’å­åˆ·å…¥ OpenWrt å¹¶éƒ¨ç½² K3s
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/cloudflare-worker-build-mirror-website.html" rel="next" title="ä½¿ç”¨ CloudFlare WorkersÂ æ­å»º telegram é¢‘é“é•œåƒç«™">
                  ä½¿ç”¨ CloudFlare WorkersÂ æ­å»º telegram é¢‘é“é•œåƒç«™ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Reimu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">26:45</span>
  </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"muzi","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
