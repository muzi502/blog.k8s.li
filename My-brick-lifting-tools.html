<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="rgba(0,0,0,0)"><meta name="generator" content="Hexo 6.1.0">

<link rel="preconnect" href="//fonts.loli.net" crossorigin>
<link rel="preconnect" href="null//null" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="rgba(0,0,0,0)">
  <link rel="manifest" href="/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-atom.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.k8s.li","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="咕咕咕本来打算上上周就该更新完的这篇博文，但最近因为离职的事宜拖到今天晚上才捡起来，最终还是咕咕咕了 😂。虽然文章还未补充完，等到以后再继续更新上吧。 Linux确切地来讲 Linux 仅仅是一个操作系统的内核，而且它的代码在一个发行版中的占用率也不到 20%。 入门咱一直觉着学习技术吧，并不是看书看视频能学会的。对于一些底层的只是确实需要仔细研读书籍来吃透他，这趟会让我们对操作系统这个体系结构">
<meta property="og:type" content="blog">
<meta property="og:title" content="木子的搬砖工具😂">
<meta property="og:url" content="https://blog.k8s.li/My-brick-lifting-tools.html">
<meta property="og:site_name" content="Reimu&#39;s blog">
<meta property="og:description" content="咕咕咕本来打算上上周就该更新完的这篇博文，但最近因为离职的事宜拖到今天晚上才捡起来，最终还是咕咕咕了 😂。虽然文章还未补充完，等到以后再继续更新上吧。 Linux确切地来讲 Linux 仅仅是一个操作系统的内核，而且它的代码在一个发行版中的占用率也不到 20%。 入门咱一直觉着学习技术吧，并不是看书看视频能学会的。对于一些底层的只是确实需要仔细研读书籍来吃透他，这趟会让我们对操作系统这个体系结构">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p.k8s.li/20200506142544440.png">
<meta property="og:image" content="https://p.k8s.li/20200506151706148.png">
<meta property="og:image" content="https://p.k8s.li/20200506143310955.png">
<meta property="og:image" content="https://p.k8s.li/20200506154459952.png">
<meta property="article:published_time" content="2020-05-21T16:00:00.000Z">
<meta property="article:modified_time" content="2022-05-02T00:41:22.134Z">
<meta property="article:author" content="Reimu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="搬砖">
<meta property="article:tag" content="工具">
<meta property="article:tag" content="命令行">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p.k8s.li/20200506142544440.png">


<link rel="canonical" href="https://blog.k8s.li/My-brick-lifting-tools.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.k8s.li/My-brick-lifting-tools.html","path":"My-brick-lifting-tools.html","title":"木子的搬砖工具😂"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>木子的搬砖工具😂 | Reimu's blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Reimu's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Reimu's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-books"><a href="https://reading.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>Books</a></li><li class="menu-item menu-item-kindle"><a href="https://kindle.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-swatchbook fa-fw"></i>Kindle</a></li><li class="menu-item menu-item-friend"><a href="/friends.html" rel="section"><i class="fa fa-link fa-fw"></i>Friend</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%92%95%E5%92%95%E5%92%95"><span class="nav-number">1.</span> <span class="nav-text">咕咕咕</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux"><span class="nav-number">2.</span> <span class="nav-text">Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-number">2.1.</span> <span class="nav-text">入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%BE%E5%BC%83"><span class="nav-number">2.2.</span> <span class="nav-text">放弃</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E8%A1%8C%E7%89%88"><span class="nav-number">2.3.</span> <span class="nav-text">发行版</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7"><span class="nav-number">3.</span> <span class="nav-text">命令行工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-number">3.1.</span> <span class="nav-text">文本处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="nav-number">3.2.</span> <span class="nav-text">系统信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bashtop"><span class="nav-number">3.3.</span> <span class="nav-text">bashtop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ls-%E5%85%84%E5%BC%9F%E4%BB%AC"><span class="nav-number">3.4.</span> <span class="nav-text">ls 兄弟们</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#proc"><span class="nav-number">3.5.</span> <span class="nav-text">proc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C"><span class="nav-number">3.6.</span> <span class="nav-text">网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">3.7.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E5%B7%A5%E5%85%B7"><span class="nav-number">3.8.</span> <span class="nav-text">小工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E6%BA%90"><span class="nav-number">3.9.</span> <span class="nav-text">镜像源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E8%A1%8C%E7%89%88-1"><span class="nav-number">4.</span> <span class="nav-text">发行版</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pxder"><span class="nav-number">4.1.</span> <span class="nav-text">pxder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84"><span class="nav-number">4.2.</span> <span class="nav-text">杂七杂八的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell-%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC"><span class="nav-number">4.3.</span> <span class="nav-text">shell 常用脚本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">5.</span> <span class="nav-text">参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Reimu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Reimu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">115</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">147</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:muzi502.li@gmail.com" title="E-Mail → mailto:muzi502.li@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi502" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa-brands fa-telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa-solid fa-square-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/My-brick-lifting-tools.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Reimu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Reimu's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="木子的搬砖工具😂 | Reimu's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          木子的搬砖工具😂
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-05-22 2020-05-22T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2020-05-22T00:00:00+08:00">2020-05-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-02 2022-05-02T08:41:22+08:00" itemprop="dateModified" datetime="2022-05-02T08:41:22+08:00">2022-05-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/My-brick-lifting-tools.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="My-brick-lifting-tools.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>43k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>39 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="咕咕咕"><a href="#咕咕咕" class="headerlink" title="咕咕咕"></a>咕咕咕</h2><p>本来打算上上周就该更新完的这篇博文，但最近因为离职的事宜拖到今天晚上才捡起来，最终还是咕咕咕了 😂。虽然文章还未补充完，等到以后再继续更新上吧。</p>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>确切地来讲 Linux 仅仅是一个操作系统的内核，而且它的代码在一个发行版中的占用率也不到 20%。</p>
<h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>咱一直觉着学习技术吧，并不是看书看视频能学会的。对于一些底层的只是确实需要仔细研读书籍来吃透他，这趟会让我们对操作系统这个体系结构有更下透彻的认识。但是呢，光看不练还是不行滴，咱学习 Linux 纯靠瞎玩，瞎折腾。咱大学时学校没有开设 Linux 课程，只能靠自己自学。于是乎，和大家一样，搭建 WordPress ，一步步安装 LAMP 环境，配置 iptables，写 shell 脚本备份网站，搭建梯子等等。可谓是玩得不亦乐乎 😂。</p>
<p>所以说学习和入门 Linux 咱还是推荐鸟哥的《鸟哥 Linux 私房菜》这本书，结合着自己搭建网站一步步来就可以。</p>
<h3 id="放弃"><a href="#放弃" class="headerlink" title="放弃"></a>放弃</h3><p>入门完 Linux 之后就开始挑战高难度的啦，比如：</p>
<ul>
<li>OpenStack</li>
<li>Docker</li>
<li>Kubernetes</li>
<li>CI&#x2F;CD</li>
</ul>
<p>目前来讲在运维这个搬砖行业，kubernetes 云原生无疑是最具有挑战性和前景的，所以如果汝想更近一层楼就不妨学习一下 Docker 和 Kuberneets 这一块。</p>
<h3 id="发行版"><a href="#发行版" class="headerlink" title="发行版"></a>发行版</h3><p>从运维这个搬砖行业来讲，企业内部使用的 Linux 发行版当属 RedHat 和 Debian 家族的最多，像其他的什么 archlinux 咱还真没见过有在生产环境使用的，毕竟滚动更新不小心就滚挂了不好说 😂。国内企业和云计算厂商使用最多的当然是 CentOS 啦，我记得是在 2018 年年末的时候阿里云&#x2F;腾讯云还没有 Ubuntu 1804 的云主机可用 😑。国外使用 Ubuntu 的较多一些，咱是倾向于使用 Ubuntu 😝</p>
<p>从 <a target="_blank" rel="noopener" href="https://www.datanyze.com/">datanyze</a> 家偷来一张企业 Linux 市场占有率的统计表格 <a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443">Operating Systems</a>😂</p>
<table>
<thead>
<tr>
<th align="center">Ranking</th>
<th align="left">Technology</th>
<th align="right">Domains</th>
<th align="right">Market Share</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/ubuntu-market-share">Ubuntu</a></td>
<td align="right">278,611</td>
<td align="right">29.30%</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/unix-market-share">Unix</a></td>
<td align="right">192,215</td>
<td align="right">20.21%</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/centos-market-share">CentOS</a></td>
<td align="right">165,640</td>
<td align="right">17.42%</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/debian-market-share">Debian</a></td>
<td align="right">108,373</td>
<td align="right">11.40%</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-market-share">Linux</a></td>
<td align="right">24,563</td>
<td align="right">2.58%</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-server-market-share">Windows Server</a></td>
<td align="right">23,872</td>
<td align="right">2.51%</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/gentoo-market-share">Gentoo</a></td>
<td align="right">16,756</td>
<td align="right">1.76%</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/red-hat-enterprise-linux-market-share">Red Hat Enterprise Linux</a></td>
<td align="right">13,659</td>
<td align="right">1.44%</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-7-market-share">Windows 7</a></td>
<td align="right">11,843</td>
<td align="right">1.25%</td>
</tr>
<tr>
<td align="center">10</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/microsoft-windows-os-market-share">Microsoft Windows OS</a></td>
<td align="right">10,986</td>
<td align="right">1.16%</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">op Competitors</th>
<th align="right">Websites</th>
<th align="right">Market Share</th>
<th align="right">Versus Page</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/ubuntu-market-share">Ubuntu</a></td>
<td align="right">278,611</td>
<td align="right">29.30%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-ubuntu">Linux vs. Ubuntu</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/unix-market-share">Unix</a></td>
<td align="right">192,215</td>
<td align="right">20.21%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-unix">Linux vs. Unix</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/centos-market-share">CentOS</a></td>
<td align="right">165,640</td>
<td align="right">17.42%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-centos">Linux vs. CentOS</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/debian-market-share">Debian</a></td>
<td align="right">108,373</td>
<td align="right">11.40%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-debian">Linux vs. Debian</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-server-market-share">Windows Server</a></td>
<td align="right">23,872</td>
<td align="right">2.51%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-windows-server">Linux vs. Windows Server</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/gentoo-market-share">Gentoo</a></td>
<td align="right">16,756</td>
<td align="right">1.76%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-gentoo">Linux vs. Gentoo</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/red-hat-enterprise-linux-market-share">Red Hat Enterprise Linux</a></td>
<td align="right">13,659</td>
<td align="right">1.44%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-red-hat-enterprise-linux">Linux vs. Red Hat Enterprise Linux</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-7-market-share">Windows 7</a></td>
<td align="right">11,843</td>
<td align="right">1.25%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-windows-7">Linux vs. Windows 7</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/microsoft-windows-os-market-share">Microsoft Windows OS</a></td>
<td align="right">10,986</td>
<td align="right">1.16%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-microsoft-windows-os">Linux vs. Microsoft Windows OS</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/freebsd-market-share">FreeBSD</a></td>
<td align="right">9,633</td>
<td align="right">1.01%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-freebsd">Linux vs. FreeBSD</a></td>
</tr>
</tbody></table>
<h4 id="RedHat-x2F-CentOS"><a href="#RedHat-x2F-CentOS" class="headerlink" title="RedHat&#x2F;CentOS"></a>RedHat&#x2F;CentOS</h4><h4 id="Debian-x2F-Ubuntu"><a href="#Debian-x2F-Ubuntu" class="headerlink" title="Debian&#x2F;Ubuntu"></a>Debian&#x2F;Ubuntu</h4><p>咱的 VPS 清一色 Ubuntu 1804 ，主要是省事儿。</p>
<h2 id="命令行工具"><a href="#命令行工具" class="headerlink" title="命令行工具"></a>命令行工具</h2><h3 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h3><p>提到 Linux 上的文本处理工具当然是离不开三剑客（awk、grep、sed），这也是咱当初跟着《鸟哥 Linux 私房菜》学来的 😂。</p>
<h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><h4 id="jq"><a href="#jq" class="headerlink" title="jq"></a>jq</h4><h4 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h4><h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><h3 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h3><h4 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h4><p>top 黑乎乎的颜值太低了，咱还是喜欢花花绿绿的 htop （大雾</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> <span class="token function">htop</span>

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> <span class="token function">htop</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200506142544440.png"></p>
<h3 id="bashtop"><a href="#bashtop" class="headerlink" title="bashtop"></a><a target="_blank" rel="noopener" href="https://github.com/aristocratos/bashtop">bashtop</a></h3><p>bashtop 相比于 htop 有种吊炸天的感觉，炫酷无比 😄</p>
<ul>
<li>install</li>
</ul>
<p>安装起来很简单，其实这是一个 shell 可执行文件，直接使用 curl 或者 wget 命令下载到本地并赋予 +x 权限即可。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/aristocratos/bashtop/master/bashtop -o /usr/bin/bashtop <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x /usr/bin/bashtop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>国内用户推荐使用 jsdelivr.net 的 CDN 来下载该脚本 😑，（fuck GFW by jsdelivr😡</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -fsSL https://cdn.jsdelivr.net/gh/aristocratos/bashtop/bashtop  -o /usr/bin/bashtop <span class="token punctuation">;</span><span class="token function">chmod</span> +x /usr/bin/bashtop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200506151706148.png"></p>
<h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><p>以树状图的方式展现进程之间的派生关系，显示效果比 ps 更直观一些，可以很清楚地分辨出子进程和父进程之间的关系。可以用来排查一些孤儿进程。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> psmisc

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> psmisc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@k8s-node-3 /proc
╰─<span class="token comment"># pstree</span>
systemd─┬─agetty
        ├─auditd───<span class="token punctuation">&#123;</span>auditd<span class="token punctuation">&#125;</span>
        ├─containerd─┬─6*<span class="token punctuation">[</span>containerd-shim─┬─pause<span class="token punctuation">]</span>
        │            │                    └─9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─kube-proxy───12*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>kube-proxy<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─4*<span class="token punctuation">[</span>containerd-shim─┬─pause<span class="token punctuation">]</span>
        │            │                    └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─lvscare───11*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>lvscare<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─agent───10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>agent<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─runsvdir─┬─runsv───bird6
        │            │                 │          ├─runsv───calico-node───18*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>calico-node<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 │          ├─runsv───calico-node───15*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>calico-node<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 │          └─runsv───bird
        │            │                 └─12*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─node_exporter───4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>node_exporter<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─nginx-proxy─┬─confd───11*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>confd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 │             └─nginx───nginx
        │            │                 └─9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─deploy.sh───sleep
        │            │                 └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─nginx-ingress─┬─nginx───4*<span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
        │            │                 │               └─14*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>nginx-ingress<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─configmap-reloa───4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>configmap-reloa<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─bash
        │            │                 └─9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            ├─containerd-shim─┬─ruby2.3─┬─ruby2.3───4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>ruby2.3<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 │         └─11*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>ruby2.3<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            │                 └─10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        │            └─46*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        ├─crond
        ├─dbus-daemon───<span class="token punctuation">&#123;</span>dbus-daemon<span class="token punctuation">&#125;</span>
        ├─dockerd───25*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        ├─gssproxy───5*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>gssproxy<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        ├─irqbalance
        ├─kubelet───26*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>kubelet<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        ├─lvmetad
        ├─polkitd───6*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>polkitd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        ├─rpc.idmapd
        ├─rpc.mountd
        ├─rpc.statd
        ├─rpcbind
        ├─rsyslogd───2*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>rsyslogd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        ├─sshd───sshd───zsh───pstree
        ├─systemd-journal
        ├─systemd-logind
        ├─systemd-udevd
        └─tuned───4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>tuned<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>可以看到 init 进程 systemd 为系统的 PID 1 号进程，所有的进程都在 systemd 的管理之下。</li>
<li>在运行 docker 的服务器上，容器进程的父进程并不是 dockerd 这个守护进程，而是一个名为　<code>containerd-shim-$&#123;container_name&#125;</code>　而 containerd-shim 的父进程为容器运行时 <a target="_blank" rel="noopener" href="https://containerd.io/">containerd</a>，docker 是通过 gRPC 协议与 containerd 进程通信来，以此来进行管理所运行的容器。关于容器运行时的关系可以参考 <a target="_blank" rel="noopener" href="https://xuanwo.io/2019/08/06/oci-intro/">开放容器标准(OCI) 内部分享</a>，当时理解 dockerd 、containerd、containerd-shim 这些关系时感觉有点绕，不过用 pstree 命令看一下进程树结构就一目了然了 😂，对理解进程之间的关系很有帮助。</li>
</ul>
<h4 id="ncdu"><a href="#ncdu" class="headerlink" title="ncdu"></a>ncdu</h4><p>面试的时候被问道过 <code>Linux 下如何查看文件见大小？</code>，当然是 <code>du -sh</code> 啦 😂。不过咱还是喜欢用 ncdu</p>
<p>使用 <code>ncdu</code> 的好处就是可以通过交互式的方式查看目录占用空间的大小，要比 <code>du -sh</code> 命令方便很多，不过缺点也有，就是该命令为扫描目标目录下的所有文件，很耗时！如果想要立即查看一下目录占用的大小，还是用 <code>du -sh</code> 最方便，使用 ncdu 可以帮助我们分析文件夹下各个文件占用的情况。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> ncdu

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> ncdu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<p>使用反向键和回车键进行目录奇幻，很方便的说 😂</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ncdu <span class="token number">1.13</span> ~ Use the arrow keys to navigate, press ? <span class="token keyword">for</span> <span class="token builtin class-name">help</span>
--- / ------------
    <span class="token number">5.2</span> GiB <span class="token punctuation">[</span><span class="token comment">##########] /var</span>
    <span class="token number">2.2</span> GiB <span class="token punctuation">[</span><span class="token comment">####      ] /opt</span>
    <span class="token number">2.0</span> GiB <span class="token punctuation">[</span><span class="token comment">###       ] /usr</span>
  <span class="token number">363.6</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /root
	<span class="token number">45.8</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /boot
	<span class="token number">45.2</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /run
	 <span class="token number">4.6</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /etc
	<span class="token number">44.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /tmp
	<span class="token number">24.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /home
e  <span class="token number">16.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /lost+found
	 <span class="token number">8.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /media
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /srv
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /mnt
<span class="token builtin class-name">.</span>   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /proc
	 <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /sys
	 <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /dev
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  initrd.img.old
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  initrd.img
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  vmlinuz.old
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  vmlinuz
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  libx32
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  lib64
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  lib32
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  sbin

ncdu <span class="token number">1.13</span> ~ Use the arrow keys to navigate, press ? <span class="token keyword">for</span> <span class="token builtin class-name">help</span>
--- /var --------------
	 <span class="token number">3.5</span> GiB <span class="token punctuation">[</span><span class="token comment">##########] /lib</span>
	 <span class="token number">1.4</span> GiB <span class="token punctuation">[</span><span class="token comment">####      ] /opt</span>
  <span class="token number">156.9</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /cache
	<span class="token number">79.6</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /log
	 <span class="token number">1.8</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /backups
	<span class="token number">20.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /tmp
	<span class="token number">16.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /spool
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /mail
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /local
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  lock
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  run<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>G&#x2F;GB</li>
</ul>
<blockquote>
<p>The SIZE argument is an integer and optional unit (example: 10K is 10*1024). Units are K,M,G,T,P,E,Z,Y (powers of 1024) or KB,MB,… (powers of 1000).</p>
</blockquote>
<h4 id="nload"><a href="#nload" class="headerlink" title="nload"></a>nload</h4><p>nload 命令是一个实时监控网络流量和带宽使用的控制台应用程序，使用两个图表可视化地展示接收和发送的流量，并提供诸如数据交换总量、最小&#x2F;最大网络带宽使用量等附加信息。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> nload

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> nload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<p>按下回车键可以切换不同的网卡</p>
<p><img data-src="https://p.k8s.li/20200506143310955.png"></p>
<h3 id="ls-兄弟们"><a href="#ls-兄弟们" class="headerlink" title="ls 兄弟们"></a>ls 兄弟们</h3><p>以 ls 开头的命令大多都是列出 XX 信息，这些工具也可以方便我们快速了解一下目前系统的状态。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># ls</span>
<span class="token function">ls</span>           lsblk        <span class="token environment constant">LS_COLORS</span>    lsinitramfs  lslogins     lsns         lspgpot
lsa          lsb_release  lscpu        lsipc        lsmem        <span class="token function">lsof</span>
lsattr       LSCOLORS     lshw         lslocks      lsmod        lspci<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h4><blockquote>
<p>ls - list directory contents 列出文件夹内容</p>
</blockquote>
<h4 id="lsattr"><a href="#lsattr" class="headerlink" title="lsattr"></a>lsattr</h4><blockquote>
<p>lsattr - list file attributes on a Linux second extended file system</p>
</blockquote>
<p>列出文件的属性，</p>
<h4 id="lsblk"><a href="#lsblk" class="headerlink" title="lsblk"></a>lsblk</h4><blockquote>
<p>lsblk - list block devices 列出块设备</p>
</blockquote>
<p>这个命令在查看块设备（磁盘) 分区和挂载点，以及磁盘尚未分配的空间信息很有帮助，要比 fdisk 更直观一些。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lsblk</span>
NAME                      MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
sda                         <span class="token number">8</span>:0    <span class="token number">0</span>  30G  <span class="token number">0</span> disk
├─sda1                      <span class="token number">8</span>:1    <span class="token number">0</span>   1M  <span class="token number">0</span> part
├─sda2                      <span class="token number">8</span>:2    <span class="token number">0</span>   1G  <span class="token number">0</span> part /boot
└─sda3                      <span class="token number">8</span>:3    <span class="token number">0</span>  29G  <span class="token number">0</span> part
  └─ubuntu--vg-ubuntu--lv <span class="token number">253</span>:0    <span class="token number">0</span>  28G  <span class="token number">0</span> lvm  /<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsb-release"><a href="#lsb-release" class="headerlink" title="lsb_release"></a>lsb_release</h4><blockquote>
<p>lsb_release - print distribution-specific information 打印发行版详情</p>
</blockquote>
<p>有些发行版尚未安装</p>
<h4 id="lscpu"><a href="#lscpu" class="headerlink" title="lscpu"></a>lscpu</h4><blockquote>
<p>lscpu - display information about the CPU architecture</p>
</blockquote>
<p>列出 CPU 的信息，和 cat &#x2F;proc&#x2F;cpuinfo 输出结果类似。相当于 Linux 下的 CPU-Z 😂</p>
<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">╭─root@gitlab /opt
╰─<span class="token comment"># lscpu</span>
<span class="token key atrule">Architecture</span><span class="token punctuation">:</span>        x86_64
<span class="token key atrule">CPU op-mode(s)</span><span class="token punctuation">:</span>      32<span class="token punctuation">-</span>bit<span class="token punctuation">,</span> 64<span class="token punctuation">-</span>bit
<span class="token key atrule">Byte Order</span><span class="token punctuation">:</span>          Little Endian
<span class="token key atrule">CPU(s)</span><span class="token punctuation">:</span>              <span class="token number">4</span>
<span class="token key atrule">On-line CPU(s) list</span><span class="token punctuation">:</span> 0<span class="token punctuation">-</span><span class="token number">3</span>
<span class="token key atrule">Thread(s) per core</span><span class="token punctuation">:</span>  <span class="token number">1</span>
<span class="token key atrule">Core(s) per socket</span><span class="token punctuation">:</span>  <span class="token number">1</span>
<span class="token key atrule">Socket(s)</span><span class="token punctuation">:</span>           <span class="token number">4</span>
<span class="token key atrule">NUMA node(s)</span><span class="token punctuation">:</span>        <span class="token number">1</span>
<span class="token key atrule">Vendor ID</span><span class="token punctuation">:</span>           GenuineIntel
<span class="token key atrule">CPU family</span><span class="token punctuation">:</span>          <span class="token number">6</span>
<span class="token key atrule">Model</span><span class="token punctuation">:</span>               <span class="token number">60</span>
<span class="token key atrule">Model name</span><span class="token punctuation">:</span>          Intel(R) Xeon(R) CPU E3<span class="token punctuation">-</span>1271 v3 @ 3.60GHz
<span class="token key atrule">Stepping</span><span class="token punctuation">:</span>            <span class="token number">3</span>
<span class="token key atrule">CPU MHz</span><span class="token punctuation">:</span>             <span class="token number">3591.683</span>
<span class="token key atrule">BogoMIPS</span><span class="token punctuation">:</span>            <span class="token number">7183.36</span>
<span class="token key atrule">Hypervisor vendor</span><span class="token punctuation">:</span>   VMware
<span class="token key atrule">Virtualization type</span><span class="token punctuation">:</span> full
<span class="token key atrule">L1d cache</span><span class="token punctuation">:</span>           32K
<span class="token key atrule">L1i cache</span><span class="token punctuation">:</span>           32K
<span class="token key atrule">L2 cache</span><span class="token punctuation">:</span>            256K
<span class="token key atrule">L3 cache</span><span class="token punctuation">:</span>            8192K
<span class="token key atrule">NUMA node0 CPU(s)</span><span class="token punctuation">:</span>   0<span class="token punctuation">-</span><span class="token number">3</span>
<span class="token key atrule">Flags</span><span class="token punctuation">:</span>               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault epb invpcid_single pti fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid xsaveopt dtherm ida arat pln pts<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>cat /proc/cpuinfo</code></p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">╭─root@gitlab /opt
╰─<span class="token comment"># cat /proc/cpuinfo</span>
<span class="token key atrule">processor</span>       <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">vendor_id</span>       <span class="token punctuation">:</span> GenuineIntel
<span class="token key atrule">cpu family</span>      <span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token key atrule">model</span>           <span class="token punctuation">:</span> <span class="token number">60</span>
<span class="token key atrule">model name</span>      <span class="token punctuation">:</span> Intel(R) Xeon(R) CPU E3<span class="token punctuation">-</span>1271 v3 @ 3.60GHz
<span class="token key atrule">stepping</span>        <span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token key atrule">microcode</span>       <span class="token punctuation">:</span> <span class="token number">0x1c</span>
<span class="token key atrule">cpu MHz</span>         <span class="token punctuation">:</span> <span class="token number">3591.683</span>
<span class="token key atrule">cache size</span>      <span class="token punctuation">:</span> 8192 KB
<span class="token key atrule">physical id</span>     <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">siblings</span>        <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">core id</span>         <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">cpu cores</span>       <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">apicid</span>          <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">initial apicid</span>  <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">fpu</span>             <span class="token punctuation">:</span> yes
<span class="token key atrule">fpu_exception</span>   <span class="token punctuation">:</span> yes
<span class="token key atrule">cpuid level</span>     <span class="token punctuation">:</span> <span class="token number">13</span>
<span class="token key atrule">wp</span>              <span class="token punctuation">:</span> yes
<span class="token key atrule">flags</span>           <span class="token punctuation">:</span> fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault epb invpcid_single pti fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid xsaveopt dtherm ida arat pln pts
<span class="token key atrule">bugs</span>            <span class="token punctuation">:</span> cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs
<span class="token key atrule">bogomips</span>        <span class="token punctuation">:</span> <span class="token number">7183.36</span>
<span class="token key atrule">clflush size</span>    <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">cache_alignment</span> <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">address sizes</span>   <span class="token punctuation">:</span> 42 bits physical<span class="token punctuation">,</span> 48 bits virtual
power management<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lshw"><a href="#lshw" class="headerlink" title="lshw"></a>lshw</h4><blockquote>
<p>lshw - list hardware 列出硬件设备</p>
<p>lshw is a small tool to extract detailed information on the hardware configuration of the machine. It  can report exact memory configuration, firmware version, mainboard configuration, CPU version and speed, cache configuration, bus speed, etc. on DMI-capable x86 or IA-64 systems and on some PowerPC machines  (PowerMac G4 is known to work).It  currently  supports  DMI (x86 and IA-64 only), OpenFirmware device tree (PowerPC only), PCI&#x2F;AGP, CPUID (x86), IDE&#x2F;ATA&#x2F;ATAPI, PCMCIA (only tested on x86), SCSI and USB.</p>
</blockquote>
<p>这个命令就相当于 Windows 下的设备管理器，列出系统里的硬件设备。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> lshw

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> lshw<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@sg-02 /home/ubuntu
╰─<span class="token comment"># lshw</span>
sg-02
	 description: Computer
	 product: HVM domU
	 vendor: Xen
	 version: <span class="token number">4.2</span>.amazon
	 serial: ec2c5773-d127-c5a4-60a3-221becf4e6ae
	 width: <span class="token number">64</span> bits
	 capabilities: smbios-2.7 dmi-2.7 vsyscall32
	 configuration: <span class="token assign-left variable">boot</span><span class="token operator">=</span>normal <span class="token assign-left variable">uuid</span><span class="token operator">=</span>73572CEC-27D1-A4C5-60A3-221BECF4E6AE
  *-core
		 description: Motherboard
		 physical id: <span class="token number">0</span>
	  *-firmware
			 description: BIOS
			 vendor: Xen
			 physical id: <span class="token number">0</span>
			 version: <span class="token number">4.2</span>.amazon
			 date: 08/24/2006
			 size: 96KiB
			 capabilities: pci edd
	  *-cpu
			 description: CPU
			 product: Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Xeon<span class="token punctuation">(</span>R<span class="token punctuation">)</span> CPU E5-2676 v3 @ <span class="token number">2</span>.40GHz
			 vendor: Intel Corp.
			 physical id: <span class="token number">401</span>
			 bus info: cpu@0
			 slot: CPU <span class="token number">1</span>
			 size: 2400MHz
			 capacity: 2400MHz
			 width: <span class="token number">64</span> bits
			 capabilities: fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp x86-64 constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault invpcid_single pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt
	  *-memory
			 description: System Memory
			 physical id: <span class="token number">1000</span>
			 size: 1GiB
			 capacity: 1GiB
			 capabilities: ecc
			 configuration: <span class="token assign-left variable">errordetection</span><span class="token operator">=</span>multi-bit-ecc
		  *-bank
				 description: DIMM RAM
				 physical id: <span class="token number">0</span>
				 slot: DIMM <span class="token number">0</span>
				 size: 1GiB
				 width: <span class="token number">64</span> bits
	  *-pci
			 description: Host bridge
			 product: 440FX - 82441FX PMC <span class="token punctuation">[</span>Natoma<span class="token punctuation">]</span>
			 vendor: Intel Corporation
			 physical id: <span class="token number">100</span>
			 bus info: pci@0000:00:00.0
			 version: 02
			 width: <span class="token number">32</span> bits
			 clock: 33MHz
		  *-isa
				 description: ISA bridge
				 product: 82371SB PIIX3 ISA <span class="token punctuation">[</span>Natoma/Triton II<span class="token punctuation">]</span>
				 vendor: Intel Corporation
				 physical id: <span class="token number">1</span>
				 bus info: pci@0000:00:01.0
				 version: 00
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: isa bus_master
				 configuration: <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
		  *-ide
				 description: IDE interface
				 product: 82371SB PIIX3 IDE <span class="token punctuation">[</span>Natoma/Triton II<span class="token punctuation">]</span>
				 vendor: Intel Corporation
				 physical id: <span class="token number">1.1</span>
				 bus info: pci@0000:00:01.1
				 version: 00
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: ide bus_master
				 configuration: <span class="token assign-left variable">driver</span><span class="token operator">=</span>ata_piix <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">64</span>
				 resources: irq:0 ioport:1f0<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span> ioport:3f6 ioport:170<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span> ioport:376 ioport:c100<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
		  *-bridge UNCLAIMED
				 description: Bridge
				 product: 82371AB/EB/MB PIIX4 ACPI
				 vendor: Intel Corporation
				 physical id: <span class="token number">1.3</span>
				 bus info: pci@0000:00:01.3
				 version: 01
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: bridge bus_master
				 configuration: <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
		  *-display UNCLAIMED
				 description: VGA compatible controller
				 product: GD <span class="token number">5446</span>
				 vendor: Cirrus Logic
				 physical id: <span class="token number">2</span>
				 bus info: pci@0000:00:02.0
				 version: 00
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: vga_controller bus_master
				 configuration: <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
				 resources: memory:f0000000-f1ffffff memory:f3000000-f3000fff memory:c0000-dffff
		  *-generic
				 description: Unassigned class
				 product: Xen Platform Device
				 vendor: XenSource, Inc.
				 physical id: <span class="token number">3</span>
				 bus info: pci@0000:00:03.0
				 version: 01
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: bus_master
				 configuration: <span class="token assign-left variable">driver</span><span class="token operator">=</span>xen-platform-pci <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
				 resources: irq:28 ioport:c000<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">256</span><span class="token punctuation">)</span> memory:f2000000-f2ffffff
  *-network:0
		 description: Ethernet interface
		 physical id: <span class="token number">1</span>
		 logical name: eth0
		 serial: 02:24:d2:49:f2:94
		 capabilities: ethernet physical
		 configuration: <span class="token assign-left variable">broadcast</span><span class="token operator">=</span>yes <span class="token assign-left variable">driver</span><span class="token operator">=</span>vif <span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token number">172.26</span>.17.53 <span class="token assign-left variable">link</span><span class="token operator">=</span>yes <span class="token assign-left variable">multicast</span><span class="token operator">=</span>yes
  *-network:1
		 description: Ethernet interface
		 physical id: <span class="token number">2</span>
		 logical name: docker0
		 serial: 02:42:37:cf:cf:aa
		 capabilities: ethernet physical
		 configuration: <span class="token assign-left variable">broadcast</span><span class="token operator">=</span>yes <span class="token assign-left variable">driver</span><span class="token operator">=</span>bridge <span class="token assign-left variable">driverversion</span><span class="token operator">=</span><span class="token number">2.3</span> <span class="token assign-left variable">firmware</span><span class="token operator">=</span>N/A <span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token number">172.17</span>.0.1 <span class="token assign-left variable">link</span><span class="token operator">=</span>no <span class="token assign-left variable">multicast</span><span class="token operator">=</span>yes
╭─root@sg-02 /home/ubuntu
╰─<span class="token comment">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsinitramfs"><a href="#lsinitramfs" class="headerlink" title="lsinitramfs"></a>lsinitramfs</h4><blockquote>
<p>lsinitramfs - list content of an initramfs image</p>
<p>The  lsinitramfs  command  lists the content of given initramfs images. It allows one to quickly check the content of one (or multiple) specified initramfs files.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lsinitramfs /boot/initrd.img-4.15.0-58-generic | head -n 10</span>
<span class="token builtin class-name">.</span>
usr
usr/share
usr/share/plymouth
usr/share/plymouth/themes
usr/share/plymouth/themes/details
usr/share/plymouth/themes/details/details.plymouth
usr/share/plymouth/themes/text.plymouth
usr/share/plymouth/themes/ubuntu-text
usr/share/plymouth/themes/ubuntu-text/ubuntu-text.plymouth.in<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsipc"><a href="#lsipc" class="headerlink" title="lsipc"></a>lsipc</h4><blockquote>
<p>lsipc - show information on IPC facilities currently employed in the system</p>
<p>lsipc  shows  information on the inter-process communication facilities for which the calling process has read access.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lsipc</span>
RESOURCE DESCRIPTION                                     LIMIT USED  USE%
MSGMNI   Number of message queues                        <span class="token number">32000</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
MSGMAX   Max size of message <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>                      <span class="token number">8192</span>    -     -
MSGMNB   Default max size of queue <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>               <span class="token number">16384</span>    -     -
SHMMNI   Shared memory segments                           <span class="token number">4096</span>    <span class="token number">1</span> <span class="token number">0.02</span>%
SHMALL   Shared memory pages                           <span class="token number">4194304</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
SHMMAX   Max size of shared memory segment <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token number">17179869184</span>    -     -
SHMMIN   Min size of shared memory segment <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>           <span class="token number">1</span>    -     -
SEMMNI   Number of semaphore identifiers                   <span class="token number">262</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
SEMMNS   Total number of semaphores                      <span class="token number">32000</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
SEMMSL   Max semaphores per semaphore set.                 <span class="token number">250</span>    -     -
SEMOPM   Max number of operations per semop<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>              <span class="token number">32</span>    -     -
SEMVMX   Semaphore max value                             <span class="token number">32767</span>    -     -<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lslocks"><a href="#lslocks" class="headerlink" title="lslocks"></a>lslocks</h4><blockquote>
<p>lslocks - list local system locks</p>
<p>lslocks lists information about all the currently held file locks in a Linux system</p>
</blockquote>
<p>列出当前系统中被加锁的文件</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lslocks</span>
COMMAND           PID  TYPE SIZE MODE  M START END <span class="token environment constant">PATH</span>
<span class="token function">cron</span>              <span class="token number">900</span> FLOCK   4B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /run/crond.pid
svlogd          <span class="token number">53065</span> FLOCK   0B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /var/log/gitlab/redis/lock
runsv           <span class="token number">54095</span> FLOCK   0B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /opt/gitlab/sv/sidekiq/supervise/lock
runsv           <span class="token number">54095</span> FLOCK   0B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /opt/gitlab/sv/sidekiq/log/supervise/lock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lslogins"><a href="#lslogins" class="headerlink" title="lslogins"></a>lslogins</h4><p>列出当前已经登录的用户信息</p>
<blockquote>
<p>lslogins - display information about known users in the system</p>
<p>Examine the wtmp and btmp logs, &#x2F;etc&#x2F;shadow (if necessary) and &#x2F;etc&#x2F;passwd and output the desired data. The default action is to list info about all the users in the system.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lslogins</span>
  <span class="token environment constant">UID</span> <span class="token environment constant">USER</span>              PROC <span class="token environment constant">PWD</span>-LOCK <span class="token environment constant">PWD</span>-DENY LAST-LOGIN GECOS
	 <span class="token number">0</span> root               <span class="token number">211</span>        <span class="token number">0</span>        <span class="token number">0</span>      06:58 root
	 <span class="token number">1</span> daemon               <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>            daemon
	 <span class="token number">2</span> bin                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            bin
	 <span class="token number">3</span> sys                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            sys
	 <span class="token number">4</span> <span class="token function">sync</span>                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            <span class="token function">sync</span>
	 <span class="token number">5</span> games                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            games
	 <span class="token number">6</span> <span class="token function">man</span>                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            <span class="token function">man</span>
	 <span class="token number">7</span> lp                   <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            lp
	 <span class="token number">8</span> mail                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            mail
	 <span class="token number">9</span> news                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            news
	<span class="token number">10</span> uucp                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            uucp
	<span class="token number">13</span> proxy                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            proxy
	<span class="token number">33</span> www-data             <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            www-data
	<span class="token number">34</span> backup               <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            backup
	<span class="token number">38</span> list                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            Mailing List Manager
	<span class="token number">39</span> irc                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            ircd
	<span class="token number">41</span> gnats                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            Gnats Bug-Reporting System <span class="token punctuation">(</span>admin<span class="token punctuation">)</span>
  <span class="token number">100</span> systemd-network      <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>            systemd Network Management,,,
  <span class="token number">101</span> systemd-resolve      <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>            systemd Resolver,,,
  <span class="token number">102</span> syslog               <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">103</span> messagebus           <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">104</span> _apt                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">105</span> lxd                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">106</span> uuidd                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">107</span> dnsmasq              <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            dnsmasq,,,
  <span class="token number">108</span> landscape            <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">109</span> pollinate            <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">110</span> sshd                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">995</span> gitlab-prometheus    <span class="token number">4</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">996</span> gitlab-psql         <span class="token number">18</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">997</span> gitlab-redis         <span class="token number">2</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">998</span> <span class="token function">git</span>                 <span class="token number">16</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">999</span> gitlab-www           <span class="token number">5</span>        <span class="token number">0</span>        <span class="token number">1</span>
 <span class="token number">1000</span> ubuntu               <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">0</span> <span class="token number">2019</span>-Aug28 ubuntu
<span class="token number">65534</span> nobody               <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            nobody<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsmem"><a href="#lsmem" class="headerlink" title="lsmem"></a>lsmem</h4><blockquote>
<p>lsmem - list the ranges of available memory with their online status</p>
<p>The  lsmem command lists the ranges of available memory with their online status. The listed memory blocks correspond to the memory block representation in sysfs. The command also shows the memory block  size  and the amount of memory in online and offline state.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lsmem                                                                                                     127 ↵</span>
RANGE                                  SIZE  STATE REMOVABLE BLOCK
0x0000000000000000-0x0000000007ffffff  128M online        no     <span class="token number">0</span>
0x0000000008000000-0x000000000fffffff  128M online       <span class="token function">yes</span>     <span class="token number">1</span>
0x0000000010000000-0x000000001fffffff  256M online        no   <span class="token number">2</span>-3
0x0000000020000000-0x0000000027ffffff  128M online       <span class="token function">yes</span>     <span class="token number">4</span>
0x0000000028000000-0x0000000037ffffff  256M online        no   <span class="token number">5</span>-6
0x0000000038000000-0x000000003fffffff  128M online       <span class="token function">yes</span>     <span class="token number">7</span>
0x0000000040000000-0x000000006fffffff  768M online        no  <span class="token number">8</span>-13
0x0000000070000000-0x0000000077ffffff  128M online       <span class="token function">yes</span>    <span class="token number">14</span>
0x0000000078000000-0x00000000bfffffff  <span class="token number">1</span>.1G online        no <span class="token number">15</span>-23
0x0000000100000000-0x000000013fffffff    1G online        no <span class="token number">32</span>-39

Memory block size:       128M
Total online memory:       4G
Total offline memory:      0B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsmod"><a href="#lsmod" class="headerlink" title="lsmod"></a>lsmod</h4><p>列出系统内核模块</p>
<blockquote>
<p>lsmod - Show the status of modules in the Linux Kernel</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lsmod</span>
Module                  Size  Used by
tcp_diag               <span class="token number">16384</span>  <span class="token number">0</span>
inet_diag              <span class="token number">24576</span>  <span class="token number">1</span> tcp_diag
joydev                 <span class="token number">24576</span>  <span class="token number">0</span>
input_leds             <span class="token number">16384</span>  <span class="token number">0</span>
vmw_balloon            <span class="token number">20480</span>  <span class="token number">0</span>
serio_raw              <span class="token number">16384</span>  <span class="token number">0</span>
vmw_vsock_vmci_transport    <span class="token number">28672</span>  <span class="token number">1</span>
vsock                  <span class="token number">36864</span>  <span class="token number">2</span> vmw_vsock_vmci_transport
vmw_vmci               <span class="token number">69632</span>  <span class="token number">2</span> vmw_balloon,vmw_vsock_vmci_transport
sch_fq_codel           <span class="token number">20480</span>  <span class="token number">5</span>
ib_iser                <span class="token number">49152</span>  <span class="token number">0</span>
rdma_cm                <span class="token number">61440</span>  <span class="token number">1</span> ib_iser
iw_cm                  <span class="token number">45056</span>  <span class="token number">1</span> rdma_cm
ib_cm                  <span class="token number">53248</span>  <span class="token number">1</span> rdma_cm
ib_core               <span class="token number">225280</span>  <span class="token number">4</span> rdma_cm,iw_cm,ib_iser,ib_cm
iscsi_tcp              <span class="token number">20480</span>  <span class="token number">0</span>
libiscsi_tcp           <span class="token number">20480</span>  <span class="token number">1</span> iscsi_tcp
libiscsi               <span class="token number">53248</span>  <span class="token number">3</span> libiscsi_tcp,iscsi_tcp,ib_iser
scsi_transport_iscsi    <span class="token number">98304</span>  <span class="token number">3</span> iscsi_tcp,ib_iser,libiscsi
ip_tables              <span class="token number">28672</span>  <span class="token number">0</span>
x_tables               <span class="token number">40960</span>  <span class="token number">1</span> ip_tables
autofs4                <span class="token number">40960</span>  <span class="token number">2</span>
btrfs                <span class="token number">1130496</span>  <span class="token number">0</span>
zstd_compress         <span class="token number">163840</span>  <span class="token number">1</span> btrfs
raid10                 <span class="token number">53248</span>  <span class="token number">0</span>
raid456               <span class="token number">143360</span>  <span class="token number">0</span>
async_raid6_recov      <span class="token number">20480</span>  <span class="token number">1</span> raid456
async_memcpy           <span class="token number">16384</span>  <span class="token number">2</span> raid456,async_raid6_recov
async_pq               <span class="token number">16384</span>  <span class="token number">2</span> raid456,async_raid6_recov
async_xor              <span class="token number">16384</span>  <span class="token number">3</span> async_pq,raid456,async_raid6_recov
async_tx               <span class="token number">16384</span>  <span class="token number">5</span> async_pq,async_memcpy,async_xor,raid456,async_raid6_recov
xor                    <span class="token number">24576</span>  <span class="token number">2</span> async_xor,btrfs
raid6_pq              <span class="token number">114688</span>  <span class="token number">4</span> async_pq,btrfs,raid456,async_raid6_recov
libcrc32c              <span class="token number">16384</span>  <span class="token number">1</span> raid456
raid1                  <span class="token number">40960</span>  <span class="token number">0</span>
raid0                  <span class="token number">20480</span>  <span class="token number">0</span>
multipath              <span class="token number">16384</span>  <span class="token number">0</span>
linear                 <span class="token number">16384</span>  <span class="token number">0</span>
crct10dif_pclmul       <span class="token number">16384</span>  <span class="token number">0</span>
crc32_pclmul           <span class="token number">16384</span>  <span class="token number">0</span>
ghash_clmulni_intel    <span class="token number">16384</span>  <span class="token number">0</span>
pcbc                   <span class="token number">16384</span>  <span class="token number">0</span>
vmwgfx                <span class="token number">274432</span>  <span class="token number">1</span>
ttm                   <span class="token number">106496</span>  <span class="token number">1</span> vmwgfx
drm_kms_helper        <span class="token number">172032</span>  <span class="token number">1</span> vmwgfx
aesni_intel           <span class="token number">188416</span>  <span class="token number">0</span>
syscopyarea            <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
aes_x86_64             <span class="token number">20480</span>  <span class="token number">1</span> aesni_intel
sysfillrect            <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
crypto_simd            <span class="token number">16384</span>  <span class="token number">1</span> aesni_intel
sysimgblt              <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
glue_helper            <span class="token number">16384</span>  <span class="token number">1</span> aesni_intel
fb_sys_fops            <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
cryptd                 <span class="token number">24576</span>  <span class="token number">3</span> crypto_simd,ghash_clmulni_intel,aesni_intel
psmouse               <span class="token number">147456</span>  <span class="token number">0</span>
drm                   <span class="token number">401408</span>  <span class="token number">4</span> vmwgfx,drm_kms_helper,ttm
mptspi                 <span class="token number">24576</span>  <span class="token number">2</span>
mptscsih               <span class="token number">40960</span>  <span class="token number">1</span> mptspi
mptbase               <span class="token number">102400</span>  <span class="token number">2</span> mptspi,mptscsih
ahci                   <span class="token number">40960</span>  <span class="token number">0</span>
libahci                <span class="token number">32768</span>  <span class="token number">1</span> ahci
i2c_piix4              <span class="token number">24576</span>  <span class="token number">0</span>
vmxnet3                <span class="token number">57344</span>  <span class="token number">0</span>
scsi_transport_spi     <span class="token number">32768</span>  <span class="token number">1</span> mptspi
pata_acpi              <span class="token number">16384</span>  <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsns-list-namespaces"><a href="#lsns-list-namespaces" class="headerlink" title="lsns - list namespaces"></a>lsns - list namespaces</h4><p>lsns  lists  information  about all the currently accessible namespaces or about the given namespace.  The namespace identifier is an inode number.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lsns</span>
		  NS TYPE   NPROCS   PID <span class="token environment constant">USER</span>             COMMAND
<span class="token number">4026531835</span> cgroup    <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531836</span> pid       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531837</span> user      <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531838</span> uts       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531839</span> ipc       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531840</span> mnt       <span class="token number">259</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531861</span> mnt         <span class="token number">1</span>    <span class="token number">31</span> root             kdevtmpfs
<span class="token number">4026531993</span> net       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026532531</span> mnt         <span class="token number">1</span> <span class="token number">37609</span> root             /lib/systemd/systemd-udevd
<span class="token number">4026532556</span> mnt         <span class="token number">1</span> <span class="token number">42954</span> systemd-timesync /lib/systemd/systemd-timesyncd
<span class="token number">4026532557</span> mnt         <span class="token number">1</span> <span class="token number">42900</span> systemd-network  /lib/systemd/systemd-networkd
<span class="token number">4026532603</span> mnt         <span class="token number">1</span> <span class="token number">42924</span> systemd-resolve  /lib/systemd/systemd-resolved<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsof-list-open-files"><a href="#lsof-list-open-files" class="headerlink" title="lsof - list open files"></a>lsof - list open files</h4><p>lsof 列出打开的文件。绝对是个排查故障的利器，在一切皆文件的 Linux 世界里，lsof 可以查看打开的文件是：</p>
<ul>
<li>普通文件</li>
<li>目录</li>
<li>网络文件系统的文件</li>
<li>字符或设备文件</li>
<li>(函数)共享库</li>
<li>管道、命名管道</li>
<li>符号链接</li>
<li>网络文件（例如：NFS file、网络 socket，unix 域名 socket）</li>
<li>还有其它类型的文件，等等</li>
</ul>
<p>另外 lsof 命令也是有着最多选项的 Linux&#x2F;Unix 命令之一，另一个 nc 命令也是如此 😂。</p>
<ul>
<li>列出端口号占用的进程</li>
</ul>
<pre class="line-numbers language-sell" data-language="sell"><code class="language-sell">╭─root@blog &#x2F;opt&#x2F;shell
╰─# lsof -i :53      ↵
COMMAND   PID            USER   FD   TYPE DEVICE SIZE&#x2F;OFF NODE NAME
systemd-r 538 systemd-resolve   12u  IPv4  13925      0t0  UDP localhost:domain
systemd-r 538 systemd-resolve   13u  IPv4  13926      0t0  TCP localhost:domain (LISTEN)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>PS：最近面试的时候被问到过</p>
<p>Q： Linux 下查看端口占用的命令？</p>
<p>A：<code>netstat -tunlp</code> 、<code>ss -tua</code>、<code>lsof -i</code> 😂</p>
</blockquote>
<h4 id="lspci-list-all-PCI-devices"><a href="#lspci-list-all-PCI-devices" class="headerlink" title="lspci - list all PCI devices"></a>lspci - list all PCI devices</h4><p>列出 PCI 设备，比如显卡</p>
<blockquote>
<p>lspci is a utility for displaying information about PCI buses in the system and devices connected to them.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">╭─root@gitlab /opt
╰─<span class="token comment"># lspci</span>
00:00.0 Host bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX Host bridge <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:01.0 PCI bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX AGP bridge <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:07.0 ISA bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA <span class="token punctuation">(</span>rev 08<span class="token punctuation">)</span>
00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI <span class="token punctuation">(</span>rev 08<span class="token punctuation">)</span>
00:07.7 System peripheral: VMware Virtual Machine Communication Interface <span class="token punctuation">(</span>rev <span class="token number">10</span><span class="token punctuation">)</span>
00:0f.0 VGA compatible controller: VMware SVGA II Adapter
00:10.0 SCSI storage controller: LSI Logic / Symbios Logic 53c1030 PCI-X Fusion-MPT Dual Ultra320 SCSI <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:11.0 PCI bridge: VMware PCI bridge <span class="token punctuation">(</span>rev 02<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="proc"><a href="#proc" class="headerlink" title="proc"></a>proc</h3><p>确切来说这并不是一个工具，而是 Linux 的内存文件系统，它可以帮助我们了解一些系统信息，方便排查一些故障等。</p>
<h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><p><code>cat /proc/cpuinfo</code> 和 <code>lscpu</code> 二者输出类似</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>root@k8s<span class="token punctuation">-</span>master<span class="token punctuation">-</span>01 ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/cpuinfo</span>
<span class="token key atrule">processor</span>       <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">vendor_id</span>       <span class="token punctuation">:</span> GenuineIntel
<span class="token key atrule">cpu family</span>      <span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token key atrule">model</span>           <span class="token punctuation">:</span> <span class="token number">60</span>
<span class="token key atrule">model name</span>      <span class="token punctuation">:</span> Intel(R) Xeon(R) CPU E3<span class="token punctuation">-</span>1271 v3 @ 3.60GHz
<span class="token key atrule">stepping</span>        <span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token key atrule">microcode</span>       <span class="token punctuation">:</span> <span class="token number">0x1c</span>
<span class="token key atrule">cpu MHz</span>         <span class="token punctuation">:</span> <span class="token number">3591.683</span>
<span class="token key atrule">cache size</span>      <span class="token punctuation">:</span> 8192 KB
<span class="token key atrule">physical id</span>     <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">siblings</span>        <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">core id</span>         <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">cpu cores</span>       <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">apicid</span>          <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">initial apicid</span>  <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">fpu</span>             <span class="token punctuation">:</span> yes
<span class="token key atrule">fpu_exception</span>   <span class="token punctuation">:</span> yes
<span class="token key atrule">cpuid level</span>     <span class="token punctuation">:</span> <span class="token number">13</span>
<span class="token key atrule">wp</span>              <span class="token punctuation">:</span> yes
<span class="token key atrule">flags</span>           <span class="token punctuation">:</span> fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc aperfmperf eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm epb fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid xsaveopt dtherm ida arat pln pts
<span class="token key atrule">bogomips</span>        <span class="token punctuation">:</span> <span class="token number">7183.36</span>
<span class="token key atrule">clflush size</span>    <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">cache_alignment</span> <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">address sizes</span>   <span class="token punctuation">:</span> 42 bits physical<span class="token punctuation">,</span> 48 bits virtual
power management<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="RAM"><a href="#RAM" class="headerlink" title="RAM"></a>RAM</h4><p>用来查看一下系统内存的信息，另外 free 命令是从 &#x2F;proc&#x2F;meminfo 中读取信息的，跟我们直接读到的结果一样。</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>root@k8s<span class="token punctuation">-</span>master<span class="token punctuation">-</span>01 proc<span class="token punctuation">]</span><span class="token comment"># cat meminfo</span>
<span class="token key atrule">MemTotal</span><span class="token punctuation">:</span>        3863636 kB
<span class="token key atrule">MemFree</span><span class="token punctuation">:</span>          247016 kB
<span class="token key atrule">MemAvailable</span><span class="token punctuation">:</span>    2096628 kB
<span class="token key atrule">Buffers</span><span class="token punctuation">:</span>           85612 kB
<span class="token key atrule">Cached</span><span class="token punctuation">:</span>          1952072 kB
<span class="token key atrule">SwapCached</span><span class="token punctuation">:</span>            0 kB
<span class="token key atrule">Active</span><span class="token punctuation">:</span>          2250028 kB
<span class="token key atrule">Inactive</span><span class="token punctuation">:</span>        1003588 kB
<span class="token key atrule">Active(anon)</span><span class="token punctuation">:</span>    1224120 kB
<span class="token key atrule">Inactive(anon)</span><span class="token punctuation">:</span>    21344 kB
<span class="token key atrule">Active(file)</span><span class="token punctuation">:</span>    1025908 kB
<span class="token key atrule">Inactive(file)</span><span class="token punctuation">:</span>   982244 kB
<span class="token key atrule">Unevictable</span><span class="token punctuation">:</span>           0 kB
<span class="token key atrule">Mlocked</span><span class="token punctuation">:</span>               0 kB
<span class="token key atrule">SwapTotal</span><span class="token punctuation">:</span>             0 kB
<span class="token key atrule">SwapFree</span><span class="token punctuation">:</span>              0 kB
<span class="token key atrule">Dirty</span><span class="token punctuation">:</span>               128 kB
<span class="token key atrule">Writeback</span><span class="token punctuation">:</span>             0 kB
<span class="token key atrule">AnonPages</span><span class="token punctuation">:</span>       1215816 kB
<span class="token key atrule">Mapped</span><span class="token punctuation">:</span>           196080 kB
<span class="token key atrule">Shmem</span><span class="token punctuation">:</span>             29532 kB
<span class="token key atrule">Slab</span><span class="token punctuation">:</span>             222544 kB
<span class="token key atrule">SReclaimable</span><span class="token punctuation">:</span>      92156 kB
<span class="token key atrule">SUnreclaim</span><span class="token punctuation">:</span>       130388 kB
<span class="token key atrule">KernelStack</span><span class="token punctuation">:</span>       15904 kB
<span class="token key atrule">PageTables</span><span class="token punctuation">:</span>        13024 kB
<span class="token key atrule">NFS_Unstable</span><span class="token punctuation">:</span>          0 kB
<span class="token key atrule">Bounce</span><span class="token punctuation">:</span>                0 kB
<span class="token key atrule">WritebackTmp</span><span class="token punctuation">:</span>          0 kB
<span class="token key atrule">CommitLimit</span><span class="token punctuation">:</span>     1931816 kB
<span class="token key atrule">Committed_AS</span><span class="token punctuation">:</span>    7402668 kB
<span class="token key atrule">VmallocTotal</span><span class="token punctuation">:</span>   34359738367 kB
<span class="token key atrule">VmallocUsed</span><span class="token punctuation">:</span>      187276 kB
<span class="token key atrule">VmallocChunk</span><span class="token punctuation">:</span>   34359310332 kB
<span class="token key atrule">HardwareCorrupted</span><span class="token punctuation">:</span>     0 kB
<span class="token key atrule">AnonHugePages</span><span class="token punctuation">:</span>    264192 kB
<span class="token key atrule">CmaTotal</span><span class="token punctuation">:</span>              0 kB
<span class="token key atrule">CmaFree</span><span class="token punctuation">:</span>               0 kB
<span class="token key atrule">HugePages_Total</span><span class="token punctuation">:</span>       <span class="token number">0</span>
<span class="token key atrule">HugePages_Free</span><span class="token punctuation">:</span>        <span class="token number">0</span>
<span class="token key atrule">HugePages_Rsvd</span><span class="token punctuation">:</span>        <span class="token number">0</span>
<span class="token key atrule">HugePages_Surp</span><span class="token punctuation">:</span>        <span class="token number">0</span>
<span class="token key atrule">Hugepagesize</span><span class="token punctuation">:</span>       2048 kB
<span class="token key atrule">DirectMap4k</span><span class="token punctuation">:</span>      206720 kB
<span class="token key atrule">DirectMap2M</span><span class="token punctuation">:</span>     3987456 kB
<span class="token key atrule">DirectMap1G</span><span class="token punctuation">:</span>     2097152 kB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>buffer：表示块设备(block device)所占用的缓存页，包括：直接读写块设备、以及文件系统元数据(metadata)比如 SuperBlock 所使用的缓存页；</li>
<li>cache：表示普通文件数据所占用的缓存页。</li>
</ul>
<p>二者的区别推荐阅读 <a target="_blank" rel="noopener" href="http://linuxperf.com/?p=32">FREE 命令显示的 BUFFERS 与 CACHED 的区别</a>，从 Linux 内核源码来区分。</p>
<h4 id="net"><a href="#net" class="headerlink" title="net"></a>net</h4><ul>
<li>arp</li>
</ul>
<p>用来查看系统 arp 缓存的映射表。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@k8s-node-3 /proc/net
╰─<span class="token comment"># cat arp</span>
IP address       HW <span class="token builtin class-name">type</span>     Flags       HW address            Mask     Device
<span class="token number">169.254</span>.169.254  0x1         0x0         00:00:00:00:00:00     *        ens160
<span class="token number">100.78</span>.36.67     0x1         0x2         ee:25:17:a5:e9:3b     *        cali35f7ecfd8a4
<span class="token number">10.20</span>.172.212    0x1         0x2         00:0c:29:16:f5:1f     *        ens160
<span class="token number">100.78</span>.36.65     0x1         0x2         d6:80:af:8a:22:c7     *        calid838acfbeda
<span class="token number">10.20</span>.172.1      0x1         0x2         00:00:5e:00:01:3a     *        ens160
<span class="token number">10.20</span>.172.102    0x1         0x2         00:21:91:53:e8:a3     *        ens160
<span class="token number">10.20</span>.172.254    0x1         0x2         5c:dd:70:05:e8:53     *        ens160
<span class="token number">10.20</span>.172.106    0x1         0x2         <span class="token number">98</span>:90:96:d0:86:8a     *        ens160<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>route</li>
</ul>
<p>以树级结构列出系统的路由表信息</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@k8s-node-3 ~
╰─<span class="token comment"># cat /proc/net/fib_trie</span>
Main:
  +-- <span class="token number">0.0</span>.0.0/0 <span class="token number">3</span> <span class="token number">1</span> <span class="token number">5</span>
	  +-- <span class="token number">0.0</span>.0.0/4 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
		  <span class="token operator">|</span>-- <span class="token number">0.0</span>.0.0
			  /0 universe UNICAST
		  +-- <span class="token number">10.0</span>.0.0/9 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
			  +-- <span class="token number">10.20</span>.172.0/24 <span class="token number">2</span> <span class="token number">1</span> <span class="token number">2</span>
				  <span class="token operator">|</span>-- <span class="token number">10.20</span>.172.0
					  /32 <span class="token function">link</span> BROADCAST
					  /24 <span class="token function">link</span> UNICAST
				  +-- <span class="token number">10.20</span>.172.192/26 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
					  <span class="token operator">|</span>-- <span class="token number">10.20</span>.172.211
						  /32 <span class="token function">host</span> LOCAL
					  <span class="token operator">|</span>-- <span class="token number">10.20</span>.172.255
						  /32 <span class="token function">link</span> BROADCAST
			  +-- <span class="token number">10.96</span>.0.0/12 <span class="token number">4</span> <span class="token number">1</span> <span class="token number">7</span>
				  +-- <span class="token number">10.96</span>.0.0/16 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">1</span>
					  +-- <span class="token number">10.96</span>.0.0/28 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
						  <span class="token operator">|</span>-- <span class="token number">10.96</span>.0.1
							  /32 <span class="token function">host</span> LOCAL
						  <span class="token operator">|</span>-- <span class="token number">10.96</span>.0.10
							  /32 <span class="token function">host</span> LOCAL
					  <span class="token operator">|</span>-- <span class="token number">10.96</span>.94.140
						  /32 <span class="token function">host</span> LOCAL
					  <span class="token operator">|</span>-- <span class="token number">10.96</span>.130.114
						  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.99</span>.89.188
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.101</span>.71.131
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.104</span>.241.211
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.107</span>.246.53
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.108</span>.171.54
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.109</span>.20.145
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.110</span>.206.28
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.111</span>.25.53
					  /32 <span class="token function">host</span> LOCAL
	  +-- <span class="token number">96.0</span>.0.0/3 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
		  +-- <span class="token number">100.64</span>.0.0/10 <span class="token number">3</span> <span class="token number">0</span> <span class="token number">3</span>
			  +-- <span class="token number">100.78</span>.36.64/26 <span class="token number">3</span> <span class="token number">0</span> <span class="token number">6</span>
				  +-- <span class="token number">100.78</span>.36.64/30 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">0</span>
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.64
						  /32 <span class="token function">host</span> LOCAL
						  /32 <span class="token function">link</span> BROADCAST
						  /26 universe BLACKHOLE
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.65
						  /32 <span class="token function">link</span> UNICAST
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.66
						  /32 <span class="token function">link</span> UNICAST
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.67
						  /32 <span class="token function">link</span> UNICAST
				  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.105
					  /32 <span class="token function">link</span> UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.87</span>.114.192
				  /26 universe UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.107</span>.127.64
				  /26 universe UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.112</span>.151.128
				  /26 universe UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.123</span>.190.192
				  /26 universe UNICAST
		  +-- <span class="token number">127.0</span>.0.0/8 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
			  +-- <span class="token number">127.0</span>.0.0/31 <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span>
				  <span class="token operator">|</span>-- <span class="token number">127.0</span>.0.0
					  /32 <span class="token function">link</span> BROADCAST
					  /8 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">127.0</span>.0.1
					  /32 <span class="token function">host</span> LOCAL
			  <span class="token operator">|</span>-- <span class="token number">127.255</span>.255.255
				  /32 <span class="token function">link</span> BROADCAST
	  +-- <span class="token number">168.0</span>.0.0/5 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
		  <span class="token operator">|</span>-- <span class="token number">169.254</span>.0.0
			  /16 <span class="token function">link</span> UNICAST
		  +-- <span class="token number">172.16</span>.0.0/14 <span class="token number">3</span> <span class="token number">0</span> <span class="token number">6</span>
			  +-- <span class="token number">172.17</span>.0.0/31 <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span>
				  <span class="token operator">|</span>-- <span class="token number">172.17</span>.0.0
					  /32 <span class="token function">link</span> BROADCAST
					  /16 <span class="token function">link</span> UNICAST
				  <span class="token operator">|</span>-- <span class="token number">172.17</span>.0.1
					  /32 <span class="token function">host</span> LOCAL
			  <span class="token operator">|</span>-- <span class="token number">172.17</span>.255.255
				  /32 <span class="token function">link</span> BROADCAST<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>nf_conntrack</li>
</ul>
<blockquote>
<p>nf_conntrack(在老版本的 Linux 内核中叫 ip_conntrack)是一个内核模块,用于跟踪一个连接的状态的。连接状态跟踪可以供其他模块使用,最常见的两个使用场景是 iptables 的 nat 的 state 模块。 iptables 的 nat 通过规则来修改目的&#x2F;源地址,但光修改地址不行,我们还需要能让回来的包能路由到最初的来源主机。这就需要借助 nf_conntrack 来找到原来那个连接的记录才行。而 state 模块则是直接使用 nf_conntrack 里记录的连接的状态来匹配用户定义的相关规则。例如下面这条 INPUT 规则用于放行 80 端口上的状态为 NEW 的连接上的包。</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@k8s-node-3 /proc/net
╰─<span class="token comment"># cat nf_conntrack | head -n 4</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">102</span> SYN_SENT <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">42562</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token punctuation">[</span>UNREPLIED<span class="token punctuation">]</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">42562</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">79</span> SYN_SENT <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">60579</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token punctuation">[</span>UNREPLIED<span class="token punctuation">]</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">60579</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">86366</span> ESTABLISHED <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.121 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">58589</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.121 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">58589</span> <span class="token punctuation">[</span>ASSURED<span class="token punctuation">]</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">62</span> SYN_SENT <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">37531</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token punctuation">[</span>UNREPLIED<span class="token punctuation">]</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">37531</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><a target="_blank" rel="noopener" href="http://www.linvon.cn/post/%E8%BF%9E%E6%8E%A5%E8%B7%9F%E8%B8%AAnf_conntrack%E4%B8%8Enat%E5%92%8C%E7%8A%B6%E6%80%81iptables/">连接跟踪 nf_conntrack 与 NAT 和状态防火墙</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liushaodong/archive/2013/02/26/2933593.html">netfilter 链接跟踪机制与 NAT 原理</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-23069658-id-3169450.html">(五)洞悉 linux 下的 Netfilter&amp;iptables：如何理解连接跟踪机制？</a></li>
<li><a target="_blank" rel="noopener" href="https://clodfisher.github.io/2018/09/nf_conntrack/">Iptables 之 nf_conntrack 模块</a></li>
</ul>
<h4 id="kernel"><a href="#kernel" class="headerlink" title="kernel"></a>kernel</h4><p>可以用来查看一下系统内核版本信息</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@k8s-master-01 proc<span class="token punctuation">]</span><span class="token comment"># uname -a</span>
Linux k8s-master-01 <span class="token number">3.10</span>.0-862.el7.x86_64 <span class="token comment">#1 SMP Fri Apr 20 16:44:24 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</span>
<span class="token punctuation">[</span>root@k8s-master-01 proc<span class="token punctuation">]</span><span class="token comment"># cat version</span>
Linux version <span class="token number">3.10</span>.0-862.el7.x86_64 <span class="token punctuation">(</span>builder@kbuilder.dev.centos.org<span class="token punctuation">)</span> <span class="token punctuation">(</span>gcc version <span class="token number">4.8</span>.5 <span class="token number">20150623</span> <span class="token punctuation">(</span>Red Hat <span class="token number">4.8</span>.5-28<span class="token punctuation">)</span> <span class="token punctuation">(</span>GCC<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token comment">#1 SMP Fri Apr 20 16:44:24 UTC 2018</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h3><h4 id="nc-netcat"><a href="#nc-netcat" class="headerlink" title="nc netcat"></a>nc netcat</h4><p>nc 是个瑞士军刀啊，你能想到的你想不到的都能做，在这里仅仅列出几个常用常用的命令，咱平时主要用来判断主机端口是否正常，想要完整地了解推荐阅读下面提到的文章。之前编程随想大佬也写过 nc 命令的使用详解。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> netcat

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> netcat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>查看主机端口是否打开</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># 查看远程主机端口是否打开</span>
╭─root@blog /opt/shell
╰─<span class="token comment"># nc -vz bing.com 443</span>
DNS fwd/rev mismatch: bing.com <span class="token operator">!=</span> a-0001.a-msedge.net
Warning: inverse <span class="token function">host</span> lookup failed <span class="token keyword">for</span> <span class="token number">13.107</span>.21.200: Unknown <span class="token function">host</span>
bing.com <span class="token punctuation">[</span><span class="token number">204.79</span>.197.200<span class="token punctuation">]</span> <span class="token number">443</span> <span class="token punctuation">(</span>https<span class="token punctuation">)</span> <span class="token function">open</span>
<span class="token comment"># 查看本机端口是否被占用</span>
╭─root@blog /opt/shell
╰─<span class="token comment"># nc -lp 80 -v                                                                    1 ↵</span>
retrying <span class="token builtin class-name">local</span> <span class="token number">0.0</span>.0.0:80 <span class="token builtin class-name">:</span> Address already <span class="token keyword">in</span> use
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>用 nc 传输文件</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># 接收端】（B 主机）运行如下命令（其中的 xxx 是端口号）</span>
<span class="token function">nc</span> -l -p xxx <span class="token operator">></span> file2

<span class="token comment"># 然后在【发送端】（A 主机）运行如下命令</span>
<span class="token function">nc</span> x.x.x.x xxx <span class="token operator">&lt;</span> file1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2019/09/Netcat-Tricks.html">扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”</a></li>
</ul>
<h4 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h4><p>nmap 命令用的最多的就是端口扫描，在渗透领域多用来扫描内网机器。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> nmap

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> nmap<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>扫描类型</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-sT    TCP connect<span class="token punctuation">(</span><span class="token punctuation">)</span> 扫描，这是最基本的 TCP 扫描方式。这种扫描很容易被检测到，在目标主机的日志中会记录大批的连接请求以及错误信息。
-sS    TCP 同步扫描 <span class="token punctuation">(</span>TCP SYN<span class="token punctuation">)</span>，因为不必全部打开一个 TCP 连接，所以这项技术通常称为半开扫描 <span class="token punctuation">(</span>half-open<span class="token punctuation">)</span>。这项技术最大的好处是，很少有系统能够把这记入系统日志。不过，你需要 root 权限来定制 SYN 数据包。
-sF,-sX,-sN    秘密 FIN 数据包扫描、圣诞树 <span class="token punctuation">(</span>Xmas Tree<span class="token punctuation">)</span>、空 <span class="token punctuation">(</span>Null<span class="token punctuation">)</span> 扫描模式。这些扫描方式的理论依据是：关闭的端口需要对你的探测包回应 RST 包，而打开的端口必需忽略有问题的包（参考 RFC <span class="token number">793</span> 第 <span class="token number">64</span> 页）。
-sP    <span class="token function">ping</span> 扫描，用 <span class="token function">ping</span> 方式检查网络上哪些主机正在运行。当主机阻塞 ICMP <span class="token builtin class-name">echo</span> 请求包是 <span class="token function">ping</span> 扫描是无效的。nmap 在任何情况下都会进行 <span class="token function">ping</span> 扫描，只有目标主机处于运行状态，才会进行后续的扫描。
-sU    UDP 的数据包进行扫描，如果你想知道在某台主机上提供哪些 UDP（用户数据报协议，RFC768<span class="token punctuation">)</span> 服务，可以使用此选项。
-sA    ACK 扫描，这项高级的扫描方法通常可以用来穿过防火墙。
-sW    滑动窗口扫描，非常类似于 ACK 的扫描。
-sR    RPC 扫描，和其它不同的端口扫描方法结合使用。
-b    FTP 反弹攻击 <span class="token punctuation">(</span>bounce attack<span class="token punctuation">)</span>，连接到防火墙后面的一台 FTP 服务器做代理，接着进行端口扫描。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>扫描参数</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-P0    在扫描之前，不 <span class="token function">ping</span> 主机。
-PT    扫描之前，使用 TCP <span class="token function">ping</span> 确定哪些主机正在运行。
-PS    对于 root 用户，这个选项让 nmap 使用 SYN 包而不是 ACK 包来对目标主机进行扫描。
-PI    设置这个选项，让 nmap 使用真正的 ping<span class="token punctuation">(</span>ICMP <span class="token builtin class-name">echo</span> 请求）来扫描目标主机是否正在运行。
-PB    这是默认的 <span class="token function">ping</span> 扫描选项。它使用 ACK<span class="token punctuation">(</span>-PT<span class="token punctuation">)</span> 和 ICMP<span class="token punctuation">(</span>-PI<span class="token punctuation">)</span> 两种扫描类型并行扫描。如果防火墙能够过滤其中一种包，使用这种方法，你就能够穿过防火墙。
-O    这个选项激活对 TCP/IP 指纹特征 <span class="token punctuation">(</span>fingerprinting<span class="token punctuation">)</span> 的扫描，获得远程主机的标志，也就是操作系统类型。
-I    打开 nmap 的反向标志扫描功能。
-f    使用碎片 IP 数据包发送 SYN、FIN、XMAS、NULL。包增加包过滤、入侵检测系统的难度，使其无法知道你的企图。
-v    冗余模式。强烈推荐使用这个选项，它会给出扫描过程中的详细信息。
-S <span class="token operator">&lt;</span>IP<span class="token operator">></span>    在一些情况下，nmap 可能无法确定你的源地址 <span class="token punctuation">(</span>nmap 会告诉你）。在这种情况使用这个选项给出你的 IP 地址。
-g port    设置扫描的源端口。一些天真的防火墙和包过滤器的规则集允许源端口为 DNS<span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">)</span> 或者 FTP-DATA<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> 的包通过和实现连接。显然，如果攻击者把源端口修改为 <span class="token number">20</span> 或者 <span class="token number">53</span>，就可以摧毁防火墙的防护。
-oN    把扫描结果重定向到一个可读的文件 logfilename 中。
-oS    扫描结果输出到标准输出。
--host_timeout    设置扫描一台主机的时间，以毫秒为单位。默认的情况下，没有超时限制。
--max_rtt_timeout    设置对每次探测的等待时间，以毫秒为单位。如果超过这个时间限制就重传或者超时。默认值是大约 <span class="token number">9000</span> 毫秒。
--min_rtt_timeout    设置 nmap 对每次探测至少等待你指定的时间，以毫秒为单位。
-M count    置进行 TCP connect<span class="token punctuation">(</span><span class="token punctuation">)</span> 扫描时，最多使用多少个套接字进行并行的扫描。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>获取远程主机系统类型和开放端口</li>
</ul>
<p>粗暴点就 <code>nmap -A IP</code>，或者 <code>nmap -sS -P0 -sV -O</code></p>
<ul>
<li>探测内网在线主机</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap -sP <span class="token number">192.168</span>.0.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><h4 id="fio"><a href="#fio" class="headerlink" title="fio"></a><a target="_blank" rel="noopener" href="https://github.com/axboe/fio">fio</a></h4><p>用来做磁盘性能测试，十分强大的磁盘性能测试工具，可配置项和参数也很丰富。</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> fio

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> fio<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token key attr-name">filename</span><span class="token punctuation">=</span><span class="token value attr-value">/tmp        # 测试文件名称，通常选择需要测试的盘的 data 目录</span>
<span class="token key attr-name">direct</span><span class="token punctuation">=</span><span class="token value attr-value">1             # 测试过程绕过机器自带的 buffer。使测试结果更真实</span>
<span class="token key attr-name">rw</span><span class="token punctuation">=</span><span class="token value attr-value">randwrite         # 测试随机写的 I/O</span>
<span class="token key attr-name">rw</span><span class="token punctuation">=</span><span class="token value attr-value">randrw            # 测试随机写和读的 I/O</span>
<span class="token key attr-name">bs</span><span class="token punctuation">=</span><span class="token value attr-value">16k               # 单次 io 的块文件大小为 16k</span>
<span class="token key attr-name">bsrange</span><span class="token punctuation">=</span><span class="token value attr-value">512-2048     # 同上，提定数据块的大小范围</span>
<span class="token key attr-name">size</span><span class="token punctuation">=</span><span class="token value attr-value">5G              # 本次的测试文件大小为 5g，以每次 4k 的 io 进行测试</span>
<span class="token key attr-name">numjobs</span><span class="token punctuation">=</span><span class="token value attr-value">30           # 本次的测试线程为 30 个</span>
<span class="token key attr-name">runtime</span><span class="token punctuation">=</span><span class="token value attr-value">1000         # 测试时间 1000 秒，如果不写则一直将 5g 文件分 4k 每次写完为止</span>
<span class="token key attr-name">ioengine</span><span class="token punctuation">=</span><span class="token value attr-value">psync       #io 引擎使用 psync 方式</span>
<span class="token key attr-name">rwmixwrite</span><span class="token punctuation">=</span><span class="token value attr-value">30        # 在混合读写的模式下，写占 30%</span>
group_reporting      # 关于显示结果的，汇总每个进程的信息

<span class="token key attr-name">lockmem</span><span class="token punctuation">=</span><span class="token value attr-value">1G           # 只使用 1g 内存进行测试s</span>
zero_buffers         # 用 0 初始化系统 buffer
<span class="token key attr-name">nrfiles</span><span class="token punctuation">=</span><span class="token value attr-value">8            # 每个进程生成文件的数量</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>注意：</code> 只要不是测试空盘，<code>filename</code> 参数千万不要使用类似 <code>/dev/sda</code> 这无异于删库跑路 😂。所以推荐使用路径而不是设备。</p>
<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@nfs ~
╰─<span class="token comment"># fio -filename=/tmp/test.file -direct=1 -iodepth 1 -thread -rw=randrw -rwmixread=70 -ioengine=psync -bs=16k -size=1G -numjobs=30 -runtime=100 -group_reporting -name=mytest1</span>
mytest1: <span class="token punctuation">(</span>g<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>: <span class="token assign-left variable">rw</span><span class="token operator">=</span>randrw, <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token punctuation">(</span>R<span class="token punctuation">)</span> <span class="token number">16</span>.0KiB-16.0KiB, <span class="token punctuation">(</span>W<span class="token punctuation">)</span> <span class="token number">16</span>.0KiB-16.0KiB, <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token number">16</span>.0KiB-16.0KiB, <span class="token assign-left variable">ioengine</span><span class="token operator">=</span>psync, <span class="token assign-left variable">iodepth</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">..</span>.
fio-3.7
Starting <span class="token number">30</span> threads
mytest1: Laying out IO <span class="token function">file</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">file</span> / 1024MiB<span class="token punctuation">)</span>
Jobs: <span class="token number">30</span> <span class="token punctuation">(</span>f<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>: <span class="token punctuation">[</span>m<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">100.0</span>%<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span>1265KiB/s,w<span class="token operator">=</span>560KiB/s<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span><span class="token number">79</span>,w<span class="token operator">=</span><span class="token number">35</span> IOPS<span class="token punctuation">]</span><span class="token punctuation">[</span>eta 00m:00s<span class="token punctuation">]</span>
mytest1: <span class="token punctuation">(</span>groupid<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">jobs</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>: <span class="token assign-left variable">err</span><span class="token operator">=</span> <span class="token number">0</span>: <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">45930</span>: Mon Apr <span class="token number">27</span> <span class="token number">23</span>:09:21 <span class="token number">2020</span>
	read: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">71</span>, <span class="token assign-left variable">BW</span><span class="token operator">=</span>1149KiB/s <span class="token punctuation">(</span>1177kB/s<span class="token punctuation">)</span><span class="token punctuation">(</span>113MiB/100321msec<span class="token punctuation">)</span>
	 clat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">349</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">999812</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">292473.60</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">188905.70</span>
	  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">349</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">999813</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">292473.83</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">188905.69</span>
	 clat percentiles <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>:
	  <span class="token operator">|</span>  <span class="token number">1</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">5</span><span class="token punctuation">]</span>,  <span class="token number">5</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">8</span><span class="token punctuation">]</span>, <span class="token number">10</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">11</span><span class="token punctuation">]</span>, <span class="token number">20</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">24</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">30</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">247</span><span class="token punctuation">]</span>, <span class="token number">40</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">313</span><span class="token punctuation">]</span>, <span class="token number">50</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">342</span><span class="token punctuation">]</span>, <span class="token number">60</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">372</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">70</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">401</span><span class="token punctuation">]</span>, <span class="token number">80</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">430</span><span class="token punctuation">]</span>, <span class="token number">90</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">481</span><span class="token punctuation">]</span>, <span class="token number">95</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">542</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">751</span><span class="token punctuation">]</span>, <span class="token number">99</span>.50th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">818</span><span class="token punctuation">]</span>, <span class="token number">99</span>.90th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">894</span><span class="token punctuation">]</span>, <span class="token number">99</span>.95th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">936</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.99th<span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1003</span><span class="token punctuation">]</span>
	bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>   <span class="token number">31</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>   <span class="token number">96</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">3.53</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">40.55</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">14.30</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">5661</span>
	iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>    <span class="token number">1</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>    <span class="token number">6</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span> <span class="token number">2.48</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">0.93</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">5661</span>
  write: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">30</span>, <span class="token assign-left variable">BW</span><span class="token operator">=</span>483KiB/s <span class="token punctuation">(</span>494kB/s<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">47</span>.3MiB/100321msec<span class="token punctuation">)</span>
	 clat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">937</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">297.02</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">194.75</span>
	  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">937</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">297.02</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">194.75</span>
	 clat percentiles <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>:
	  <span class="token operator">|</span>  <span class="token number">1</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">5</span><span class="token punctuation">]</span>,  <span class="token number">5</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">9</span><span class="token punctuation">]</span>, <span class="token number">10</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">11</span><span class="token punctuation">]</span>, <span class="token number">20</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">16</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">30</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">266</span><span class="token punctuation">]</span>, <span class="token number">40</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">326</span><span class="token punctuation">]</span>, <span class="token number">50</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">355</span><span class="token punctuation">]</span>, <span class="token number">60</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">380</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">70</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">405</span><span class="token punctuation">]</span>, <span class="token number">80</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">435</span><span class="token punctuation">]</span>, <span class="token number">90</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">481</span><span class="token punctuation">]</span>, <span class="token number">95</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">550</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">760</span><span class="token punctuation">]</span>, <span class="token number">99</span>.50th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">810</span><span class="token punctuation">]</span>, <span class="token number">99</span>.90th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">902</span><span class="token punctuation">]</span>, <span class="token number">99</span>.95th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">927</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.99th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">936</span><span class="token punctuation">]</span>
	bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>   <span class="token number">31</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>  <span class="token number">256</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">9.65</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">46.52</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">25.43</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">2071</span>
	iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>    <span class="token number">1</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>   <span class="token number">16</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span> <span class="token number">2.85</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">1.61</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">2071</span>
  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">0.02</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">0.02</span>%
  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.28</span>%, <span class="token assign-left variable">10</span><span class="token operator">=</span><span class="token number">8.53</span>%, <span class="token assign-left variable">20</span><span class="token operator">=</span><span class="token number">10.86</span>%, <span class="token assign-left variable">50</span><span class="token operator">=</span><span class="token number">6.42</span>%, <span class="token assign-left variable">100</span><span class="token operator">=</span><span class="token number">0.90</span>%
  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">250</span><span class="token operator">=</span><span class="token number">2.90</span>%, <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">62.21</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">6.79</span>%, <span class="token assign-left variable">1000</span><span class="token operator">=</span><span class="token number">1.06</span>%
  cpu          <span class="token builtin class-name">:</span> <span class="token assign-left variable">usr</span><span class="token operator">=</span><span class="token number">0.00</span>%, <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.01</span>%, <span class="token assign-left variable">ctx</span><span class="token operator">=</span><span class="token number">19413</span>, <span class="token assign-left variable">majf</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">minf</span><span class="token operator">=</span><span class="token number">7</span>
  IO depths    <span class="token builtin class-name">:</span> <span class="token assign-left variable">1</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">2</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">>=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%
	  submit    <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">>=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%
	  complete  <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">>=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%
	  issued rwts: <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token number">7204,3026</span>,0,0 <span class="token assign-left variable">short</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0 <span class="token assign-left variable">dropped</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0
	  latency   <span class="token builtin class-name">:</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">window</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">percentile</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">depth</span><span class="token operator">=</span><span class="token number">1</span>

Run status group <span class="token number">0</span> <span class="token punctuation">(</span>all <span class="token function">jobs</span><span class="token punctuation">)</span>:
	READ: <span class="token assign-left variable">bw</span><span class="token operator">=</span>1149KiB/s <span class="token punctuation">(</span>1177kB/s<span class="token punctuation">)</span>, 1149KiB/s-1149KiB/s <span class="token punctuation">(</span>1177kB/s-1177kB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span>113MiB <span class="token punctuation">(</span>118MB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">100321</span>-100321msec
  WRITE: <span class="token assign-left variable">bw</span><span class="token operator">=</span>483KiB/s <span class="token punctuation">(</span>494kB/s<span class="token punctuation">)</span>, 483KiB/s-483KiB/s <span class="token punctuation">(</span>494kB/s-494kB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span><span class="token number">47</span>.3MiB <span class="token punctuation">(</span><span class="token number">49</span>.6MB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">100321</span>-100321msec

Disk stats <span class="token punctuation">(</span>read/write<span class="token punctuation">)</span>:
	 dm-0: <span class="token assign-left variable">ios</span><span class="token operator">=</span><span class="token number">7750</span>/3320, <span class="token assign-left variable">merge</span><span class="token operator">=</span><span class="token number">0</span>/0, <span class="token assign-left variable">ticks</span><span class="token operator">=</span><span class="token number">200950</span>/123253, <span class="token assign-left variable">in_queue</span><span class="token operator">=</span><span class="token number">324237</span>, <span class="token assign-left variable">util</span><span class="token operator">=</span><span class="token number">99.83</span>%, <span class="token assign-left variable">aggrios</span><span class="token operator">=</span><span class="token number">7765</span>/3135, <span class="token assign-left variable">aggrmerge</span><span class="token operator">=</span><span class="token number">0</span>/192, <span class="token assign-left variable">aggrticks</span><span class="token operator">=</span><span class="token number">201237</span>/111717, <span class="token assign-left variable">aggrin_queue</span><span class="token operator">=</span><span class="token number">312951</span>, <span class="token assign-left variable">aggrutil</span><span class="token operator">=</span><span class="token number">99.81</span>%
  sda: <span class="token assign-left variable">ios</span><span class="token operator">=</span><span class="token number">7765</span>/3135, <span class="token assign-left variable">merge</span><span class="token operator">=</span><span class="token number">0</span>/192, <span class="token assign-left variable">ticks</span><span class="token operator">=</span><span class="token number">201237</span>/111717, <span class="token assign-left variable">in_queue</span><span class="token operator">=</span><span class="token number">312951</span>, <span class="token assign-left variable">util</span><span class="token operator">=</span><span class="token number">99.81</span>%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="qperf"><a href="#qperf" class="headerlink" title="qperf"></a>qperf</h4><ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum <span class="token function">install</span> qperf
<span class="token function">apt</span> <span class="token function">install</span> qperf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@debian /opt/trojan
╰─<span class="token comment"># qperf --help examples</span>
In these examples, we first run qperf on a <span class="token function">node</span> called myserver <span class="token keyword">in</span> server
mode by invoking it with no arguments.  In all the subsequent examples, we
run qperf on another <span class="token function">node</span> and connect to the server <span class="token function">which</span> we assume has a
<span class="token function">hostname</span> of myserver.
	 * To run a TCP bandwidth and latency test:
		  qperf myserver tcp_bw tcp_lat
	 * To run a SDP bandwidth <span class="token builtin class-name">test</span> <span class="token keyword">for</span> <span class="token number">10</span> seconds:
		  qperf myserver -t <span class="token number">10</span> sdp_bw
	 * To run a UDP latency <span class="token builtin class-name">test</span> and <span class="token keyword">then</span> cause the server to terminate:
		  qperf myserver udp_lat quit
	 * To measure the RDMA UD latency and bandwidth:
		  qperf myserver ud_lat ud_bw
	 * To measure RDMA UC bi-directional bandwidth:
		  qperf myserver rc_bi_bw
	 * To get a range of TCP latencies with a message size from <span class="token number">1</span> to 64K
		  qperf myserver -oo msg_size:1:64K:*2 -vu tcp_lat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">root@debian-node-02-656868cc46-72lc9:/<span class="token comment"># qperf  -t 30 100.107.127.100 -v tcp_bw udp_bw tcp_lat udp_lat conf</span>
tcp_bw:
	 bw              <span class="token operator">=</span>  <span class="token number">3.24</span> GB/sec
	 msg_rate        <span class="token operator">=</span>  <span class="token number">49.4</span> K/sec
	 <span class="token function">time</span>            <span class="token operator">=</span>    <span class="token number">30</span> sec
	 send_cost       <span class="token operator">=</span>   <span class="token number">542</span> ms/GB
	 recv_cost       <span class="token operator">=</span>   <span class="token number">542</span> ms/GB
	 send_cpus_used  <span class="token operator">=</span>   <span class="token number">176</span> % cpus
	 recv_cpus_used  <span class="token operator">=</span>   <span class="token number">176</span> % cpus
udp_bw:
	 send_bw         <span class="token operator">=</span>  <span class="token number">2.62</span> GB/sec
	 recv_bw         <span class="token operator">=</span>  <span class="token number">2.37</span> GB/sec
	 msg_rate        <span class="token operator">=</span>  <span class="token number">72.3</span> K/sec
	 <span class="token function">time</span>            <span class="token operator">=</span>    <span class="token number">30</span> sec
	 send_cost       <span class="token operator">=</span>   <span class="token number">542</span> ms/GB
	 recv_cost       <span class="token operator">=</span>   <span class="token number">598</span> ms/GB
	 send_cpus_used  <span class="token operator">=</span>   <span class="token number">142</span> % cpus
	 recv_cpus_used  <span class="token operator">=</span>   <span class="token number">142</span> % cpus
tcp_lat:
	 latency        <span class="token operator">=</span>  <span class="token number">17.3</span> us
	 msg_rate       <span class="token operator">=</span>  <span class="token number">57.7</span> K/sec
	 <span class="token function">time</span>           <span class="token operator">=</span>    <span class="token number">30</span> sec
	 loc_cpus_used  <span class="token operator">=</span>   <span class="token number">110</span> % cpus
	 rem_cpus_used  <span class="token operator">=</span>   <span class="token number">110</span> % cpus
udp_lat:
	 latency        <span class="token operator">=</span>  <span class="token number">15.4</span> us
	 msg_rate       <span class="token operator">=</span>  <span class="token number">64.8</span> K/sec
	 <span class="token function">time</span>           <span class="token operator">=</span>    <span class="token number">30</span> sec
	 loc_cpus_used  <span class="token operator">=</span>   <span class="token number">111</span> % cpus
	 rem_cpus_used  <span class="token operator">=</span>   <span class="token number">111</span> % cpus
conf:
	 loc_node   <span class="token operator">=</span>  debian-node-02-656868cc46-72lc9
	 loc_cpu    <span class="token operator">=</span>  <span class="token number">8</span> Cores: Intel Xeon E3-1271 v3 @ <span class="token number">3</span>.60GHz
	 loc_os     <span class="token operator">=</span>  Linux <span class="token number">3.10</span>.0-862.el7.x86_64
	 loc_qperf  <span class="token operator">=</span>  <span class="token number">0.4</span>.11
	 rem_node   <span class="token operator">=</span>  debian-node-02-656868cc46-xftvq
	 rem_cpu    <span class="token operator">=</span>  <span class="token number">8</span> Cores: Intel Xeon E3-1271 v3 @ <span class="token number">3</span>.60GHz
	 rem_os     <span class="token operator">=</span>  Linux <span class="token number">3.10</span>.0-862.el7.x86_64
	 rem_qperf  <span class="token operator">=</span>  <span class="token number">0.4</span>.11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="iperf"><a href="#iperf" class="headerlink" title="iperf"></a>iperf</h4><ul>
<li>install</li>
<li>usage</li>
<li>output example</li>
</ul>
<h4 id="wrk"><a href="#wrk" class="headerlink" title="wrk"></a><a target="_blank" rel="noopener" href="https://github.com/wg/wrk/">wrk</a></h4><ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> clone https://github.com/wg/wrk.git --depth<span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">cd</span> wrk
<span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">./wrk
Usage: wrk <span class="token operator">&lt;</span>options<span class="token operator">></span> <span class="token operator">&lt;</span>url<span class="token operator">></span>
  Options:
	 -c, --connections <span class="token operator">&lt;</span>N<span class="token operator">></span>  Connections to keep <span class="token function">open</span> 需要模拟的个并发请求连接数量
	 -d, --duration    <span class="token operator">&lt;</span>T<span class="token operator">></span>  Duration of <span class="token builtin class-name">test</span> 测试的测试时长
	 -t, --threads     <span class="token operator">&lt;</span>N<span class="token operator">></span>  Number of threads to use 并发线程数量
	 -s, --script      <span class="token operator">&lt;</span>S<span class="token operator">></span>  Load Lua script <span class="token function">file</span>  指定 Lua 脚本的路径
	 -H, --header      <span class="token operator">&lt;</span>H<span class="token operator">></span>  Add header to request 指定请求带的 Header 参数
		  --latency          Print latency statistics 是否打印请求延迟统计
		  --timeout     <span class="token operator">&lt;</span>T<span class="token operator">></span>  Socket/request <span class="token function">timeout</span> 设置请求超时时间
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># 对 10.20.172.196 nginx 服务器进行测试</span>
╭─root@test ~/wrk ‹master›
╰─<span class="token comment"># ./wrk -t100 -c512 -d30s http://10.20.172.196</span>
Running 30s <span class="token builtin class-name">test</span> @ http://10.20.172.196
  <span class="token number">100</span> threads and <span class="token number">512</span> connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
	 Latency    <span class="token number">44</span>.71ms  <span class="token number">108</span>.75ms   <span class="token number">1</span>.99s    <span class="token number">89.05</span>%
	 Req/Sec   <span class="token number">369.78</span>    <span class="token number">207.57</span>     <span class="token number">1</span>.68k    <span class="token number">71.50</span>%
  <span class="token number">987158</span> requests <span class="token keyword">in</span> <span class="token number">30</span>.10s, <span class="token number">840</span>.66MB <span class="token builtin class-name">read</span>
  Socket errors: connect <span class="token number">0</span>, <span class="token builtin class-name">read</span> <span class="token number">0</span>, <span class="token function">write</span> <span class="token number">0</span>, <span class="token function">timeout</span> <span class="token number">22</span>
Requests/sec:  <span class="token number">32797.65</span>
Transfer/sec:     <span class="token number">27</span>.93MB
<span class="token comment"># 测试结果，基本能达到 3W+ 的 QPS 的性能</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="httperf"><a href="#httperf" class="headerlink" title="httperf"></a>httperf</h4><ul>
<li>install</li>
<li>usage</li>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@ubuntu-238 ~
╰─<span class="token comment"># httperf --server 10.20.172.196 --port 80 --num-conns 100 --rate 10 --timeout 1</span>
httperf --timeout<span class="token operator">=</span><span class="token number">1</span> --client<span class="token operator">=</span><span class="token number">0</span>/1 --server<span class="token operator">=</span><span class="token number">10.20</span>.172.196 --port<span class="token operator">=</span><span class="token number">80</span> --uri<span class="token operator">=</span>/ --rate<span class="token operator">=</span><span class="token number">10</span> --send-buffer<span class="token operator">=</span><span class="token number">4096</span> --recv-buffer<span class="token operator">=</span><span class="token number">16384</span> --num-conns<span class="token operator">=</span><span class="token number">100</span> --num-calls<span class="token operator">=</span><span class="token number">1</span>
httperf: warning: <span class="token function">open</span> <span class="token function">file</span> limit <span class="token operator">></span> FD_SETSIZE<span class="token punctuation">;</span> limiting max. <span class="token comment"># of open files to FD_SETSIZE</span>
Maximum connect burst length: <span class="token number">1</span>
<span class="token comment"># 响应速率</span>
Total: connections <span class="token number">100</span> requests <span class="token number">100</span> replies <span class="token number">100</span> test-duration <span class="token number">9.900</span> s
Connection rate: <span class="token number">10.1</span> conn/s <span class="token punctuation">(</span><span class="token number">99.0</span> ms/conn, <span class="token operator">&lt;=</span><span class="token number">1</span> concurrent connections<span class="token punctuation">)</span>
Connection <span class="token function">time</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>: min <span class="token number">0.1</span> avg <span class="token number">0.1</span> max <span class="token number">0.2</span> median <span class="token number">0.5</span> stddev <span class="token number">0.0</span>
Connection <span class="token function">time</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>: connect <span class="token number">0.0</span>
Connection length <span class="token punctuation">[</span>replies/conn<span class="token punctuation">]</span>: <span class="token number">1.000</span>
Request rate: <span class="token number">10.1</span> req/s <span class="token punctuation">(</span><span class="token number">99.0</span> ms/req<span class="token punctuation">)</span>
Request size <span class="token punctuation">[</span>B<span class="token punctuation">]</span>: <span class="token number">66.0</span>
<span class="token comment"># 服务器从请求中接收到第一个字节开始，到连接收到第一个字节所消耗的时间</span>
Reply rate <span class="token punctuation">[</span>replies/s<span class="token punctuation">]</span>: min <span class="token number">10.0</span> avg <span class="token number">10.0</span> max <span class="token number">10.0</span> stddev <span class="token number">0.0</span> <span class="token punctuation">(</span><span class="token number">1</span> samples<span class="token punctuation">)</span>
Reply <span class="token function">time</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>: response <span class="token number">0.1</span> transfer <span class="token number">0.0</span>
<span class="token comment"># 统计每个回复的大小，每个维度的单位都是字节(bytes),且都是平均数</span>
Reply size <span class="token punctuation">[</span>B<span class="token punctuation">]</span>: header <span class="token number">244.0</span> content <span class="token number">649.0</span> footer <span class="token number">0.0</span> <span class="token punctuation">(</span>total <span class="token number">893.0</span><span class="token punctuation">)</span>
Reply status: <span class="token assign-left variable">1xx</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">2xx</span><span class="token operator">=</span><span class="token number">100</span> <span class="token assign-left variable">3xx</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">4xx</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">5xx</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># 客户端CPU使用率的统计，User用户模式，System模式</span>
CPU <span class="token function">time</span> <span class="token punctuation">[</span>s<span class="token punctuation">]</span>: user <span class="token number">3.85</span> system <span class="token number">6.05</span> <span class="token punctuation">(</span>user <span class="token number">38.9</span>% system <span class="token number">61.1</span>% total <span class="token number">100.0</span>%<span class="token punctuation">)</span>
<span class="token comment"># 网络的吞吐量</span>
Net I/O: <span class="token number">9.5</span> KB/s <span class="token punctuation">(</span><span class="token number">0.1</span>*10^6 bps<span class="token punctuation">)</span>
<span class="token comment"># 发生错误的总数,客户端超时计数，每次从生成请求开始，如果没有响应即超时,</span>
<span class="token comment"># TCP连接失败</span>
Errors: total <span class="token number">0</span> client-timo <span class="token number">0</span> socket-timo <span class="token number">0</span> connrefused <span class="token number">0</span> connreset <span class="token number">0</span>
Errors: fd-unavail <span class="token number">0</span> addrunavail <span class="token number">0</span> ftab-full <span class="token number">0</span> other <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ab"><a href="#ab" class="headerlink" title="ab"></a><a href="">ab</a></h4><ul>
<li>install</li>
<li>usage</li>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@test ~
╰─<span class="token comment"># ab -n 1000 -c 1000 http://10.20.172.196/</span>
This is ApacheBench, Version <span class="token number">2.3</span> <span class="token operator">&lt;</span><span class="token variable">$Revision</span><span class="token builtin class-name">:</span> <span class="token number">1430300</span> $<span class="token operator">></span>
Copyright <span class="token number">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/
Benchmarking <span class="token number">10.20</span>.172.196 <span class="token punctuation">(</span>be patient<span class="token punctuation">)</span>
Completed <span class="token number">100</span> requests
Completed <span class="token number">200</span> requests
Completed <span class="token number">300</span> requests
Completed <span class="token number">400</span> requests
Completed <span class="token number">500</span> requests
Completed <span class="token number">600</span> requests
Completed <span class="token number">700</span> requests
Completed <span class="token number">800</span> requests
Completed <span class="token number">900</span> requests
Completed <span class="token number">1000</span> requests
Finished <span class="token number">1000</span> requests
Server Software:        nginx/1.15.8.1
Server Hostname:        <span class="token number">10.20</span>.172.196
Server Port:            <span class="token number">80</span>
Document Path:          /
Document Length:        <span class="token number">649</span> bytes
Concurrency Level:      <span class="token number">1000</span>
Time taken <span class="token keyword">for</span> tests:   <span class="token number">0.107</span> seconds
Complete requests:      <span class="token number">1000</span>
Failed requests:        <span class="token number">0</span>
Write errors:           <span class="token number">0</span>
Total transferred:      <span class="token number">888000</span> bytes
HTML transferred:       <span class="token number">649000</span> bytes
Requests per second:    <span class="token number">9313.50</span> <span class="token punctuation">[</span><span class="token comment">#/sec] (mean)</span>
Time per request:       <span class="token number">107.371</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span> <span class="token punctuation">(</span>mean<span class="token punctuation">)</span>
Time per request:       <span class="token number">0.107</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span> <span class="token punctuation">(</span>mean, across all concurrent requests<span class="token punctuation">)</span>
Transfer rate:          <span class="token number">8076.55</span> <span class="token punctuation">[</span>Kbytes/sec<span class="token punctuation">]</span> received

Connection Times <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
				  min  mean<span class="token punctuation">[</span>+/-sd<span class="token punctuation">]</span> median   max
Connect:        <span class="token number">0</span>   <span class="token number">29</span>   <span class="token number">8.1</span>     <span class="token number">29</span>      <span class="token number">42</span>
Processing:    <span class="token number">17</span>   <span class="token number">36</span>  <span class="token number">14.3</span>     <span class="token number">45</span>      <span class="token number">51</span>
Waiting:        <span class="token number">0</span>   <span class="token number">35</span>  <span class="token number">14.3</span>     <span class="token number">44</span>      <span class="token number">50</span>
Total:         <span class="token number">42</span>   <span class="token number">65</span>   <span class="token number">9.0</span>     <span class="token number">64</span>      <span class="token number">87</span>

Percentage of the requests served within a certain <span class="token function">time</span> <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
  <span class="token number">50</span>%     <span class="token number">64</span>
  <span class="token number">66</span>%     <span class="token number">69</span>
  <span class="token number">75</span>%     <span class="token number">71</span>
  <span class="token number">80</span>%     <span class="token number">73</span>
  <span class="token number">90</span>%     <span class="token number">78</span>
  <span class="token number">95</span>%     <span class="token number">81</span>
  <span class="token number">98</span>%     <span class="token number">84</span>
  <span class="token number">99</span>%     <span class="token number">86</span>
 <span class="token number">100</span>%     <span class="token number">87</span> <span class="token punctuation">(</span>longest request<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="stress"><a href="#stress" class="headerlink" title="stress"></a>stress</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.tecmint.com/linux-cpu-load-stress-test-with-stress-ng-tool/">Stress&#x2F;Stress-NG</a> 是 Linux 下两个常用的系统级压力测试工具，<strong>stress</strong> 命令简单易用，<strong>stress-ng</strong> 是 stress 的升级版，支持<strong>数百个参数定制各种压 CPU、内存、IO、网络</strong>的姿势。在系统过载的场景下，应用服务可能会出现意想不到的错误或异常，在测试<strong>负载均衡和熔断降级</strong>时非常有用。这里只列举了几个常用的命令，详细使用参考”stress-ng –help”或”man stress-ng”。另外，这些“烤机”命令来测试服务器性能也是不错的。</p>
</blockquote>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHRL/CentOS</span>
yum <span class="token function">install</span> epel-release
yum <span class="token function">install</span> stress stress-ng

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> stress stress-ng

<span class="token comment"># stress-ng 基本用法与stress完全兼容，但有更多的参数可选，并且可以查看统计信息</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># 在两个CPU核心上跑开方运算，并且启动一个不断分配释放1G内存的线程，运行10秒后停止</span>
stress --cpu <span class="token number">2</span> --vm <span class="token number">1</span> --vm-bytes 1G  -v --timeout <span class="token number">10</span>

<span class="token comment"># 启动一个线程不断执行sync系统调用回写磁盘缓存，并且启动一个线程不停地写入删除512MB数据，运行10秒停止</span>
stress --io <span class="token number">1</span> --hdd <span class="token number">1</span> --hdd-bytes 512M -v --timeout <span class="token number">10</span>

<span class="token comment"># --sock 可以模拟大量的socket连接断开以及数据的发送接收等等</span>
stress-ng --sock <span class="token number">2</span> -v --timeout <span class="token number">10</span> --metrics-brief<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─root@debian /bashtop  ‹master›
╰─<span class="token comment"># stress --cpu 4 --vm 1 --vm-bytes 1G  -v --timeout 3</span>
stress: info: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> dispatching hogs: <span class="token number">4</span> cpu, <span class="token number">0</span> io, <span class="token number">1</span> vm, <span class="token number">0</span> hdd
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> using backoff <span class="token function">sleep</span> of 3000us
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> setting <span class="token function">timeout</span> to 3s
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> --<span class="token operator">></span> hogcpu worker <span class="token number">1</span> <span class="token punctuation">[</span><span class="token number">18179</span><span class="token punctuation">]</span> forked
stress: dbug: <span class="token punctuation">[</span><span class="token number">18176</span><span class="token punctuation">]</span> allocating <span class="token number">1073741824</span> bytes <span class="token punctuation">..</span>.
stress: dbug: <span class="token punctuation">[</span><span class="token number">18176</span><span class="token punctuation">]</span> allocating <span class="token number">1073741824</span> bytes <span class="token punctuation">..</span>.
stress: dbug: <span class="token punctuation">[</span><span class="token number">18176</span><span class="token punctuation">]</span> touching bytes <span class="token keyword">in</span> strides of <span class="token number">4096</span> bytes <span class="token punctuation">..</span>.
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18175</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18177</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18178</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18179</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18176</span> signalled normally
stress: info: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> successful run completed <span class="token keyword">in</span> 3s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200506154459952.png"></p>
<h3 id="小工具"><a href="#小工具" class="headerlink" title="小工具"></a>小工具</h3><h3 id="镜像源"><a href="#镜像源" class="headerlink" title="镜像源"></a>镜像源</h3><h2 id="发行版-1"><a href="#发行版-1" class="headerlink" title="发行版"></a>发行版</h2><h3 id="pxder"><a href="#pxder" class="headerlink" title="pxder"></a>pxder</h3><p>下班之后回到小窝之后就开始一天中最最愉悦的时刻，在 pixiv.net 上刷图。收藏喜欢的<del>老婆</del>插画。为了管理和下载自己收藏的插画作品，当然还是选择食用工具来下载啦 😂。</p>
<p>在二月份的时候帮小土豆和 nova 同学测试 webp server go 的 benchmark ，这个 pxder 帮了咱很大的忙，下载了 3W 多张图片做测试样本，最终使用脚本筛选出合适的文件大小来进行 prefetc 测试。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">╭─debian@debian /mnt/f/illustrations
╰─$ <span class="token function">du</span> -sh
50G     <span class="token builtin class-name">.</span>
╭─debian@debian /mnt/f/illustrations
╰─$ tree
<span class="token number">203</span> directories, <span class="token number">31831</span> files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="杂七杂八的"><a href="#杂七杂八的" class="headerlink" title="杂七杂八的"></a>杂七杂八的</h3><h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><p>nginx，除了建站當 Web 服務器，是咱在 openwrt 上裝的，目的是為了擺脫 ip 的辦定限制。因為有些設備通過域名來訪問，更換網絡環境，比如搬家之後只需要維修改一下域名解析即可。比如咱使用 X.lo.k8s.li 作為三級子域名分配給本地內網機器用。</p>
<h4 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg"></a>ffmpeg</h4><p>ffmpeg 能干的事情太多了，咱使用最多的还是合并视频转码视频，比如咱的 <a href="">mbcf</a> ，全称 Merge bilibili cilent file</p>
<h4 id="pandoc"><a href="#pandoc" class="headerlink" title="pandoc"></a><a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc">pandoc</a></h4><h4 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h4><h4 id="resilio-sync"><a href="#resilio-sync" class="headerlink" title="resilio sync"></a>resilio sync</h4><p>resilio sync ，是咱最重要的數據備份工具，比如咱使用 pxder 下載好收藏的老婆們，為了在手機上仔細欣賞老婆們，咱就用。resilio sync 將目錄同步到手機上，並且使用它來與 PC，iPhone ，Android ，Linux 三者無縫同步。簡直好用極了。</p>
<p>需要注意的是，如果跨公網同步，在一些網絡環境下因為 GFW 的緣故，無法建立起鏈接，這時候需要使用到預定義主機。其中有兩種比較好的方案，一是在公網 VPS 機器上安裝 resilio sync 並且加入到同步主機當中。這點缺點也明顯，需要佔用磁盤空間，如果同步大量文件以及幾十幾百 GB 級別的話，小盤機是扛不住的，需要另外添加磁盤。方法二是咱想到的，屢試不爽，就是將本機的 resilio sync 監聽端口 11354 使用 frp 內網穿透到公網服務器，然後在另一台機器上添加上預定義主機，IP 就是 frp 服務器的 IP，端口就是 frp 內網穿透的 remote port。這樣添加好預訂與主機之後，不到一分鐘就能發現主機並建立起連接。</p>
<h4 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h4><h4 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h4><h4 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h4><h4 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h4><h4 id="frp"><a href="#frp" class="headerlink" title="frp"></a>frp</h4><h4 id="openwrt"><a href="#openwrt" class="headerlink" title="openwrt"></a>openwrt</h4><h4 id="Trojan"><a href="#Trojan" class="headerlink" title="Trojan"></a>Trojan</h4><h3 id="shell-常用脚本"><a href="#shell-常用脚本" class="headerlink" title="shell 常用脚本"></a>shell 常用脚本</h3><h4 id="VPS-init"><a href="#VPS-init" class="headerlink" title="VPS init"></a>VPS init</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">apt</span> update
<span class="token function">apt</span> <span class="token function">install</span> nload ncdu <span class="token function">zsh</span> <span class="token function">git</span> <span class="token function">wget</span> <span class="token function">curl</span> <span class="token function">htop</span> sysstat psmisc nginx-full fail2ban
<span class="token function">curl</span>  https://get.acme.sh <span class="token operator">|</span> <span class="token function">sh</span>
<span class="token function">sh</span> -c <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="token variable">)</span></span>"</span>
<span class="token function">sed</span> -i <span class="token string">'s/ZSH_THEME="robbyrussell"/ZSH_THEME="bira"/g'</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="rawg"><a href="#rawg" class="headerlink" title="rawg"></a>rawg</h4><p>raw wget 的缩写</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># data: 2020-03-31</span>
<span class="token comment"># author: muzi502</span>
<span class="token comment"># for: Fuck GFW and download some raw file form github without proxy using jsDelivr CDN</span>
<span class="token comment"># usage: save the .she to your local such as /usr/bin/rawg, and chmod +x /usr/bin/rawg</span>
<span class="token comment"># use rawg https://github.com/ohmyzsh/ohmyzsh/blob/master/tools/install.sh to download</span>

<span class="token builtin class-name">set</span> -xue
<span class="token comment"># GitHub rul: https://github.com/ohmyzsh/ohmyzsh/blob/master/tools/install.sh</span>
<span class="token comment"># jsDelivr url: https://cdn.jsdelivr.net/gh/ohmyzsh/ohmyzsh/tools/install.sh</span>

<span class="token function">wget</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $1 <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/raw.githubusercontent.com/cdn.jsdelivr.net\/gh/'</span> <span class="token punctuation">\</span>
                <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/github.com/cdn.jsdelivr.net\/gh/'</span> <span class="token punctuation">\</span>
                <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\/master//'</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\/blob//'</span> <span class="token variable">)</span></span>

<span class="token comment"># curl $(echo $1 | sed 's/raw.githubusercontent.com/cdn.jsdelivr.net\/gh/' \</span>
<span class="token comment">#                | sed 's/github.com/cdn.jsdelivr.net\/gh/' \</span>
<span class="token comment">#                | sed 's/\/master//' | sed 's/\/blob//' )</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="kubeadm-pull-images"><a href="#kubeadm-pull-images" class="headerlink" title="kubeadm pull images"></a>kubeadm pull images</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># for: pull kubeamd images and get kubeadm kubectl kubelet binary</span>
<span class="token comment"># date: 2020-04-29</span>
<span class="token comment"># author: muzi502</span>

<span class="token builtin class-name">set</span> -xue
<span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y apt-transport-https <span class="token function">curl</span>
<span class="token function">curl</span> -s https://packages.cloud.google.com/apt/doc/apt-key.gpg <span class="token operator">|</span> apt-key <span class="token function">add</span> -
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">></span>/etc/apt/sources.list.d/kubernetes.list</span>
deb https://apt.kubernetes.io/ kubernetes-xenial main
EOF</span>
<span class="token function">apt-get</span> update

<span class="token keyword">for</span> <span class="token for-or-select variable">version</span> <span class="token keyword">in</span> <span class="token number">1.17</span>.5
<span class="token keyword">do</span>
    <span class="token function">apt</span> purge -y kubeadm kubelet kubectl
    <span class="token function">apt</span> <span class="token function">install</span> -y <span class="token assign-left variable">kubeadm</span><span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>-00 <span class="token assign-left variable">kubelet</span><span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>-00 <span class="token assign-left variable">kubectl</span><span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>-00
    <span class="token function">mkdir</span> -p <span class="token variable">$&#123;version&#125;</span>/bin
    <span class="token function">rm</span> -rf <span class="token variable">$&#123;version&#125;</span>/bin/*
    <span class="token function">cp</span> -a <span class="token variable"><span class="token variable">$(</span><span class="token function">whereis</span> kubelet <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">":"</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span> <span class="token variable">$&#123;version&#125;</span>/bin/
    <span class="token function">cp</span> -a <span class="token variable"><span class="token variable">$(</span><span class="token function">whereis</span> kubeadm <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">":"</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span> <span class="token variable">$&#123;version&#125;</span>/bin/
    <span class="token function">cp</span> -a <span class="token variable"><span class="token variable">$(</span><span class="token function">whereis</span> kubectl <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">":"</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span> <span class="token variable">$&#123;version&#125;</span>/bin/
    kubeadm config images pull --kubernetes-version<span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>
    <span class="token function">docker</span> save -o kubeadm_v<span class="token variable">$&#123;version&#125;</span>.tar <span class="token variable"><span class="token variable">`</span>kubeadm config images list --kubernetes-version<span class="token operator">=</span>$<span class="token punctuation">&#123;</span>version<span class="token punctuation">&#125;</span><span class="token variable">`</span></span>
    <span class="token function">mv</span> kubeadm_v<span class="token variable">$&#123;version&#125;</span>.tar <span class="token variable">$&#123;version&#125;</span>
    <span class="token function">tar</span> -czvf <span class="token variable">$&#123;version&#125;</span><span class="token punctuation">&#123;</span>.tar.gz,<span class="token punctuation">&#125;</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ss-obfs"><a href="#ss-obfs" class="headerlink" title="ss-obfs"></a>ss-obfs</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">
<span class="token comment">#/bin/bash</span>
<span class="token comment"># for: install shadowsocks-libev and obfs</span>
<span class="token comment"># date: 2019-03-11</span>
<span class="token comment"># by: muzi502</span>
<span class="token function">apt-get</span> update
<span class="token function">apt-get</span> -y  <span class="token function">install</span> shadowsocks-libev simple-obfs rng-tools
rngd -r /dev/urandom
<span class="token function">mkdir</span> -p /etc/shadowsocks-libev/

<span class="token function">cat</span> <span class="token operator">></span> /etc/shadowsocks-libev/config.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF
&#123;
    "server":"0.0.0.0",
    "server_port":8964,
    "local_port":1080,
    "password":"1984fuckGFW",
    "timeout":60,
    "method":"chacha20",
    "plugin":"obfs-server",
    "plugin_opts":"obfs=http"
&#125;
EOF</span>
systemctl restart shadowsocks-libev.service
modprobe tcp_bbr
<span class="token builtin class-name">echo</span> <span class="token string">"tcp_bbr"</span> <span class="token operator">>></span> /etc/modules-load.d/modules.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.default_qdisc=fq"</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_congestion_control=bbr"</span> <span class="token operator">>></span> /etc/sysctl.conf
sysctl -p
sysctl net.ipv4.tcp_available_congestion_control
sysctl net.ipv4.tcp_congestion_control
<span class="token function">touch</span> /etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.wmem_max = 67108864"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.rmem_default = 65536"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.wmem_default = 65536"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.netdev_max_backlog = 4096"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.somaxconn = 4096"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_syncookies = 1"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_tw_reuse = 1"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_tw_recycle = 0"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_fin_timeout = 30"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_keepalive_time = 1200"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.ip_local_port_range = 10000 65000"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_max_syn_backlog = 4096"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_max_tw_buckets = 5000"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_fastopen = 3"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_rmem = 4096 87380 67108864"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_wmem = 4096 65536 67108864"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_mtu_probing = 1"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
sysctl --system
lsmod <span class="token operator">|</span> <span class="token function">grep</span> bbr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="mcbf"><a href="#mcbf" class="headerlink" title="mcbf"></a>mcbf</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># for: bulk merge bilibili UWP download file *.flv</span>
<span class="token comment"># by: blog.k8s.li</span>
<span class="token comment"># date: 2019-01-12</span>
<span class="token comment"># 将该脚放到 UWP 客户端下载缓存主目录下执行，安装 ffmpeg、jq</span>

<span class="token builtin class-name">set</span> -xu
<span class="token assign-left variable">download_dir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>
<span class="token assign-left variable">mp4_dir</span><span class="token operator">=</span><span class="token variable">$&#123;download_dir&#125;</span>/mp4
<span class="token function">mkdir</span> -p <span class="token variable">$&#123;mp4_dir&#125;</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">video_dir</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> <span class="token operator">|</span> <span class="token function">sort</span> -n <span class="token operator">|</span> <span class="token function">grep</span> -E -v <span class="token string">"\.|mp4"</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>/<span class="token variable">$&#123;video_dir&#125;</span>
  <span class="token assign-left variable">up_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".Uploader"</span> *.dvi <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
  <span class="token function">mkdir</span> -p <span class="token variable">$&#123;mp4_dir&#125;</span>/<span class="token variable">$&#123;up_name&#125;</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">p_dir</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> <span class="token operator">|</span> <span class="token function">sort</span> -n <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"\."</span><span class="token variable">)</span></span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>/<span class="token variable">$&#123;video_dir&#125;</span>/<span class="token variable">$&#123;p_dir&#125;</span>
    <span class="token assign-left variable">video_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".Title"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">part_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".PartName"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">upload_time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -Eo <span class="token string">"20[0-9][0-9]-[0-9][0-9]-[0-9][0-9]"</span> *.info<span class="token variable">)</span></span>
    <span class="token assign-left variable">Uploader</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".Uploader"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">mp4_audio</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".VideoDashInfo"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"null"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$&#123;part_name&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token assign-left variable">mp4_file_name</span><span class="token operator">=</span><span class="token variable">$&#123;video_name&#125;</span>.mp4
    <span class="token keyword">else</span>
    <span class="token assign-left variable">mp4_file_name</span><span class="token operator">=</span><span class="token variable">$&#123;video_name&#125;</span>_<span class="token variable">$&#123;p_dir&#125;</span>_<span class="token variable">$&#123;part_name&#125;</span>.mp4
    <span class="token keyword">fi</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"null"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$&#123;mp4_audio&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token function">ls</span> *.flv <span class="token operator">|</span> <span class="token function">sort</span> -n <span class="token operator">></span> ff.txt
    <span class="token function">sed</span> -i <span class="token string">'s/^/file /g'</span> ff.txt
    ffmpeg -f concat -i ff.txt -c copy <span class="token variable">$&#123;mp4_dir&#125;</span>/<span class="token variable">$&#123;up_name&#125;</span>/<span class="token string">"<span class="token variable">$&#123;mp4_file_name&#125;</span>"</span><span class="token punctuation">;</span><span class="token function">rm</span> -rf ff.txt
    <span class="token keyword">else</span>
    ffmpeg  -i video.mp4 -i audio1.mp4 -c:v copy -c:a copy <span class="token variable">$&#123;mp4_dir&#125;</span>/<span class="token variable">$&#123;up_name&#125;</span>/<span class="token string">"<span class="token variable">$&#123;mp4_file_name&#125;</span>"</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>/<span class="token variable">$&#123;video_dir&#125;</span>
  <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>
  <span class="token keyword">done</span>
<span class="token comment"># 如果需要保留原视频请注释掉下面这一行</span>
<span class="token comment">#rm -rf $&#123;download_dir&#125;/$&#123;video_dir&#125;</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="conoha-wallpaper-download"><a href="#conoha-wallpaper-download" class="headerlink" title="conoha wallpaper download"></a>conoha wallpaper download</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># for: download conoha wallpaper</span>
<span class="token comment"># by: muzi502</span>
<span class="token comment"># date: 2020-02-11</span>
<span class="token builtin class-name">set</span> -xue

<span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> https://conoha.mikumo.com/wallpaper/ <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">grep</span> li <span class="token operator">|</span> <span class="token function">grep</span> data-wallpaper-design<span class="token operator">=</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/&lt;li//g'</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/">//g'</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/^[ \t]*//g'</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/data-wallpaper-design="//g'</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^/https:\/\/conoha.mikumo.com\/wp-content\/themes\/conohamikumo\/images\/wallpaper\//'</span><span class="token variable">)</span></span>

<span class="token keyword">for</span> <span class="token for-or-select variable">pic</span> <span class="token keyword">in</span> <span class="token variable">$&#123;p&#125;</span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">file_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $<span class="token punctuation">&#123;</span>pic<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">"/"</span> <span class="token string">'&#123;print $9&#125;'</span><span class="token variable">)</span></span>
    <span class="token function">wget</span> <span class="token variable">$&#123;pic&#125;</span>/1080_1920.jpg -O <span class="token variable">$&#123;file_name&#125;</span>_1080.jpg
    <span class="token function">wget</span> <span class="token variable">$&#123;pic&#125;</span>/2560_1440.jpg -O <span class="token variable">$&#123;file_name&#125;</span>_1440.jpg
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="http://code2life.top/2019/05/02/0035-fault-injection/">[DevOps] Linux 操作系统层的故障注入</a></li>
</ul>

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/%E6%90%AC%E7%A0%96/" rel="tag"># 搬砖</a>
              <a href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag"># 工具</a>
              <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" rel="tag"># 命令行</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/from-chongqing-to-hangzhou.html" rel="prev" title="无砖可搬的日子：换厂记">
                  <i class="fa fa-chevron-left"></i> 无砖可搬的日子：换厂记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/skopeo-101.html" rel="next" title="镜像搬运工 skopeo 初体验">
                  镜像搬运工 skopeo 初体验 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Reimu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">1.7m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">25:36</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"muzi","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
