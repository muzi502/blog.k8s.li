<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="rgba(0,0,0,0)"><meta name="generator" content="Hexo 6.1.0">

<link rel="preconnect" href="//fonts.loli.net" crossorigin>
<link rel="preconnect" href="null//null" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="rgba(0,0,0,0)">
  <link rel="manifest" href="/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-atom.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.k8s.li","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å’•å’•å’•æœ¬æ¥æ‰“ç®—ä¸Šä¸Šå‘¨å°±è¯¥æ›´æ–°å®Œçš„è¿™ç¯‡åšæ–‡ï¼Œä½†æœ€è¿‘å› ä¸ºç¦»èŒçš„äº‹å®œæ‹–åˆ°ä»Šå¤©æ™šä¸Šæ‰æ¡èµ·æ¥ï¼Œæœ€ç»ˆè¿˜æ˜¯å’•å’•å’•äº† ğŸ˜‚ã€‚è™½ç„¶æ–‡ç« è¿˜æœªè¡¥å……å®Œï¼Œç­‰åˆ°ä»¥åå†ç»§ç»­æ›´æ–°ä¸Šå§ã€‚ Linuxç¡®åˆ‡åœ°æ¥è®² Linux ä»…ä»…æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œè€Œä¸”å®ƒçš„ä»£ç åœ¨ä¸€ä¸ªå‘è¡Œç‰ˆä¸­çš„å ç”¨ç‡ä¹Ÿä¸åˆ° 20%ã€‚ å…¥é—¨å’±ä¸€ç›´è§‰ç€å­¦ä¹ æŠ€æœ¯å§ï¼Œå¹¶ä¸æ˜¯çœ‹ä¹¦çœ‹è§†é¢‘èƒ½å­¦ä¼šçš„ã€‚å¯¹äºä¸€äº›åº•å±‚çš„åªæ˜¯ç¡®å®éœ€è¦ä»”ç»†ç ”è¯»ä¹¦ç±æ¥åƒé€ä»–ï¼Œè¿™è¶Ÿä¼šè®©æˆ‘ä»¬å¯¹æ“ä½œç³»ç»Ÿè¿™ä¸ªä½“ç³»ç»“æ„">
<meta property="og:type" content="blog">
<meta property="og:title" content="æœ¨å­çš„æ¬ç –å·¥å…·ğŸ˜‚">
<meta property="og:url" content="https://blog.k8s.li/My-brick-lifting-tools.html">
<meta property="og:site_name" content="Reimu&#39;s blog">
<meta property="og:description" content="å’•å’•å’•æœ¬æ¥æ‰“ç®—ä¸Šä¸Šå‘¨å°±è¯¥æ›´æ–°å®Œçš„è¿™ç¯‡åšæ–‡ï¼Œä½†æœ€è¿‘å› ä¸ºç¦»èŒçš„äº‹å®œæ‹–åˆ°ä»Šå¤©æ™šä¸Šæ‰æ¡èµ·æ¥ï¼Œæœ€ç»ˆè¿˜æ˜¯å’•å’•å’•äº† ğŸ˜‚ã€‚è™½ç„¶æ–‡ç« è¿˜æœªè¡¥å……å®Œï¼Œç­‰åˆ°ä»¥åå†ç»§ç»­æ›´æ–°ä¸Šå§ã€‚ Linuxç¡®åˆ‡åœ°æ¥è®² Linux ä»…ä»…æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œè€Œä¸”å®ƒçš„ä»£ç åœ¨ä¸€ä¸ªå‘è¡Œç‰ˆä¸­çš„å ç”¨ç‡ä¹Ÿä¸åˆ° 20%ã€‚ å…¥é—¨å’±ä¸€ç›´è§‰ç€å­¦ä¹ æŠ€æœ¯å§ï¼Œå¹¶ä¸æ˜¯çœ‹ä¹¦çœ‹è§†é¢‘èƒ½å­¦ä¼šçš„ã€‚å¯¹äºä¸€äº›åº•å±‚çš„åªæ˜¯ç¡®å®éœ€è¦ä»”ç»†ç ”è¯»ä¹¦ç±æ¥åƒé€ä»–ï¼Œè¿™è¶Ÿä¼šè®©æˆ‘ä»¬å¯¹æ“ä½œç³»ç»Ÿè¿™ä¸ªä½“ç³»ç»“æ„">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p.k8s.li/20200506142544440.png">
<meta property="og:image" content="https://p.k8s.li/20200506151706148.png">
<meta property="og:image" content="https://p.k8s.li/20200506143310955.png">
<meta property="og:image" content="https://p.k8s.li/20200506154459952.png">
<meta property="article:published_time" content="2020-05-21T16:00:00.000Z">
<meta property="article:modified_time" content="2022-05-02T00:41:22.134Z">
<meta property="article:author" content="Reimu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="æ¬ç –">
<meta property="article:tag" content="å·¥å…·">
<meta property="article:tag" content="å‘½ä»¤è¡Œ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p.k8s.li/20200506142544440.png">


<link rel="canonical" href="https://blog.k8s.li/My-brick-lifting-tools.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.k8s.li/My-brick-lifting-tools.html","path":"My-brick-lifting-tools.html","title":"æœ¨å­çš„æ¬ç –å·¥å…·ğŸ˜‚"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>æœ¨å­çš„æ¬ç –å·¥å…·ğŸ˜‚ | Reimu's blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Reimu's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Reimu's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-books"><a href="https://reading.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>Books</a></li><li class="menu-item menu-item-kindle"><a href="https://kindle.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-swatchbook fa-fw"></i>Kindle</a></li><li class="menu-item menu-item-friend"><a href="/friends.html" rel="section"><i class="fa fa-link fa-fw"></i>Friend</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%92%95%E5%92%95%E5%92%95"><span class="nav-number">1.</span> <span class="nav-text">å’•å’•å’•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux"><span class="nav-number">2.</span> <span class="nav-text">Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-number">2.1.</span> <span class="nav-text">å…¥é—¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%BE%E5%BC%83"><span class="nav-number">2.2.</span> <span class="nav-text">æ”¾å¼ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E8%A1%8C%E7%89%88"><span class="nav-number">2.3.</span> <span class="nav-text">å‘è¡Œç‰ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7"><span class="nav-number">3.</span> <span class="nav-text">å‘½ä»¤è¡Œå·¥å…·</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-number">3.1.</span> <span class="nav-text">æ–‡æœ¬å¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="nav-number">3.2.</span> <span class="nav-text">ç³»ç»Ÿä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bashtop"><span class="nav-number">3.3.</span> <span class="nav-text">bashtop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ls-%E5%85%84%E5%BC%9F%E4%BB%AC"><span class="nav-number">3.4.</span> <span class="nav-text">ls å…„å¼Ÿä»¬</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#proc"><span class="nav-number">3.5.</span> <span class="nav-text">proc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C"><span class="nav-number">3.6.</span> <span class="nav-text">ç½‘ç»œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">3.7.</span> <span class="nav-text">æµ‹è¯•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E5%B7%A5%E5%85%B7"><span class="nav-number">3.8.</span> <span class="nav-text">å°å·¥å…·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E6%BA%90"><span class="nav-number">3.9.</span> <span class="nav-text">é•œåƒæº</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E8%A1%8C%E7%89%88-1"><span class="nav-number">4.</span> <span class="nav-text">å‘è¡Œç‰ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pxder"><span class="nav-number">4.1.</span> <span class="nav-text">pxder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84"><span class="nav-number">4.2.</span> <span class="nav-text">æ‚ä¸ƒæ‚å…«çš„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell-%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC"><span class="nav-number">4.3.</span> <span class="nav-text">shell å¸¸ç”¨è„šæœ¬</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">5.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Reimu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Reimu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">115</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">147</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:muzi502.li@gmail.com" title="E-Mail â†’ mailto:muzi502.li@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi502" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa-brands fa-telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa-solid fa-square-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/My-brick-lifting-tools.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Reimu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Reimu's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="æœ¨å­çš„æ¬ç –å·¥å…·ğŸ˜‚ | Reimu's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          æœ¨å­çš„æ¬ç –å·¥å…·ğŸ˜‚
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-05-22 2020-05-22T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2020-05-22T00:00:00+08:00">2020-05-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-05-02 2022-05-02T08:41:22+08:00" itemprop="dateModified" datetime="2022-05-02T08:41:22+08:00">2022-05-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/My-brick-lifting-tools.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="My-brick-lifting-tools.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>43k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>39 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="å’•å’•å’•"><a href="#å’•å’•å’•" class="headerlink" title="å’•å’•å’•"></a>å’•å’•å’•</h2><p>æœ¬æ¥æ‰“ç®—ä¸Šä¸Šå‘¨å°±è¯¥æ›´æ–°å®Œçš„è¿™ç¯‡åšæ–‡ï¼Œä½†æœ€è¿‘å› ä¸ºç¦»èŒçš„äº‹å®œæ‹–åˆ°ä»Šå¤©æ™šä¸Šæ‰æ¡èµ·æ¥ï¼Œæœ€ç»ˆè¿˜æ˜¯å’•å’•å’•äº† ğŸ˜‚ã€‚è™½ç„¶æ–‡ç« è¿˜æœªè¡¥å……å®Œï¼Œç­‰åˆ°ä»¥åå†ç»§ç»­æ›´æ–°ä¸Šå§ã€‚</p>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>ç¡®åˆ‡åœ°æ¥è®² Linux ä»…ä»…æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œè€Œä¸”å®ƒçš„ä»£ç åœ¨ä¸€ä¸ªå‘è¡Œç‰ˆä¸­çš„å ç”¨ç‡ä¹Ÿä¸åˆ° 20%ã€‚</p>
<h3 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h3><p>å’±ä¸€ç›´è§‰ç€å­¦ä¹ æŠ€æœ¯å§ï¼Œå¹¶ä¸æ˜¯çœ‹ä¹¦çœ‹è§†é¢‘èƒ½å­¦ä¼šçš„ã€‚å¯¹äºä¸€äº›åº•å±‚çš„åªæ˜¯ç¡®å®éœ€è¦ä»”ç»†ç ”è¯»ä¹¦ç±æ¥åƒé€ä»–ï¼Œè¿™è¶Ÿä¼šè®©æˆ‘ä»¬å¯¹æ“ä½œç³»ç»Ÿè¿™ä¸ªä½“ç³»ç»“æ„æœ‰æ›´ä¸‹é€å½»çš„è®¤è¯†ã€‚ä½†æ˜¯å‘¢ï¼Œå…‰çœ‹ä¸ç»ƒè¿˜æ˜¯ä¸è¡Œæ»´ï¼Œå’±å­¦ä¹  Linux çº¯é çç©ï¼ŒçæŠ˜è…¾ã€‚å’±å¤§å­¦æ—¶å­¦æ ¡æ²¡æœ‰å¼€è®¾ Linux è¯¾ç¨‹ï¼Œåªèƒ½é è‡ªå·±è‡ªå­¦ã€‚äºæ˜¯ä¹ï¼Œå’Œå¤§å®¶ä¸€æ ·ï¼Œæ­å»º WordPress ï¼Œä¸€æ­¥æ­¥å®‰è£… LAMP ç¯å¢ƒï¼Œé…ç½® iptablesï¼Œå†™ shell è„šæœ¬å¤‡ä»½ç½‘ç«™ï¼Œæ­å»ºæ¢¯å­ç­‰ç­‰ã€‚å¯è°“æ˜¯ç©å¾—ä¸äº¦ä¹ä¹ ğŸ˜‚ã€‚</p>
<p>æ‰€ä»¥è¯´å­¦ä¹ å’Œå…¥é—¨ Linux å’±è¿˜æ˜¯æ¨èé¸Ÿå“¥çš„ã€Šé¸Ÿå“¥ Linux ç§æˆ¿èœã€‹è¿™æœ¬ä¹¦ï¼Œç»“åˆç€è‡ªå·±æ­å»ºç½‘ç«™ä¸€æ­¥æ­¥æ¥å°±å¯ä»¥ã€‚</p>
<h3 id="æ”¾å¼ƒ"><a href="#æ”¾å¼ƒ" class="headerlink" title="æ”¾å¼ƒ"></a>æ”¾å¼ƒ</h3><p>å…¥é—¨å®Œ Linux ä¹‹åå°±å¼€å§‹æŒ‘æˆ˜é«˜éš¾åº¦çš„å•¦ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>OpenStack</li>
<li>Docker</li>
<li>Kubernetes</li>
<li>CI&#x2F;CD</li>
</ul>
<p>ç›®å‰æ¥è®²åœ¨è¿ç»´è¿™ä¸ªæ¬ç –è¡Œä¸šï¼Œkubernetes äº‘åŸç”Ÿæ— ç–‘æ˜¯æœ€å…·æœ‰æŒ‘æˆ˜æ€§å’Œå‰æ™¯çš„ï¼Œæ‰€ä»¥å¦‚æœæ±æƒ³æ›´è¿‘ä¸€å±‚æ¥¼å°±ä¸å¦¨å­¦ä¹ ä¸€ä¸‹ Docker å’Œ Kuberneets è¿™ä¸€å—ã€‚</p>
<h3 id="å‘è¡Œç‰ˆ"><a href="#å‘è¡Œç‰ˆ" class="headerlink" title="å‘è¡Œç‰ˆ"></a>å‘è¡Œç‰ˆ</h3><p>ä»è¿ç»´è¿™ä¸ªæ¬ç –è¡Œä¸šæ¥è®²ï¼Œä¼ä¸šå†…éƒ¨ä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆå½“å± RedHat å’Œ Debian å®¶æ—çš„æœ€å¤šï¼Œåƒå…¶ä»–çš„ä»€ä¹ˆ archlinux å’±è¿˜çœŸæ²¡è§è¿‡æœ‰åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„ï¼Œæ¯•ç«Ÿæ»šåŠ¨æ›´æ–°ä¸å°å¿ƒå°±æ»šæŒ‚äº†ä¸å¥½è¯´ ğŸ˜‚ã€‚å›½å†…ä¼ä¸šå’Œäº‘è®¡ç®—å‚å•†ä½¿ç”¨æœ€å¤šçš„å½“ç„¶æ˜¯ CentOS å•¦ï¼Œæˆ‘è®°å¾—æ˜¯åœ¨ 2018 å¹´å¹´æœ«çš„æ—¶å€™é˜¿é‡Œäº‘&#x2F;è…¾è®¯äº‘è¿˜æ²¡æœ‰ Ubuntu 1804 çš„äº‘ä¸»æœºå¯ç”¨ ğŸ˜‘ã€‚å›½å¤–ä½¿ç”¨ Ubuntu çš„è¾ƒå¤šä¸€äº›ï¼Œå’±æ˜¯å€¾å‘äºä½¿ç”¨ Ubuntu ğŸ˜</p>
<p>ä» <a target="_blank" rel="noopener" href="https://www.datanyze.com/">datanyze</a> å®¶å·æ¥ä¸€å¼ ä¼ä¸š Linux å¸‚åœºå æœ‰ç‡çš„ç»Ÿè®¡è¡¨æ ¼ <a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443">Operating Systems</a>ğŸ˜‚</p>
<table>
<thead>
<tr>
<th align="center">Ranking</th>
<th align="left">Technology</th>
<th align="right">Domains</th>
<th align="right">Market Share</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/ubuntu-market-share">Ubuntu</a></td>
<td align="right">278,611</td>
<td align="right">29.30%</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/unix-market-share">Unix</a></td>
<td align="right">192,215</td>
<td align="right">20.21%</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/centos-market-share">CentOS</a></td>
<td align="right">165,640</td>
<td align="right">17.42%</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/debian-market-share">Debian</a></td>
<td align="right">108,373</td>
<td align="right">11.40%</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-market-share">Linux</a></td>
<td align="right">24,563</td>
<td align="right">2.58%</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-server-market-share">Windows Server</a></td>
<td align="right">23,872</td>
<td align="right">2.51%</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/gentoo-market-share">Gentoo</a></td>
<td align="right">16,756</td>
<td align="right">1.76%</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/red-hat-enterprise-linux-market-share">Red Hat Enterprise Linux</a></td>
<td align="right">13,659</td>
<td align="right">1.44%</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-7-market-share">Windows 7</a></td>
<td align="right">11,843</td>
<td align="right">1.25%</td>
</tr>
<tr>
<td align="center">10</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/microsoft-windows-os-market-share">Microsoft Windows OS</a></td>
<td align="right">10,986</td>
<td align="right">1.16%</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">op Competitors</th>
<th align="right">Websites</th>
<th align="right">Market Share</th>
<th align="right">Versus Page</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/ubuntu-market-share">Ubuntu</a></td>
<td align="right">278,611</td>
<td align="right">29.30%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-ubuntu">Linux vs. Ubuntu</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/unix-market-share">Unix</a></td>
<td align="right">192,215</td>
<td align="right">20.21%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-unix">Linux vs. Unix</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/centos-market-share">CentOS</a></td>
<td align="right">165,640</td>
<td align="right">17.42%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-centos">Linux vs. CentOS</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/debian-market-share">Debian</a></td>
<td align="right">108,373</td>
<td align="right">11.40%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-debian">Linux vs. Debian</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-server-market-share">Windows Server</a></td>
<td align="right">23,872</td>
<td align="right">2.51%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-windows-server">Linux vs. Windows Server</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/gentoo-market-share">Gentoo</a></td>
<td align="right">16,756</td>
<td align="right">1.76%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-gentoo">Linux vs. Gentoo</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/red-hat-enterprise-linux-market-share">Red Hat Enterprise Linux</a></td>
<td align="right">13,659</td>
<td align="right">1.44%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-red-hat-enterprise-linux">Linux vs. Red Hat Enterprise Linux</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/windows-7-market-share">Windows 7</a></td>
<td align="right">11,843</td>
<td align="right">1.25%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-windows-7">Linux vs. Windows 7</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/microsoft-windows-os-market-share">Microsoft Windows OS</a></td>
<td align="right">10,986</td>
<td align="right">1.16%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-microsoft-windows-os">Linux vs. Microsoft Windows OS</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/freebsd-market-share">FreeBSD</a></td>
<td align="right">9,633</td>
<td align="right">1.01%</td>
<td align="right"><a target="_blank" rel="noopener" href="https://www.datanyze.com/market-share/operating-systems--443/linux-vs-freebsd">Linux vs. FreeBSD</a></td>
</tr>
</tbody></table>
<h4 id="RedHat-x2F-CentOS"><a href="#RedHat-x2F-CentOS" class="headerlink" title="RedHat&#x2F;CentOS"></a>RedHat&#x2F;CentOS</h4><h4 id="Debian-x2F-Ubuntu"><a href="#Debian-x2F-Ubuntu" class="headerlink" title="Debian&#x2F;Ubuntu"></a>Debian&#x2F;Ubuntu</h4><p>å’±çš„ VPS æ¸…ä¸€è‰² Ubuntu 1804 ï¼Œä¸»è¦æ˜¯çœäº‹å„¿ã€‚</p>
<h2 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h2><h3 id="æ–‡æœ¬å¤„ç†"><a href="#æ–‡æœ¬å¤„ç†" class="headerlink" title="æ–‡æœ¬å¤„ç†"></a>æ–‡æœ¬å¤„ç†</h3><p>æåˆ° Linux ä¸Šçš„æ–‡æœ¬å¤„ç†å·¥å…·å½“ç„¶æ˜¯ç¦»ä¸å¼€ä¸‰å‰‘å®¢ï¼ˆawkã€grepã€sedï¼‰ï¼Œè¿™ä¹Ÿæ˜¯å’±å½“åˆè·Ÿç€ã€Šé¸Ÿå“¥ Linux ç§æˆ¿èœã€‹å­¦æ¥çš„ ğŸ˜‚ã€‚</p>
<h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><h4 id="jq"><a href="#jq" class="headerlink" title="jq"></a>jq</h4><h4 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h4><h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><h3 id="ç³»ç»Ÿä¿¡æ¯"><a href="#ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯"></a>ç³»ç»Ÿä¿¡æ¯</h3><h4 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h4><p>top é»‘ä¹ä¹çš„é¢œå€¼å¤ªä½äº†ï¼Œå’±è¿˜æ˜¯å–œæ¬¢èŠ±èŠ±ç»¿ç»¿çš„ htop ï¼ˆå¤§é›¾</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> <span class="token function">htop</span>

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> <span class="token function">htop</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200506142544440.png"></p>
<h3 id="bashtop"><a href="#bashtop" class="headerlink" title="bashtop"></a><a target="_blank" rel="noopener" href="https://github.com/aristocratos/bashtop">bashtop</a></h3><p>bashtop ç›¸æ¯”äº htop æœ‰ç§åŠç‚¸å¤©çš„æ„Ÿè§‰ï¼Œç‚«é…·æ— æ¯” ğŸ˜„</p>
<ul>
<li>install</li>
</ul>
<p>å®‰è£…èµ·æ¥å¾ˆç®€å•ï¼Œå…¶å®è¿™æ˜¯ä¸€ä¸ª shell å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨ curl æˆ–è€… wget å‘½ä»¤ä¸‹è½½åˆ°æœ¬åœ°å¹¶èµ‹äºˆ +x æƒé™å³å¯ã€‚</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/aristocratos/bashtop/master/bashtop -o /usr/bin/bashtop <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x /usr/bin/bashtop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å›½å†…ç”¨æˆ·æ¨èä½¿ç”¨ jsdelivr.net çš„ CDN æ¥ä¸‹è½½è¯¥è„šæœ¬ ğŸ˜‘ï¼Œï¼ˆfuck GFW by jsdelivrğŸ˜¡</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -fsSL https://cdn.jsdelivr.net/gh/aristocratos/bashtop/bashtop  -o /usr/bin/bashtop <span class="token punctuation">;</span><span class="token function">chmod</span> +x /usr/bin/bashtop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200506151706148.png"></p>
<h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><p>ä»¥æ ‘çŠ¶å›¾çš„æ–¹å¼å±•ç°è¿›ç¨‹ä¹‹é—´çš„æ´¾ç”Ÿå…³ç³»ï¼Œæ˜¾ç¤ºæ•ˆæœæ¯” ps æ›´ç›´è§‚ä¸€äº›ï¼Œå¯ä»¥å¾ˆæ¸…æ¥šåœ°åˆ†è¾¨å‡ºå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¹‹é—´çš„å…³ç³»ã€‚å¯ä»¥ç”¨æ¥æ’æŸ¥ä¸€äº›å­¤å„¿è¿›ç¨‹ã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> psmisc

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> psmisc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@k8s-node-3 /proc
â•°â”€<span class="token comment"># pstree</span>
systemdâ”€â”¬â”€agetty
        â”œâ”€auditdâ”€â”€â”€<span class="token punctuation">&#123;</span>auditd<span class="token punctuation">&#125;</span>
        â”œâ”€containerdâ”€â”¬â”€6*<span class="token punctuation">[</span>containerd-shimâ”€â”¬â”€pause<span class="token punctuation">]</span>
        â”‚            â”‚                    â””â”€9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€kube-proxyâ”€â”€â”€12*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>kube-proxy<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€4*<span class="token punctuation">[</span>containerd-shimâ”€â”¬â”€pause<span class="token punctuation">]</span>
        â”‚            â”‚                    â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€lvscareâ”€â”€â”€11*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>lvscare<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€agentâ”€â”€â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>agent<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€runsvdirâ”€â”¬â”€runsvâ”€â”€â”€bird6
        â”‚            â”‚                 â”‚          â”œâ”€runsvâ”€â”€â”€calico-nodeâ”€â”€â”€18*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>calico-node<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â”‚          â”œâ”€runsvâ”€â”€â”€calico-nodeâ”€â”€â”€15*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>calico-node<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â”‚          â””â”€runsvâ”€â”€â”€bird
        â”‚            â”‚                 â””â”€12*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€node_exporterâ”€â”€â”€4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>node_exporter<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€nginx-proxyâ”€â”¬â”€confdâ”€â”€â”€11*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>confd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â”‚             â””â”€nginxâ”€â”€â”€nginx
        â”‚            â”‚                 â””â”€9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€deploy.shâ”€â”€â”€sleep
        â”‚            â”‚                 â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€nginx-ingressâ”€â”¬â”€nginxâ”€â”€â”€4*<span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
        â”‚            â”‚                 â”‚               â””â”€14*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>nginx-ingress<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€configmap-reloaâ”€â”€â”€4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>configmap-reloa<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€bash
        â”‚            â”‚                 â””â”€9*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”œâ”€containerd-shimâ”€â”¬â”€ruby2.3â”€â”¬â”€ruby2.3â”€â”€â”€4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>ruby2.3<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â”‚         â””â”€11*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>ruby2.3<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â”‚                 â””â”€10*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd-shim<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”‚            â””â”€46*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>containerd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”œâ”€crond
        â”œâ”€dbus-daemonâ”€â”€â”€<span class="token punctuation">&#123;</span>dbus-daemon<span class="token punctuation">&#125;</span>
        â”œâ”€dockerdâ”€â”€â”€25*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>dockerd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”œâ”€gssproxyâ”€â”€â”€5*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>gssproxy<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”œâ”€irqbalance
        â”œâ”€kubeletâ”€â”€â”€26*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>kubelet<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”œâ”€lvmetad
        â”œâ”€polkitdâ”€â”€â”€6*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>polkitd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”œâ”€rpc.idmapd
        â”œâ”€rpc.mountd
        â”œâ”€rpc.statd
        â”œâ”€rpcbind
        â”œâ”€rsyslogdâ”€â”€â”€2*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>rsyslogd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        â”œâ”€sshdâ”€â”€â”€sshdâ”€â”€â”€zshâ”€â”€â”€pstree
        â”œâ”€systemd-journal
        â”œâ”€systemd-logind
        â”œâ”€systemd-udevd
        â””â”€tunedâ”€â”€â”€4*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>tuned<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>å¯ä»¥çœ‹åˆ° init è¿›ç¨‹ systemd ä¸ºç³»ç»Ÿçš„ PID 1 å·è¿›ç¨‹ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½åœ¨ systemd çš„ç®¡ç†ä¹‹ä¸‹ã€‚</li>
<li>åœ¨è¿è¡Œ docker çš„æœåŠ¡å™¨ä¸Šï¼Œå®¹å™¨è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å¹¶ä¸æ˜¯ dockerd è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œè€Œæ˜¯ä¸€ä¸ªåä¸ºã€€<code>containerd-shim-$&#123;container_name&#125;</code>ã€€è€Œ containerd-shim çš„çˆ¶è¿›ç¨‹ä¸ºå®¹å™¨è¿è¡Œæ—¶ <a target="_blank" rel="noopener" href="https://containerd.io/">containerd</a>ï¼Œdocker æ˜¯é€šè¿‡ gRPC åè®®ä¸ containerd è¿›ç¨‹é€šä¿¡æ¥ï¼Œä»¥æ­¤æ¥è¿›è¡Œç®¡ç†æ‰€è¿è¡Œçš„å®¹å™¨ã€‚å…³äºå®¹å™¨è¿è¡Œæ—¶çš„å…³ç³»å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://xuanwo.io/2019/08/06/oci-intro/">å¼€æ”¾å®¹å™¨æ ‡å‡†(OCI) å†…éƒ¨åˆ†äº«</a>ï¼Œå½“æ—¶ç†è§£ dockerd ã€containerdã€containerd-shim è¿™äº›å…³ç³»æ—¶æ„Ÿè§‰æœ‰ç‚¹ç»•ï¼Œä¸è¿‡ç”¨ pstree å‘½ä»¤çœ‹ä¸€ä¸‹è¿›ç¨‹æ ‘ç»“æ„å°±ä¸€ç›®äº†ç„¶äº† ğŸ˜‚ï¼Œå¯¹ç†è§£è¿›ç¨‹ä¹‹é—´çš„å…³ç³»å¾ˆæœ‰å¸®åŠ©ã€‚</li>
</ul>
<h4 id="ncdu"><a href="#ncdu" class="headerlink" title="ncdu"></a>ncdu</h4><p>é¢è¯•çš„æ—¶å€™è¢«é—®é“è¿‡ <code>Linux ä¸‹å¦‚ä½•æŸ¥çœ‹æ–‡ä»¶è§å¤§å°ï¼Ÿ</code>ï¼Œå½“ç„¶æ˜¯ <code>du -sh</code> å•¦ ğŸ˜‚ã€‚ä¸è¿‡å’±è¿˜æ˜¯å–œæ¬¢ç”¨ ncdu</p>
<p>ä½¿ç”¨ <code>ncdu</code> çš„å¥½å¤„å°±æ˜¯å¯ä»¥é€šè¿‡äº¤äº’å¼çš„æ–¹å¼æŸ¥çœ‹ç›®å½•å ç”¨ç©ºé—´çš„å¤§å°ï¼Œè¦æ¯” <code>du -sh</code> å‘½ä»¤æ–¹ä¾¿å¾ˆå¤šï¼Œä¸è¿‡ç¼ºç‚¹ä¹Ÿæœ‰ï¼Œå°±æ˜¯è¯¥å‘½ä»¤ä¸ºæ‰«æç›®æ ‡ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¾ˆè€—æ—¶ï¼å¦‚æœæƒ³è¦ç«‹å³æŸ¥çœ‹ä¸€ä¸‹ç›®å½•å ç”¨çš„å¤§å°ï¼Œè¿˜æ˜¯ç”¨ <code>du -sh</code> æœ€æ–¹ä¾¿ï¼Œä½¿ç”¨ ncdu å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ†ææ–‡ä»¶å¤¹ä¸‹å„ä¸ªæ–‡ä»¶å ç”¨çš„æƒ…å†µã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> ncdu

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> ncdu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<p>ä½¿ç”¨åå‘é”®å’Œå›è½¦é”®è¿›è¡Œç›®å½•å¥‡å¹»ï¼Œå¾ˆæ–¹ä¾¿çš„è¯´ ğŸ˜‚</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ncdu <span class="token number">1.13</span> ~ Use the arrow keys to navigate, press ? <span class="token keyword">for</span> <span class="token builtin class-name">help</span>
--- / ------------
    <span class="token number">5.2</span> GiB <span class="token punctuation">[</span><span class="token comment">##########] /var</span>
    <span class="token number">2.2</span> GiB <span class="token punctuation">[</span><span class="token comment">####      ] /opt</span>
    <span class="token number">2.0</span> GiB <span class="token punctuation">[</span><span class="token comment">###       ] /usr</span>
  <span class="token number">363.6</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /root
	<span class="token number">45.8</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /boot
	<span class="token number">45.2</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /run
	 <span class="token number">4.6</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /etc
	<span class="token number">44.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /tmp
	<span class="token number">24.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /home
e  <span class="token number">16.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /lost+found
	 <span class="token number">8.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /media
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /srv
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /mnt
<span class="token builtin class-name">.</span>   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /proc
	 <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /sys
	 <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /dev
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  initrd.img.old
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  initrd.img
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  vmlinuz.old
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  vmlinuz
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  libx32
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  lib64
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  lib32
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  sbin

ncdu <span class="token number">1.13</span> ~ Use the arrow keys to navigate, press ? <span class="token keyword">for</span> <span class="token builtin class-name">help</span>
--- /var --------------
	 <span class="token number">3.5</span> GiB <span class="token punctuation">[</span><span class="token comment">##########] /lib</span>
	 <span class="token number">1.4</span> GiB <span class="token punctuation">[</span><span class="token comment">####      ] /opt</span>
  <span class="token number">156.9</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /cache
	<span class="token number">79.6</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /log
	 <span class="token number">1.8</span> MiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /backups
	<span class="token number">20.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /tmp
	<span class="token number">16.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /spool
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /mail
e   <span class="token number">4.0</span> KiB <span class="token punctuation">[</span>          <span class="token punctuation">]</span> /local
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  lock
@   <span class="token number">0.0</span>   B <span class="token punctuation">[</span>          <span class="token punctuation">]</span>  run<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>G&#x2F;GB</li>
</ul>
<blockquote>
<p>The SIZE argument is an integer and optional unit (example: 10K is 10*1024). Units are K,M,G,T,P,E,Z,Y (powers of 1024) or KB,MB,â€¦ (powers of 1000).</p>
</blockquote>
<h4 id="nload"><a href="#nload" class="headerlink" title="nload"></a>nload</h4><p>nload å‘½ä»¤æ˜¯ä¸€ä¸ªå®æ—¶ç›‘æ§ç½‘ç»œæµé‡å’Œå¸¦å®½ä½¿ç”¨çš„æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ä¸¤ä¸ªå›¾è¡¨å¯è§†åŒ–åœ°å±•ç¤ºæ¥æ”¶å’Œå‘é€çš„æµé‡ï¼Œå¹¶æä¾›è¯¸å¦‚æ•°æ®äº¤æ¢æ€»é‡ã€æœ€å°&#x2F;æœ€å¤§ç½‘ç»œå¸¦å®½ä½¿ç”¨é‡ç­‰é™„åŠ ä¿¡æ¯ã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> nload

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> nload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<p>æŒ‰ä¸‹å›è½¦é”®å¯ä»¥åˆ‡æ¢ä¸åŒçš„ç½‘å¡</p>
<p><img data-src="https://p.k8s.li/20200506143310955.png"></p>
<h3 id="ls-å…„å¼Ÿä»¬"><a href="#ls-å…„å¼Ÿä»¬" class="headerlink" title="ls å…„å¼Ÿä»¬"></a>ls å…„å¼Ÿä»¬</h3><p>ä»¥ ls å¼€å¤´çš„å‘½ä»¤å¤§å¤šéƒ½æ˜¯åˆ—å‡º XX ä¿¡æ¯ï¼Œè¿™äº›å·¥å…·ä¹Ÿå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿäº†è§£ä¸€ä¸‹ç›®å‰ç³»ç»Ÿçš„çŠ¶æ€ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># ls</span>
<span class="token function">ls</span>           lsblk        <span class="token environment constant">LS_COLORS</span>    lsinitramfs  lslogins     lsns         lspgpot
lsa          lsb_release  lscpu        lsipc        lsmem        <span class="token function">lsof</span>
lsattr       LSCOLORS     lshw         lslocks      lsmod        lspci<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h4><blockquote>
<p>ls - list directory contents åˆ—å‡ºæ–‡ä»¶å¤¹å†…å®¹</p>
</blockquote>
<h4 id="lsattr"><a href="#lsattr" class="headerlink" title="lsattr"></a>lsattr</h4><blockquote>
<p>lsattr - list file attributes on a Linux second extended file system</p>
</blockquote>
<p>åˆ—å‡ºæ–‡ä»¶çš„å±æ€§ï¼Œ</p>
<h4 id="lsblk"><a href="#lsblk" class="headerlink" title="lsblk"></a>lsblk</h4><blockquote>
<p>lsblk - list block devices åˆ—å‡ºå—è®¾å¤‡</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤åœ¨æŸ¥çœ‹å—è®¾å¤‡ï¼ˆç£ç›˜) åˆ†åŒºå’ŒæŒ‚è½½ç‚¹ï¼Œä»¥åŠç£ç›˜å°šæœªåˆ†é…çš„ç©ºé—´ä¿¡æ¯å¾ˆæœ‰å¸®åŠ©ï¼Œè¦æ¯” fdisk æ›´ç›´è§‚ä¸€äº›ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lsblk</span>
NAME                      MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
sda                         <span class="token number">8</span>:0    <span class="token number">0</span>  30G  <span class="token number">0</span> disk
â”œâ”€sda1                      <span class="token number">8</span>:1    <span class="token number">0</span>   1M  <span class="token number">0</span> part
â”œâ”€sda2                      <span class="token number">8</span>:2    <span class="token number">0</span>   1G  <span class="token number">0</span> part /boot
â””â”€sda3                      <span class="token number">8</span>:3    <span class="token number">0</span>  29G  <span class="token number">0</span> part
  â””â”€ubuntu--vg-ubuntu--lv <span class="token number">253</span>:0    <span class="token number">0</span>  28G  <span class="token number">0</span> lvm  /<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsb-release"><a href="#lsb-release" class="headerlink" title="lsb_release"></a>lsb_release</h4><blockquote>
<p>lsb_release - print distribution-specific information æ‰“å°å‘è¡Œç‰ˆè¯¦æƒ…</p>
</blockquote>
<p>æœ‰äº›å‘è¡Œç‰ˆå°šæœªå®‰è£…</p>
<h4 id="lscpu"><a href="#lscpu" class="headerlink" title="lscpu"></a>lscpu</h4><blockquote>
<p>lscpu - display information about the CPU architecture</p>
</blockquote>
<p>åˆ—å‡º CPU çš„ä¿¡æ¯ï¼Œå’Œ cat &#x2F;proc&#x2F;cpuinfo è¾“å‡ºç»“æœç±»ä¼¼ã€‚ç›¸å½“äº Linux ä¸‹çš„ CPU-Z ğŸ˜‚</p>
<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lscpu</span>
<span class="token key atrule">Architecture</span><span class="token punctuation">:</span>        x86_64
<span class="token key atrule">CPU op-mode(s)</span><span class="token punctuation">:</span>      32<span class="token punctuation">-</span>bit<span class="token punctuation">,</span> 64<span class="token punctuation">-</span>bit
<span class="token key atrule">Byte Order</span><span class="token punctuation">:</span>          Little Endian
<span class="token key atrule">CPU(s)</span><span class="token punctuation">:</span>              <span class="token number">4</span>
<span class="token key atrule">On-line CPU(s) list</span><span class="token punctuation">:</span> 0<span class="token punctuation">-</span><span class="token number">3</span>
<span class="token key atrule">Thread(s) per core</span><span class="token punctuation">:</span>  <span class="token number">1</span>
<span class="token key atrule">Core(s) per socket</span><span class="token punctuation">:</span>  <span class="token number">1</span>
<span class="token key atrule">Socket(s)</span><span class="token punctuation">:</span>           <span class="token number">4</span>
<span class="token key atrule">NUMA node(s)</span><span class="token punctuation">:</span>        <span class="token number">1</span>
<span class="token key atrule">Vendor ID</span><span class="token punctuation">:</span>           GenuineIntel
<span class="token key atrule">CPU family</span><span class="token punctuation">:</span>          <span class="token number">6</span>
<span class="token key atrule">Model</span><span class="token punctuation">:</span>               <span class="token number">60</span>
<span class="token key atrule">Model name</span><span class="token punctuation">:</span>          Intel(R) Xeon(R) CPU E3<span class="token punctuation">-</span>1271 v3 @ 3.60GHz
<span class="token key atrule">Stepping</span><span class="token punctuation">:</span>            <span class="token number">3</span>
<span class="token key atrule">CPU MHz</span><span class="token punctuation">:</span>             <span class="token number">3591.683</span>
<span class="token key atrule">BogoMIPS</span><span class="token punctuation">:</span>            <span class="token number">7183.36</span>
<span class="token key atrule">Hypervisor vendor</span><span class="token punctuation">:</span>   VMware
<span class="token key atrule">Virtualization type</span><span class="token punctuation">:</span> full
<span class="token key atrule">L1d cache</span><span class="token punctuation">:</span>           32K
<span class="token key atrule">L1i cache</span><span class="token punctuation">:</span>           32K
<span class="token key atrule">L2 cache</span><span class="token punctuation">:</span>            256K
<span class="token key atrule">L3 cache</span><span class="token punctuation">:</span>            8192K
<span class="token key atrule">NUMA node0 CPU(s)</span><span class="token punctuation">:</span>   0<span class="token punctuation">-</span><span class="token number">3</span>
<span class="token key atrule">Flags</span><span class="token punctuation">:</span>               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault epb invpcid_single pti fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid xsaveopt dtherm ida arat pln pts<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>cat /proc/cpuinfo</code></p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># cat /proc/cpuinfo</span>
<span class="token key atrule">processor</span>       <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">vendor_id</span>       <span class="token punctuation">:</span> GenuineIntel
<span class="token key atrule">cpu family</span>      <span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token key atrule">model</span>           <span class="token punctuation">:</span> <span class="token number">60</span>
<span class="token key atrule">model name</span>      <span class="token punctuation">:</span> Intel(R) Xeon(R) CPU E3<span class="token punctuation">-</span>1271 v3 @ 3.60GHz
<span class="token key atrule">stepping</span>        <span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token key atrule">microcode</span>       <span class="token punctuation">:</span> <span class="token number">0x1c</span>
<span class="token key atrule">cpu MHz</span>         <span class="token punctuation">:</span> <span class="token number">3591.683</span>
<span class="token key atrule">cache size</span>      <span class="token punctuation">:</span> 8192 KB
<span class="token key atrule">physical id</span>     <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">siblings</span>        <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">core id</span>         <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">cpu cores</span>       <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">apicid</span>          <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">initial apicid</span>  <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">fpu</span>             <span class="token punctuation">:</span> yes
<span class="token key atrule">fpu_exception</span>   <span class="token punctuation">:</span> yes
<span class="token key atrule">cpuid level</span>     <span class="token punctuation">:</span> <span class="token number">13</span>
<span class="token key atrule">wp</span>              <span class="token punctuation">:</span> yes
<span class="token key atrule">flags</span>           <span class="token punctuation">:</span> fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault epb invpcid_single pti fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid xsaveopt dtherm ida arat pln pts
<span class="token key atrule">bugs</span>            <span class="token punctuation">:</span> cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs
<span class="token key atrule">bogomips</span>        <span class="token punctuation">:</span> <span class="token number">7183.36</span>
<span class="token key atrule">clflush size</span>    <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">cache_alignment</span> <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">address sizes</span>   <span class="token punctuation">:</span> 42 bits physical<span class="token punctuation">,</span> 48 bits virtual
power management<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lshw"><a href="#lshw" class="headerlink" title="lshw"></a>lshw</h4><blockquote>
<p>lshw - list hardware åˆ—å‡ºç¡¬ä»¶è®¾å¤‡</p>
<p>lshw is a small tool to extract detailed information on the hardware configuration of the machine. It  can report exact memory configuration, firmware version, mainboard configuration, CPU version and speed, cache configuration, bus speed, etc. on DMI-capable x86 or IA-64 systems and on some PowerPC machines  (PowerMac G4 is known to work).It  currently  supports  DMI (x86 and IA-64 only), OpenFirmware device tree (PowerPC only), PCI&#x2F;AGP, CPUID (x86), IDE&#x2F;ATA&#x2F;ATAPI, PCMCIA (only tested on x86), SCSI and USB.</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤å°±ç›¸å½“äº Windows ä¸‹çš„è®¾å¤‡ç®¡ç†å™¨ï¼Œåˆ—å‡ºç³»ç»Ÿé‡Œçš„ç¡¬ä»¶è®¾å¤‡ã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> lshw

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> lshw<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@sg-02 /home/ubuntu
â•°â”€<span class="token comment"># lshw</span>
sg-02
	 description: Computer
	 product: HVM domU
	 vendor: Xen
	 version: <span class="token number">4.2</span>.amazon
	 serial: ec2c5773-d127-c5a4-60a3-221becf4e6ae
	 width: <span class="token number">64</span> bits
	 capabilities: smbios-2.7 dmi-2.7 vsyscall32
	 configuration: <span class="token assign-left variable">boot</span><span class="token operator">=</span>normal <span class="token assign-left variable">uuid</span><span class="token operator">=</span>73572CEC-27D1-A4C5-60A3-221BECF4E6AE
  *-core
		 description: Motherboard
		 physical id: <span class="token number">0</span>
	  *-firmware
			 description: BIOS
			 vendor: Xen
			 physical id: <span class="token number">0</span>
			 version: <span class="token number">4.2</span>.amazon
			 date: 08/24/2006
			 size: 96KiB
			 capabilities: pci edd
	  *-cpu
			 description: CPU
			 product: Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Xeon<span class="token punctuation">(</span>R<span class="token punctuation">)</span> CPU E5-2676 v3 @ <span class="token number">2</span>.40GHz
			 vendor: Intel Corp.
			 physical id: <span class="token number">401</span>
			 bus info: cpu@0
			 slot: CPU <span class="token number">1</span>
			 size: 2400MHz
			 capacity: 2400MHz
			 width: <span class="token number">64</span> bits
			 capabilities: fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp x86-64 constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault invpcid_single pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt
	  *-memory
			 description: System Memory
			 physical id: <span class="token number">1000</span>
			 size: 1GiB
			 capacity: 1GiB
			 capabilities: ecc
			 configuration: <span class="token assign-left variable">errordetection</span><span class="token operator">=</span>multi-bit-ecc
		  *-bank
				 description: DIMM RAM
				 physical id: <span class="token number">0</span>
				 slot: DIMM <span class="token number">0</span>
				 size: 1GiB
				 width: <span class="token number">64</span> bits
	  *-pci
			 description: Host bridge
			 product: 440FX - 82441FX PMC <span class="token punctuation">[</span>Natoma<span class="token punctuation">]</span>
			 vendor: Intel Corporation
			 physical id: <span class="token number">100</span>
			 bus info: pci@0000:00:00.0
			 version: 02
			 width: <span class="token number">32</span> bits
			 clock: 33MHz
		  *-isa
				 description: ISA bridge
				 product: 82371SB PIIX3 ISA <span class="token punctuation">[</span>Natoma/Triton II<span class="token punctuation">]</span>
				 vendor: Intel Corporation
				 physical id: <span class="token number">1</span>
				 bus info: pci@0000:00:01.0
				 version: 00
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: isa bus_master
				 configuration: <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
		  *-ide
				 description: IDE interface
				 product: 82371SB PIIX3 IDE <span class="token punctuation">[</span>Natoma/Triton II<span class="token punctuation">]</span>
				 vendor: Intel Corporation
				 physical id: <span class="token number">1.1</span>
				 bus info: pci@0000:00:01.1
				 version: 00
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: ide bus_master
				 configuration: <span class="token assign-left variable">driver</span><span class="token operator">=</span>ata_piix <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">64</span>
				 resources: irq:0 ioport:1f0<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span> ioport:3f6 ioport:170<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span> ioport:376 ioport:c100<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
		  *-bridge UNCLAIMED
				 description: Bridge
				 product: 82371AB/EB/MB PIIX4 ACPI
				 vendor: Intel Corporation
				 physical id: <span class="token number">1.3</span>
				 bus info: pci@0000:00:01.3
				 version: 01
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: bridge bus_master
				 configuration: <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
		  *-display UNCLAIMED
				 description: VGA compatible controller
				 product: GD <span class="token number">5446</span>
				 vendor: Cirrus Logic
				 physical id: <span class="token number">2</span>
				 bus info: pci@0000:00:02.0
				 version: 00
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: vga_controller bus_master
				 configuration: <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
				 resources: memory:f0000000-f1ffffff memory:f3000000-f3000fff memory:c0000-dffff
		  *-generic
				 description: Unassigned class
				 product: Xen Platform Device
				 vendor: XenSource, Inc.
				 physical id: <span class="token number">3</span>
				 bus info: pci@0000:00:03.0
				 version: 01
				 width: <span class="token number">32</span> bits
				 clock: 33MHz
				 capabilities: bus_master
				 configuration: <span class="token assign-left variable">driver</span><span class="token operator">=</span>xen-platform-pci <span class="token assign-left variable">latency</span><span class="token operator">=</span><span class="token number">0</span>
				 resources: irq:28 ioport:c000<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">256</span><span class="token punctuation">)</span> memory:f2000000-f2ffffff
  *-network:0
		 description: Ethernet interface
		 physical id: <span class="token number">1</span>
		 logical name: eth0
		 serial: 02:24:d2:49:f2:94
		 capabilities: ethernet physical
		 configuration: <span class="token assign-left variable">broadcast</span><span class="token operator">=</span>yes <span class="token assign-left variable">driver</span><span class="token operator">=</span>vif <span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token number">172.26</span>.17.53 <span class="token assign-left variable">link</span><span class="token operator">=</span>yes <span class="token assign-left variable">multicast</span><span class="token operator">=</span>yes
  *-network:1
		 description: Ethernet interface
		 physical id: <span class="token number">2</span>
		 logical name: docker0
		 serial: 02:42:37:cf:cf:aa
		 capabilities: ethernet physical
		 configuration: <span class="token assign-left variable">broadcast</span><span class="token operator">=</span>yes <span class="token assign-left variable">driver</span><span class="token operator">=</span>bridge <span class="token assign-left variable">driverversion</span><span class="token operator">=</span><span class="token number">2.3</span> <span class="token assign-left variable">firmware</span><span class="token operator">=</span>N/A <span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token number">172.17</span>.0.1 <span class="token assign-left variable">link</span><span class="token operator">=</span>no <span class="token assign-left variable">multicast</span><span class="token operator">=</span>yes
â•­â”€root@sg-02 /home/ubuntu
â•°â”€<span class="token comment">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsinitramfs"><a href="#lsinitramfs" class="headerlink" title="lsinitramfs"></a>lsinitramfs</h4><blockquote>
<p>lsinitramfs - list content of an initramfs image</p>
<p>The  lsinitramfs  command  lists the content of given initramfs images. It allows one to quickly check the content of one (or multiple) specified initramfs files.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lsinitramfs /boot/initrd.img-4.15.0-58-generic | head -n 10</span>
<span class="token builtin class-name">.</span>
usr
usr/share
usr/share/plymouth
usr/share/plymouth/themes
usr/share/plymouth/themes/details
usr/share/plymouth/themes/details/details.plymouth
usr/share/plymouth/themes/text.plymouth
usr/share/plymouth/themes/ubuntu-text
usr/share/plymouth/themes/ubuntu-text/ubuntu-text.plymouth.in<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsipc"><a href="#lsipc" class="headerlink" title="lsipc"></a>lsipc</h4><blockquote>
<p>lsipc - show information on IPC facilities currently employed in the system</p>
<p>lsipc  shows  information on the inter-process communication facilities for which the calling process has read access.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lsipc</span>
RESOURCE DESCRIPTION                                     LIMIT USED  USE%
MSGMNI   Number of message queues                        <span class="token number">32000</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
MSGMAX   Max size of message <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>                      <span class="token number">8192</span>    -     -
MSGMNB   Default max size of queue <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>               <span class="token number">16384</span>    -     -
SHMMNI   Shared memory segments                           <span class="token number">4096</span>    <span class="token number">1</span> <span class="token number">0.02</span>%
SHMALL   Shared memory pages                           <span class="token number">4194304</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
SHMMAX   Max size of shared memory segment <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token number">17179869184</span>    -     -
SHMMIN   Min size of shared memory segment <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>           <span class="token number">1</span>    -     -
SEMMNI   Number of semaphore identifiers                   <span class="token number">262</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
SEMMNS   Total number of semaphores                      <span class="token number">32000</span>    <span class="token number">0</span> <span class="token number">0.00</span>%
SEMMSL   Max semaphores per semaphore set.                 <span class="token number">250</span>    -     -
SEMOPM   Max number of operations per semop<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>              <span class="token number">32</span>    -     -
SEMVMX   Semaphore max value                             <span class="token number">32767</span>    -     -<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lslocks"><a href="#lslocks" class="headerlink" title="lslocks"></a>lslocks</h4><blockquote>
<p>lslocks - list local system locks</p>
<p>lslocks lists information about all the currently held file locks in a Linux system</p>
</blockquote>
<p>åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­è¢«åŠ é”çš„æ–‡ä»¶</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lslocks</span>
COMMAND           PID  TYPE SIZE MODE  M START END <span class="token environment constant">PATH</span>
<span class="token function">cron</span>              <span class="token number">900</span> FLOCK   4B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /run/crond.pid
svlogd          <span class="token number">53065</span> FLOCK   0B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /var/log/gitlab/redis/lock
runsv           <span class="token number">54095</span> FLOCK   0B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /opt/gitlab/sv/sidekiq/supervise/lock
runsv           <span class="token number">54095</span> FLOCK   0B WRITE <span class="token number">0</span>     <span class="token number">0</span>   <span class="token number">0</span> /opt/gitlab/sv/sidekiq/log/supervise/lock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lslogins"><a href="#lslogins" class="headerlink" title="lslogins"></a>lslogins</h4><p>åˆ—å‡ºå½“å‰å·²ç»ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯</p>
<blockquote>
<p>lslogins - display information about known users in the system</p>
<p>Examine the wtmp and btmp logs, &#x2F;etc&#x2F;shadow (if necessary) and &#x2F;etc&#x2F;passwd and output the desired data. The default action is to list info about all the users in the system.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lslogins</span>
  <span class="token environment constant">UID</span> <span class="token environment constant">USER</span>              PROC <span class="token environment constant">PWD</span>-LOCK <span class="token environment constant">PWD</span>-DENY LAST-LOGIN GECOS
	 <span class="token number">0</span> root               <span class="token number">211</span>        <span class="token number">0</span>        <span class="token number">0</span>      06:58 root
	 <span class="token number">1</span> daemon               <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>            daemon
	 <span class="token number">2</span> bin                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            bin
	 <span class="token number">3</span> sys                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            sys
	 <span class="token number">4</span> <span class="token function">sync</span>                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            <span class="token function">sync</span>
	 <span class="token number">5</span> games                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            games
	 <span class="token number">6</span> <span class="token function">man</span>                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            <span class="token function">man</span>
	 <span class="token number">7</span> lp                   <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            lp
	 <span class="token number">8</span> mail                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            mail
	 <span class="token number">9</span> news                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            news
	<span class="token number">10</span> uucp                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            uucp
	<span class="token number">13</span> proxy                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            proxy
	<span class="token number">33</span> www-data             <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            www-data
	<span class="token number">34</span> backup               <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            backup
	<span class="token number">38</span> list                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            Mailing List Manager
	<span class="token number">39</span> irc                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            ircd
	<span class="token number">41</span> gnats                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            Gnats Bug-Reporting System <span class="token punctuation">(</span>admin<span class="token punctuation">)</span>
  <span class="token number">100</span> systemd-network      <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>            systemd Network Management,,,
  <span class="token number">101</span> systemd-resolve      <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>            systemd Resolver,,,
  <span class="token number">102</span> syslog               <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">103</span> messagebus           <span class="token number">1</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">104</span> _apt                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">105</span> lxd                  <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">106</span> uuidd                <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">107</span> dnsmasq              <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            dnsmasq,,,
  <span class="token number">108</span> landscape            <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">109</span> pollinate            <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">110</span> sshd                 <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">995</span> gitlab-prometheus    <span class="token number">4</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">996</span> gitlab-psql         <span class="token number">18</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">997</span> gitlab-redis         <span class="token number">2</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">998</span> <span class="token function">git</span>                 <span class="token number">16</span>        <span class="token number">0</span>        <span class="token number">1</span>
  <span class="token number">999</span> gitlab-www           <span class="token number">5</span>        <span class="token number">0</span>        <span class="token number">1</span>
 <span class="token number">1000</span> ubuntu               <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">0</span> <span class="token number">2019</span>-Aug28 ubuntu
<span class="token number">65534</span> nobody               <span class="token number">0</span>        <span class="token number">0</span>        <span class="token number">1</span>            nobody<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsmem"><a href="#lsmem" class="headerlink" title="lsmem"></a>lsmem</h4><blockquote>
<p>lsmem - list the ranges of available memory with their online status</p>
<p>The  lsmem command lists the ranges of available memory with their online status. The listed memory blocks correspond to the memory block representation in sysfs. The command also shows the memory block  size  and the amount of memory in online and offline state.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lsmem                                                                                                     127 â†µ</span>
RANGE                                  SIZE  STATE REMOVABLE BLOCK
0x0000000000000000-0x0000000007ffffff  128M online        no     <span class="token number">0</span>
0x0000000008000000-0x000000000fffffff  128M online       <span class="token function">yes</span>     <span class="token number">1</span>
0x0000000010000000-0x000000001fffffff  256M online        no   <span class="token number">2</span>-3
0x0000000020000000-0x0000000027ffffff  128M online       <span class="token function">yes</span>     <span class="token number">4</span>
0x0000000028000000-0x0000000037ffffff  256M online        no   <span class="token number">5</span>-6
0x0000000038000000-0x000000003fffffff  128M online       <span class="token function">yes</span>     <span class="token number">7</span>
0x0000000040000000-0x000000006fffffff  768M online        no  <span class="token number">8</span>-13
0x0000000070000000-0x0000000077ffffff  128M online       <span class="token function">yes</span>    <span class="token number">14</span>
0x0000000078000000-0x00000000bfffffff  <span class="token number">1</span>.1G online        no <span class="token number">15</span>-23
0x0000000100000000-0x000000013fffffff    1G online        no <span class="token number">32</span>-39

Memory block size:       128M
Total online memory:       4G
Total offline memory:      0B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsmod"><a href="#lsmod" class="headerlink" title="lsmod"></a>lsmod</h4><p>åˆ—å‡ºç³»ç»Ÿå†…æ ¸æ¨¡å—</p>
<blockquote>
<p>lsmod - Show the status of modules in the Linux Kernel</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lsmod</span>
Module                  Size  Used by
tcp_diag               <span class="token number">16384</span>  <span class="token number">0</span>
inet_diag              <span class="token number">24576</span>  <span class="token number">1</span> tcp_diag
joydev                 <span class="token number">24576</span>  <span class="token number">0</span>
input_leds             <span class="token number">16384</span>  <span class="token number">0</span>
vmw_balloon            <span class="token number">20480</span>  <span class="token number">0</span>
serio_raw              <span class="token number">16384</span>  <span class="token number">0</span>
vmw_vsock_vmci_transport    <span class="token number">28672</span>  <span class="token number">1</span>
vsock                  <span class="token number">36864</span>  <span class="token number">2</span> vmw_vsock_vmci_transport
vmw_vmci               <span class="token number">69632</span>  <span class="token number">2</span> vmw_balloon,vmw_vsock_vmci_transport
sch_fq_codel           <span class="token number">20480</span>  <span class="token number">5</span>
ib_iser                <span class="token number">49152</span>  <span class="token number">0</span>
rdma_cm                <span class="token number">61440</span>  <span class="token number">1</span> ib_iser
iw_cm                  <span class="token number">45056</span>  <span class="token number">1</span> rdma_cm
ib_cm                  <span class="token number">53248</span>  <span class="token number">1</span> rdma_cm
ib_core               <span class="token number">225280</span>  <span class="token number">4</span> rdma_cm,iw_cm,ib_iser,ib_cm
iscsi_tcp              <span class="token number">20480</span>  <span class="token number">0</span>
libiscsi_tcp           <span class="token number">20480</span>  <span class="token number">1</span> iscsi_tcp
libiscsi               <span class="token number">53248</span>  <span class="token number">3</span> libiscsi_tcp,iscsi_tcp,ib_iser
scsi_transport_iscsi    <span class="token number">98304</span>  <span class="token number">3</span> iscsi_tcp,ib_iser,libiscsi
ip_tables              <span class="token number">28672</span>  <span class="token number">0</span>
x_tables               <span class="token number">40960</span>  <span class="token number">1</span> ip_tables
autofs4                <span class="token number">40960</span>  <span class="token number">2</span>
btrfs                <span class="token number">1130496</span>  <span class="token number">0</span>
zstd_compress         <span class="token number">163840</span>  <span class="token number">1</span> btrfs
raid10                 <span class="token number">53248</span>  <span class="token number">0</span>
raid456               <span class="token number">143360</span>  <span class="token number">0</span>
async_raid6_recov      <span class="token number">20480</span>  <span class="token number">1</span> raid456
async_memcpy           <span class="token number">16384</span>  <span class="token number">2</span> raid456,async_raid6_recov
async_pq               <span class="token number">16384</span>  <span class="token number">2</span> raid456,async_raid6_recov
async_xor              <span class="token number">16384</span>  <span class="token number">3</span> async_pq,raid456,async_raid6_recov
async_tx               <span class="token number">16384</span>  <span class="token number">5</span> async_pq,async_memcpy,async_xor,raid456,async_raid6_recov
xor                    <span class="token number">24576</span>  <span class="token number">2</span> async_xor,btrfs
raid6_pq              <span class="token number">114688</span>  <span class="token number">4</span> async_pq,btrfs,raid456,async_raid6_recov
libcrc32c              <span class="token number">16384</span>  <span class="token number">1</span> raid456
raid1                  <span class="token number">40960</span>  <span class="token number">0</span>
raid0                  <span class="token number">20480</span>  <span class="token number">0</span>
multipath              <span class="token number">16384</span>  <span class="token number">0</span>
linear                 <span class="token number">16384</span>  <span class="token number">0</span>
crct10dif_pclmul       <span class="token number">16384</span>  <span class="token number">0</span>
crc32_pclmul           <span class="token number">16384</span>  <span class="token number">0</span>
ghash_clmulni_intel    <span class="token number">16384</span>  <span class="token number">0</span>
pcbc                   <span class="token number">16384</span>  <span class="token number">0</span>
vmwgfx                <span class="token number">274432</span>  <span class="token number">1</span>
ttm                   <span class="token number">106496</span>  <span class="token number">1</span> vmwgfx
drm_kms_helper        <span class="token number">172032</span>  <span class="token number">1</span> vmwgfx
aesni_intel           <span class="token number">188416</span>  <span class="token number">0</span>
syscopyarea            <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
aes_x86_64             <span class="token number">20480</span>  <span class="token number">1</span> aesni_intel
sysfillrect            <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
crypto_simd            <span class="token number">16384</span>  <span class="token number">1</span> aesni_intel
sysimgblt              <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
glue_helper            <span class="token number">16384</span>  <span class="token number">1</span> aesni_intel
fb_sys_fops            <span class="token number">16384</span>  <span class="token number">1</span> drm_kms_helper
cryptd                 <span class="token number">24576</span>  <span class="token number">3</span> crypto_simd,ghash_clmulni_intel,aesni_intel
psmouse               <span class="token number">147456</span>  <span class="token number">0</span>
drm                   <span class="token number">401408</span>  <span class="token number">4</span> vmwgfx,drm_kms_helper,ttm
mptspi                 <span class="token number">24576</span>  <span class="token number">2</span>
mptscsih               <span class="token number">40960</span>  <span class="token number">1</span> mptspi
mptbase               <span class="token number">102400</span>  <span class="token number">2</span> mptspi,mptscsih
ahci                   <span class="token number">40960</span>  <span class="token number">0</span>
libahci                <span class="token number">32768</span>  <span class="token number">1</span> ahci
i2c_piix4              <span class="token number">24576</span>  <span class="token number">0</span>
vmxnet3                <span class="token number">57344</span>  <span class="token number">0</span>
scsi_transport_spi     <span class="token number">32768</span>  <span class="token number">1</span> mptspi
pata_acpi              <span class="token number">16384</span>  <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsns-list-namespaces"><a href="#lsns-list-namespaces" class="headerlink" title="lsns - list namespaces"></a>lsns - list namespaces</h4><p>lsns  lists  information  about all the currently accessible namespaces or about the given namespace.  The namespace identifier is an inode number.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lsns</span>
		  NS TYPE   NPROCS   PID <span class="token environment constant">USER</span>             COMMAND
<span class="token number">4026531835</span> cgroup    <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531836</span> pid       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531837</span> user      <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531838</span> uts       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531839</span> ipc       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531840</span> mnt       <span class="token number">259</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026531861</span> mnt         <span class="token number">1</span>    <span class="token number">31</span> root             kdevtmpfs
<span class="token number">4026531993</span> net       <span class="token number">264</span>     <span class="token number">1</span> root             /lib/systemd/systemd --system --deserialize <span class="token number">39</span>
<span class="token number">4026532531</span> mnt         <span class="token number">1</span> <span class="token number">37609</span> root             /lib/systemd/systemd-udevd
<span class="token number">4026532556</span> mnt         <span class="token number">1</span> <span class="token number">42954</span> systemd-timesync /lib/systemd/systemd-timesyncd
<span class="token number">4026532557</span> mnt         <span class="token number">1</span> <span class="token number">42900</span> systemd-network  /lib/systemd/systemd-networkd
<span class="token number">4026532603</span> mnt         <span class="token number">1</span> <span class="token number">42924</span> systemd-resolve  /lib/systemd/systemd-resolved<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="lsof-list-open-files"><a href="#lsof-list-open-files" class="headerlink" title="lsof - list open files"></a>lsof - list open files</h4><p>lsof åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶ã€‚ç»å¯¹æ˜¯ä¸ªæ’æŸ¥æ•…éšœçš„åˆ©å™¨ï¼Œåœ¨ä¸€åˆ‡çš†æ–‡ä»¶çš„ Linux ä¸–ç•Œé‡Œï¼Œlsof å¯ä»¥æŸ¥çœ‹æ‰“å¼€çš„æ–‡ä»¶æ˜¯ï¼š</p>
<ul>
<li>æ™®é€šæ–‡ä»¶</li>
<li>ç›®å½•</li>
<li>ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶</li>
<li>å­—ç¬¦æˆ–è®¾å¤‡æ–‡ä»¶</li>
<li>(å‡½æ•°)å…±äº«åº“</li>
<li>ç®¡é“ã€å‘½åç®¡é“</li>
<li>ç¬¦å·é“¾æ¥</li>
<li>ç½‘ç»œæ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼šNFS fileã€ç½‘ç»œ socketï¼Œunix åŸŸå socketï¼‰</li>
<li>è¿˜æœ‰å…¶å®ƒç±»å‹çš„æ–‡ä»¶ï¼Œç­‰ç­‰</li>
</ul>
<p>å¦å¤– lsof å‘½ä»¤ä¹Ÿæ˜¯æœ‰ç€æœ€å¤šé€‰é¡¹çš„ Linux&#x2F;Unix å‘½ä»¤ä¹‹ä¸€ï¼Œå¦ä¸€ä¸ª nc å‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ ğŸ˜‚ã€‚</p>
<ul>
<li>åˆ—å‡ºç«¯å£å·å ç”¨çš„è¿›ç¨‹</li>
</ul>
<pre class="line-numbers language-sell" data-language="sell"><code class="language-sell">â•­â”€root@blog &#x2F;opt&#x2F;shell
â•°â”€# lsof -i :53      â†µ
COMMAND   PID            USER   FD   TYPE DEVICE SIZE&#x2F;OFF NODE NAME
systemd-r 538 systemd-resolve   12u  IPv4  13925      0t0  UDP localhost:domain
systemd-r 538 systemd-resolve   13u  IPv4  13926      0t0  TCP localhost:domain (LISTEN)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>PSï¼šæœ€è¿‘é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°è¿‡</p>
<p>Qï¼š Linux ä¸‹æŸ¥çœ‹ç«¯å£å ç”¨çš„å‘½ä»¤ï¼Ÿ</p>
<p>Aï¼š<code>netstat -tunlp</code> ã€<code>ss -tua</code>ã€<code>lsof -i</code> ğŸ˜‚</p>
</blockquote>
<h4 id="lspci-list-all-PCI-devices"><a href="#lspci-list-all-PCI-devices" class="headerlink" title="lspci - list all PCI devices"></a>lspci - list all PCI devices</h4><p>åˆ—å‡º PCI è®¾å¤‡ï¼Œæ¯”å¦‚æ˜¾å¡</p>
<blockquote>
<p>lspci is a utility for displaying information about PCI buses in the system and devices connected to them.</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€root@gitlab /opt
â•°â”€<span class="token comment"># lspci</span>
00:00.0 Host bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX Host bridge <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:01.0 PCI bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX AGP bridge <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:07.0 ISA bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA <span class="token punctuation">(</span>rev 08<span class="token punctuation">)</span>
00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI <span class="token punctuation">(</span>rev 08<span class="token punctuation">)</span>
00:07.7 System peripheral: VMware Virtual Machine Communication Interface <span class="token punctuation">(</span>rev <span class="token number">10</span><span class="token punctuation">)</span>
00:0f.0 VGA compatible controller: VMware SVGA II Adapter
00:10.0 SCSI storage controller: LSI Logic / Symbios Logic 53c1030 PCI-X Fusion-MPT Dual Ultra320 SCSI <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
00:11.0 PCI bridge: VMware PCI bridge <span class="token punctuation">(</span>rev 02<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="proc"><a href="#proc" class="headerlink" title="proc"></a>proc</h3><p>ç¡®åˆ‡æ¥è¯´è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯ Linux çš„å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£ä¸€äº›ç³»ç»Ÿä¿¡æ¯ï¼Œæ–¹ä¾¿æ’æŸ¥ä¸€äº›æ•…éšœç­‰ã€‚</p>
<h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><p><code>cat /proc/cpuinfo</code> å’Œ <code>lscpu</code> äºŒè€…è¾“å‡ºç±»ä¼¼</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>root@k8s<span class="token punctuation">-</span>master<span class="token punctuation">-</span>01 ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/cpuinfo</span>
<span class="token key atrule">processor</span>       <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">vendor_id</span>       <span class="token punctuation">:</span> GenuineIntel
<span class="token key atrule">cpu family</span>      <span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token key atrule">model</span>           <span class="token punctuation">:</span> <span class="token number">60</span>
<span class="token key atrule">model name</span>      <span class="token punctuation">:</span> Intel(R) Xeon(R) CPU E3<span class="token punctuation">-</span>1271 v3 @ 3.60GHz
<span class="token key atrule">stepping</span>        <span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token key atrule">microcode</span>       <span class="token punctuation">:</span> <span class="token number">0x1c</span>
<span class="token key atrule">cpu MHz</span>         <span class="token punctuation">:</span> <span class="token number">3591.683</span>
<span class="token key atrule">cache size</span>      <span class="token punctuation">:</span> 8192 KB
<span class="token key atrule">physical id</span>     <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">siblings</span>        <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">core id</span>         <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">cpu cores</span>       <span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">apicid</span>          <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">initial apicid</span>  <span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">fpu</span>             <span class="token punctuation">:</span> yes
<span class="token key atrule">fpu_exception</span>   <span class="token punctuation">:</span> yes
<span class="token key atrule">cpuid level</span>     <span class="token punctuation">:</span> <span class="token number">13</span>
<span class="token key atrule">wp</span>              <span class="token punctuation">:</span> yes
<span class="token key atrule">flags</span>           <span class="token punctuation">:</span> fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc aperfmperf eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm epb fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid xsaveopt dtherm ida arat pln pts
<span class="token key atrule">bogomips</span>        <span class="token punctuation">:</span> <span class="token number">7183.36</span>
<span class="token key atrule">clflush size</span>    <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">cache_alignment</span> <span class="token punctuation">:</span> <span class="token number">64</span>
<span class="token key atrule">address sizes</span>   <span class="token punctuation">:</span> 42 bits physical<span class="token punctuation">,</span> 48 bits virtual
power management<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="RAM"><a href="#RAM" class="headerlink" title="RAM"></a>RAM</h4><p>ç”¨æ¥æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿå†…å­˜çš„ä¿¡æ¯ï¼Œå¦å¤– free å‘½ä»¤æ˜¯ä» &#x2F;proc&#x2F;meminfo ä¸­è¯»å–ä¿¡æ¯çš„ï¼Œè·Ÿæˆ‘ä»¬ç›´æ¥è¯»åˆ°çš„ç»“æœä¸€æ ·ã€‚</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>root@k8s<span class="token punctuation">-</span>master<span class="token punctuation">-</span>01 proc<span class="token punctuation">]</span><span class="token comment"># cat meminfo</span>
<span class="token key atrule">MemTotal</span><span class="token punctuation">:</span>        3863636 kB
<span class="token key atrule">MemFree</span><span class="token punctuation">:</span>          247016 kB
<span class="token key atrule">MemAvailable</span><span class="token punctuation">:</span>    2096628 kB
<span class="token key atrule">Buffers</span><span class="token punctuation">:</span>           85612 kB
<span class="token key atrule">Cached</span><span class="token punctuation">:</span>          1952072 kB
<span class="token key atrule">SwapCached</span><span class="token punctuation">:</span>            0 kB
<span class="token key atrule">Active</span><span class="token punctuation">:</span>          2250028 kB
<span class="token key atrule">Inactive</span><span class="token punctuation">:</span>        1003588 kB
<span class="token key atrule">Active(anon)</span><span class="token punctuation">:</span>    1224120 kB
<span class="token key atrule">Inactive(anon)</span><span class="token punctuation">:</span>    21344 kB
<span class="token key atrule">Active(file)</span><span class="token punctuation">:</span>    1025908 kB
<span class="token key atrule">Inactive(file)</span><span class="token punctuation">:</span>   982244 kB
<span class="token key atrule">Unevictable</span><span class="token punctuation">:</span>           0 kB
<span class="token key atrule">Mlocked</span><span class="token punctuation">:</span>               0 kB
<span class="token key atrule">SwapTotal</span><span class="token punctuation">:</span>             0 kB
<span class="token key atrule">SwapFree</span><span class="token punctuation">:</span>              0 kB
<span class="token key atrule">Dirty</span><span class="token punctuation">:</span>               128 kB
<span class="token key atrule">Writeback</span><span class="token punctuation">:</span>             0 kB
<span class="token key atrule">AnonPages</span><span class="token punctuation">:</span>       1215816 kB
<span class="token key atrule">Mapped</span><span class="token punctuation">:</span>           196080 kB
<span class="token key atrule">Shmem</span><span class="token punctuation">:</span>             29532 kB
<span class="token key atrule">Slab</span><span class="token punctuation">:</span>             222544 kB
<span class="token key atrule">SReclaimable</span><span class="token punctuation">:</span>      92156 kB
<span class="token key atrule">SUnreclaim</span><span class="token punctuation">:</span>       130388 kB
<span class="token key atrule">KernelStack</span><span class="token punctuation">:</span>       15904 kB
<span class="token key atrule">PageTables</span><span class="token punctuation">:</span>        13024 kB
<span class="token key atrule">NFS_Unstable</span><span class="token punctuation">:</span>          0 kB
<span class="token key atrule">Bounce</span><span class="token punctuation">:</span>                0 kB
<span class="token key atrule">WritebackTmp</span><span class="token punctuation">:</span>          0 kB
<span class="token key atrule">CommitLimit</span><span class="token punctuation">:</span>     1931816 kB
<span class="token key atrule">Committed_AS</span><span class="token punctuation">:</span>    7402668 kB
<span class="token key atrule">VmallocTotal</span><span class="token punctuation">:</span>   34359738367 kB
<span class="token key atrule">VmallocUsed</span><span class="token punctuation">:</span>      187276 kB
<span class="token key atrule">VmallocChunk</span><span class="token punctuation">:</span>   34359310332 kB
<span class="token key atrule">HardwareCorrupted</span><span class="token punctuation">:</span>     0 kB
<span class="token key atrule">AnonHugePages</span><span class="token punctuation">:</span>    264192 kB
<span class="token key atrule">CmaTotal</span><span class="token punctuation">:</span>              0 kB
<span class="token key atrule">CmaFree</span><span class="token punctuation">:</span>               0 kB
<span class="token key atrule">HugePages_Total</span><span class="token punctuation">:</span>       <span class="token number">0</span>
<span class="token key atrule">HugePages_Free</span><span class="token punctuation">:</span>        <span class="token number">0</span>
<span class="token key atrule">HugePages_Rsvd</span><span class="token punctuation">:</span>        <span class="token number">0</span>
<span class="token key atrule">HugePages_Surp</span><span class="token punctuation">:</span>        <span class="token number">0</span>
<span class="token key atrule">Hugepagesize</span><span class="token punctuation">:</span>       2048 kB
<span class="token key atrule">DirectMap4k</span><span class="token punctuation">:</span>      206720 kB
<span class="token key atrule">DirectMap2M</span><span class="token punctuation">:</span>     3987456 kB
<span class="token key atrule">DirectMap1G</span><span class="token punctuation">:</span>     2097152 kB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>bufferï¼šè¡¨ç¤ºå—è®¾å¤‡(block device)æ‰€å ç”¨çš„ç¼“å­˜é¡µï¼ŒåŒ…æ‹¬ï¼šç›´æ¥è¯»å†™å—è®¾å¤‡ã€ä»¥åŠæ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®(metadata)æ¯”å¦‚ SuperBlock æ‰€ä½¿ç”¨çš„ç¼“å­˜é¡µï¼›</li>
<li>cacheï¼šè¡¨ç¤ºæ™®é€šæ–‡ä»¶æ•°æ®æ‰€å ç”¨çš„ç¼“å­˜é¡µã€‚</li>
</ul>
<p>äºŒè€…çš„åŒºåˆ«æ¨èé˜…è¯» <a target="_blank" rel="noopener" href="http://linuxperf.com/?p=32">FREE å‘½ä»¤æ˜¾ç¤ºçš„ BUFFERS ä¸ CACHED çš„åŒºåˆ«</a>ï¼Œä» Linux å†…æ ¸æºç æ¥åŒºåˆ†ã€‚</p>
<h4 id="net"><a href="#net" class="headerlink" title="net"></a>net</h4><ul>
<li>arp</li>
</ul>
<p>ç”¨æ¥æŸ¥çœ‹ç³»ç»Ÿ arp ç¼“å­˜çš„æ˜ å°„è¡¨ã€‚</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@k8s-node-3 /proc/net
â•°â”€<span class="token comment"># cat arp</span>
IP address       HW <span class="token builtin class-name">type</span>     Flags       HW address            Mask     Device
<span class="token number">169.254</span>.169.254  0x1         0x0         00:00:00:00:00:00     *        ens160
<span class="token number">100.78</span>.36.67     0x1         0x2         ee:25:17:a5:e9:3b     *        cali35f7ecfd8a4
<span class="token number">10.20</span>.172.212    0x1         0x2         00:0c:29:16:f5:1f     *        ens160
<span class="token number">100.78</span>.36.65     0x1         0x2         d6:80:af:8a:22:c7     *        calid838acfbeda
<span class="token number">10.20</span>.172.1      0x1         0x2         00:00:5e:00:01:3a     *        ens160
<span class="token number">10.20</span>.172.102    0x1         0x2         00:21:91:53:e8:a3     *        ens160
<span class="token number">10.20</span>.172.254    0x1         0x2         5c:dd:70:05:e8:53     *        ens160
<span class="token number">10.20</span>.172.106    0x1         0x2         <span class="token number">98</span>:90:96:d0:86:8a     *        ens160<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>route</li>
</ul>
<p>ä»¥æ ‘çº§ç»“æ„åˆ—å‡ºç³»ç»Ÿçš„è·¯ç”±è¡¨ä¿¡æ¯</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@k8s-node-3 ~
â•°â”€<span class="token comment"># cat /proc/net/fib_trie</span>
Main:
  +-- <span class="token number">0.0</span>.0.0/0 <span class="token number">3</span> <span class="token number">1</span> <span class="token number">5</span>
	  +-- <span class="token number">0.0</span>.0.0/4 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
		  <span class="token operator">|</span>-- <span class="token number">0.0</span>.0.0
			  /0 universe UNICAST
		  +-- <span class="token number">10.0</span>.0.0/9 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
			  +-- <span class="token number">10.20</span>.172.0/24 <span class="token number">2</span> <span class="token number">1</span> <span class="token number">2</span>
				  <span class="token operator">|</span>-- <span class="token number">10.20</span>.172.0
					  /32 <span class="token function">link</span> BROADCAST
					  /24 <span class="token function">link</span> UNICAST
				  +-- <span class="token number">10.20</span>.172.192/26 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
					  <span class="token operator">|</span>-- <span class="token number">10.20</span>.172.211
						  /32 <span class="token function">host</span> LOCAL
					  <span class="token operator">|</span>-- <span class="token number">10.20</span>.172.255
						  /32 <span class="token function">link</span> BROADCAST
			  +-- <span class="token number">10.96</span>.0.0/12 <span class="token number">4</span> <span class="token number">1</span> <span class="token number">7</span>
				  +-- <span class="token number">10.96</span>.0.0/16 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">1</span>
					  +-- <span class="token number">10.96</span>.0.0/28 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
						  <span class="token operator">|</span>-- <span class="token number">10.96</span>.0.1
							  /32 <span class="token function">host</span> LOCAL
						  <span class="token operator">|</span>-- <span class="token number">10.96</span>.0.10
							  /32 <span class="token function">host</span> LOCAL
					  <span class="token operator">|</span>-- <span class="token number">10.96</span>.94.140
						  /32 <span class="token function">host</span> LOCAL
					  <span class="token operator">|</span>-- <span class="token number">10.96</span>.130.114
						  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.99</span>.89.188
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.101</span>.71.131
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.104</span>.241.211
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.107</span>.246.53
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.108</span>.171.54
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.109</span>.20.145
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.110</span>.206.28
					  /32 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">10.111</span>.25.53
					  /32 <span class="token function">host</span> LOCAL
	  +-- <span class="token number">96.0</span>.0.0/3 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
		  +-- <span class="token number">100.64</span>.0.0/10 <span class="token number">3</span> <span class="token number">0</span> <span class="token number">3</span>
			  +-- <span class="token number">100.78</span>.36.64/26 <span class="token number">3</span> <span class="token number">0</span> <span class="token number">6</span>
				  +-- <span class="token number">100.78</span>.36.64/30 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">0</span>
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.64
						  /32 <span class="token function">host</span> LOCAL
						  /32 <span class="token function">link</span> BROADCAST
						  /26 universe BLACKHOLE
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.65
						  /32 <span class="token function">link</span> UNICAST
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.66
						  /32 <span class="token function">link</span> UNICAST
					  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.67
						  /32 <span class="token function">link</span> UNICAST
				  <span class="token operator">|</span>-- <span class="token number">100.78</span>.36.105
					  /32 <span class="token function">link</span> UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.87</span>.114.192
				  /26 universe UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.107</span>.127.64
				  /26 universe UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.112</span>.151.128
				  /26 universe UNICAST
			  <span class="token operator">|</span>-- <span class="token number">100.123</span>.190.192
				  /26 universe UNICAST
		  +-- <span class="token number">127.0</span>.0.0/8 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
			  +-- <span class="token number">127.0</span>.0.0/31 <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span>
				  <span class="token operator">|</span>-- <span class="token number">127.0</span>.0.0
					  /32 <span class="token function">link</span> BROADCAST
					  /8 <span class="token function">host</span> LOCAL
				  <span class="token operator">|</span>-- <span class="token number">127.0</span>.0.1
					  /32 <span class="token function">host</span> LOCAL
			  <span class="token operator">|</span>-- <span class="token number">127.255</span>.255.255
				  /32 <span class="token function">link</span> BROADCAST
	  +-- <span class="token number">168.0</span>.0.0/5 <span class="token number">2</span> <span class="token number">0</span> <span class="token number">2</span>
		  <span class="token operator">|</span>-- <span class="token number">169.254</span>.0.0
			  /16 <span class="token function">link</span> UNICAST
		  +-- <span class="token number">172.16</span>.0.0/14 <span class="token number">3</span> <span class="token number">0</span> <span class="token number">6</span>
			  +-- <span class="token number">172.17</span>.0.0/31 <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span>
				  <span class="token operator">|</span>-- <span class="token number">172.17</span>.0.0
					  /32 <span class="token function">link</span> BROADCAST
					  /16 <span class="token function">link</span> UNICAST
				  <span class="token operator">|</span>-- <span class="token number">172.17</span>.0.1
					  /32 <span class="token function">host</span> LOCAL
			  <span class="token operator">|</span>-- <span class="token number">172.17</span>.255.255
				  /32 <span class="token function">link</span> BROADCAST<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>nf_conntrack</li>
</ul>
<blockquote>
<p>nf_conntrack(åœ¨è€ç‰ˆæœ¬çš„ Linux å†…æ ¸ä¸­å« ip_conntrack)æ˜¯ä¸€ä¸ªå†…æ ¸æ¨¡å—,ç”¨äºè·Ÿè¸ªä¸€ä¸ªè¿æ¥çš„çŠ¶æ€çš„ã€‚è¿æ¥çŠ¶æ€è·Ÿè¸ªå¯ä»¥ä¾›å…¶ä»–æ¨¡å—ä½¿ç”¨,æœ€å¸¸è§çš„ä¸¤ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ iptables çš„ nat çš„ state æ¨¡å—ã€‚ iptables çš„ nat é€šè¿‡è§„åˆ™æ¥ä¿®æ”¹ç›®çš„&#x2F;æºåœ°å€,ä½†å…‰ä¿®æ”¹åœ°å€ä¸è¡Œ,æˆ‘ä»¬è¿˜éœ€è¦èƒ½è®©å›æ¥çš„åŒ…èƒ½è·¯ç”±åˆ°æœ€åˆçš„æ¥æºä¸»æœºã€‚è¿™å°±éœ€è¦å€ŸåŠ© nf_conntrack æ¥æ‰¾åˆ°åŸæ¥é‚£ä¸ªè¿æ¥çš„è®°å½•æ‰è¡Œã€‚è€Œ state æ¨¡å—åˆ™æ˜¯ç›´æ¥ä½¿ç”¨ nf_conntrack é‡Œè®°å½•çš„è¿æ¥çš„çŠ¶æ€æ¥åŒ¹é…ç”¨æˆ·å®šä¹‰çš„ç›¸å…³è§„åˆ™ã€‚ä¾‹å¦‚ä¸‹é¢è¿™æ¡ INPUT è§„åˆ™ç”¨äºæ”¾è¡Œ 80 ç«¯å£ä¸Šçš„çŠ¶æ€ä¸º NEW çš„è¿æ¥ä¸Šçš„åŒ…ã€‚</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@k8s-node-3 /proc/net
â•°â”€<span class="token comment"># cat nf_conntrack | head -n 4</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">102</span> SYN_SENT <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">42562</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token punctuation">[</span>UNREPLIED<span class="token punctuation">]</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">42562</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">79</span> SYN_SENT <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">60579</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token punctuation">[</span>UNREPLIED<span class="token punctuation">]</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">60579</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">86366</span> ESTABLISHED <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.121 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">58589</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.121 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">58589</span> <span class="token punctuation">[</span>ASSURED<span class="token punctuation">]</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span>
ipv4     <span class="token number">2</span> tcp      <span class="token number">6</span> <span class="token number">62</span> SYN_SENT <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">37531</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token punctuation">[</span>UNREPLIED<span class="token punctuation">]</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token number">10.10</span>.107.214 <span class="token assign-left variable">dst</span><span class="token operator">=</span><span class="token number">10.20</span>.172.211 <span class="token assign-left variable">sport</span><span class="token operator">=</span><span class="token number">179</span> <span class="token assign-left variable">dport</span><span class="token operator">=</span><span class="token number">37531</span> <span class="token assign-left variable">mark</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">secctx</span><span class="token operator">=</span>system_u:object_r:unlabeled_t:s0 <span class="token assign-left variable">zone</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">use</span><span class="token operator">=</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><a target="_blank" rel="noopener" href="http://www.linvon.cn/post/%E8%BF%9E%E6%8E%A5%E8%B7%9F%E8%B8%AAnf_conntrack%E4%B8%8Enat%E5%92%8C%E7%8A%B6%E6%80%81iptables/">è¿æ¥è·Ÿè¸ª nf_conntrack ä¸ NAT å’ŒçŠ¶æ€é˜²ç«å¢™</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liushaodong/archive/2013/02/26/2933593.html">netfilter é“¾æ¥è·Ÿè¸ªæœºåˆ¶ä¸ NAT åŸç†</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-23069658-id-3169450.html">(äº”)æ´æ‚‰ linux ä¸‹çš„ Netfilter&amp;iptablesï¼šå¦‚ä½•ç†è§£è¿æ¥è·Ÿè¸ªæœºåˆ¶ï¼Ÿ</a></li>
<li><a target="_blank" rel="noopener" href="https://clodfisher.github.io/2018/09/nf_conntrack/">Iptables ä¹‹ nf_conntrack æ¨¡å—</a></li>
</ul>
<h4 id="kernel"><a href="#kernel" class="headerlink" title="kernel"></a>kernel</h4><p>å¯ä»¥ç”¨æ¥æŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¿¡æ¯</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@k8s-master-01 proc<span class="token punctuation">]</span><span class="token comment"># uname -a</span>
Linux k8s-master-01 <span class="token number">3.10</span>.0-862.el7.x86_64 <span class="token comment">#1 SMP Fri Apr 20 16:44:24 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</span>
<span class="token punctuation">[</span>root@k8s-master-01 proc<span class="token punctuation">]</span><span class="token comment"># cat version</span>
Linux version <span class="token number">3.10</span>.0-862.el7.x86_64 <span class="token punctuation">(</span>builder@kbuilder.dev.centos.org<span class="token punctuation">)</span> <span class="token punctuation">(</span>gcc version <span class="token number">4.8</span>.5 <span class="token number">20150623</span> <span class="token punctuation">(</span>Red Hat <span class="token number">4.8</span>.5-28<span class="token punctuation">)</span> <span class="token punctuation">(</span>GCC<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token comment">#1 SMP Fri Apr 20 16:44:24 UTC 2018</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h3><h4 id="nc-netcat"><a href="#nc-netcat" class="headerlink" title="nc netcat"></a>nc netcat</h4><p>nc æ˜¯ä¸ªç‘å£«å†›åˆ€å•Šï¼Œä½ èƒ½æƒ³åˆ°çš„ä½ æƒ³ä¸åˆ°çš„éƒ½èƒ½åšï¼Œåœ¨è¿™é‡Œä»…ä»…åˆ—å‡ºå‡ ä¸ªå¸¸ç”¨å¸¸ç”¨çš„å‘½ä»¤ï¼Œå’±å¹³æ—¶ä¸»è¦ç”¨æ¥åˆ¤æ–­ä¸»æœºç«¯å£æ˜¯å¦æ­£å¸¸ï¼Œæƒ³è¦å®Œæ•´åœ°äº†è§£æ¨èé˜…è¯»ä¸‹é¢æåˆ°çš„æ–‡ç« ã€‚ä¹‹å‰ç¼–ç¨‹éšæƒ³å¤§ä½¬ä¹Ÿå†™è¿‡ nc å‘½ä»¤çš„ä½¿ç”¨è¯¦è§£ã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> netcat

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> netcat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>æŸ¥çœ‹ä¸»æœºç«¯å£æ˜¯å¦æ‰“å¼€</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æŸ¥çœ‹è¿œç¨‹ä¸»æœºç«¯å£æ˜¯å¦æ‰“å¼€</span>
â•­â”€root@blog /opt/shell
â•°â”€<span class="token comment"># nc -vz bing.com 443</span>
DNS fwd/rev mismatch: bing.com <span class="token operator">!=</span> a-0001.a-msedge.net
Warning: inverse <span class="token function">host</span> lookup failed <span class="token keyword">for</span> <span class="token number">13.107</span>.21.200: Unknown <span class="token function">host</span>
bing.com <span class="token punctuation">[</span><span class="token number">204.79</span>.197.200<span class="token punctuation">]</span> <span class="token number">443</span> <span class="token punctuation">(</span>https<span class="token punctuation">)</span> <span class="token function">open</span>
<span class="token comment"># æŸ¥çœ‹æœ¬æœºç«¯å£æ˜¯å¦è¢«å ç”¨</span>
â•­â”€root@blog /opt/shell
â•°â”€<span class="token comment"># nc -lp 80 -v                                                                    1 â†µ</span>
retrying <span class="token builtin class-name">local</span> <span class="token number">0.0</span>.0.0:80 <span class="token builtin class-name">:</span> Address already <span class="token keyword">in</span> use
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ç”¨ nc ä¼ è¾“æ–‡ä»¶</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æ¥æ”¶ç«¯ã€‘ï¼ˆB ä¸»æœºï¼‰è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ˆå…¶ä¸­çš„ xxx æ˜¯ç«¯å£å·ï¼‰</span>
<span class="token function">nc</span> -l -p xxx <span class="token operator">></span> file2

<span class="token comment"># ç„¶ååœ¨ã€å‘é€ç«¯ã€‘ï¼ˆA ä¸»æœºï¼‰è¿è¡Œå¦‚ä¸‹å‘½ä»¤</span>
<span class="token function">nc</span> x.x.x.x xxx <span class="token operator">&lt;</span> file1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2019/09/Netcat-Tricks.html">æ‰«ç›² netcatï¼ˆç½‘çŒ«ï¼‰çš„ N ç§ç”¨æ³•â€”â€”ä»â€œç½‘ç»œè¯Šæ–­â€åˆ°â€œç³»ç»Ÿå…¥ä¾µâ€</a></li>
</ul>
<h4 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h4><p>nmap å‘½ä»¤ç”¨çš„æœ€å¤šçš„å°±æ˜¯ç«¯å£æ‰«æï¼Œåœ¨æ¸—é€é¢†åŸŸå¤šç”¨æ¥æ‰«æå†…ç½‘æœºå™¨ã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> nmap

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> nmap<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>æ‰«æç±»å‹</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-sT    TCP connect<span class="token punctuation">(</span><span class="token punctuation">)</span> æ‰«æï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ TCP æ‰«ææ–¹å¼ã€‚è¿™ç§æ‰«æå¾ˆå®¹æ˜“è¢«æ£€æµ‹åˆ°ï¼Œåœ¨ç›®æ ‡ä¸»æœºçš„æ—¥å¿—ä¸­ä¼šè®°å½•å¤§æ‰¹çš„è¿æ¥è¯·æ±‚ä»¥åŠé”™è¯¯ä¿¡æ¯ã€‚
-sS    TCP åŒæ­¥æ‰«æ <span class="token punctuation">(</span>TCP SYN<span class="token punctuation">)</span>ï¼Œå› ä¸ºä¸å¿…å…¨éƒ¨æ‰“å¼€ä¸€ä¸ª TCP è¿æ¥ï¼Œæ‰€ä»¥è¿™é¡¹æŠ€æœ¯é€šå¸¸ç§°ä¸ºåŠå¼€æ‰«æ <span class="token punctuation">(</span>half-open<span class="token punctuation">)</span>ã€‚è¿™é¡¹æŠ€æœ¯æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå¾ˆå°‘æœ‰ç³»ç»Ÿèƒ½å¤ŸæŠŠè¿™è®°å…¥ç³»ç»Ÿæ—¥å¿—ã€‚ä¸è¿‡ï¼Œä½ éœ€è¦ root æƒé™æ¥å®šåˆ¶ SYN æ•°æ®åŒ…ã€‚
-sF,-sX,-sN    ç§˜å¯† FIN æ•°æ®åŒ…æ‰«æã€åœ£è¯æ ‘ <span class="token punctuation">(</span>Xmas Tree<span class="token punctuation">)</span>ã€ç©º <span class="token punctuation">(</span>Null<span class="token punctuation">)</span> æ‰«ææ¨¡å¼ã€‚è¿™äº›æ‰«ææ–¹å¼çš„ç†è®ºä¾æ®æ˜¯ï¼šå…³é—­çš„ç«¯å£éœ€è¦å¯¹ä½ çš„æ¢æµ‹åŒ…å›åº” RST åŒ…ï¼Œè€Œæ‰“å¼€çš„ç«¯å£å¿…éœ€å¿½ç•¥æœ‰é—®é¢˜çš„åŒ…ï¼ˆå‚è€ƒ RFC <span class="token number">793</span> ç¬¬ <span class="token number">64</span> é¡µï¼‰ã€‚
-sP    <span class="token function">ping</span> æ‰«æï¼Œç”¨ <span class="token function">ping</span> æ–¹å¼æ£€æŸ¥ç½‘ç»œä¸Šå“ªäº›ä¸»æœºæ­£åœ¨è¿è¡Œã€‚å½“ä¸»æœºé˜»å¡ ICMP <span class="token builtin class-name">echo</span> è¯·æ±‚åŒ…æ˜¯ <span class="token function">ping</span> æ‰«ææ˜¯æ— æ•ˆçš„ã€‚nmap åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šè¿›è¡Œ <span class="token function">ping</span> æ‰«æï¼Œåªæœ‰ç›®æ ‡ä¸»æœºå¤„äºè¿è¡ŒçŠ¶æ€ï¼Œæ‰ä¼šè¿›è¡Œåç»­çš„æ‰«æã€‚
-sU    UDP çš„æ•°æ®åŒ…è¿›è¡Œæ‰«æï¼Œå¦‚æœä½ æƒ³çŸ¥é“åœ¨æŸå°ä¸»æœºä¸Šæä¾›å“ªäº› UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ŒRFC768<span class="token punctuation">)</span> æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹ã€‚
-sA    ACK æ‰«æï¼Œè¿™é¡¹é«˜çº§çš„æ‰«ææ–¹æ³•é€šå¸¸å¯ä»¥ç”¨æ¥ç©¿è¿‡é˜²ç«å¢™ã€‚
-sW    æ»‘åŠ¨çª—å£æ‰«æï¼Œéå¸¸ç±»ä¼¼äº ACK çš„æ‰«æã€‚
-sR    RPC æ‰«æï¼Œå’Œå…¶å®ƒä¸åŒçš„ç«¯å£æ‰«ææ–¹æ³•ç»“åˆä½¿ç”¨ã€‚
-b    FTP åå¼¹æ”»å‡» <span class="token punctuation">(</span>bounce attack<span class="token punctuation">)</span>ï¼Œè¿æ¥åˆ°é˜²ç«å¢™åé¢çš„ä¸€å° FTP æœåŠ¡å™¨åšä»£ç†ï¼Œæ¥ç€è¿›è¡Œç«¯å£æ‰«æã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>æ‰«æå‚æ•°</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-P0    åœ¨æ‰«æä¹‹å‰ï¼Œä¸ <span class="token function">ping</span> ä¸»æœºã€‚
-PT    æ‰«æä¹‹å‰ï¼Œä½¿ç”¨ TCP <span class="token function">ping</span> ç¡®å®šå“ªäº›ä¸»æœºæ­£åœ¨è¿è¡Œã€‚
-PS    å¯¹äº root ç”¨æˆ·ï¼Œè¿™ä¸ªé€‰é¡¹è®© nmap ä½¿ç”¨ SYN åŒ…è€Œä¸æ˜¯ ACK åŒ…æ¥å¯¹ç›®æ ‡ä¸»æœºè¿›è¡Œæ‰«æã€‚
-PI    è®¾ç½®è¿™ä¸ªé€‰é¡¹ï¼Œè®© nmap ä½¿ç”¨çœŸæ­£çš„ ping<span class="token punctuation">(</span>ICMP <span class="token builtin class-name">echo</span> è¯·æ±‚ï¼‰æ¥æ‰«æç›®æ ‡ä¸»æœºæ˜¯å¦æ­£åœ¨è¿è¡Œã€‚
-PB    è¿™æ˜¯é»˜è®¤çš„ <span class="token function">ping</span> æ‰«æé€‰é¡¹ã€‚å®ƒä½¿ç”¨ ACK<span class="token punctuation">(</span>-PT<span class="token punctuation">)</span> å’Œ ICMP<span class="token punctuation">(</span>-PI<span class="token punctuation">)</span> ä¸¤ç§æ‰«æç±»å‹å¹¶è¡Œæ‰«æã€‚å¦‚æœé˜²ç«å¢™èƒ½å¤Ÿè¿‡æ»¤å…¶ä¸­ä¸€ç§åŒ…ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä½ å°±èƒ½å¤Ÿç©¿è¿‡é˜²ç«å¢™ã€‚
-O    è¿™ä¸ªé€‰é¡¹æ¿€æ´»å¯¹ TCP/IP æŒ‡çº¹ç‰¹å¾ <span class="token punctuation">(</span>fingerprinting<span class="token punctuation">)</span> çš„æ‰«æï¼Œè·å¾—è¿œç¨‹ä¸»æœºçš„æ ‡å¿—ï¼Œä¹Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿç±»å‹ã€‚
-I    æ‰“å¼€ nmap çš„åå‘æ ‡å¿—æ‰«æåŠŸèƒ½ã€‚
-f    ä½¿ç”¨ç¢ç‰‡ IP æ•°æ®åŒ…å‘é€ SYNã€FINã€XMASã€NULLã€‚åŒ…å¢åŠ åŒ…è¿‡æ»¤ã€å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„éš¾åº¦ï¼Œä½¿å…¶æ— æ³•çŸ¥é“ä½ çš„ä¼å›¾ã€‚
-v    å†—ä½™æ¨¡å¼ã€‚å¼ºçƒˆæ¨èä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œå®ƒä¼šç»™å‡ºæ‰«æè¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ã€‚
-S <span class="token operator">&lt;</span>IP<span class="token operator">></span>    åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œnmap å¯èƒ½æ— æ³•ç¡®å®šä½ çš„æºåœ°å€ <span class="token punctuation">(</span>nmap ä¼šå‘Šè¯‰ä½ ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä½¿ç”¨è¿™ä¸ªé€‰é¡¹ç»™å‡ºä½ çš„ IP åœ°å€ã€‚
-g port    è®¾ç½®æ‰«æçš„æºç«¯å£ã€‚ä¸€äº›å¤©çœŸçš„é˜²ç«å¢™å’ŒåŒ…è¿‡æ»¤å™¨çš„è§„åˆ™é›†å…è®¸æºç«¯å£ä¸º DNS<span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">)</span> æˆ–è€… FTP-DATA<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> çš„åŒ…é€šè¿‡å’Œå®ç°è¿æ¥ã€‚æ˜¾ç„¶ï¼Œå¦‚æœæ”»å‡»è€…æŠŠæºç«¯å£ä¿®æ”¹ä¸º <span class="token number">20</span> æˆ–è€… <span class="token number">53</span>ï¼Œå°±å¯ä»¥æ‘§æ¯é˜²ç«å¢™çš„é˜²æŠ¤ã€‚
-oN    æŠŠæ‰«æç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªå¯è¯»çš„æ–‡ä»¶ logfilename ä¸­ã€‚
-oS    æ‰«æç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚
--host_timeout    è®¾ç½®æ‰«æä¸€å°ä¸»æœºçš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰è¶…æ—¶é™åˆ¶ã€‚
--max_rtt_timeout    è®¾ç½®å¯¹æ¯æ¬¡æ¢æµ‹çš„ç­‰å¾…æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´é™åˆ¶å°±é‡ä¼ æˆ–è€…è¶…æ—¶ã€‚é»˜è®¤å€¼æ˜¯å¤§çº¦ <span class="token number">9000</span> æ¯«ç§’ã€‚
--min_rtt_timeout    è®¾ç½® nmap å¯¹æ¯æ¬¡æ¢æµ‹è‡³å°‘ç­‰å¾…ä½ æŒ‡å®šçš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚
-M count    ç½®è¿›è¡Œ TCP connect<span class="token punctuation">(</span><span class="token punctuation">)</span> æ‰«ææ—¶ï¼Œæœ€å¤šä½¿ç”¨å¤šå°‘ä¸ªå¥—æ¥å­—è¿›è¡Œå¹¶è¡Œçš„æ‰«æã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>è·å–è¿œç¨‹ä¸»æœºç³»ç»Ÿç±»å‹å’Œå¼€æ”¾ç«¯å£</li>
</ul>
<p>ç²—æš´ç‚¹å°± <code>nmap -A IP</code>ï¼Œæˆ–è€… <code>nmap -sS -P0 -sV -O</code></p>
<ul>
<li>æ¢æµ‹å†…ç½‘åœ¨çº¿ä¸»æœº</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">nmap -sP <span class="token number">192.168</span>.0.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><h4 id="fio"><a href="#fio" class="headerlink" title="fio"></a><a target="_blank" rel="noopener" href="https://github.com/axboe/fio">fio</a></h4><p>ç”¨æ¥åšç£ç›˜æ€§èƒ½æµ‹è¯•ï¼Œååˆ†å¼ºå¤§çš„ç£ç›˜æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå¯é…ç½®é¡¹å’Œå‚æ•°ä¹Ÿå¾ˆä¸°å¯Œã€‚</p>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHEL/CentOS</span>
yum <span class="token function">install</span> fio

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> fio<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token key attr-name">filename</span><span class="token punctuation">=</span><span class="token value attr-value">/tmp        # æµ‹è¯•æ–‡ä»¶åç§°ï¼Œé€šå¸¸é€‰æ‹©éœ€è¦æµ‹è¯•çš„ç›˜çš„ data ç›®å½•</span>
<span class="token key attr-name">direct</span><span class="token punctuation">=</span><span class="token value attr-value">1             # æµ‹è¯•è¿‡ç¨‹ç»•è¿‡æœºå™¨è‡ªå¸¦çš„ bufferã€‚ä½¿æµ‹è¯•ç»“æœæ›´çœŸå®</span>
<span class="token key attr-name">rw</span><span class="token punctuation">=</span><span class="token value attr-value">randwrite         # æµ‹è¯•éšæœºå†™çš„ I/O</span>
<span class="token key attr-name">rw</span><span class="token punctuation">=</span><span class="token value attr-value">randrw            # æµ‹è¯•éšæœºå†™å’Œè¯»çš„ I/O</span>
<span class="token key attr-name">bs</span><span class="token punctuation">=</span><span class="token value attr-value">16k               # å•æ¬¡ io çš„å—æ–‡ä»¶å¤§å°ä¸º 16k</span>
<span class="token key attr-name">bsrange</span><span class="token punctuation">=</span><span class="token value attr-value">512-2048     # åŒä¸Šï¼Œæå®šæ•°æ®å—çš„å¤§å°èŒƒå›´</span>
<span class="token key attr-name">size</span><span class="token punctuation">=</span><span class="token value attr-value">5G              # æœ¬æ¬¡çš„æµ‹è¯•æ–‡ä»¶å¤§å°ä¸º 5gï¼Œä»¥æ¯æ¬¡ 4k çš„ io è¿›è¡Œæµ‹è¯•</span>
<span class="token key attr-name">numjobs</span><span class="token punctuation">=</span><span class="token value attr-value">30           # æœ¬æ¬¡çš„æµ‹è¯•çº¿ç¨‹ä¸º 30 ä¸ª</span>
<span class="token key attr-name">runtime</span><span class="token punctuation">=</span><span class="token value attr-value">1000         # æµ‹è¯•æ—¶é—´ 1000 ç§’ï¼Œå¦‚æœä¸å†™åˆ™ä¸€ç›´å°† 5g æ–‡ä»¶åˆ† 4k æ¯æ¬¡å†™å®Œä¸ºæ­¢</span>
<span class="token key attr-name">ioengine</span><span class="token punctuation">=</span><span class="token value attr-value">psync       #io å¼•æ“ä½¿ç”¨ psync æ–¹å¼</span>
<span class="token key attr-name">rwmixwrite</span><span class="token punctuation">=</span><span class="token value attr-value">30        # åœ¨æ··åˆè¯»å†™çš„æ¨¡å¼ä¸‹ï¼Œå†™å  30%</span>
group_reporting      # å…³äºæ˜¾ç¤ºç»“æœçš„ï¼Œæ±‡æ€»æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯

<span class="token key attr-name">lockmem</span><span class="token punctuation">=</span><span class="token value attr-value">1G           # åªä½¿ç”¨ 1g å†…å­˜è¿›è¡Œæµ‹è¯•s</span>
zero_buffers         # ç”¨ 0 åˆå§‹åŒ–ç³»ç»Ÿ buffer
<span class="token key attr-name">nrfiles</span><span class="token punctuation">=</span><span class="token value attr-value">8            # æ¯ä¸ªè¿›ç¨‹ç”Ÿæˆæ–‡ä»¶çš„æ•°é‡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>æ³¨æ„ï¼š</code> åªè¦ä¸æ˜¯æµ‹è¯•ç©ºç›˜ï¼Œ<code>filename</code> å‚æ•°åƒä¸‡ä¸è¦ä½¿ç”¨ç±»ä¼¼ <code>/dev/sda</code> è¿™æ— å¼‚äºåˆ åº“è·‘è·¯ ğŸ˜‚ã€‚æ‰€ä»¥æ¨èä½¿ç”¨è·¯å¾„è€Œä¸æ˜¯è®¾å¤‡ã€‚</p>
<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@nfs ~
â•°â”€<span class="token comment"># fio -filename=/tmp/test.file -direct=1 -iodepth 1 -thread -rw=randrw -rwmixread=70 -ioengine=psync -bs=16k -size=1G -numjobs=30 -runtime=100 -group_reporting -name=mytest1</span>
mytest1: <span class="token punctuation">(</span>g<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>: <span class="token assign-left variable">rw</span><span class="token operator">=</span>randrw, <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token punctuation">(</span>R<span class="token punctuation">)</span> <span class="token number">16</span>.0KiB-16.0KiB, <span class="token punctuation">(</span>W<span class="token punctuation">)</span> <span class="token number">16</span>.0KiB-16.0KiB, <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token number">16</span>.0KiB-16.0KiB, <span class="token assign-left variable">ioengine</span><span class="token operator">=</span>psync, <span class="token assign-left variable">iodepth</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">..</span>.
fio-3.7
Starting <span class="token number">30</span> threads
mytest1: Laying out IO <span class="token function">file</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token function">file</span> / 1024MiB<span class="token punctuation">)</span>
Jobs: <span class="token number">30</span> <span class="token punctuation">(</span>f<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>: <span class="token punctuation">[</span>m<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">100.0</span>%<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span>1265KiB/s,w<span class="token operator">=</span>560KiB/s<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span><span class="token number">79</span>,w<span class="token operator">=</span><span class="token number">35</span> IOPS<span class="token punctuation">]</span><span class="token punctuation">[</span>eta 00m:00s<span class="token punctuation">]</span>
mytest1: <span class="token punctuation">(</span>groupid<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">jobs</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>: <span class="token assign-left variable">err</span><span class="token operator">=</span> <span class="token number">0</span>: <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">45930</span>: Mon Apr <span class="token number">27</span> <span class="token number">23</span>:09:21 <span class="token number">2020</span>
	read: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">71</span>, <span class="token assign-left variable">BW</span><span class="token operator">=</span>1149KiB/s <span class="token punctuation">(</span>1177kB/s<span class="token punctuation">)</span><span class="token punctuation">(</span>113MiB/100321msec<span class="token punctuation">)</span>
	 clat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">349</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">999812</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">292473.60</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">188905.70</span>
	  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">349</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">999813</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">292473.83</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">188905.69</span>
	 clat percentiles <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>:
	  <span class="token operator">|</span>  <span class="token number">1</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">5</span><span class="token punctuation">]</span>,  <span class="token number">5</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">8</span><span class="token punctuation">]</span>, <span class="token number">10</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">11</span><span class="token punctuation">]</span>, <span class="token number">20</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">24</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">30</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">247</span><span class="token punctuation">]</span>, <span class="token number">40</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">313</span><span class="token punctuation">]</span>, <span class="token number">50</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">342</span><span class="token punctuation">]</span>, <span class="token number">60</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">372</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">70</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">401</span><span class="token punctuation">]</span>, <span class="token number">80</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">430</span><span class="token punctuation">]</span>, <span class="token number">90</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">481</span><span class="token punctuation">]</span>, <span class="token number">95</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">542</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">751</span><span class="token punctuation">]</span>, <span class="token number">99</span>.50th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">818</span><span class="token punctuation">]</span>, <span class="token number">99</span>.90th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">894</span><span class="token punctuation">]</span>, <span class="token number">99</span>.95th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">936</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.99th<span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1003</span><span class="token punctuation">]</span>
	bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>   <span class="token number">31</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>   <span class="token number">96</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">3.53</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">40.55</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">14.30</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">5661</span>
	iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>    <span class="token number">1</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>    <span class="token number">6</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span> <span class="token number">2.48</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">0.93</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">5661</span>
  write: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">30</span>, <span class="token assign-left variable">BW</span><span class="token operator">=</span>483KiB/s <span class="token punctuation">(</span>494kB/s<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">47</span>.3MiB/100321msec<span class="token punctuation">)</span>
	 clat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">937</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">297.02</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">194.75</span>
	  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">937</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">297.02</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">194.75</span>
	 clat percentiles <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>:
	  <span class="token operator">|</span>  <span class="token number">1</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">5</span><span class="token punctuation">]</span>,  <span class="token number">5</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">9</span><span class="token punctuation">]</span>, <span class="token number">10</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">11</span><span class="token punctuation">]</span>, <span class="token number">20</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">16</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">30</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">266</span><span class="token punctuation">]</span>, <span class="token number">40</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">326</span><span class="token punctuation">]</span>, <span class="token number">50</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">355</span><span class="token punctuation">]</span>, <span class="token number">60</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">380</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">70</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">405</span><span class="token punctuation">]</span>, <span class="token number">80</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">435</span><span class="token punctuation">]</span>, <span class="token number">90</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">481</span><span class="token punctuation">]</span>, <span class="token number">95</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">550</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.00th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">760</span><span class="token punctuation">]</span>, <span class="token number">99</span>.50th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">810</span><span class="token punctuation">]</span>, <span class="token number">99</span>.90th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">902</span><span class="token punctuation">]</span>, <span class="token number">99</span>.95th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">927</span><span class="token punctuation">]</span>,
	  <span class="token operator">|</span> <span class="token number">99</span>.99th<span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">936</span><span class="token punctuation">]</span>
	bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>   <span class="token number">31</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>  <span class="token number">256</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">9.65</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">46.52</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">25.43</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">2071</span>
	iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>    <span class="token number">1</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>   <span class="token number">16</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span> <span class="token number">2.85</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">1.61</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">2071</span>
  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">0.02</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">0.02</span>%
  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.28</span>%, <span class="token assign-left variable">10</span><span class="token operator">=</span><span class="token number">8.53</span>%, <span class="token assign-left variable">20</span><span class="token operator">=</span><span class="token number">10.86</span>%, <span class="token assign-left variable">50</span><span class="token operator">=</span><span class="token number">6.42</span>%, <span class="token assign-left variable">100</span><span class="token operator">=</span><span class="token number">0.90</span>%
  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">250</span><span class="token operator">=</span><span class="token number">2.90</span>%, <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">62.21</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">6.79</span>%, <span class="token assign-left variable">1000</span><span class="token operator">=</span><span class="token number">1.06</span>%
  cpu          <span class="token builtin class-name">:</span> <span class="token assign-left variable">usr</span><span class="token operator">=</span><span class="token number">0.00</span>%, <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.01</span>%, <span class="token assign-left variable">ctx</span><span class="token operator">=</span><span class="token number">19413</span>, <span class="token assign-left variable">majf</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">minf</span><span class="token operator">=</span><span class="token number">7</span>
  IO depths    <span class="token builtin class-name">:</span> <span class="token assign-left variable">1</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">2</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">>=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%
	  submit    <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">>=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%
	  complete  <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">>=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%
	  issued rwts: <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token number">7204,3026</span>,0,0 <span class="token assign-left variable">short</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0 <span class="token assign-left variable">dropped</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0
	  latency   <span class="token builtin class-name">:</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">window</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">percentile</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">depth</span><span class="token operator">=</span><span class="token number">1</span>

Run status group <span class="token number">0</span> <span class="token punctuation">(</span>all <span class="token function">jobs</span><span class="token punctuation">)</span>:
	READ: <span class="token assign-left variable">bw</span><span class="token operator">=</span>1149KiB/s <span class="token punctuation">(</span>1177kB/s<span class="token punctuation">)</span>, 1149KiB/s-1149KiB/s <span class="token punctuation">(</span>1177kB/s-1177kB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span>113MiB <span class="token punctuation">(</span>118MB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">100321</span>-100321msec
  WRITE: <span class="token assign-left variable">bw</span><span class="token operator">=</span>483KiB/s <span class="token punctuation">(</span>494kB/s<span class="token punctuation">)</span>, 483KiB/s-483KiB/s <span class="token punctuation">(</span>494kB/s-494kB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span><span class="token number">47</span>.3MiB <span class="token punctuation">(</span><span class="token number">49</span>.6MB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">100321</span>-100321msec

Disk stats <span class="token punctuation">(</span>read/write<span class="token punctuation">)</span>:
	 dm-0: <span class="token assign-left variable">ios</span><span class="token operator">=</span><span class="token number">7750</span>/3320, <span class="token assign-left variable">merge</span><span class="token operator">=</span><span class="token number">0</span>/0, <span class="token assign-left variable">ticks</span><span class="token operator">=</span><span class="token number">200950</span>/123253, <span class="token assign-left variable">in_queue</span><span class="token operator">=</span><span class="token number">324237</span>, <span class="token assign-left variable">util</span><span class="token operator">=</span><span class="token number">99.83</span>%, <span class="token assign-left variable">aggrios</span><span class="token operator">=</span><span class="token number">7765</span>/3135, <span class="token assign-left variable">aggrmerge</span><span class="token operator">=</span><span class="token number">0</span>/192, <span class="token assign-left variable">aggrticks</span><span class="token operator">=</span><span class="token number">201237</span>/111717, <span class="token assign-left variable">aggrin_queue</span><span class="token operator">=</span><span class="token number">312951</span>, <span class="token assign-left variable">aggrutil</span><span class="token operator">=</span><span class="token number">99.81</span>%
  sda: <span class="token assign-left variable">ios</span><span class="token operator">=</span><span class="token number">7765</span>/3135, <span class="token assign-left variable">merge</span><span class="token operator">=</span><span class="token number">0</span>/192, <span class="token assign-left variable">ticks</span><span class="token operator">=</span><span class="token number">201237</span>/111717, <span class="token assign-left variable">in_queue</span><span class="token operator">=</span><span class="token number">312951</span>, <span class="token assign-left variable">util</span><span class="token operator">=</span><span class="token number">99.81</span>%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="qperf"><a href="#qperf" class="headerlink" title="qperf"></a>qperf</h4><ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yum <span class="token function">install</span> qperf
<span class="token function">apt</span> <span class="token function">install</span> qperf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@debian /opt/trojan
â•°â”€<span class="token comment"># qperf --help examples</span>
In these examples, we first run qperf on a <span class="token function">node</span> called myserver <span class="token keyword">in</span> server
mode by invoking it with no arguments.  In all the subsequent examples, we
run qperf on another <span class="token function">node</span> and connect to the server <span class="token function">which</span> we assume has a
<span class="token function">hostname</span> of myserver.
	 * To run a TCP bandwidth and latency test:
		  qperf myserver tcp_bw tcp_lat
	 * To run a SDP bandwidth <span class="token builtin class-name">test</span> <span class="token keyword">for</span> <span class="token number">10</span> seconds:
		  qperf myserver -t <span class="token number">10</span> sdp_bw
	 * To run a UDP latency <span class="token builtin class-name">test</span> and <span class="token keyword">then</span> cause the server to terminate:
		  qperf myserver udp_lat quit
	 * To measure the RDMA UD latency and bandwidth:
		  qperf myserver ud_lat ud_bw
	 * To measure RDMA UC bi-directional bandwidth:
		  qperf myserver rc_bi_bw
	 * To get a range of TCP latencies with a message size from <span class="token number">1</span> to 64K
		  qperf myserver -oo msg_size:1:64K:*2 -vu tcp_lat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">root@debian-node-02-656868cc46-72lc9:/<span class="token comment"># qperf  -t 30 100.107.127.100 -v tcp_bw udp_bw tcp_lat udp_lat conf</span>
tcp_bw:
	 bw              <span class="token operator">=</span>  <span class="token number">3.24</span> GB/sec
	 msg_rate        <span class="token operator">=</span>  <span class="token number">49.4</span> K/sec
	 <span class="token function">time</span>            <span class="token operator">=</span>    <span class="token number">30</span> sec
	 send_cost       <span class="token operator">=</span>   <span class="token number">542</span> ms/GB
	 recv_cost       <span class="token operator">=</span>   <span class="token number">542</span> ms/GB
	 send_cpus_used  <span class="token operator">=</span>   <span class="token number">176</span> % cpus
	 recv_cpus_used  <span class="token operator">=</span>   <span class="token number">176</span> % cpus
udp_bw:
	 send_bw         <span class="token operator">=</span>  <span class="token number">2.62</span> GB/sec
	 recv_bw         <span class="token operator">=</span>  <span class="token number">2.37</span> GB/sec
	 msg_rate        <span class="token operator">=</span>  <span class="token number">72.3</span> K/sec
	 <span class="token function">time</span>            <span class="token operator">=</span>    <span class="token number">30</span> sec
	 send_cost       <span class="token operator">=</span>   <span class="token number">542</span> ms/GB
	 recv_cost       <span class="token operator">=</span>   <span class="token number">598</span> ms/GB
	 send_cpus_used  <span class="token operator">=</span>   <span class="token number">142</span> % cpus
	 recv_cpus_used  <span class="token operator">=</span>   <span class="token number">142</span> % cpus
tcp_lat:
	 latency        <span class="token operator">=</span>  <span class="token number">17.3</span> us
	 msg_rate       <span class="token operator">=</span>  <span class="token number">57.7</span> K/sec
	 <span class="token function">time</span>           <span class="token operator">=</span>    <span class="token number">30</span> sec
	 loc_cpus_used  <span class="token operator">=</span>   <span class="token number">110</span> % cpus
	 rem_cpus_used  <span class="token operator">=</span>   <span class="token number">110</span> % cpus
udp_lat:
	 latency        <span class="token operator">=</span>  <span class="token number">15.4</span> us
	 msg_rate       <span class="token operator">=</span>  <span class="token number">64.8</span> K/sec
	 <span class="token function">time</span>           <span class="token operator">=</span>    <span class="token number">30</span> sec
	 loc_cpus_used  <span class="token operator">=</span>   <span class="token number">111</span> % cpus
	 rem_cpus_used  <span class="token operator">=</span>   <span class="token number">111</span> % cpus
conf:
	 loc_node   <span class="token operator">=</span>  debian-node-02-656868cc46-72lc9
	 loc_cpu    <span class="token operator">=</span>  <span class="token number">8</span> Cores: Intel Xeon E3-1271 v3 @ <span class="token number">3</span>.60GHz
	 loc_os     <span class="token operator">=</span>  Linux <span class="token number">3.10</span>.0-862.el7.x86_64
	 loc_qperf  <span class="token operator">=</span>  <span class="token number">0.4</span>.11
	 rem_node   <span class="token operator">=</span>  debian-node-02-656868cc46-xftvq
	 rem_cpu    <span class="token operator">=</span>  <span class="token number">8</span> Cores: Intel Xeon E3-1271 v3 @ <span class="token number">3</span>.60GHz
	 rem_os     <span class="token operator">=</span>  Linux <span class="token number">3.10</span>.0-862.el7.x86_64
	 rem_qperf  <span class="token operator">=</span>  <span class="token number">0.4</span>.11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="iperf"><a href="#iperf" class="headerlink" title="iperf"></a>iperf</h4><ul>
<li>install</li>
<li>usage</li>
<li>output example</li>
</ul>
<h4 id="wrk"><a href="#wrk" class="headerlink" title="wrk"></a><a target="_blank" rel="noopener" href="https://github.com/wg/wrk/">wrk</a></h4><ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> clone https://github.com/wg/wrk.git --depth<span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">cd</span> wrk
<span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">./wrk
Usage: wrk <span class="token operator">&lt;</span>options<span class="token operator">></span> <span class="token operator">&lt;</span>url<span class="token operator">></span>
  Options:
	 -c, --connections <span class="token operator">&lt;</span>N<span class="token operator">></span>  Connections to keep <span class="token function">open</span> éœ€è¦æ¨¡æ‹Ÿçš„ä¸ªå¹¶å‘è¯·æ±‚è¿æ¥æ•°é‡
	 -d, --duration    <span class="token operator">&lt;</span>T<span class="token operator">></span>  Duration of <span class="token builtin class-name">test</span> æµ‹è¯•çš„æµ‹è¯•æ—¶é•¿
	 -t, --threads     <span class="token operator">&lt;</span>N<span class="token operator">></span>  Number of threads to use å¹¶å‘çº¿ç¨‹æ•°é‡
	 -s, --script      <span class="token operator">&lt;</span>S<span class="token operator">></span>  Load Lua script <span class="token function">file</span>  æŒ‡å®š Lua è„šæœ¬çš„è·¯å¾„
	 -H, --header      <span class="token operator">&lt;</span>H<span class="token operator">></span>  Add header to request æŒ‡å®šè¯·æ±‚å¸¦çš„ Header å‚æ•°
		  --latency          Print latency statistics æ˜¯å¦æ‰“å°è¯·æ±‚å»¶è¿Ÿç»Ÿè®¡
		  --timeout     <span class="token operator">&lt;</span>T<span class="token operator">></span>  Socket/request <span class="token function">timeout</span> è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># å¯¹ 10.20.172.196 nginx æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•</span>
â•­â”€root@test ~/wrk â€¹masterâ€º
â•°â”€<span class="token comment"># ./wrk -t100 -c512 -d30s http://10.20.172.196</span>
Running 30s <span class="token builtin class-name">test</span> @ http://10.20.172.196
  <span class="token number">100</span> threads and <span class="token number">512</span> connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
	 Latency    <span class="token number">44</span>.71ms  <span class="token number">108</span>.75ms   <span class="token number">1</span>.99s    <span class="token number">89.05</span>%
	 Req/Sec   <span class="token number">369.78</span>    <span class="token number">207.57</span>     <span class="token number">1</span>.68k    <span class="token number">71.50</span>%
  <span class="token number">987158</span> requests <span class="token keyword">in</span> <span class="token number">30</span>.10s, <span class="token number">840</span>.66MB <span class="token builtin class-name">read</span>
  Socket errors: connect <span class="token number">0</span>, <span class="token builtin class-name">read</span> <span class="token number">0</span>, <span class="token function">write</span> <span class="token number">0</span>, <span class="token function">timeout</span> <span class="token number">22</span>
Requests/sec:  <span class="token number">32797.65</span>
Transfer/sec:     <span class="token number">27</span>.93MB
<span class="token comment"># æµ‹è¯•ç»“æœï¼ŒåŸºæœ¬èƒ½è¾¾åˆ° 3W+ çš„ QPS çš„æ€§èƒ½</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="httperf"><a href="#httperf" class="headerlink" title="httperf"></a>httperf</h4><ul>
<li>install</li>
<li>usage</li>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@ubuntu-238 ~
â•°â”€<span class="token comment"># httperf --server 10.20.172.196 --port 80 --num-conns 100 --rate 10 --timeout 1</span>
httperf --timeout<span class="token operator">=</span><span class="token number">1</span> --client<span class="token operator">=</span><span class="token number">0</span>/1 --server<span class="token operator">=</span><span class="token number">10.20</span>.172.196 --port<span class="token operator">=</span><span class="token number">80</span> --uri<span class="token operator">=</span>/ --rate<span class="token operator">=</span><span class="token number">10</span> --send-buffer<span class="token operator">=</span><span class="token number">4096</span> --recv-buffer<span class="token operator">=</span><span class="token number">16384</span> --num-conns<span class="token operator">=</span><span class="token number">100</span> --num-calls<span class="token operator">=</span><span class="token number">1</span>
httperf: warning: <span class="token function">open</span> <span class="token function">file</span> limit <span class="token operator">></span> FD_SETSIZE<span class="token punctuation">;</span> limiting max. <span class="token comment"># of open files to FD_SETSIZE</span>
Maximum connect burst length: <span class="token number">1</span>
<span class="token comment"># å“åº”é€Ÿç‡</span>
Total: connections <span class="token number">100</span> requests <span class="token number">100</span> replies <span class="token number">100</span> test-duration <span class="token number">9.900</span> s
Connection rate: <span class="token number">10.1</span> conn/s <span class="token punctuation">(</span><span class="token number">99.0</span> ms/conn, <span class="token operator">&lt;=</span><span class="token number">1</span> concurrent connections<span class="token punctuation">)</span>
Connection <span class="token function">time</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>: min <span class="token number">0.1</span> avg <span class="token number">0.1</span> max <span class="token number">0.2</span> median <span class="token number">0.5</span> stddev <span class="token number">0.0</span>
Connection <span class="token function">time</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>: connect <span class="token number">0.0</span>
Connection length <span class="token punctuation">[</span>replies/conn<span class="token punctuation">]</span>: <span class="token number">1.000</span>
Request rate: <span class="token number">10.1</span> req/s <span class="token punctuation">(</span><span class="token number">99.0</span> ms/req<span class="token punctuation">)</span>
Request size <span class="token punctuation">[</span>B<span class="token punctuation">]</span>: <span class="token number">66.0</span>
<span class="token comment"># æœåŠ¡å™¨ä»è¯·æ±‚ä¸­æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ï¼Œåˆ°è¿æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚æ‰€æ¶ˆè€—çš„æ—¶é—´</span>
Reply rate <span class="token punctuation">[</span>replies/s<span class="token punctuation">]</span>: min <span class="token number">10.0</span> avg <span class="token number">10.0</span> max <span class="token number">10.0</span> stddev <span class="token number">0.0</span> <span class="token punctuation">(</span><span class="token number">1</span> samples<span class="token punctuation">)</span>
Reply <span class="token function">time</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span>: response <span class="token number">0.1</span> transfer <span class="token number">0.0</span>
<span class="token comment"># ç»Ÿè®¡æ¯ä¸ªå›å¤çš„å¤§å°ï¼Œæ¯ä¸ªç»´åº¦çš„å•ä½éƒ½æ˜¯å­—èŠ‚(bytes),ä¸”éƒ½æ˜¯å¹³å‡æ•°</span>
Reply size <span class="token punctuation">[</span>B<span class="token punctuation">]</span>: header <span class="token number">244.0</span> content <span class="token number">649.0</span> footer <span class="token number">0.0</span> <span class="token punctuation">(</span>total <span class="token number">893.0</span><span class="token punctuation">)</span>
Reply status: <span class="token assign-left variable">1xx</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">2xx</span><span class="token operator">=</span><span class="token number">100</span> <span class="token assign-left variable">3xx</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">4xx</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">5xx</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># å®¢æˆ·ç«¯CPUä½¿ç”¨ç‡çš„ç»Ÿè®¡ï¼ŒUserç”¨æˆ·æ¨¡å¼ï¼ŒSystemæ¨¡å¼</span>
CPU <span class="token function">time</span> <span class="token punctuation">[</span>s<span class="token punctuation">]</span>: user <span class="token number">3.85</span> system <span class="token number">6.05</span> <span class="token punctuation">(</span>user <span class="token number">38.9</span>% system <span class="token number">61.1</span>% total <span class="token number">100.0</span>%<span class="token punctuation">)</span>
<span class="token comment"># ç½‘ç»œçš„ååé‡</span>
Net I/O: <span class="token number">9.5</span> KB/s <span class="token punctuation">(</span><span class="token number">0.1</span>*10^6 bps<span class="token punctuation">)</span>
<span class="token comment"># å‘ç”Ÿé”™è¯¯çš„æ€»æ•°,å®¢æˆ·ç«¯è¶…æ—¶è®¡æ•°ï¼Œæ¯æ¬¡ä»ç”Ÿæˆè¯·æ±‚å¼€å§‹ï¼Œå¦‚æœæ²¡æœ‰å“åº”å³è¶…æ—¶,</span>
<span class="token comment"># TCPè¿æ¥å¤±è´¥</span>
Errors: total <span class="token number">0</span> client-timo <span class="token number">0</span> socket-timo <span class="token number">0</span> connrefused <span class="token number">0</span> connreset <span class="token number">0</span>
Errors: fd-unavail <span class="token number">0</span> addrunavail <span class="token number">0</span> ftab-full <span class="token number">0</span> other <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ab"><a href="#ab" class="headerlink" title="ab"></a><a href="">ab</a></h4><ul>
<li>install</li>
<li>usage</li>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@test ~
â•°â”€<span class="token comment"># ab -n 1000 -c 1000 http://10.20.172.196/</span>
This is ApacheBench, Version <span class="token number">2.3</span> <span class="token operator">&lt;</span><span class="token variable">$Revision</span><span class="token builtin class-name">:</span> <span class="token number">1430300</span> $<span class="token operator">></span>
Copyright <span class="token number">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/
Benchmarking <span class="token number">10.20</span>.172.196 <span class="token punctuation">(</span>be patient<span class="token punctuation">)</span>
Completed <span class="token number">100</span> requests
Completed <span class="token number">200</span> requests
Completed <span class="token number">300</span> requests
Completed <span class="token number">400</span> requests
Completed <span class="token number">500</span> requests
Completed <span class="token number">600</span> requests
Completed <span class="token number">700</span> requests
Completed <span class="token number">800</span> requests
Completed <span class="token number">900</span> requests
Completed <span class="token number">1000</span> requests
Finished <span class="token number">1000</span> requests
Server Software:        nginx/1.15.8.1
Server Hostname:        <span class="token number">10.20</span>.172.196
Server Port:            <span class="token number">80</span>
Document Path:          /
Document Length:        <span class="token number">649</span> bytes
Concurrency Level:      <span class="token number">1000</span>
Time taken <span class="token keyword">for</span> tests:   <span class="token number">0.107</span> seconds
Complete requests:      <span class="token number">1000</span>
Failed requests:        <span class="token number">0</span>
Write errors:           <span class="token number">0</span>
Total transferred:      <span class="token number">888000</span> bytes
HTML transferred:       <span class="token number">649000</span> bytes
Requests per second:    <span class="token number">9313.50</span> <span class="token punctuation">[</span><span class="token comment">#/sec] (mean)</span>
Time per request:       <span class="token number">107.371</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span> <span class="token punctuation">(</span>mean<span class="token punctuation">)</span>
Time per request:       <span class="token number">0.107</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span> <span class="token punctuation">(</span>mean, across all concurrent requests<span class="token punctuation">)</span>
Transfer rate:          <span class="token number">8076.55</span> <span class="token punctuation">[</span>Kbytes/sec<span class="token punctuation">]</span> received

Connection Times <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
				  min  mean<span class="token punctuation">[</span>+/-sd<span class="token punctuation">]</span> median   max
Connect:        <span class="token number">0</span>   <span class="token number">29</span>   <span class="token number">8.1</span>     <span class="token number">29</span>      <span class="token number">42</span>
Processing:    <span class="token number">17</span>   <span class="token number">36</span>  <span class="token number">14.3</span>     <span class="token number">45</span>      <span class="token number">51</span>
Waiting:        <span class="token number">0</span>   <span class="token number">35</span>  <span class="token number">14.3</span>     <span class="token number">44</span>      <span class="token number">50</span>
Total:         <span class="token number">42</span>   <span class="token number">65</span>   <span class="token number">9.0</span>     <span class="token number">64</span>      <span class="token number">87</span>

Percentage of the requests served within a certain <span class="token function">time</span> <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
  <span class="token number">50</span>%     <span class="token number">64</span>
  <span class="token number">66</span>%     <span class="token number">69</span>
  <span class="token number">75</span>%     <span class="token number">71</span>
  <span class="token number">80</span>%     <span class="token number">73</span>
  <span class="token number">90</span>%     <span class="token number">78</span>
  <span class="token number">95</span>%     <span class="token number">81</span>
  <span class="token number">98</span>%     <span class="token number">84</span>
  <span class="token number">99</span>%     <span class="token number">86</span>
 <span class="token number">100</span>%     <span class="token number">87</span> <span class="token punctuation">(</span>longest request<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="stress"><a href="#stress" class="headerlink" title="stress"></a>stress</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.tecmint.com/linux-cpu-load-stress-test-with-stress-ng-tool/">Stress&#x2F;Stress-NG</a> æ˜¯ Linux ä¸‹ä¸¤ä¸ªå¸¸ç”¨çš„ç³»ç»Ÿçº§å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œ<strong>stress</strong> å‘½ä»¤ç®€å•æ˜“ç”¨ï¼Œ<strong>stress-ng</strong> æ˜¯ stress çš„å‡çº§ç‰ˆï¼Œæ”¯æŒ<strong>æ•°ç™¾ä¸ªå‚æ•°å®šåˆ¶å„ç§å‹ CPUã€å†…å­˜ã€IOã€ç½‘ç»œ</strong>çš„å§¿åŠ¿ã€‚åœ¨ç³»ç»Ÿè¿‡è½½çš„åœºæ™¯ä¸‹ï¼Œåº”ç”¨æœåŠ¡å¯èƒ½ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„é”™è¯¯æˆ–å¼‚å¸¸ï¼Œåœ¨æµ‹è¯•<strong>è´Ÿè½½å‡è¡¡å’Œç†”æ–­é™çº§</strong>æ—¶éå¸¸æœ‰ç”¨ã€‚è¿™é‡Œåªåˆ—ä¸¾äº†å‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼Œè¯¦ç»†ä½¿ç”¨å‚è€ƒâ€stress-ng â€“helpâ€æˆ–â€man stress-ngâ€ã€‚å¦å¤–ï¼Œè¿™äº›â€œçƒ¤æœºâ€å‘½ä»¤æ¥æµ‹è¯•æœåŠ¡å™¨æ€§èƒ½ä¹Ÿæ˜¯ä¸é”™çš„ã€‚</p>
</blockquote>
<ul>
<li>install</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># RHRL/CentOS</span>
yum <span class="token function">install</span> epel-release
yum <span class="token function">install</span> stress stress-ng

<span class="token comment"># Debian/Ubuntu</span>
<span class="token function">apt</span> <span class="token function">install</span> stress stress-ng

<span class="token comment"># stress-ng åŸºæœ¬ç”¨æ³•ä¸stresså®Œå…¨å…¼å®¹ï¼Œä½†æœ‰æ›´å¤šçš„å‚æ•°å¯é€‰ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>usage</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># åœ¨ä¸¤ä¸ªCPUæ ¸å¿ƒä¸Šè·‘å¼€æ–¹è¿ç®—ï¼Œå¹¶ä¸”å¯åŠ¨ä¸€ä¸ªä¸æ–­åˆ†é…é‡Šæ”¾1Gå†…å­˜çš„çº¿ç¨‹ï¼Œè¿è¡Œ10ç§’ååœæ­¢</span>
stress --cpu <span class="token number">2</span> --vm <span class="token number">1</span> --vm-bytes 1G  -v --timeout <span class="token number">10</span>

<span class="token comment"># å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¸æ–­æ‰§è¡Œsyncç³»ç»Ÿè°ƒç”¨å›å†™ç£ç›˜ç¼“å­˜ï¼Œå¹¶ä¸”å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¸åœåœ°å†™å…¥åˆ é™¤512MBæ•°æ®ï¼Œè¿è¡Œ10ç§’åœæ­¢</span>
stress --io <span class="token number">1</span> --hdd <span class="token number">1</span> --hdd-bytes 512M -v --timeout <span class="token number">10</span>

<span class="token comment"># --sock å¯ä»¥æ¨¡æ‹Ÿå¤§é‡çš„socketè¿æ¥æ–­å¼€ä»¥åŠæ•°æ®çš„å‘é€æ¥æ”¶ç­‰ç­‰</span>
stress-ng --sock <span class="token number">2</span> -v --timeout <span class="token number">10</span> --metrics-brief<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>output example</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€root@debian /bashtop  â€¹masterâ€º
â•°â”€<span class="token comment"># stress --cpu 4 --vm 1 --vm-bytes 1G  -v --timeout 3</span>
stress: info: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> dispatching hogs: <span class="token number">4</span> cpu, <span class="token number">0</span> io, <span class="token number">1</span> vm, <span class="token number">0</span> hdd
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> using backoff <span class="token function">sleep</span> of 3000us
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> setting <span class="token function">timeout</span> to 3s
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> --<span class="token operator">></span> hogcpu worker <span class="token number">1</span> <span class="token punctuation">[</span><span class="token number">18179</span><span class="token punctuation">]</span> forked
stress: dbug: <span class="token punctuation">[</span><span class="token number">18176</span><span class="token punctuation">]</span> allocating <span class="token number">1073741824</span> bytes <span class="token punctuation">..</span>.
stress: dbug: <span class="token punctuation">[</span><span class="token number">18176</span><span class="token punctuation">]</span> allocating <span class="token number">1073741824</span> bytes <span class="token punctuation">..</span>.
stress: dbug: <span class="token punctuation">[</span><span class="token number">18176</span><span class="token punctuation">]</span> touching bytes <span class="token keyword">in</span> strides of <span class="token number">4096</span> bytes <span class="token punctuation">..</span>.
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18175</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18177</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18178</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18179</span> signalled normally
stress: dbug: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>-- worker <span class="token number">18176</span> signalled normally
stress: info: <span class="token punctuation">[</span><span class="token number">18174</span><span class="token punctuation">]</span> successful run completed <span class="token keyword">in</span> 3s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="https://p.k8s.li/20200506154459952.png"></p>
<h3 id="å°å·¥å…·"><a href="#å°å·¥å…·" class="headerlink" title="å°å·¥å…·"></a>å°å·¥å…·</h3><h3 id="é•œåƒæº"><a href="#é•œåƒæº" class="headerlink" title="é•œåƒæº"></a>é•œåƒæº</h3><h2 id="å‘è¡Œç‰ˆ-1"><a href="#å‘è¡Œç‰ˆ-1" class="headerlink" title="å‘è¡Œç‰ˆ"></a>å‘è¡Œç‰ˆ</h2><h3 id="pxder"><a href="#pxder" class="headerlink" title="pxder"></a>pxder</h3><p>ä¸‹ç­ä¹‹åå›åˆ°å°çªä¹‹åå°±å¼€å§‹ä¸€å¤©ä¸­æœ€æœ€æ„‰æ‚¦çš„æ—¶åˆ»ï¼Œåœ¨ pixiv.net ä¸Šåˆ·å›¾ã€‚æ”¶è—å–œæ¬¢çš„<del>è€å©†</del>æ’ç”»ã€‚ä¸ºäº†ç®¡ç†å’Œä¸‹è½½è‡ªå·±æ”¶è—çš„æ’ç”»ä½œå“ï¼Œå½“ç„¶è¿˜æ˜¯é€‰æ‹©é£Ÿç”¨å·¥å…·æ¥ä¸‹è½½å•¦ ğŸ˜‚ã€‚</p>
<p>åœ¨äºŒæœˆä»½çš„æ—¶å€™å¸®å°åœŸè±†å’Œ nova åŒå­¦æµ‹è¯• webp server go çš„ benchmark ï¼Œè¿™ä¸ª pxder å¸®äº†å’±å¾ˆå¤§çš„å¿™ï¼Œä¸‹è½½äº† 3W å¤šå¼ å›¾ç‰‡åšæµ‹è¯•æ ·æœ¬ï¼Œæœ€ç»ˆä½¿ç”¨è„šæœ¬ç­›é€‰å‡ºåˆé€‚çš„æ–‡ä»¶å¤§å°æ¥è¿›è¡Œ prefetc æµ‹è¯•ã€‚</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">â•­â”€debian@debian /mnt/f/illustrations
â•°â”€$ <span class="token function">du</span> -sh
50G     <span class="token builtin class-name">.</span>
â•­â”€debian@debian /mnt/f/illustrations
â•°â”€$ tree
<span class="token number">203</span> directories, <span class="token number">31831</span> files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="æ‚ä¸ƒæ‚å…«çš„"><a href="#æ‚ä¸ƒæ‚å…«çš„" class="headerlink" title="æ‚ä¸ƒæ‚å…«çš„"></a>æ‚ä¸ƒæ‚å…«çš„</h3><h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><p>nginxï¼Œé™¤äº†å»ºç«™ç•¶ Web æœå‹™å™¨ï¼Œæ˜¯å’±åœ¨ openwrt ä¸Šè£çš„ï¼Œç›®çš„æ˜¯ç‚ºäº†æ“ºè„« ip çš„è¾¦å®šé™åˆ¶ã€‚å› ç‚ºæœ‰äº›è¨­å‚™é€šéåŸŸåä¾†è¨ªå•ï¼Œæ›´æ›ç¶²çµ¡ç’°å¢ƒï¼Œæ¯”å¦‚æ¬å®¶ä¹‹å¾Œåªéœ€è¦ç¶­ä¿®æ”¹ä¸€ä¸‹åŸŸåè§£æå³å¯ã€‚æ¯”å¦‚å’±ä½¿ç”¨ X.lo.k8s.li ä½œç‚ºä¸‰ç´šå­åŸŸååˆ†é…çµ¦æœ¬åœ°å…§ç¶²æ©Ÿå™¨ç”¨ã€‚</p>
<h4 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg"></a>ffmpeg</h4><p>ffmpeg èƒ½å¹²çš„äº‹æƒ…å¤ªå¤šäº†ï¼Œå’±ä½¿ç”¨æœ€å¤šçš„è¿˜æ˜¯åˆå¹¶è§†é¢‘è½¬ç è§†é¢‘ï¼Œæ¯”å¦‚å’±çš„ <a href="">mbcf</a> ï¼Œå…¨ç§° Merge bilibili cilent file</p>
<h4 id="pandoc"><a href="#pandoc" class="headerlink" title="pandoc"></a><a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc">pandoc</a></h4><h4 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h4><h4 id="resilio-sync"><a href="#resilio-sync" class="headerlink" title="resilio sync"></a>resilio sync</h4><p>resilio sync ï¼Œæ˜¯å’±æœ€é‡è¦çš„æ•¸æ“šå‚™ä»½å·¥å…·ï¼Œæ¯”å¦‚å’±ä½¿ç”¨ pxder ä¸‹è¼‰å¥½æ”¶è—çš„è€å©†å€‘ï¼Œç‚ºäº†åœ¨æ‰‹æ©Ÿä¸Šä»”ç´°æ¬£è³è€å©†å€‘ï¼Œå’±å°±ç”¨ã€‚resilio sync å°‡ç›®éŒ„åŒæ­¥åˆ°æ‰‹æ©Ÿä¸Šï¼Œä¸¦ä¸”ä½¿ç”¨å®ƒä¾†èˆ‡ PCï¼ŒiPhone ï¼ŒAndroid ï¼ŒLinux ä¸‰è€…ç„¡ç¸«åŒæ­¥ã€‚ç°¡ç›´å¥½ç”¨æ¥µäº†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè·¨å…¬ç¶²åŒæ­¥ï¼Œåœ¨ä¸€äº›ç¶²çµ¡ç’°å¢ƒä¸‹å› ç‚º GFW çš„ç·£æ•…ï¼Œç„¡æ³•å»ºç«‹èµ·éˆæ¥ï¼Œé€™æ™‚å€™éœ€è¦ä½¿ç”¨åˆ°é å®šç¾©ä¸»æ©Ÿã€‚å…¶ä¸­æœ‰å…©ç¨®æ¯”è¼ƒå¥½çš„æ–¹æ¡ˆï¼Œä¸€æ˜¯åœ¨å…¬ç¶² VPS æ©Ÿå™¨ä¸Šå®‰è£ resilio sync ä¸¦ä¸”åŠ å…¥åˆ°åŒæ­¥ä¸»æ©Ÿç•¶ä¸­ã€‚é€™é»ç¼ºé»ä¹Ÿæ˜é¡¯ï¼Œéœ€è¦ä½”ç”¨ç£ç›¤ç©ºé–“ï¼Œå¦‚æœåŒæ­¥å¤§é‡æ–‡ä»¶ä»¥åŠå¹¾åå¹¾ç™¾ GB ç´šåˆ¥çš„è©±ï¼Œå°ç›¤æ©Ÿæ˜¯æ‰›ä¸ä½çš„ï¼Œéœ€è¦å¦å¤–æ·»åŠ ç£ç›¤ã€‚æ–¹æ³•äºŒæ˜¯å’±æƒ³åˆ°çš„ï¼Œå±¢è©¦ä¸çˆ½ï¼Œå°±æ˜¯å°‡æœ¬æ©Ÿçš„ resilio sync ç›£è½ç«¯å£ 11354 ä½¿ç”¨ frp å…§ç¶²ç©¿é€åˆ°å…¬ç¶²æœå‹™å™¨ï¼Œç„¶å¾Œåœ¨å¦ä¸€å°æ©Ÿå™¨ä¸Šæ·»åŠ ä¸Šé å®šç¾©ä¸»æ©Ÿï¼ŒIP å°±æ˜¯ frp æœå‹™å™¨çš„ IPï¼Œç«¯å£å°±æ˜¯ frp å…§ç¶²ç©¿é€çš„ remote portã€‚é€™æ¨£æ·»åŠ å¥½é è¨‚èˆ‡ä¸»æ©Ÿä¹‹å¾Œï¼Œä¸åˆ°ä¸€åˆ†é˜å°±èƒ½ç™¼ç¾ä¸»æ©Ÿä¸¦å»ºç«‹èµ·é€£æ¥ã€‚</p>
<h4 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h4><h4 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h4><h4 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h4><h4 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h4><h4 id="frp"><a href="#frp" class="headerlink" title="frp"></a>frp</h4><h4 id="openwrt"><a href="#openwrt" class="headerlink" title="openwrt"></a>openwrt</h4><h4 id="Trojan"><a href="#Trojan" class="headerlink" title="Trojan"></a>Trojan</h4><h3 id="shell-å¸¸ç”¨è„šæœ¬"><a href="#shell-å¸¸ç”¨è„šæœ¬" class="headerlink" title="shell å¸¸ç”¨è„šæœ¬"></a>shell å¸¸ç”¨è„šæœ¬</h3><h4 id="VPS-init"><a href="#VPS-init" class="headerlink" title="VPS init"></a>VPS init</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">apt</span> update
<span class="token function">apt</span> <span class="token function">install</span> nload ncdu <span class="token function">zsh</span> <span class="token function">git</span> <span class="token function">wget</span> <span class="token function">curl</span> <span class="token function">htop</span> sysstat psmisc nginx-full fail2ban
<span class="token function">curl</span>  https://get.acme.sh <span class="token operator">|</span> <span class="token function">sh</span>
<span class="token function">sh</span> -c <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="token variable">)</span></span>"</span>
<span class="token function">sed</span> -i <span class="token string">'s/ZSH_THEME="robbyrussell"/ZSH_THEME="bira"/g'</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="rawg"><a href="#rawg" class="headerlink" title="rawg"></a>rawg</h4><p>raw wget çš„ç¼©å†™</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># data: 2020-03-31</span>
<span class="token comment"># author: muzi502</span>
<span class="token comment"># for: Fuck GFW and download some raw file form github without proxy using jsDelivr CDN</span>
<span class="token comment"># usage: save the .she to your local such as /usr/bin/rawg, and chmod +x /usr/bin/rawg</span>
<span class="token comment"># use rawg https://github.com/ohmyzsh/ohmyzsh/blob/master/tools/install.sh to download</span>

<span class="token builtin class-name">set</span> -xue
<span class="token comment"># GitHub rul: https://github.com/ohmyzsh/ohmyzsh/blob/master/tools/install.sh</span>
<span class="token comment"># jsDelivr url: https://cdn.jsdelivr.net/gh/ohmyzsh/ohmyzsh/tools/install.sh</span>

<span class="token function">wget</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $1 <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/raw.githubusercontent.com/cdn.jsdelivr.net\/gh/'</span> <span class="token punctuation">\</span>
                <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/github.com/cdn.jsdelivr.net\/gh/'</span> <span class="token punctuation">\</span>
                <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\/master//'</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\/blob//'</span> <span class="token variable">)</span></span>

<span class="token comment"># curl $(echo $1 | sed 's/raw.githubusercontent.com/cdn.jsdelivr.net\/gh/' \</span>
<span class="token comment">#                | sed 's/github.com/cdn.jsdelivr.net\/gh/' \</span>
<span class="token comment">#                | sed 's/\/master//' | sed 's/\/blob//' )</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="kubeadm-pull-images"><a href="#kubeadm-pull-images" class="headerlink" title="kubeadm pull images"></a>kubeadm pull images</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># for: pull kubeamd images and get kubeadm kubectl kubelet binary</span>
<span class="token comment"># date: 2020-04-29</span>
<span class="token comment"># author: muzi502</span>

<span class="token builtin class-name">set</span> -xue
<span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y apt-transport-https <span class="token function">curl</span>
<span class="token function">curl</span> -s https://packages.cloud.google.com/apt/doc/apt-key.gpg <span class="token operator">|</span> apt-key <span class="token function">add</span> -
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">></span>/etc/apt/sources.list.d/kubernetes.list</span>
deb https://apt.kubernetes.io/ kubernetes-xenial main
EOF</span>
<span class="token function">apt-get</span> update

<span class="token keyword">for</span> <span class="token for-or-select variable">version</span> <span class="token keyword">in</span> <span class="token number">1.17</span>.5
<span class="token keyword">do</span>
    <span class="token function">apt</span> purge -y kubeadm kubelet kubectl
    <span class="token function">apt</span> <span class="token function">install</span> -y <span class="token assign-left variable">kubeadm</span><span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>-00 <span class="token assign-left variable">kubelet</span><span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>-00 <span class="token assign-left variable">kubectl</span><span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>-00
    <span class="token function">mkdir</span> -p <span class="token variable">$&#123;version&#125;</span>/bin
    <span class="token function">rm</span> -rf <span class="token variable">$&#123;version&#125;</span>/bin/*
    <span class="token function">cp</span> -a <span class="token variable"><span class="token variable">$(</span><span class="token function">whereis</span> kubelet <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">":"</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span> <span class="token variable">$&#123;version&#125;</span>/bin/
    <span class="token function">cp</span> -a <span class="token variable"><span class="token variable">$(</span><span class="token function">whereis</span> kubeadm <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">":"</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span> <span class="token variable">$&#123;version&#125;</span>/bin/
    <span class="token function">cp</span> -a <span class="token variable"><span class="token variable">$(</span><span class="token function">whereis</span> kubectl <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">":"</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span> <span class="token variable">$&#123;version&#125;</span>/bin/
    kubeadm config images pull --kubernetes-version<span class="token operator">=</span><span class="token variable">$&#123;version&#125;</span>
    <span class="token function">docker</span> save -o kubeadm_v<span class="token variable">$&#123;version&#125;</span>.tar <span class="token variable"><span class="token variable">`</span>kubeadm config images list --kubernetes-version<span class="token operator">=</span>$<span class="token punctuation">&#123;</span>version<span class="token punctuation">&#125;</span><span class="token variable">`</span></span>
    <span class="token function">mv</span> kubeadm_v<span class="token variable">$&#123;version&#125;</span>.tar <span class="token variable">$&#123;version&#125;</span>
    <span class="token function">tar</span> -czvf <span class="token variable">$&#123;version&#125;</span><span class="token punctuation">&#123;</span>.tar.gz,<span class="token punctuation">&#125;</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ss-obfs"><a href="#ss-obfs" class="headerlink" title="ss-obfs"></a>ss-obfs</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">
<span class="token comment">#/bin/bash</span>
<span class="token comment"># for: install shadowsocks-libev and obfs</span>
<span class="token comment"># date: 2019-03-11</span>
<span class="token comment"># by: muzi502</span>
<span class="token function">apt-get</span> update
<span class="token function">apt-get</span> -y  <span class="token function">install</span> shadowsocks-libev simple-obfs rng-tools
rngd -r /dev/urandom
<span class="token function">mkdir</span> -p /etc/shadowsocks-libev/

<span class="token function">cat</span> <span class="token operator">></span> /etc/shadowsocks-libev/config.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF
&#123;
    "server":"0.0.0.0",
    "server_port":8964,
    "local_port":1080,
    "password":"1984fuckGFW",
    "timeout":60,
    "method":"chacha20",
    "plugin":"obfs-server",
    "plugin_opts":"obfs=http"
&#125;
EOF</span>
systemctl restart shadowsocks-libev.service
modprobe tcp_bbr
<span class="token builtin class-name">echo</span> <span class="token string">"tcp_bbr"</span> <span class="token operator">>></span> /etc/modules-load.d/modules.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.default_qdisc=fq"</span> <span class="token operator">>></span> /etc/sysctl.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_congestion_control=bbr"</span> <span class="token operator">>></span> /etc/sysctl.conf
sysctl -p
sysctl net.ipv4.tcp_available_congestion_control
sysctl net.ipv4.tcp_congestion_control
<span class="token function">touch</span> /etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.wmem_max = 67108864"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.rmem_default = 65536"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.wmem_default = 65536"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.netdev_max_backlog = 4096"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.core.somaxconn = 4096"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_syncookies = 1"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_tw_reuse = 1"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_tw_recycle = 0"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_fin_timeout = 30"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_keepalive_time = 1200"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.ip_local_port_range = 10000 65000"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_max_syn_backlog = 4096"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_max_tw_buckets = 5000"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_fastopen = 3"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_rmem = 4096 87380 67108864"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_wmem = 4096 65536 67108864"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
<span class="token builtin class-name">echo</span> <span class="token string">"net.ipv4.tcp_mtu_probing = 1"</span> <span class="token operator">>></span>/etc/sysctl.d/local.conf
sysctl --system
lsmod <span class="token operator">|</span> <span class="token function">grep</span> bbr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="mcbf"><a href="#mcbf" class="headerlink" title="mcbf"></a>mcbf</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># for: bulk merge bilibili UWP download file *.flv</span>
<span class="token comment"># by: blog.k8s.li</span>
<span class="token comment"># date: 2019-01-12</span>
<span class="token comment"># å°†è¯¥è„šæ”¾åˆ° UWP å®¢æˆ·ç«¯ä¸‹è½½ç¼“å­˜ä¸»ç›®å½•ä¸‹æ‰§è¡Œï¼Œå®‰è£… ffmpegã€jq</span>

<span class="token builtin class-name">set</span> -xu
<span class="token assign-left variable">download_dir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>
<span class="token assign-left variable">mp4_dir</span><span class="token operator">=</span><span class="token variable">$&#123;download_dir&#125;</span>/mp4
<span class="token function">mkdir</span> -p <span class="token variable">$&#123;mp4_dir&#125;</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">video_dir</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> <span class="token operator">|</span> <span class="token function">sort</span> -n <span class="token operator">|</span> <span class="token function">grep</span> -E -v <span class="token string">"\.|mp4"</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>/<span class="token variable">$&#123;video_dir&#125;</span>
  <span class="token assign-left variable">up_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".Uploader"</span> *.dvi <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
  <span class="token function">mkdir</span> -p <span class="token variable">$&#123;mp4_dir&#125;</span>/<span class="token variable">$&#123;up_name&#125;</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">p_dir</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> <span class="token operator">|</span> <span class="token function">sort</span> -n <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"\."</span><span class="token variable">)</span></span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>/<span class="token variable">$&#123;video_dir&#125;</span>/<span class="token variable">$&#123;p_dir&#125;</span>
    <span class="token assign-left variable">video_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".Title"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">part_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".PartName"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">upload_time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -Eo <span class="token string">"20[0-9][0-9]-[0-9][0-9]-[0-9][0-9]"</span> *.info<span class="token variable">)</span></span>
    <span class="token assign-left variable">Uploader</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".Uploader"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">mp4_audio</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>jq <span class="token string">".VideoDashInfo"</span> *.info <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">"[:punct:]<span class="token entity" title="\040">\040</span><span class="token entity" title="\011">\011</span><span class="token entity" title="\012">\012</span><span class="token entity" title="\015">\015</span>"</span><span class="token variable">)</span></span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"null"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$&#123;part_name&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token assign-left variable">mp4_file_name</span><span class="token operator">=</span><span class="token variable">$&#123;video_name&#125;</span>.mp4
    <span class="token keyword">else</span>
    <span class="token assign-left variable">mp4_file_name</span><span class="token operator">=</span><span class="token variable">$&#123;video_name&#125;</span>_<span class="token variable">$&#123;p_dir&#125;</span>_<span class="token variable">$&#123;part_name&#125;</span>.mp4
    <span class="token keyword">fi</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"null"</span> <span class="token operator">=</span> <span class="token string">"<span class="token variable">$&#123;mp4_audio&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token function">ls</span> *.flv <span class="token operator">|</span> <span class="token function">sort</span> -n <span class="token operator">></span> ff.txt
    <span class="token function">sed</span> -i <span class="token string">'s/^/file /g'</span> ff.txt
    ffmpeg -f concat -i ff.txt -c copy <span class="token variable">$&#123;mp4_dir&#125;</span>/<span class="token variable">$&#123;up_name&#125;</span>/<span class="token string">"<span class="token variable">$&#123;mp4_file_name&#125;</span>"</span><span class="token punctuation">;</span><span class="token function">rm</span> -rf ff.txt
    <span class="token keyword">else</span>
    ffmpeg  -i video.mp4 -i audio1.mp4 -c:v copy -c:a copy <span class="token variable">$&#123;mp4_dir&#125;</span>/<span class="token variable">$&#123;up_name&#125;</span>/<span class="token string">"<span class="token variable">$&#123;mp4_file_name&#125;</span>"</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>/<span class="token variable">$&#123;video_dir&#125;</span>
  <span class="token builtin class-name">cd</span> <span class="token variable">$&#123;download_dir&#125;</span>
  <span class="token keyword">done</span>
<span class="token comment"># å¦‚æœéœ€è¦ä¿ç•™åŸè§†é¢‘è¯·æ³¨é‡Šæ‰ä¸‹é¢è¿™ä¸€è¡Œ</span>
<span class="token comment">#rm -rf $&#123;download_dir&#125;/$&#123;video_dir&#125;</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="conoha-wallpaper-download"><a href="#conoha-wallpaper-download" class="headerlink" title="conoha wallpaper download"></a>conoha wallpaper download</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># for: download conoha wallpaper</span>
<span class="token comment"># by: muzi502</span>
<span class="token comment"># date: 2020-02-11</span>
<span class="token builtin class-name">set</span> -xue

<span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> https://conoha.mikumo.com/wallpaper/ <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">grep</span> li <span class="token operator">|</span> <span class="token function">grep</span> data-wallpaper-design<span class="token operator">=</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/&lt;li//g'</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/">//g'</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/^[ \t]*//g'</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/data-wallpaper-design="//g'</span> <span class="token punctuation">\</span>
<span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^/https:\/\/conoha.mikumo.com\/wp-content\/themes\/conohamikumo\/images\/wallpaper\//'</span><span class="token variable">)</span></span>

<span class="token keyword">for</span> <span class="token for-or-select variable">pic</span> <span class="token keyword">in</span> <span class="token variable">$&#123;p&#125;</span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">file_name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $<span class="token punctuation">&#123;</span>pic<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">"/"</span> <span class="token string">'&#123;print $9&#125;'</span><span class="token variable">)</span></span>
    <span class="token function">wget</span> <span class="token variable">$&#123;pic&#125;</span>/1080_1920.jpg -O <span class="token variable">$&#123;file_name&#125;</span>_1080.jpg
    <span class="token function">wget</span> <span class="token variable">$&#123;pic&#125;</span>/2560_1440.jpg -O <span class="token variable">$&#123;file_name&#125;</span>_1440.jpg
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="http://code2life.top/2019/05/02/0035-fault-injection/">[DevOps] Linux æ“ä½œç³»ç»Ÿå±‚çš„æ•…éšœæ³¨å…¥</a></li>
</ul>

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/%E6%90%AC%E7%A0%96/" rel="tag"># æ¬ç –</a>
              <a href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag"># å·¥å…·</a>
              <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" rel="tag"># å‘½ä»¤è¡Œ</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/from-chongqing-to-hangzhou.html" rel="prev" title="æ— ç –å¯æ¬çš„æ—¥å­ï¼šæ¢å‚è®°">
                  <i class="fa fa-chevron-left"></i> æ— ç –å¯æ¬çš„æ—¥å­ï¼šæ¢å‚è®°
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/skopeo-101.html" rel="next" title="é•œåƒæ¬è¿å·¥ skopeo åˆä½“éªŒ">
                  é•œåƒæ¬è¿å·¥ skopeo åˆä½“éªŒ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Reimu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.7m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">25:36</span>
  </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"muzi","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
