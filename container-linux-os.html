<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="rgba(0,0,0,0)"><meta name="generator" content="Hexo 6.3.0">

<link rel="preconnect" href="//fonts.loli.net" crossorigin>
<link rel="preconnect" href="null//null" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="rgba(0,0,0,0)">
  <link rel="manifest" href="/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-atom.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.k8s.li","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="æ›´æ–°æ—¥å¿— 2019-12-31 åˆç¨¿ï¼Œå¯èƒ½å®Œæˆä¸äº†ï¼Œç­‰åˆ°æ¥å¹´äº† ğŸ˜‚ 2020-01-01  å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼ŸGKE çš„  Container-Optimized OSGoogle å®¶çš„  GKE  ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä½¿ç”¨ Container-Optimized OS æ¥è¿è¡Œå·¥ä½œè´Ÿè½½ï¼Œä¸è¿‡ä»…ä»…æ˜¯é’ˆå¯¹ GCE æ¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œå¯èƒ½åœ¨ OpenStack æˆ–è€… vSphere ä¸Šè¿è¡Œä¸èµ·æ¥ï¼Œ(ççŒœ ï¿½">
<meta property="og:type" content="blog">
<meta property="og:title" content="Container Linux OS ä»å…¥å‘åˆ°çˆ¬å‡ºæ¥ğŸ˜‚">
<meta property="og:url" content="https://blog.k8s.li/container-linux-os.html">
<meta property="og:site_name" content="Reimu&#39;s blog">
<meta property="og:description" content="æ›´æ–°æ—¥å¿— 2019-12-31 åˆç¨¿ï¼Œå¯èƒ½å®Œæˆä¸äº†ï¼Œç­‰åˆ°æ¥å¹´äº† ğŸ˜‚ 2020-01-01  å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼ŸGKE çš„  Container-Optimized OSGoogle å®¶çš„  GKE  ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä½¿ç”¨ Container-Optimized OS æ¥è¿è¡Œå·¥ä½œè´Ÿè½½ï¼Œä¸è¿‡ä»…ä»…æ˜¯é’ˆå¯¹ GCE æ¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œå¯èƒ½åœ¨ OpenStack æˆ–è€… vSphere ä¸Šè¿è¡Œä¸èµ·æ¥ï¼Œ(ççŒœ ï¿½">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p.k8s.li/20191231163325900.png">
<meta property="og:image" content="https://p.k8s.li/20191231163400135.png">
<meta property="og:image" content="https://p.k8s.li/rancheroshowitworks.png">
<meta property="og:image" content="https://p.k8s.li/20191231105906355.png">
<meta property="og:image" content="https://p.k8s.li/20191231110111943.png">
<meta property="og:image" content="https://p.k8s.li/20191231110153113.png">
<meta property="og:image" content="https://p.k8s.li/20191231110231422.png">
<meta property="og:image" content="https://p.k8s.li/20191231110339494.png">
<meta property="og:image" content="https://p.k8s.li/20191231110531238.png">
<meta property="og:image" content="https://p.k8s.li/20191231111131193.png">
<meta property="og:image" content="https://p.k8s.li/20191231113306435.png">
<meta property="og:image" content="https://p.k8s.li/20191231125441199.png">
<meta property="og:image" content="https://p.k8s.li/20191231133509428.png">
<meta property="og:image" content="https://p.k8s.li/20191231135348120.png">
<meta property="og:image" content="https://p.k8s.li/20191231142454934.png">
<meta property="og:image" content="https://p.k8s.li/20191231143958024.png">
<meta property="article:published_time" content="2019-12-30T16:00:00.000Z">
<meta property="article:modified_time" content="2024-06-16T00:36:30.191Z">
<meta property="article:author" content="Reimu">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="å®¹å™¨">
<meta property="article:tag" content="kubernees">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p.k8s.li/20191231163325900.png">


<link rel="canonical" href="https://blog.k8s.li/container-linux-os.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.k8s.li/container-linux-os.html","path":"container-linux-os.html","title":"Container Linux OS ä»å…¥å‘åˆ°çˆ¬å‡ºæ¥ğŸ˜‚"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Container Linux OS ä»å…¥å‘åˆ°çˆ¬å‡ºæ¥ğŸ˜‚ | Reimu's blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Reimu's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Reimu's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-books"><a href="https://reading.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>Books</a></li><li class="menu-item menu-item-kindle"><a href="https://kindle.k8s.li/" rel="noopener" target="_blank"><i class="fa fa-swatchbook fa-fw"></i>Kindle</a></li><li class="menu-item menu-item-friend"><a href="/friends.html" rel="section"><i class="fa fa-link fa-fw"></i>Friend</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97"><span class="nav-number">1.</span> <span class="nav-text">æ›´æ–°æ—¥å¿—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E4%BC%98%E5%8C%96%E5%9E%8B%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%9F"><span class="nav-number">2.</span> <span class="nav-text">å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GKE-%E7%9A%84-Container-Optimized-OS"><span class="nav-number">2.1.</span> <span class="nav-text">GKE çš„  Container-Optimized OS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoreOS-Container-Linux"><span class="nav-number">2.2.</span> <span class="nav-text">CoreOS Container Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Photon-OS"><span class="nav-number">2.3.</span> <span class="nav-text">Photon OS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RancherOS"><span class="nav-number">2.4.</span> <span class="nav-text">RancherOS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%BD%93%E9%AA%8C"><span class="nav-number">3.</span> <span class="nav-text">å®‰è£…ä½“éªŒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Container-Optimized-OS"><span class="nav-number">3.1.</span> <span class="nav-text">Container-Optimized OS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Photon-OS-1"><span class="nav-number">4.</span> <span class="nav-text">Photon OS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="nav-number">4.1.</span> <span class="nav-text">å®˜æ–¹æ–‡æ¡£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F"><span class="nav-number">4.2.</span> <span class="nav-text">å®‰è£…é•œåƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">4.3.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8"><span class="nav-number">4.4.</span> <span class="nav-text">ç³»ç»Ÿå¯åŠ¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E6%A0%B8"><span class="nav-number">4.5.</span> <span class="nav-text">å†…æ ¸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E6%83%85%E5%86%B5"><span class="nav-number">4.6.</span> <span class="nav-text">èµ„æºå ç”¨æƒ…å†µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%9C%8D%E5%8A%A1"><span class="nav-number">4.7.</span> <span class="nav-text">è¿›ç¨‹å’ŒæœåŠ¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="nav-number">4.8.</span> <span class="nav-text">åŒ…ç®¡ç†å·¥å…·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#docker-%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E"><span class="nav-number">4.9.</span> <span class="nav-text">docker å®¹å™¨å¼•æ“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C"><span class="nav-number">4.10.</span> <span class="nav-text">ä½¿ç”¨ä½“éªŒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CoreOS-Container-Linux-1"><span class="nav-number">5.</span> <span class="nav-text">CoreOS Container Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3-1"><span class="nav-number">5.1.</span> <span class="nav-text">å®˜æ–¹æ–‡æ¡£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F-OVA"><span class="nav-number">5.2.</span> <span class="nav-text">å®‰è£…é•œåƒ OVA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-1"><span class="nav-number">5.3.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8-1"><span class="nav-number">5.4.</span> <span class="nav-text">ç³»ç»Ÿå¯åŠ¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E6%83%85%E5%86%B5-1"><span class="nav-number">5.5.</span> <span class="nav-text">èµ„æºå ç”¨æƒ…å†µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E6%A0%B8%E4%BB%A5%E5%8F%8A%E5%8F%91%E8%A1%8C%E7%89%88%E4%BF%A1%E6%81%AF"><span class="nav-number">5.6.</span> <span class="nav-text">å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#docker-%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E-1"><span class="nav-number">5.7.</span> <span class="nav-text">docker å®¹å™¨å¼•æ“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%9F%E8%BD%BD-1"><span class="nav-number">5.8.</span> <span class="nav-text">è´Ÿè½½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%9C%8D%E5%8A%A1-1"><span class="nav-number">5.9.</span> <span class="nav-text">è¿›ç¨‹å’ŒæœåŠ¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-1"><span class="nav-number">5.10.</span> <span class="nav-text">åŒ…ç®¡ç†å·¥å…·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C-1"><span class="nav-number">5.11.</span> <span class="nav-text">ä½¿ç”¨ä½“éªŒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RancherOS-1"><span class="nav-number">6.</span> <span class="nav-text">RancherOS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3-2"><span class="nav-number">6.1.</span> <span class="nav-text">å®˜æ–¹æ–‡æ¡£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F-1"><span class="nav-number">6.2.</span> <span class="nav-text">å®‰è£…é•œåƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-2"><span class="nav-number">6.3.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E6%A0%B8%E4%BB%A5%E5%8F%8A%E5%8F%91%E8%A1%8C%E7%89%88%E4%BF%A1%E6%81%AF-1"><span class="nav-number">6.4.</span> <span class="nav-text">å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#docker-%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E-2"><span class="nav-number">6.5.</span> <span class="nav-text">docker å®¹å™¨å¼•æ“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rancher-%E5%BC%95%E6%93%8E"><span class="nav-number">6.6.</span> <span class="nav-text">rancher å¼•æ“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8"><span class="nav-number">6.7.</span> <span class="nav-text">èµ„æºå ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%AE%B9%E5%99%A8%E5%8C%96"><span class="nav-number">6.8.</span> <span class="nav-text">ç³»ç»ŸæœåŠ¡å®¹å™¨åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ros"><span class="nav-number">6.9.</span> <span class="nav-text">ros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B"><span class="nav-number">6.10.</span> <span class="nav-text">ç³»ç»Ÿè¿›ç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">6.11.</span> <span class="nav-text">åŒ…ç®¡ç†å™¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9D%9F"><span class="nav-number">7.</span> <span class="nav-text">ç»“æŸ</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Reimu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Reimu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">120</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">155</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/muzi502" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;muzi502" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:muzi502.li@gmail.com" title="E-Mail â†’ mailto:muzi502.li@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/muzi_ii" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;muzi_ii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/muzi502" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;muzi502" rel="noopener" target="_blank"><i class="fa-brands fa-telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa-solid fa-square-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.k8s.li/container-linux-os.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Reimu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Reimu's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Container Linux OS ä»å…¥å‘åˆ°çˆ¬å‡ºæ¥ğŸ˜‚ | Reimu's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Container Linux OS ä»å…¥å‘åˆ°çˆ¬å‡ºæ¥ğŸ˜‚
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2019-12-31 2019-12-31T00:00:00+08:00" itemprop="dateCreated datePublished" datetime="2019-12-31T00:00:00+08:00">2019-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-06-16 2024-06-16T08:36:30+08:00" itemprop="dateModified" datetime="2024-06-16T08:36:30+08:00">2024-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/container-linux-os.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="container-linux-os.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>37k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>33 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul>
<li>2019-12-31 åˆç¨¿ï¼Œå¯èƒ½å®Œæˆä¸äº†ï¼Œç­‰åˆ°æ¥å¹´äº† ğŸ˜‚</li>
<li>2020-01-01</li>
</ul>
<h2 id="å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼Ÿ"><a href="#å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼Ÿ" class="headerlink" title="å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼Ÿ"></a>å®¹å™¨ä¼˜åŒ–å‹æ“ä½œç³»ç»Ÿï¼Ÿ</h2><h3 id="GKE-çš„-Container-Optimized-OS"><a href="#GKE-çš„-Container-Optimized-OS" class="headerlink" title="GKE çš„  Container-Optimized OS"></a>GKE çš„  <a target="_blank" rel="noopener" href="https://cloud.google.com/container-optimized-os/docs/">Container-Optimized OS</a></h3><p>Google å®¶çš„  GKE  ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://cloud.google.com/container-optimized-os/docs/">Container-Optimized OS</a> æ¥è¿è¡Œå·¥ä½œè´Ÿè½½ï¼Œä¸è¿‡ä»…ä»…æ˜¯é’ˆå¯¹ GCE æ¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œå¯èƒ½åœ¨ OpenStack æˆ–è€… vSphere ä¸Šè¿è¡Œä¸èµ·æ¥ï¼Œ(ççŒœ ğŸ˜‚</p>
<blockquote>
<p>Container-Optimized OS æ˜¯é€‚ç”¨äº <a target="_blank" rel="noopener" href="https://cloud.google.com/compute">Compute Engine</a> è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿæ˜ åƒï¼Œä¸“ä¸ºè¿è¡Œ Docker å®¹å™¨è€Œä¼˜åŒ–ã€‚å€ŸåŠ© Container-Optimized OSï¼Œæ‚¨å¯ä»¥å¿«é€Ÿã€é«˜æ•ˆã€å®‰å…¨åœ°åœ¨  Google Cloud Platform ä¸Šå¯åŠ¨ Docker å®¹å™¨ã€‚Container-Optimized OS ç”± Google  ç»´æŠ¤ï¼ŒåŸºäº <a target="_blank" rel="noopener" href="https://www.chromium.org/chromium-os">Chromium OS</a> å¼€æ”¾æºä»£ç é¡¹ç›®ã€‚</p>
</blockquote>
<h3 id="CoreOS-Container-Linux"><a href="#CoreOS-Container-Linux" class="headerlink" title="CoreOS Container Linux"></a>CoreOS Container Linux</h3><p>ä¸ªäººè®¤ä¸º CoreOS çš„ CoreOS Container Linux è¦æ¯” Container-Optimized OS å’Œ Photon OS è¦æ›´åŠ ä¸“ä¸šï¼Œå°¤å…¶æ˜¯é’ˆå¯¹å®¹å™¨æ¥è®²ï¼Œ CoreOS å°±æ˜¯ä¸“é—¨ç”¨æ¥è¿è¡Œå®¹å™¨çš„ï¼Œå®ƒæ²¡æœ‰åƒ yum æˆ– apt è¿™æ ·çš„åŒ…ç®¡ç†å™¨æ¥å®‰è£…è½¯ä»¶ï¼Œåœ¨ CoreOS ä¸­ä½ ä¸éœ€è¦å®‰è£…è½¯ä»¶ï¼Œå› ä¸ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½è¦ä½¿ç”¨ docker æ¥æ‰“åŒ…ã€‚</p>
<blockquote>
<p>é¢å¤–æä¸€å¥ï¼ŒCoreOS æ˜¯ä¸€ä¸ªå›¢é˜Ÿï¼Œç°å¦‚ä»Šå·²ç»è¢« Red HatÂ® æ”¶è´­äº†ï¼Œè€Œ Red HatÂ® å·²ç»è¢« IBM æ”¶è´­äº†ï¼ŒæŒ‰ç…§å…³ç³»æ¥è®²è€Œ CoreOS åº”è¯¥æ˜¯ IBM çš„å­™å­å§ ğŸ™ƒã€‚è€Œ CoreOS Container Linux ä»…ä»…æ˜¯ä»–ä»¬ç»´æŠ¤é¡¹ç›®çš„å…¶ä¸­ä¸€ä¸ªï¼ŒCoreOS å¼€æºçš„é¡¹ç›®è¿˜æœ‰ï¼š</p>
<ul>
<li>etcdï¼š</li>
<li>Clair:</li>
<li>dexï¼š</li>
<li>Prometheusï¼š</li>
<li>flannelï¼š</li>
</ul>
</blockquote>
<p>åœ¨ Linux ä¸–ç•Œé‡Œæœ‰å¤§é‡çš„å‘è¡Œç‰ˆå¯ä»¥åšä¸ºæœåŠ¡å™¨ç³»ç»Ÿä½¿ç”¨, ä½†æ˜¯è¿™äº›ç³»ç»Ÿå¤§å¤šéƒ¨ç½²å¤æ‚, æ›´æ–°ç³»ç»Ÿæ›´æ˜¯å›°éš¾é‡é‡. è¿™äº›éƒ½æ˜¯ CoreOS è¯•å›¾è§£å†³çš„é—®é¢˜ã€‚</p>
<h4 id="ç‰¹ç‚¹å¦‚ä¸‹"><a href="#ç‰¹ç‚¹å¦‚ä¸‹" class="headerlink" title="ç‰¹ç‚¹å¦‚ä¸‹"></a>ç‰¹ç‚¹å¦‚ä¸‹</h4><ul>
<li>æœ€å°åŒ–çš„æ“ä½œç³»ç»Ÿï¼š å ç”¨å†…å­˜å¾ˆå°‘ï¼Œæ¯”å…¸å‹çš„æœåŠ¡å™¨ç‰ˆæœ¬ Linux å°‘å  40% çš„å†…å­˜ã€‚</li>
<li>æ˜“äºå‡çº§ï¼š CoreOS é‡‡ç”¨åŒç³»ç»Ÿåˆ†åŒºï¼ˆä¸»åŠ¨åˆ†åŒº&#x2F;è¢«åŠ¨åˆ†åŒºï¼‰è®¾è®¡è€Œä¸æ˜¯é‡‡ç”¨ä¼ ç»Ÿçš„é€šè¿‡å‡çº§åŒ…æ¥å‡çº§ç³»ç»Ÿï¼Œè¿™ä½¿å¾—æ¯æ¬¡å‡çº§æ›´åŠ å¿«é€Ÿï¼Œå¯é å’Œæ˜“äºå›æ»šã€‚</li>
<li>é›†æˆ Dockerï¼š CoreOS é»˜è®¤é›†æˆ Docker å¹¶ä½œäº†å¾ˆå¥½çš„æ”¯æŒå’Œä¼˜åŒ–ï¼Œçœå»ç”¨æˆ·å®‰è£…ï¼Œé…ç½®ï¼Œä¼˜åŒ– Docker çš„æ—¶é—´ï¼Œæå¤§åœ°æ–¹ä¾¿äº†ç”¨æˆ·ã€‚</li>
<li>æ˜“äºé›†ç¾¤åŒ–ï¼š CoreOS æœ¬èº«æä¾›äº†å¤§å‹ Docker å®¹å™¨é›†ç¾¤çš„æ•´ä½“è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å†…ç½®çš„ fleet å·¥å…·åœ¨å¤šå°ç³»ç»Ÿä¸­éƒ¨ç½²å®¹å™¨å¹¶è¿›è¡Œé›†ç¾¤åŒ–ç®¡ç†ã€‚åŒæ—¶é€šè¿‡æä¾› Discovery Serviceï¼Œä¾¿äºåŠ¨æ€éƒ¨ç½²å’Œç®¡ç†é›†ç¾¤ï¼Œè§£å†³æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿã€‚</li>
<li>è‡ªåŠ¨åŒ–çš„å¤§è§„æ¨¡éƒ¨ç½²ï¼š CoreOS è‡ªèº«æä¾›çš„è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿè‡ªåŠ¨åœ°å¤§è§„æ¨¡æ‰¹é‡éƒ¨ç½²å¹¶æ“ä½œç³»ç»Ÿï¼Œæå¤§åœ°å‡å°‘ç”¨æˆ·å·¥ä½œé‡ã€‚</li>
<li>ä½¿ç”¨ systemd åšä¸ºç³»ç»ŸæœåŠ¡ç®¡ç†å·¥å…·ï¼Œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œsystemd æœ‰ç°ä»£åŒ–çš„æ—¥å¿—åŠŸèƒ½ï¼ŒåŒæ—¶é‡‡ç”¨ socket å¼ä¸ D-Bus æ€»çº¿å¼æ¿€æ´»æœåŠ¡.</li>
</ul>
<h3 id="Photon-OS"><a href="#Photon-OS" class="headerlink" title="Photon OS"></a>Photon OS</h3><h4 id="å®˜æ–¹å®£ä¼ å†Œ"><a href="#å®˜æ–¹å®£ä¼ å†Œ" class="headerlink" title="å®˜æ–¹å®£ä¼ å†Œ"></a>å®˜æ–¹å®£ä¼ å†Œ</h4><p>PPT åšçš„ä¸é”™å‘¦ ğŸ˜‚</p>
<p><img data-src="https://p.k8s.li/20191231163325900.png"></p>
<p><img data-src="https://p.k8s.li/20191231163400135.png"></p>
<p>å‰½çªƒä¸€æ®µ VMware å®˜æ–¹çš„<a target="_blank" rel="noopener" href="https://vmware.github.io/photon/">æ–‡æ¡£</a>ä»‹ç»ï¼š</p>
<blockquote>
<p>Project Photon OSâ„¢ is an open source, minimal Linux container host  that is optimized for cloud-native applications, cloud platforms, and  VMware infrastructure. Photon OS 3.0 introduces ARM64 support, installer improvements and updated packages. We invite partners, customers, and  community members to collaborate on using Photon OS to run  high-performance virtual machines and containerized applications.</p>
<ul>
<li><strong>Optimized for VMware vSphereÂ®</strong>: The Linux kernel is tuned for performance when Photon OS runs on vSphere.</li>
<li><strong>Support for containers</strong>: Photon OS includes the Docker daemon and works with container orchestration frameworks, such as Mesos and Kubernetes.</li>
<li><strong>Efficient lifecycle management</strong>: Photon OS is easy to manage, patch, and update.</li>
<li><strong>Security hardened</strong>: The kernel and other aspects of the operating system are built with an emphasis on security.</li>
</ul>
<p>For more information, see the <a target="_blank" rel="noopener" href="https://vmware.github.io/photon/assets/files/photon-os-datasheet.pdf">datasheet</a>.</p>
<p>Track our progress in earning the Linux Foundationâ€™s Core Infrastructure Initiativeâ€™s Best Practices Badge.</p>
</blockquote>
<p>å¯ä»¥çœ‹å‡º Photon OSâ„¢ æ˜¯é’ˆå¯¹ VMware vSphereÂ® è™šæ‹ŸåŒ–å¹³å°è¿›è¡Œå†…æ ¸ä¼˜åŒ–çš„å®¹å™¨ä¸“ç”¨æ“ä½œç³»ç»Ÿï¼Œå°±å’Œ CoreOS ä¸€æ ·ã€‚ååˆ†é€‚åˆä¸“é—¨ç”¨æ¥è¿è¡Œå®¹å™¨ï¼Œå½“ä½œ Kubernetes é›†ç¾¤ä¸­çš„å·¥ä½œè´Ÿè½½æ¥ä½¿ç”¨ã€‚</p>
<h3 id="RancherOS"><a href="#RancherOS" class="headerlink" title="RancherOS"></a>RancherOS</h3><p>å‰½çªƒä¸€æ®µå®˜æ–¹çš„<a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/">ä»‹ç»</a>ï¼š</p>
<blockquote>
<p>RancherOS is the smallest, easiest way to run Docker in production. Every process in RancherOS is a container managed by Docker. This includes system services such as <code>udev</code> and <code>syslog</code>. Because it only includes the services necessary to run Docker, RancherOS is significantly smaller than most traditional operating systems. By removing unnecessary libraries and services, requirements for security patches and other maintenance are also reduced. This is possible because, with Docker, users typically package all necessary libraries into their containers.</p>
<p>Another way in which RancherOS is designed specifically for running Docker is that it always runs the latest version of Docker. This allows users to take advantage of the latest Docker capabilities and bug fixes.</p>
<p>Like other minimalist Linux distributions, RancherOS boots incredibly quickly. Starting Docker containers is nearly instant, similar to starting any other process. This speed is ideal for organizations adopting microservices and autoscaling.</p>
<p>Docker is an open-source platform designed for developers, system admins, and DevOps. It is used to build, ship, and run containers, using a simple and powerful command line interface (CLI). To get started with Docker, please visit the <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/userguide/">Docker user guide</a>.</p>
</blockquote>
<p>RancherOS æ˜¯ Rancher å›¢é˜Ÿæ‰€ç»´æŠ¤çš„å¼€æºé¡¹ç›®ï¼Œä¹Ÿæ˜¯å¯¹æ ‡ CoreOS ä¸€æ ·ï¼Œä¸“é—¨ç”¨æ¥è¿è¡Œå®¹å™¨ï¼Œå¹¶ä¸”å¯ä»¥è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆè‡³å°‘å®˜æ–¹åšäº†è¿™ä¹ˆæ ·çš„æ‰¿è¯ºï¼Œå’±ä¹Ÿæ²¡åœ¨ç”Ÿäº§ç”¨è¿‡ï¼Œä¸å¥½è¯´ã€‚åœ¨ RancherOS ä¸­æ‰€æœ‰çš„è¿›ç¨‹ï¼ˆåŒ…æ‹¬ç³»ç»Ÿæ‰€æœ‰çš„æœåŠ¡ï¼Œæ¯”å¦‚ udev å’Œ syslogï¼‰éƒ½æ˜¯ç”¨ docker æ¥ç®¡ç†ï¼Œè¿™ä¸€ç‚¹è¦æ¯” CoreOS æ›´åŠ æ¿€è¿›ä¸€äº›ï¼Œè€Œ CoreOS è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿ Linux å‘è¡Œç‰ˆä¸­çš„ systemd æ¥ç®¡ç†ç³»ç»Ÿä¸­çš„æœåŠ¡ã€‚é€šè¿‡ç§»é™¤ä¼ ç»Ÿ Linux å‘è¡Œç‰ˆä¸­ä¸å¿…è¦çš„æœåŠ¡å’Œåº“æ¥æœ€å°åŒ–ç³»ç»Ÿï¼Œä½¿ä»–ä¸“æ³¨å•ä¸€çš„åŠŸèƒ½ï¼Œå³è¿è¡Œ docker å®¹å™¨ã€‚</p>
<blockquote>
<p>Everything in RancherOS is a Docker container. We accomplish this by launching two instances of Docker. One is what we call <strong>System Docker</strong> and is the first process on the system. All other system services, like <code>ntpd</code>, <code>syslog</code>, and <code>console</code>, are running in Docker containers. System Docker replaces traditional init systems like <code>systemd</code> and is used to launch <a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/system-services/adding-system-services/">additional system services</a>.</p>
<p>System Docker runs a special container called <strong>Docker</strong>, which is another Docker daemon responsible for managing all of the userâ€™s containers. Any containers that you launch as a user from the console will run inside this Docker. This creates isolation from the System Docker containers and ensures that normal user commands donâ€™t impact system services.</p>
<p>We created this separation not only for the security benefits, but also to make sure that commands like <code>docker rm -f $(docker ps -qa)</code> donâ€™t delete the entire OS.</p>
</blockquote>
<p><code>Everything in RancherOS is a Docker container.</code> æ„Ÿè§‰è¿™ä¸ªè¦æ¯” CoreOS æ›´åŠ å®¹å™¨åŒ–ï¼Œç”šè‡³ä½¿ç”¨ docker å–ä»£äº† systemd æ¥ç®¡ç†ç³»ç»Ÿçš„å„ç§æœåŠ¡ã€‚ç³»ç»Ÿå¯åŠ¨åè¿è¡Œä¸¤ä¸ª docker æœåŠ¡è¿›ç¨‹ï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿ docker ï¼Œåœ¨æ­¤ä¹‹ä¸Šåœ¨è¿è¡Œç³»ç»ŸæœåŠ¡å®¹å™¨ï¼Œå’Œç”¨æˆ·å±‚é¢çš„ docker ã€‚ä¸è¿‡çœ‹ä¸€ä¸‹ä¸‹é¢çš„è¿™å¼ å›¾ä½ å°±ä¼šæ˜ç™½ã€‚æ€»çš„æ¥è®² RancherOS æ˜¯ä½¿ç”¨ docker æ¥ç®¡ç†æ•´ä¸ªç³»ç»Ÿçš„æœåŠ¡çš„ï¼ŒåŒ…æ‹¬ç”¨æˆ·å±‚é¢çš„ docker ã€‚</p>
<p><img data-src="https://p.k8s.li/rancheroshowitworks.png"></p>
<h2 id="å®‰è£…ä½“éªŒ"><a href="#å®‰è£…ä½“éªŒ" class="headerlink" title="å®‰è£…ä½“éªŒ"></a>å®‰è£…ä½“éªŒ</h2><p>å’±çš„è™šæ‹ŸåŒ–å¹³å°æ˜¯ VMware vSphere ï¼Œå› ä¸ºç¡¬ä»¶æœåŠ¡å™¨å¤§å¤šæ•°éƒ½æ˜¯ Dell çš„ï¼Œè€Œ  Dell  æ˜¯ VMware æ¯å…¬å¸ï¼Œå¯¹äºæˆ‘å¸è¿™ç§ä¼ ç»Ÿä¼ä¸šæ¥è®²ä½¿ç”¨ VMware vSphere è¿™ç§ç”¨æˆ· UI å‹å¥½çš„è™šæ‹ŸåŒ–æ— ç–‘æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œå“ˆå“ˆ ğŸ˜‚ã€‚å…¶ä»–è™šæ‹ŸåŒ–å¹³å°æ¯”å¦‚ OpenStack å®‰è£…æ­¥éª¤ä¼šæœ‰æ‰€ä¸åŒã€‚</p>
<h3 id="Container-Optimized-OS"><a href="#Container-Optimized-OS" class="headerlink" title="Container-Optimized OS"></a>Container-Optimized OS</h3><p>å› ä¸ºä»…ä»…æ˜¯é’ˆå¯¹ GCE è¿›è¡Œä¼˜åŒ–çš„ç³»ç»Ÿï¼Œä¼ ç»Ÿçš„è™šæ‹ŸåŒ–æ¯”å¦‚ KVM ã€ ESXi å¯èƒ½ç”¨ä¸äº†ã€‚å¦å¤–è¿˜éœ€è¦æ‹¿ <a target="_blank" rel="noopener" href="https://www.chromium.org/chromium-os">Chromium OS</a>  çš„æºç æ¥ç¼–è¯‘é•œåƒï¼Œæ²¡æœ‰ç°æˆçš„  ISO æˆ–è€… OVA è™šæ‹Ÿæœºæ¨¡æ¿å¯ç”¨ï¼Œå’±å°±ä¸æŠ˜è…¾äº†ã€‚æ¯•ç«Ÿç¡¬ä»¶èµ„æºæœ‰é™ï¼Œç°åœºç¼–è¯‘ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://www.chromium.org/chromium-os">Chromium OS</a>  ä¹Ÿéœ€è¦åå‡ ä¸ªå°æ—¶ ğŸ˜¥</p>
<h2 id="Photon-OS-1"><a href="#Photon-OS-1" class="headerlink" title="Photon OS"></a>Photon OS</h2><p>å¯ä»¥ç°æˆç¼–è¯‘ä¸€ä¸ª ISO é•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®˜æ–¹å·²ç»ç¼–è¯‘å¥½çš„ ISO é•œåƒæˆ–è€… OVA è™šæ‹Ÿæœºæ¨¡æ¿ã€‚ä¸è¿‡ä¹Ÿæ”¯æŒå¸¸è§çš„å…¬æœ‰äº‘ï¼Œæ¯”å¦‚ Amazon AMI ã€Google GCE Imageã€Azure VHDã€‚ç”šè‡³è¿˜æœ‰ Raspberry Pi3 Image æ ‘è“æ´¾ 3ğŸ˜‚</p>
<h3 id="å®˜æ–¹æ–‡æ¡£"><a href="#å®˜æ–¹æ–‡æ¡£" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a><a target="_blank" rel="noopener" href="https://vmware.github.io/photon/assets/files/html/3.0/photon_installation/">å®˜æ–¹æ–‡æ¡£</a></h3><p>å®˜æ–¹çš„å®‰è£…æ–‡æ¡£ä¸­éƒ½ç»™å‡ºäº†å„ç§ç¯å¢ƒçš„å®‰è£…æ–¹å¼ï¼Œé€‰æ‹©è‡ªå·±çš„ç¯å¢ƒæŒ‰ç…§æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥æ¥å°±è¡Œï¼Œä¸è¿‡åœ¨æ­¤æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚</p>
<h3 id="å®‰è£…é•œåƒ"><a href="#å®‰è£…é•œåƒ" class="headerlink" title="å®‰è£…é•œåƒ"></a>å®‰è£…é•œåƒ</h3><ul>
<li><h4 id="ISO"><a href="#ISO" class="headerlink" title="ISO"></a><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">ISO</a></h4></li>
</ul>
<p>é€šç”¨çš„æ–¹æ¡ˆï¼Œé€‚ç”¨äºå„ç§ç¯å¢ƒï¼Œæ— è®ºæ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯ç‰©ç†æœºï¼Œç”±äºå’±ä½¿ç”¨çš„æ˜¯ VMware vSphere è™šæ‹ŸåŒ–ï¼Œå’±å°±ä½¿ç”¨ OVA æ ¼å¼ï¼Œå› ä¸ºåè€…å¯¹ vSphere è¿›è¡Œäº†ä¼˜åŒ–ã€‚å¯¹äº VMware ç”¨æˆ·æ¥è®²æœ€å¥½ä½¿ç”¨ OVA æ ¼å¼æ¥è¿›è¡Œå®‰è£…ã€‚</p>
<ul>
<li><h4 id="OVA"><a href="#OVA" class="headerlink" title="OVA"></a><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">OVA</a></h4></li>
</ul>
<blockquote>
<p>Pre-installed minimal environment, customized for VMware hypervisor  environments. These customizations include a highly sanitized and  optimized kernel to give improved boot and runtime performance for  containers and Linux applications. Since an OVA is a complete virtual  machine definition, weâ€™ve made available a Photon OS OVA that has  virtual hardware version 11; this will allow for compatibility with  several versions of VMware platforms or allow for the latest and  greatest virtual hardware enhancements.</p>
</blockquote>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£æ‰€æè¿°çš„ OVA è™šæ‹Ÿæœºæ¨¡æ¿æ˜¯é’ˆå¯¹  VMware hypervisor  è™šæ‹ŸåŒ–ç¯å¢ƒè¿›è¡Œä¼˜åŒ–å®šåˆ¶çš„ã€‚</p>
<ul>
<li><h5 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h5></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">Amazon Machine Image</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">Google Compute Engine image</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">Azure VHD</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">Raspberry Pi3</a></li>
</ul>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ä¸‹è½½å¥½ OVA è™šæ‹Ÿæœºæ¨¡æ¿åï¼Œç™»å½•åˆ° ESXi æˆ–è€… vCenter ä¸­ç›´æ¥ä½¿ç”¨ OVA åˆ›å»ºè™šæ‹Ÿæœºæ¨¡æ¿å³å¯ï¼Œå¯¹äº <code>VMwareÂ® Workstation 1x Pro</code>  å¯ä»¥ç›´æ¥å°† OVA å¯¼å…¥æˆä¸ºè™šæ‹Ÿæœºæ¥è¿è¡Œã€‚</p>
<h4 id="1-å¯¼å…¥-OVA-è™šæ‹Ÿæœºæ¨¡æ¿"><a href="#1-å¯¼å…¥-OVA-è™šæ‹Ÿæœºæ¨¡æ¿" class="headerlink" title="1. å¯¼å…¥ OVA è™šæ‹Ÿæœºæ¨¡æ¿"></a>1. å¯¼å…¥ OVA è™šæ‹Ÿæœºæ¨¡æ¿</h4><p><img data-src="https://p.k8s.li/20191231105906355.png"></p>
<h4 id="2-æ·»åŠ -OVA-è™šæ‹Ÿæœºæ¨¡æ¿"><a href="#2-æ·»åŠ -OVA-è™šæ‹Ÿæœºæ¨¡æ¿" class="headerlink" title="2.æ·»åŠ  OVA è™šæ‹Ÿæœºæ¨¡æ¿"></a>2.æ·»åŠ  OVA è™šæ‹Ÿæœºæ¨¡æ¿</h4><p><img data-src="https://p.k8s.li/20191231110111943.png"></p>
<h4 id="3-é€‰æ‹©å­˜å‚¨"><a href="#3-é€‰æ‹©å­˜å‚¨" class="headerlink" title="3. é€‰æ‹©å­˜å‚¨"></a>3. é€‰æ‹©å­˜å‚¨</h4><p><img data-src="https://p.k8s.li/20191231110153113.png"></p>
<h4 id="4-åŒæ„è®¸å¯åè®®"><a href="#4-åŒæ„è®¸å¯åè®®" class="headerlink" title="4. åŒæ„è®¸å¯åè®®"></a>4. åŒæ„è®¸å¯åè®®</h4><p><img data-src="https://p.k8s.li/20191231110231422.png"></p>
<h4 id="5-éƒ¨ç½²é€‰é¡¹"><a href="#5-éƒ¨ç½²é€‰é¡¹" class="headerlink" title="5.éƒ¨ç½²é€‰é¡¹"></a>5.éƒ¨ç½²é€‰é¡¹</h4><ul>
<li>é€‰æ‹©å¥½ç½‘ç»œ</li>
<li>ç£ç›˜ç½®å¤‡çš„æ–¹å¼ï¼šç²¾ç®€å°±æ˜¯ä½¿ç”¨åˆ°çš„æ—¶å€™å†å¯¹ç£ç›˜è¿›è¡Œåˆ¶ä»¤ã€‚åšç½®å¤‡å°±æ˜¯åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™å¯¹ç£ç›˜è¿›è¡Œç½®é›¶ï¼Œæ€§èƒ½ä¼šå¥½ä¸€äº›ã€‚</li>
</ul>
<p><img data-src="https://p.k8s.li/20191231110339494.png"></p>
<h4 id="6-å³å°†å®Œæˆ"><a href="#6-å³å°†å®Œæˆ" class="headerlink" title="6. å³å°†å®Œæˆ"></a>6. å³å°†å®Œæˆ</h4><p><img data-src="https://p.k8s.li/20191231110531238.png"></p>
<h3 id="ç³»ç»Ÿå¯åŠ¨"><a href="#ç³»ç»Ÿå¯åŠ¨" class="headerlink" title="ç³»ç»Ÿå¯åŠ¨"></a>ç³»ç»Ÿå¯åŠ¨</h3><p><img data-src="https://p.k8s.li/20191231111131193.png"></p>
<p>åˆå§‹ç”¨æˆ·åæ˜¯ <code>root</code> ï¼Œå¯†ç æ˜¯ <code>changeme</code> ï¼Œè¾“å…¥å®Œå¯†ç ä¹‹åä¼šå¼ºåˆ¶è¦æ±‚ä½ æ›´æ”¹å¯†ç ï¼Œåœ¨è¾“å…¥ä¸€æ¬¡ <code>changeme</code> ä¹‹åè¾“å…¥ä¸¤æ¬¡ä¿®æ”¹çš„å¯†ç å³å¯ã€‚</p>
<p>ç™»å½•åˆ°ç³»ç»Ÿä¹‹åä½¿ç”¨ <code>ip addr</code> å‘½ä»¤æŸ¥çœ‹ç”±é»˜è®¤çš„ DHCP è·å–åˆ°çš„æ–¹å¼æ¥æŸ¥çœ‹ IPï¼Œç„¶åç¼–è¾‘ sshd_config é…ç½®æ–‡ä»¶å…è®¸ root ç™»å½•ã€‚ä¸å¾—ä¸è¯´ ESXi çš„ Web æ§åˆ¶å°å®åœ¨æ˜¯å¤ªéš¾ç”¨äº†ï¼Œè¿˜æ˜¯ ssh ä¸Šå»ä½¿ç”¨å§ã€‚</p>
<ul>
<li><code>vi /etc/ssh/sshd_config</code> æŠŠ <code>PermitRootLogin</code> é…ç½®é¡¹ä¿®æ”¹ä¸º <code>yes</code> å³å¯</li>
<li>é‡å¯ sshd æœåŠ¡ <code>systemctl restart sshd</code></li>
</ul>
<h3 id="å†…æ ¸"><a href="#å†…æ ¸" class="headerlink" title="å†…æ ¸"></a>å†…æ ¸</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Linux  <span class="token number">4.19</span>.79-1.ph3-esx <span class="token comment">#1-photon SMP Tue Oct 22 23:53:27 UTC 2019 x86_64 GNU/Linux</span>

root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># cat /etc/os-release</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"VMware Photon OS"</span>
<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token string">"3.0"</span>
<span class="token assign-left variable">ID</span><span class="token operator">=</span>photon
<span class="token assign-left variable">VERSION_ID</span><span class="token operator">=</span><span class="token number">3.0</span>
<span class="token assign-left variable">PRETTY_NAME</span><span class="token operator">=</span><span class="token string">"VMware Photon OS/Linux"</span>
<span class="token assign-left variable">ANSI_COLOR</span><span class="token operator">=</span><span class="token string">"1;34"</span>
<span class="token assign-left variable">HOME_URL</span><span class="token operator">=</span><span class="token string">"https://vmware.github.io/photon/"</span>
<span class="token assign-left variable">BUG_REPORT_URL</span><span class="token operator">=</span><span class="token string">"https://github.com/vmware/photon/issues"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç›®å‰çš„å†…æ ¸ç‰ˆæœ¬æ˜¯ 4.19.79 ï¼Œæ¯” CentOS 7 ç³»é‚£ç§äº”å¹´å‰çš„ 3.18 å†…æ ¸é«˜åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº†ã€‚ä¸è¿‡ä¸ªäººè®¤ä¸ºï¼Œå¯¹äºå®¹å™¨è™šæ‹ŸåŒ–è¿™ç§ä¾èµ–äºå†…æ ¸ç‰¹æ€§çš„æŠ€æœ¯æ¥è®²è¿˜æ˜¯è¦é€‰æ‹©é«˜ä¸€ç‚¹çš„ç‰ˆæœ¬æ¯”è¾ƒå¥½ã€‚åƒ CentOS é‚£ç§äº”å¹´å‰çš„ 3.18 ç‰ˆæœ¬ï¼Œé‚£æ—¶å€™å®¹å™¨æ‰€ä¾èµ–çš„å¾ˆå¤šå†…æ ¸ç‰¹æ€§åœ¨è¿™äº›ç‰ˆæœ¬ä¸Šè¿˜ä¸å¤Ÿæˆç†Ÿã€‚ä»ä½¿ç”¨æ¥è®²ï¼Œæˆ–å¤–çš„å…¬æœ‰äº‘åƒ GKE ã€AKSã€AKE ç­‰éƒ½æ˜¯ä½¿ç”¨çš„ 4.14 å†…æ ¸ç‰ˆæœ¬ä»¥ä¸Šã€‚</p>
<p>4.19 ç‰ˆæœ¬æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å¦‚æœ kube-proxy ä½¿ç”¨ IPVS çš„è¯ï¼Œéœ€è¦å¼€å¯ç›¸åº”çš„å†…æ ¸æ¨¡å—ï¼Œä¸»è¦ä¾èµ–çš„å†…æ ¸æ¨¡å—æœ‰ä»¥ä¸‹</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">modprobe -- ip_vs
modprobe -- ip_vs_rr
modprobe -- ip_vs_wrr
modprobe -- ip_vs_sh
modprobe -- nf_conntrack_ipv4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨ 4.19 ç‰ˆæœ¬ä¹‹å nf_conntrack_ipv4 å†…æ ¸æ¨¡å—æ›¿æ¢æˆäº† nf_conntrack ï¼Œå‚çœ‹ <a target="_blank" rel="noopener" href="https://github.com/coreos/bugs/issues/2518">coreos&#x2F;bugs#2518</a></p>
<h3 id="èµ„æºå ç”¨æƒ…å†µ"><a href="#èµ„æºå ç”¨æƒ…å†µ" class="headerlink" title="èµ„æºå ç”¨æƒ…å†µ"></a>èµ„æºå ç”¨æƒ…å†µ</h3><h4 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h4><ul>
<li>ç³»ç»Ÿåˆå§‹åŒ–å¯åŠ¨ä¹‹åå†…å­˜ä»…ä»…ä½¿ç”¨äº† 45Mi</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># free -h</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          <span class="token number">2</span>.0Gi        45Mi       <span class="token number">1</span>.8Gi       <span class="token number">0</span>.0Ki        93Mi       <span class="token number">1</span>.8Gi
Swap:            0B          0B          0B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>å¯åŠ¨ docker è¿›ç¨‹ä¹‹åçš„å ç”¨æƒ…å†µï¼Œä¹Ÿä»…ä»… 109Mi</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># free -h</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          <span class="token number">2</span>.0Gi       109Mi       <span class="token number">1</span>.6Gi       <span class="token number">0</span>.0Ki       238Mi       <span class="token number">1</span>.8Gi
Swap:            0B          0B          0B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ç£ç›˜"><a href="#ç£ç›˜" class="headerlink" title="ç£ç›˜"></a>ç£ç›˜</h4><p>ä½¿ç”¨ OVA è™šæ‹Ÿæœºæ¨¡æ¿å¯åŠ¨åçš„è™šæ‹Ÿæœºï¼Œç£ç›˜ä»…ä»…å ç”¨äº† 515MB ï¼Œç¡®å®æ˜¯ç›¸å½“è½»é‡åŒ–ï¼Œè¿™è¿˜æ˜¯åŒ…å«äº† dockerã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-machine <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        16G  515M   15G   <span class="token number">4</span>% /
devtmpfs        998M     <span class="token number">0</span>  998M   <span class="token number">0</span>% /dev
tmpfs          1000M     <span class="token number">0</span> 1000M   <span class="token number">0</span>% /dev/shm
tmpfs          1000M  532K  999M   <span class="token number">1</span>% /run
tmpfs          1000M     <span class="token number">0</span> 1000M   <span class="token number">0</span>% /sys/fs/cgroup
tmpfs          1000M     <span class="token number">0</span> 1000M   <span class="token number">0</span>% /tmp
/dev/sda2        10M  <span class="token number">2</span>.2M  <span class="token number">7</span>.9M  <span class="token number">22</span>% /boot/efi
tmpfs           200M     <span class="token number">0</span>  200M   <span class="token number">0</span>% /run/user/0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="è´Ÿè½½"><a href="#è´Ÿè½½" class="headerlink" title="è´Ÿè½½"></a>è´Ÿè½½</h4><p><img data-src="https://p.k8s.li/20191231113306435.png"></p>
<h3 id="è¿›ç¨‹å’ŒæœåŠ¡"><a href="#è¿›ç¨‹å’ŒæœåŠ¡" class="headerlink" title="è¿›ç¨‹å’ŒæœåŠ¡"></a>è¿›ç¨‹å’ŒæœåŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â— photon-machine
    State: running
     Jobs: <span class="token number">0</span> queued
   Failed: <span class="token number">0</span> <span class="token function">units</span>
    Since: Tue <span class="token number">2019</span>-12-31 <span class="token number">13</span>:53:18 UTC<span class="token punctuation">;</span> 11min ago
   CGroup: /
           â”œâ”€user.slice
           â”‚ â””â”€user-0.slice
           â”‚   â”œâ”€session-c1.scope
           â”‚   â”‚ â”œâ”€363 /bin/login <span class="token parameter variable">-p</span> --
           â”‚   â”‚ â””â”€396 <span class="token parameter variable">-bash</span>
           â”‚   â”œâ”€session-c2.scope
           â”‚   â”‚ â”œâ”€408 sshd: root@pts/0
           â”‚   â”‚ â”œâ”€415 <span class="token parameter variable">-bash</span>
           â”‚   â”‚ â””â”€560 systemctl status
           â”‚   â””â”€user@0.service
           â”‚     â””â”€init.scope
           â”‚       â”œâ”€388 /lib/systemd/systemd <span class="token parameter variable">--user</span>
           â”‚       â””â”€389 <span class="token punctuation">(</span>sd-pam<span class="token punctuation">)</span>
           â”œâ”€init.scope
           â”‚ â””â”€1 /lib/systemd/systemd
           â””â”€system.slice
             â”œâ”€systemd-networkd.service
             â”‚ â””â”€255 /lib/systemd/systemd-networkd
             â”œâ”€systemd-udevd.service
             â”‚ â””â”€125 /lib/systemd/systemd-udevd
             â”œâ”€vgauthd.service
             â”‚ â””â”€197 /usr/bin/VGAuthService <span class="token parameter variable">-s</span>
             â”œâ”€docker.service
             â”‚ â”œâ”€430 /usr/bin/dockerd
             â”‚ â””â”€437 docker-containerd <span class="token parameter variable">--config</span> /var/run/docker/containerd/containerd.toml
             â”œâ”€systemd-journald.service
             â”‚ â””â”€100 /lib/systemd/systemd-journald
             â”œâ”€sshd.service
             â”‚ â””â”€361 /usr/sbin/sshd <span class="token parameter variable">-D</span>
             â”œâ”€vmtoolsd.service
             â”‚ â””â”€94 /usr/bin/vmtoolsd
             â”œâ”€systemd-resolved.service
             â”‚ â””â”€257 /lib/systemd/systemd-resolved
             â”œâ”€dbus.service
             â”‚ â””â”€198 /usr/bin/dbus-daemon <span class="token parameter variable">--system</span> <span class="token parameter variable">--address</span><span class="token operator">=</span>systemd: <span class="token parameter variable">--nofork</span> <span class="token parameter variable">--nopidfile</span> --systemd-activation --syslog-only
             â”œâ”€systemd-timesyncd.service
             â”‚ â””â”€167 /lib/systemd/systemd-timesyncd
             â””â”€systemd-logind.service
               â””â”€195 /lib/systemd/systemd-logind<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="åŒ…ç®¡ç†å·¥å…·"><a href="#åŒ…ç®¡ç†å·¥å…·" class="headerlink" title="åŒ…ç®¡ç†å·¥å…·"></a>åŒ…ç®¡ç†å·¥å…·</h3><p>Photon OS é»˜è®¤çš„åŒ…ç®¡ç†å·¥å…·æ˜¯ tdnf ï¼Œä¸è¿‡ä¹Ÿæ”¯æŒ yum ï¼Œä¸¤è€…ä½¿ç”¨æ–¹å¼æœ‰ç»†å¾®çš„å·®åˆ«ï¼Œä½¿ç”¨çš„ä¹Ÿæ˜¯ç›¸åŒçš„è½¯ä»¶åŒ…æºï¼Œè€Œä¸”å¯¹äºå›½å†…ç”¨æˆ·æ¥è®²ï¼Œè½¯ä»¶åŒ…æºåœ¨å›½å¤–æœåŠ¡å™¨ä¸Šï¼ˆ<a target="_blank" rel="noopener" href="https://dl.bintray.com/vmware/">https://dl.bintray.com/vmware/</a>ï¼‰ï¼Œé€Ÿåº¦æ„Ÿäººï¼Œè‚‰çœ¼å¯è§ KB&#x2F;s çº§åˆ«çš„é€Ÿåº¦ã€‚ä½ æ‡‚çš„ï¼Œæ“ä»–å¥¶å¥¶çš„ GFWï¼Œå°¼ç›æ­»äº† ğŸ˜¡ï¼Œæç½‘ç»œå°é”è€½è¯¯è¿™äººæ¬ç –ã€‚å®‰è£…é€Ÿåº¦æ…¢å¾—ä¸€æ‰¹ï¼Œå•å•ä¸‹è½½ 50 MB çš„è½¯ä»¶åŒ…å°±ä¸‹ä¸ä¸‹æ¥ï¼Œä¸å¾—ä¸ç”¨ä¸Šæˆ‘é‚£å°é€æ˜ä»£ç†çš„æ—è·¯ç½‘å…³ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@photon-OS <span class="token punctuation">[</span> ~ <span class="token punctuation">]</span><span class="token comment"># tdnf upgrade</span>

Installing:
runc                x86_64  <span class="token number">1.0</span>.0.rc9-1.ph3   photon-updates     <span class="token number">10</span>.24M <span class="token number">10736757</span>
containerd          x86_64  <span class="token number">1.2</span>.10-1.ph3      photon-updates     <span class="token number">76</span>.25M <span class="token number">79950751</span>
docker-engine       x86_64  <span class="token number">18.09</span>.9-1.ph3     photon-updates     <span class="token number">91</span>.29M <span class="token number">95721322</span>
docker-cli          x86_64  <span class="token number">18.09</span>.9-1.ph3     photon-updates     <span class="token number">72</span>.76M <span class="token number">76299393</span>

Total installed size: <span class="token number">250</span>.54M <span class="token number">262708223</span>

Upgrading:
sqlite-libs         x86_64  <span class="token number">3.27</span>.2-6.ph3      photon-updates      <span class="token number">1</span>.08M <span class="token number">1129424</span>
python3-setuptools  noarch  <span class="token number">3.7</span>.5-1.ph3       photon-updates      <span class="token number">1</span>.61M <span class="token number">1692186</span>
python3-xml         x86_64  <span class="token number">3.7</span>.5-1.ph3       photon-updates    <span class="token number">333</span>.69k <span class="token number">341698</span>
python3-libs        x86_64  <span class="token number">3.7</span>.5-1.ph3       photon-updates     <span class="token number">22</span>.88M <span class="token number">23990697</span>
python3             x86_64  <span class="token number">3.7</span>.5-1.ph3       photon-updates      <span class="token number">2</span>.90M <span class="token number">3044206</span>
openssl             x86_64  <span class="token number">1.0</span>.2t-2.ph3      photon-updates      <span class="token number">4</span>.53M <span class="token number">4750710</span>
openssh-server      x86_64  <span class="token number">7</span>.8p1-6.ph3       photon-updates    <span class="token number">904</span>.54k <span class="token number">926254</span>
openssh-clients     x86_64  <span class="token number">7</span>.8p1-6.ph3       photon-updates      <span class="token number">3</span>.65M <span class="token number">3831266</span>
openssh             x86_64  <span class="token number">7</span>.8p1-6.ph3       photon-updates        <span class="token number">0</span>.00b <span class="token number">0</span>
linux-esx           x86_64  <span class="token number">4.19</span>.87-1.ph3     photon-updates     <span class="token number">12</span>.67M <span class="token number">13284780</span>
libarchive          x86_64  <span class="token number">3.3</span>.3-4.ph3       photon-updates    <span class="token number">804</span>.34k <span class="token number">823648</span>
e2fsprogs-libs      x86_64  <span class="token number">1.44</span>.3-4.ph3      photon-updates     <span class="token number">74</span>.62k <span class="token number">76416</span>
e2fsprogs           x86_64  <span class="token number">1.44</span>.3-4.ph3      photon-updates      <span class="token number">1</span>.88M <span class="token number">1972142</span>
<span class="token function">docker</span>              x86_64  <span class="token number">18.09</span>.9-1.ph3     photon-updates        <span class="token number">0</span>.00b <span class="token number">0</span>
dhcp-libs           x86_64  <span class="token number">4.3</span>.5-7.ph3       photon-updates    <span class="token number">264</span>.25k <span class="token number">270588</span>
dhcp-client         x86_64  <span class="token number">4.3</span>.5-7.ph3       photon-updates      <span class="token number">2</span>.52M <span class="token number">2642853</span>

Total installed size:  <span class="token number">56</span>.05M <span class="token number">58776868</span>
Is this ok <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>:y

Downloading:
docker-engine                           <span class="token number">302192</span>      <span class="token number">1</span>%

docker-engine                           <span class="token number">515184</span>      <span class="token number">2</span>%
docker-engine                           <span class="token number">523376</span>      <span class="token number">2</span>%
docker-engine                          <span class="token number">4234352</span>     <span class="token number">15</span>%
docker-engine                         <span class="token number">23477360</span>     <span class="token number">84</span>%

docker-engine                         <span class="token number">23477360</span>     <span class="token number">84</span>%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>56.05M &#x2F; 58776868B å¤§å°çš„æ–‡ä»¶ï¼Œä¸‹è½½äº†ä¸€ä¸Šåˆéƒ½æ²¡æå®Œâ€¦â€¦æ°”çš„æˆ‘æƒ³æ€æ¡Œå­ã€ç ¸é”®ç›˜ã€æ‘”é¼ æ ‡ ğŸ˜‘</li>
</ul>
<p>ä¸è¿‡å¯ä»¥æ ¹æ®å®˜æ–¹çš„ç¼–è¯‘æ–‡æ¡£ï¼ŒæŠŠæ•´ä¸ªè½¯ä»¶åŒ…æºç¼–è¯‘å‡ºæ¥ ï¼Œæ”¾åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œç„¶åæ·»åŠ æœ¬çš„ yum æºç å³å¯ã€‚</p>
<h3 id="docker-å®¹å™¨å¼•æ“"><a href="#docker-å®¹å™¨å¼•æ“" class="headerlink" title="docker å®¹å™¨å¼•æ“"></a>docker å®¹å™¨å¼•æ“</h3><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">root@photon-machine [ ~ ]# docker info
Containers: 0
 Running: 0
 Paused: 0
 Stopped: 0
Images: 0
Server Version: 18.06.2-ce
Storage Driver: overlay2
 Backing Filesystem: extfs
 Supports d_type: true
 Native Overlay Diff: true
Logging Driver: json-file
Cgroup Driver: cgroupfs
Plugins:
 Volume: local
 Network: bridge host macvlan null overlay
 Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog
Swarm: inactive
Runtimes: runc
Default Runtime: runc
Init Binary: docker-init
containerd version: 468a545b9edcd5932818eb9de8e72413e616e86e
runc version: a592beb5bc4c4092b1b1bac971afed27687340c5 (expected: 69663f0bd4b60df09991c08812a60108003fa340)
init version: fec3683
Security Options:
 apparmor
 seccomp
  Profile: default
Kernel Version: 4.19.79-1.ph3-esx
Operating System: VMware Photon OS/Linux
OSType: linux
Architecture: x86_64
CPUs: 1
Total Memory: 1.951GiB
Name: photon-machine
ID: N53E:2APV:XYZX:QFPE:GGZU:7567:XBFB:M4VQ:F5HZ:XPRK:W33H:QYMI
Docker Root Dir: /var/lib/docker
Debug Mode (client): false
Debug Mode (server): false
Registry: https://index.docker.io/v1/
Labels:
Experimental: false
Insecure Registries:
 127.0.0.0/8
Live Restore Enabled: false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ä½¿ç”¨ä½“éªŒ"><a href="#ä½¿ç”¨ä½“éªŒ" class="headerlink" title="ä½¿ç”¨ä½“éªŒ"></a>ä½¿ç”¨ä½“éªŒ</h3><p>æ€»ä½“æ¥è®²ï¼Œé™¤äº†å®‰è£…è½¯ä»¶é€Ÿåº¦ææ…¢ä¹‹å¤–ï¼Œä½¿ç”¨èµ·æ¥å’Œæ™®é€šçš„ Linux å‘è¡Œç‰ˆæ— å¤šå¤§å·®åˆ«ï¼Œç³»ç»Ÿèµ„æºå ç”¨æ¯”ä¼ ç»Ÿçš„ Linux å‘è¡Œç‰ˆè¦ä½çš„å¤šã€‚å³ä¾¿æ˜¯è¿è¡Œäº† docker è¿›ç¨‹åç³»ç»Ÿå†…å­˜ä¹Ÿä»…ä»…å ç”¨ 100 Mb å·¦å³ï¼Œè€Œç£ç›˜å ç”¨æ‰ 500MB ç®—æ˜¯æ¯”è¾ƒè½»é‡åŒ–çš„ã€‚è‡³äºæ€§èƒ½æ–¹é¢ï¼Œç›®å‰æˆ‘è¿˜æ˜¯æ‰¾ä¸åˆ°å¯ä»¥æµ‹è¯•å¯¹æ¯”çš„æ–¹æ¡ˆã€‚</p>
<p>è¾ƒä¼ ç»Ÿçš„ Linux å‘è¡Œç‰ˆï¼Œç²¾ç®€äº†å¤§é‡ä¸å¿…è¦çš„æœåŠ¡å’Œè½¯ä»¶ï¼Œç”šè‡³è¿ tar å‘½ä»¤éƒ½æ²¡æœ‰â€¦â€¦ã€‚å¦‚æœæŠŠå®ƒå½“ä½œ kubenetes å·¥ä½œè´Ÿè½½ Node èŠ‚ç‚¹æ¥ä½¿ç”¨ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œkube-proxy ä¾èµ–çš„ä¸€äº›å·¥å…·å¹¶æ²¡æœ‰å®‰è£…ä¸Šã€‚æˆ‘ä½¿ç”¨ kubeadm å°†è¯¥èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤å½“ä¸­çš„æ—¶å€™å°±æç¤ºç¼ºå°‘ä»¥ä¸‹å‡ ä¸ªå·¥å…·ï¼š <code>ipset socat ethtool ebtables</code> ï¼Œè¿™äº›å¯¹äº IPVS éƒ½æ˜¯éœ€è¦çš„ã€‚æœ€å¥½ä½¿ç”¨ tdnf ä¸€å¹¶å®‰è£…ä¸Šï¼Œå¹¶ä¸”å¼€å¯ç›¸åº”çš„ IPVS å†…æ ¸æ¨¡å—ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">tdnf <span class="token function">install</span> ipset socat <span class="token function">ethtool</span> ebtables <span class="token function">tar</span> <span class="token parameter variable">-y</span>
modprobe -- ip_vs
modprobe -- ip_vs_rr
modprobe -- ip_vs_wrr
modprobe -- ip_vs_sh
modprobe -- nf_conntrack<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è™½ç„¶ç»è¿‡äº† 3 ä¸ªç‰ˆæœ¬çš„æ›´æ–°è¿­ä»£ï¼Œä½† Photon OS ç”¨äºç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦è¿›è¡Œç¨³å®šæ€§æµ‹è¯•ï¼Œå®ƒä¸å¦‚ CoreOS é‚£æ ·å·²ç»åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­å¾—åˆ°çš„å®è·µï¼Œç›®å‰ç”¨ Photon OS çš„ä¼ä¸šæˆ‘ç›®å‰è¿˜æœªè§åˆ°è¿‡ã€‚è€Œ CoreOS</p>
<blockquote>
<p>â€œä½œä¸º Linux ä»¥åŠå¼€æºè½¯ä»¶çš„æ”¯æŒè€…ï¼Œæˆ‘ä»¬ç›¸ä¿¡ä¸ CoreOS  è¿™æ ·çš„å¼€æºç¤¾åŒºåˆ›æ–°å…ˆé”‹åˆä½œæ˜¯éå¸¸é‡è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡è¿™æ ·çš„åˆä½œæ¥ä¸ºäº‘å¹³å°ç”¨æˆ·å¸¦æ¥æ›´å¤šã€æ›´çµæ´»çš„é€‰æ‹©ã€‚â€ å¾®è½¯ Azure çš„é¦–å¸­æŠ€æœ¯å®˜ Mark Russinovich æåˆ°ï¼Œ â€œCoreOS Linux  ä¸é«˜æ€§èƒ½ã€å¤§è§„æ¨¡çš„å¾®è½¯äº‘ç›¸ç»“åˆï¼Œæ— ç–‘å°†ä¼šä¿ƒè¿›å„ç§åº”ç”¨æœåŠ¡çš„åˆ›æ–°ã€ä»¥åŠå…¨çƒå›¢é˜Ÿçš„åä½œã€‚â€</p>
</blockquote>
<blockquote>
<p>â€œæˆ‘ä»¬å·²ç»åœ¨ä¸Šåƒå°ç‰©ç†æœºä¸ŠæˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œäº† CoreOS  Linuxã€‚æ— è®ºä»æ“ä½œç³»ç»Ÿçš„å®‰è£…ã€å‡çº§ï¼Œè¿˜æ˜¯ä»å®¹å™¨çš„ç®¡ç†å’Œåº”ç”¨éƒ¨ç½²ä¸Šï¼Œå¥¹ç»™æˆ‘ä»¬å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„ä½“éªŒï¼å¯¹äºå…‰éŸ³ç½‘ç»œè¿™ç§é£é€Ÿå‘å±•çš„äº’è”ç½‘å…¬å¸æ¥è¯´ï¼ŒCoreOS ä¸ºæˆ‘ä»¬å¹³å°çš„å»ºè®¾æä¾›äº†æœ‰åŠ›çš„æŠ€æœ¯ä¿éšœï¼åœ¨ä½¿ç”¨ CoreOS çš„è¿™ä¸¤å¹´ä¸­ï¼Œæˆ‘ä»¬ä¸å†å»æ‹…å¿ƒæ“ä½œç³»ç»Ÿã€Docker ä»¥åŠ Kubernetes  çš„å…¼å®¹æ€§ã€ç‰ˆæœ¬å‡çº§ä»¥åŠç¨³å®šæ€§ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´ä¸“æ³¨äºåº”ç”¨ã€ä¸šåŠ¡å±‚ä¸Šçš„ç®¡ç†å’Œç ”å‘ã€‚â€  å…‰éŸ³ç½‘ç»œæŠ€æœ¯è´Ÿè´£äººç‹é¹è¯´ï¼Œâ€œæˆ‘ä»¬çš„å¹³å°ä¸ä»…å¯ä»¥è·‘åœ¨è‡ªå·±çš„ç‰©ç†æœºä¸Šï¼Œè€Œä¸”è¿˜å¯ä»¥è½»æ¾åœ°éƒ¨ç½²åˆ° AWS åŠé˜¿é‡Œäº‘ä¸Šï¼ŒCoreOS  åœ¨è¿™æ–¹é¢åŠŸä¸å¯æ²¡ã€‚æˆ‘ä»¬ç°åœ¨å¾ˆé«˜å…´åœ°å¾—çŸ¥ CoreOS å°†å¼ºåŠ¿ç™»é™†ä¸­å›½å¸‚åœºï¼Œæˆ‘ä»¬å¯¹äºæ›´å¥½çš„æŠ€æœ¯æ”¯æŒå’ŒæœåŠ¡æ— æ¯”æœŸå¾…ï¼â€</p>
<p>æ­¤å¤„å¼•ç”¨ CoreOS <a target="_blank" rel="noopener" href="https://coreos.com/blog/coreos-linux-available-in-china.html">å®˜ç½‘åšå®¢</a></p>
</blockquote>
<p>CoreOS çš„ç¨³å®šæ€§ä»¥åŠç”Ÿäº§å®è·µå·²ç»ç›¸å½“æˆç†Ÿäº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ä»‹ç» CoreOS çš„ä½¿ç”¨ä½“éªŒã€‚</p>
<h2 id="CoreOS-Container-Linux-1"><a href="#CoreOS-Container-Linux-1" class="headerlink" title="CoreOS Container Linux"></a>CoreOS Container Linux</h2><p>CoreOS ä½¿ç”¨ç”¨æ¥åˆ›å»ºä¸€å¥—å¤§è§„æ¨¡çš„é›†ç¾¤ç¯å¢ƒï¼Œå•ç‹¬ä½¿ç”¨çš„æ„ä¹‰å¹¶ä¸å¤§ã€‚è€Œä¸”å¯¹äºæˆ‘å¸çš„ VMware vSphere å¹¶æ²¡æœ‰è¿›è¡Œä¼˜åŒ–ã€‚æ‰€ä»¥å°±æŒ‰ç…§è£¸é‡‘å±éƒ¨ç½²çš„æ–¹å¼æ¥å®‰è£…ä½“éªŒã€‚</p>
<h3 id="å®˜æ–¹æ–‡æ¡£-1"><a href="#å®˜æ–¹æ–‡æ¡£-1" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/">å®˜æ–¹æ–‡æ¡£</a></h3><h4 id="Cloud-Providers"><a href="#Cloud-Providers" class="headerlink" title="Cloud Providers"></a>Cloud Providers</h4><p>é€‚ç”¨äºå…¬æœ‰äº‘</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-ec2.html">Amazon EC2</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-digitalocean.html">DigitalOcean</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-google-compute-engine.html">Google Compute Engine</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-azure.html">Microsoft Azure</a><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-with-qemu.html">QEMU</a></li>
</ul>
<h4 id="Bare-Metal"><a href="#Bare-Metal" class="headerlink" title="Bare Metal"></a>Bare Metal</h4><p>é€‚ç”¨äºç‰©ç†æœº</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://coreos.com/matchbox/">Using Matchbox</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-with-ipxe.html">Booting with iPXE</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-with-pxe.html">Booting with PXE</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/installing-to-disk.html">Installing to Disk</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-with-iso.html">Booting from ISO</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/root-filesystem-placement.html">Root filesystem placement</a></li>
</ul>
<h4 id="Community-Platforms"><a href="#Community-Platforms" class="headerlink" title="Community Platforms"></a>Community Platforms</h4><p>ç¤¾åŒºæä¾›æ”¯æŒçš„</p>
<p>These <a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/community-platforms.html">platforms and providers</a> offer support and documentation for running Container Linux.</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-cloudstack.html">CloudStack</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-eucalyptus.html">Eucalyptus</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-with-libvirt.html">libvirt</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-openstack.html">OpenStack</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-vagrant.html">Vagrant</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-virtualbox.html">VirtualBox</a></li>
<li><a target="_blank" rel="noopener" href="http://coreos.com/os/docs/latest/booting-on-vmware.html">VMware</a></li>
</ul>
<h3 id="å®‰è£…é•œåƒ-OVA"><a href="#å®‰è£…é•œåƒ-OVA" class="headerlink" title="å®‰è£…é•œåƒ OVA"></a>å®‰è£…é•œåƒ <a target="_blank" rel="noopener" href="https://stable.release.core-os.net/amd64-usr/current/coreos_production_vmware_ova.ova">OVA</a></h3><p>ä¸‹è½½ä¸‹æ¥ OVA è™šæ‹Ÿæœºæ¨¡æ¿ <a target="_blank" rel="noopener" href="https://stable.release.core-os.net/amd64-usr/current/coreos_production_vmware_ova.ova">OVA</a></p>
<h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å’Œ Photon OS å®‰è£…æ­¥éª¤ä¸€æ ·ï¼Œåœ¨ ESXi ä¸Šå¯¼å…¥ OVA è™šæ‹Ÿæœºæ¨¡æ¿å³å¯ï¼Œä¸è¿‡éœ€è¦åœ¨æœ€åä¸€æ­¥é…ç½®å¥½ OS ï¼ŒåŒ…æ‹¬ä¸»æœºåã€é…ç½®æ–‡ä»¶æ•°é…ç½®æ–‡ä»¶ urlã€åŠ å¯†çš„é…ç½®æ–‡ä»¶ç­‰ç­‰ï¼Œæ ¹æ®è‡ªèº«éœ€æ±‚é…å¥½å³å¯ã€‚å¯ä»¥å‚ç…§å®˜æ–¹<a target="_blank" rel="noopener" href="https://coreos.com/os/docs/latest/clc-examples.html">é…ç½®æ–‡ä»¶çš„æ–‡æ¡£</a> ã€‚è¿™ä¸€æ­¥æ˜¯å¿…é¡»è¦åšçš„ï¼Œä¸ç„¶æ²¡æœ‰ ssh å…¬é’¥å’Œå¯†ç ä½ æ˜¯æ— æ³•ç™»å½•åˆ°ç³»ç»Ÿä¸­çš„ã€‚</p>
<p>æ³¨æ„ï¼Œå®˜æ–¹ç»™äº†ä¸¤ç§é…ç½®æ–‡ä»¶åˆé€‚ï¼Œä¸€ä¸ªæ˜¯ yaml ä¸€ä¸ªæ˜¯ json ï¼Œä¸è¿‡åœ¨è¿™é‡Œè¦ä½¿ç”¨</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"ignition"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"config"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"timeouts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"2.1.0"</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"networkd"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"passwd"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"core"</span><span class="token punctuation">,</span>
        <span class="token property">"passwordHash"</span><span class="token operator">:</span> <span class="token string">"$6$43y3tkl..."</span><span class="token punctuation">,</span>
        <span class="token property">"sshAuthorizedKeys"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"key1"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"storage"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"systemd"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>password_hash</code> å¯ä»¥é€šè¿‡ openssl å‘½ä»¤æ¥ç”Ÿæˆï¼ŒæŠŠç”Ÿæˆçš„ä¸€æ•´ä¸²å†…å®¹å¡«å†™åˆ°ä¸Šé¢ï¼ŒåŒ…æ‹¬åé¢é‚£ä¸ªç‚¹ <code>.</code></li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â•­â”€@debian ~
â•°â”€$ openssl <span class="token function">passwd</span> <span class="token parameter variable">-1</span>
Password:
Verifying - Password:
<span class="token variable">$1</span><span class="token variable">$nCzW8953</span><span class="token variable">$un</span>/JUMJDE2588l7Y6KkP.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>ssh_authorized_keys</code> é€šè¿‡ ssh-keygen ç”Ÿæˆï¼Œç”Ÿæˆçš„å…¬é’¥å¡«å†™åœ¨ä¸Šé¢ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆä¹‹åå°±æŠŠæ•´ä¸ªå†…å®¹å¤åˆ¶ç²˜è´´åˆ°ç¬¬äºŒä¸ªæ¡†æ¡† <code>CoreOS config data</code> é‡Œ</p>
<h4 id="å…¶ä»–è®¾ç½®"><a href="#å…¶ä»–è®¾ç½®" class="headerlink" title="å…¶ä»–è®¾ç½®"></a>å…¶ä»–è®¾ç½®</h4><p><img data-src="https://p.k8s.li/20191231125441199.png"></p>
<h3 id="ç³»ç»Ÿå¯åŠ¨-1"><a href="#ç³»ç»Ÿå¯åŠ¨-1" class="headerlink" title="ç³»ç»Ÿå¯åŠ¨"></a>ç³»ç»Ÿå¯åŠ¨</h3><p>å¯èƒ½æ˜¯ coreos config é…ç½®æ–‡ä»¶æ²¡æœ‰é…å¥½ï¼Œè€Œå¯¼è‡´å¯åŠ¨åè¾“å…¥è®¾ç½®çš„å¯†ç æç¤ºé”™è¯¯ ğŸ˜¥ï¼Œåƒµç¡¬ï¼Œåªèƒ½é€šè¿‡ä¿®æ”¹ grub å¯åŠ¨å‚æ•°æ¥è·³è¿‡äº†ã€‚</p>
<ul>
<li>1.æ‰“å¼€ CoreOS è™šæ‹Ÿæœºç”µæºï¼Œå¹¶æ‰“å¼€æ§åˆ¶å°ã€‚</li>
<li>2.å½“ Boot Loader æç¤ºå‡ºç°çš„æ—¶å€™ï¼ŒæŒ‰ä¸‹ e é”®æ¥ç¼–è¾‘ GRUB èœå•ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ª coreos default ç¼–è¾‘ã€‚</li>
<li>3.æ·»åŠ  <code>coreos.autologin</code> ä½œä¸ºå¯åŠ¨å‚æ•°ï¼Œå¹¶ Ctrl-x æˆ– F10 é‡å¯ã€‚è¿™å°†ä½¿æ§åˆ¶å°è·³è¿‡ç™»å½•æç¤ºå¹¶ç›´æ¥è¿›å…¥ç”¨æˆ· core çš„ shellã€‚</li>
<li><img data-src="https://p.k8s.li/20191231133509428.png"></li>
<li>å¯åŠ¨è¿›å…¥ç³»ç»Ÿä¹‹åè¾“å…¥ <code>sudo passwd</code> æ¥ä¿®æ”¹ root å¯†ç ã€‚ç„¶ååˆ‡æ¢åˆ° root ç”¨æˆ·ä¸‹ <code>passwd core</code> ä¿®æ”¹ core è¿™ä¸ªç”¨æˆ·çš„å¯†ç ã€‚ä¿®æ”¹ä¹‹åå°±å¯ä»¥é€šè¿‡ ssh ç™»å½•å•¦ ğŸ˜‚ï¼Œæ¯” Photon OS è¦æŠ˜è…¾ä¸€ç•ªå‘€ã€‚ä¸è¿‡å•Šï¼Œä½¿ç”¨ OVA éƒ¨ç½²æœ€å¥½ç»“åˆ could-init æ¥è®¾ç½®è™šæ‹Ÿæœºçš„ ssh å¯†é’¥ï¼Œç½‘ç»œï¼Œä¸»æœºåç­‰å‚æ•°ã€‚</li>
</ul>
<h3 id="èµ„æºå ç”¨æƒ…å†µ-1"><a href="#èµ„æºå ç”¨æƒ…å†µ-1" class="headerlink" title="èµ„æºå ç”¨æƒ…å†µ"></a>èµ„æºå ç”¨æƒ…å†µ</h3><h5 id="å†…å­˜-1"><a href="#å†…å­˜-1" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">core@localhost ~ $ <span class="token function">free</span> <span class="token parameter variable">-h</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          961Mi       177Mi       398Mi       199Mi       385Mi       445Mi
Swap:            0B          0B          0B
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ç£ç›˜-1"><a href="#ç£ç›˜-1" class="headerlink" title="ç£ç›˜"></a>ç£ç›˜</h4><p>CoreOS çš„ç£ç›˜åˆ†åŒºå’Œ Photon OS ç•¥æœ‰ä¸åŒ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">core@localhost ~ $ <span class="token function">df</span> <span class="token parameter variable">-h</span>
Filesystem       Size  Used Avail Use% Mounted on
devtmpfs         460M     <span class="token number">0</span>  460M   <span class="token number">0</span>% /dev
tmpfs            481M     <span class="token number">0</span>  481M   <span class="token number">0</span>% /dev/shm
tmpfs            481M  484K  481M   <span class="token number">1</span>% /run
tmpfs            481M     <span class="token number">0</span>  481M   <span class="token number">0</span>% /sys/fs/cgroup
/dev/sda9        <span class="token number">6</span>.0G   60M  <span class="token number">5</span>.6G   <span class="token number">2</span>% /
/dev/mapper/usr  985M  854M   80M  <span class="token number">92</span>% /usr
none             481M  200M  282M  <span class="token number">42</span>% /run/torcx/unpack
tmpfs            481M     <span class="token number">0</span>  481M   <span class="token number">0</span>% /media
tmpfs            481M     <span class="token number">0</span>  481M   <span class="token number">0</span>% /tmp
/dev/sda6        108M  <span class="token number">7</span>.9M   92M   <span class="token number">8</span>% /usr/share/oem
/dev/sda1        127M   54M   73M  <span class="token number">43</span>% /boot
tmpfs             97M     <span class="token number">0</span>   97M   <span class="token number">0</span>% /run/user/500<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯"><a href="#å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯" class="headerlink" title="å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯"></a>å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Linux localhost <span class="token number">4.19</span>.86-coreos <span class="token comment">#1 SMP Mon Dec 2 20:13:38 -00 2019 x86_64 Intel(R) Core(TM) i5-4590 CPU @ 3.30GHz GenuineIntel GNU/Linux</span>

core@localhost ~ $ <span class="token function">cat</span> /etc/os-release
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"Container Linux by CoreOS"</span>
<span class="token assign-left variable">ID</span><span class="token operator">=</span>coreos
<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token number">2303.3</span>.0
<span class="token assign-left variable">VERSION_ID</span><span class="token operator">=</span><span class="token number">2303.3</span>.0
<span class="token assign-left variable">BUILD_ID</span><span class="token operator">=</span><span class="token number">2019</span>-12-02-2049
<span class="token assign-left variable">PRETTY_NAME</span><span class="token operator">=</span><span class="token string">"Container Linux by CoreOS 2303.3.0 (Rhyolite)"</span>
<span class="token assign-left variable">ANSI_COLOR</span><span class="token operator">=</span><span class="token string">"38;5;75"</span>
<span class="token assign-left variable">HOME_URL</span><span class="token operator">=</span><span class="token string">"https://coreos.com/"</span>
<span class="token assign-left variable">BUG_REPORT_URL</span><span class="token operator">=</span><span class="token string">"https://issues.coreos.com"</span>
<span class="token assign-left variable">COREOS_BOARD</span><span class="token operator">=</span><span class="token string">"amd64-usr"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="docker-å®¹å™¨å¼•æ“-1"><a href="#docker-å®¹å™¨å¼•æ“-1" class="headerlink" title="docker å®¹å™¨å¼•æ“"></a>docker å®¹å™¨å¼•æ“</h3><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">core@localhost ~ $ docker info
Containers: 0
 Running: 0
 Paused: 0
 Stopped: 0
Images: 0
Server Version: 18.06.3-ce
Storage Driver: overlay2
 Backing Filesystem: extfs
 Supports d_type: true
 Native Overlay Diff: true
Logging Driver: json-file
Cgroup Driver: cgroupfs
Plugins:
 Volume: local
 Network: bridge host macvlan null overlay
 Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog
Swarm: inactive
Runtimes: runc
Default Runtime: runc
Init Binary: docker-init
containerd version: 468a545b9edcd5932818eb9de8e72413e616e86e
runc version: a592beb5bc4c4092b1b1bac971afed27687340c5
init version: fec3683b971d9c3ef73f284f176672c44b448662
Security Options:
 seccomp
  Profile: default
 selinux
Kernel Version: 4.19.86-coreos
Operating System: Container Linux by CoreOS 2303.3.0 (Rhyolite)
OSType: linux
Architecture: x86_64
CPUs: 2
Total Memory: 961.7MiB
Name: localhost
ID: VUKA:LDLW:WECP:IZKO:A6ED:IKIN:6C3V:VRIL:S4ND:SCII:66EH:GDYP
Docker Root Dir: /var/lib/docker
Debug Mode (client): false
Debug Mode (server): false
Registry: https://index.docker.io/v1/
Labels:
Experimental: false
Insecure Registries:
 127.0.0.0/8
Live Restore Enabled: false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="è´Ÿè½½-1"><a href="#è´Ÿè½½-1" class="headerlink" title="è´Ÿè½½"></a>è´Ÿè½½</h3><p><img data-src="https://p.k8s.li/20191231135348120.png"></p>
<h3 id="è¿›ç¨‹å’ŒæœåŠ¡-1"><a href="#è¿›ç¨‹å’ŒæœåŠ¡-1" class="headerlink" title="è¿›ç¨‹å’ŒæœåŠ¡"></a>è¿›ç¨‹å’ŒæœåŠ¡</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â— localhost
    State: running
     Jobs: <span class="token number">0</span> queued
   Failed: <span class="token number">0</span> <span class="token function">units</span>
    Since: Tue <span class="token number">2019</span>-12-31 <span class="token number">13</span>:38:05 UTC<span class="token punctuation">;</span> 7h left
   CGroup: /
           â”œâ”€user.slice
           â”‚ â””â”€user-500.slice
           â”‚   â”œâ”€user@500.service
           â”‚   â”‚ â””â”€init.scope
           â”‚   â”‚   â”œâ”€725 /usr/lib/systemd/systemd <span class="token parameter variable">--user</span>
           â”‚   â”‚   â””â”€726 <span class="token punctuation">(</span>sd-pam<span class="token punctuation">)</span>
           â”‚   â”œâ”€session-2.scope
           â”‚   â”‚ â”œâ”€768 sshd: core <span class="token punctuation">[</span>priv<span class="token punctuation">]</span>
           â”‚   â”‚ â”œâ”€781 sshd: core@pts/0
           â”‚   â”‚ â”œâ”€782 <span class="token parameter variable">-bash</span>
           â”‚   â”‚ â””â”€978 systemctl status
           â”‚   â””â”€session-1.scope
           â”‚     â”œâ”€713 /bin/login <span class="token parameter variable">-f</span>
           â”‚     â”œâ”€731 <span class="token parameter variable">-bash</span>
           â”‚     â”œâ”€762 <span class="token function">su</span>
           â”‚     â”œâ”€763 <span class="token function">bash</span>
           â”‚     â”œâ”€770 <span class="token function">su</span> core
           â”‚     â”œâ”€771 <span class="token function">bash</span>
           â”‚     â”œâ”€775 <span class="token function">su</span>
           â”‚     â””â”€776 <span class="token function">bash</span>
           â”œâ”€init.scope
           â”‚ â””â”€1 /usr/lib/systemd/systemd --switched-root <span class="token parameter variable">--system</span> <span class="token parameter variable">--deserialize</span> <span class="token number">16</span>
           â””â”€system.slice
             â”œâ”€locksmithd.service
             â”‚ â””â”€718 /usr/lib/locksmith/locksmithd
             â”œâ”€containerd.service
             â”‚ â””â”€800 /run/torcx/bin/containerd <span class="token parameter variable">--config</span> /run/torcx/unpack/docker/usr/share/containerd/config.toml
             â”œâ”€systemd-networkd.service
             â”‚ â””â”€584 /usr/lib/systemd/systemd-networkd
             â”œâ”€systemd-udevd.service
             â”‚ â””â”€583 /usr/lib/systemd/systemd-udevd
             â”œâ”€docker.service
             â”‚ â””â”€802 /run/torcx/bin/dockerd <span class="token parameter variable">--host</span><span class="token operator">=</span>fd:// <span class="token parameter variable">--containerd</span><span class="token operator">=</span>/var/run/docker/libcontainerd/docker-containerd.sock --selinux-enabled<span class="token operator">=</span>true
             â”œâ”€update-engine.service
             â”‚ â””â”€663 /usr/sbin/update_engine <span class="token parameter variable">-foreground</span> <span class="token parameter variable">-logtostderr</span>
             â”œâ”€systemd-journald.service
             â”‚ â””â”€553 /usr/lib/systemd/systemd-journald
             â”œâ”€systemd-resolved.service
             â”‚ â””â”€635 /usr/lib/systemd/systemd-resolved
             â”œâ”€dbus.service
             â”‚ â””â”€674 /usr/bin/dbus-daemon <span class="token parameter variable">--system</span> <span class="token parameter variable">--address</span><span class="token operator">=</span>systemd: <span class="token parameter variable">--nofork</span> <span class="token parameter variable">--nopidfile</span> --systemd-activation
             â”œâ”€systemd-timesyncd.service
             â”‚ â””â”€634 /usr/lib/systemd/systemd-timesyncd
             â””â”€systemd-logind.service
               â””â”€672 /usr/lib/systemd/systemd-logind<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="åŒ…ç®¡ç†å·¥å…·-1"><a href="#åŒ…ç®¡ç†å·¥å…·-1" class="headerlink" title="åŒ…ç®¡ç†å·¥å…·"></a>åŒ…ç®¡ç†å·¥å…·</h3><p><strong>æ²¡å¾— ğŸ˜‚</strong>ï¼Œä½ æ²¡çœ‹é”™ï¼Œç¡®å®å¦‚æ­¤ï¼Œåœ¨ CoreOS ä¸Šæ²¡æœ‰ä½ å¯ä»¥ç”¨çš„åŒ…ç®¡ç†å™¨ï¼Œä¸åƒ PhotonOS é‚£æ ·æœ‰ä¸ª tdnf&#x2F;yum è®©ä½ çˆ½ä¸€æŠŠ ğŸ˜‚ã€‚åœ¨ CoreOS ä¸€åˆ‡çš†å®¹å™¨ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ <code>stackexchange.com</code> è¿™ä¸ªç­”æ¡ˆ ğŸ˜‚ï¼š</p>
<blockquote>
<p>To do this on a CoreOS box, following the hints from the <a target="_blank" rel="noopener" href="https://coreos.com/os/docs/latest/install-debugging-tools.html">guide here</a>:</p>
<ol>
<li>Boot up the CoreOS box and connect as the <code>core</code> user</li>
<li>Run the <code>/bin/toolbox</code> command to enter the stock Fedora container.</li>
<li>Install any software you need. To install nano in this case, it would be as simple as doing a <code>dnf -y install nano</code> (dnf has replaced yum)</li>
<li>Use nano to edit files. â€œBut wait â€“ Iâ€™m in a container!â€ Donâ€™t worry â€“ the hostâ€™s file system is mounted at <code>/media/root</code> when inside the container. So just save a sample text file at <code>/media/root/home/core/test.txt</code>, then <code>exit</code> the container, and finally go list the files in <code>/home/core</code>. Notice your test.txt file?</li>
</ol>
<p>If any part of this is too cryptic or confusing, please ask follow up questions. :-)</p>
</blockquote>
<p>å®˜æ–¹æ¨èä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/coreos">coreos</a>&#x2F;<strong><a target="_blank" rel="noopener" href="https://github.com/coreos/toolbox">toolbox</a></strong> æ¥å®‰è£…æ‰€éœ€è¦çš„è½¯ä»¶ï¼Œè¿™ä¸ªå·¥å…·ä»¥åå†è¯¦ç»†è®²è§£ä¸€ä¸‹å§ã€‚</p>
<h3 id="ä½¿ç”¨ä½“éªŒ-1"><a href="#ä½¿ç”¨ä½“éªŒ-1" class="headerlink" title="ä½¿ç”¨ä½“éªŒ"></a>ä½¿ç”¨ä½“éªŒ</h3><p>å®‰è£…è¿‡ç¨‹è¦å‡ºäºå®‰å…¨è€ƒè™‘æ¯” Photon OS å¤šäºä¸ªæ­¥éª¤æ¥ç™»å½•åˆ°ç³»ç»Ÿï¼Œç›®å‰æˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°å¯åŠ¨çš„æ—¶å€™æ·»åŠ  ssh å¯†é’¥çš„åŠæ³•ã€‚æ€»çš„æ¥è®²ï¼Œå† CoreOS é‡Œä¸€åˆ‡çš†å®¹å™¨è¿è¡Œæ‰€éœ€è¦çš„æœåŠ¡ï¼Œè¿™ç§é‡Œé¢è¦å…ˆè¿›çš„å¤šã€‚ä¸‹é¢çš„ RancherOS æ›´æ˜¯å°†ä¸€åˆ‡çš†å®¹å™¨è´¯å½»åˆ°åº•ï¼Œç”šè‡³å°† systemd å–ä»£æ‰ï¼Œä½¿ç”¨ docker æ¥ç®¡ç†ç³»ç»ŸæœåŠ¡ã€‚</p>
<h2 id="RancherOS-1"><a href="#RancherOS-1" class="headerlink" title="RancherOS"></a>RancherOS</h2><p>ç›®å‰ RancherOS çš„ç‰ˆæœ¬æ˜¯ v1.5.5</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">Linux 4.14.138
Buildroot: 2018.02.11
Docker docker-19.03.5 by default
RPi64: Linux 4.14.114
Console:
Alpine: 3.10
CentOS: 7.7.1908
Debian: stretch
Fedora: 31
Ubuntu: bionic<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="å®˜æ–¹æ–‡æ¡£-2"><a href="#å®˜æ–¹æ–‡æ¡£-2" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/">å®˜æ–¹æ–‡æ¡£</a></h3><p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/">å®‰è£…æ–‡æ¡£</a></p>
<h4 id="Cloud-äº‘å¹³å°"><a href="#Cloud-äº‘å¹³å°" class="headerlink" title="Cloud äº‘å¹³å°"></a>Cloud äº‘å¹³å°</h4><p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/aws">Amazon EC2</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/gce">Google Compute Engine</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/do">DigitalOcean</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/azure">Azure</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/openstack">OpenStack</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/vmware-esxi">VMware ESXi</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/cloud/aliyun">Aliyun</a></p>
<h4 id="Bare-Metal-amp-Virtual-Servers-è£¸é‡‘å±"><a href="#Bare-Metal-amp-Virtual-Servers-è£¸é‡‘å±" class="headerlink" title="Bare Metal &amp; Virtual Servers è£¸é‡‘å±"></a>Bare Metal &amp; Virtual Servers è£¸é‡‘å±</h4><p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/server/pxe">PXE</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/server/install-to-disk">Install to Hard Disk</a></p>
<p><a target="_blank" rel="noopener" href="https://rancher.com/docs/os/v1.x/en/installation/running-rancheros/server/raspberry-pi">Raspberry Pi</a></p>
<h3 id="å®‰è£…é•œåƒ-1"><a href="#å®‰è£…é•œåƒ-1" class="headerlink" title="å®‰è£…é•œåƒ"></a><a target="_blank" rel="noopener" href="https://github.com/rancher/os/releases/">å®‰è£…é•œåƒ</a></h3><p>RancherOS å°†å„ä¸ªå¹³å°çš„å®‰è£…é•œåƒéƒ½æ”¾åœ¨äº† GitHub <a target="_blank" rel="noopener" href="https://github.com/rancher/os/releases/">release</a> é¡µé¢ä¸Šã€‚å¯¹äº VMware ç”¨æˆ·å°±ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/rancher/os/releases/download/v1.5.5/rancheros-vmware.iso">rancheros-vmware.iso</a> è¿™ä¸ªé•œåƒå³å¯ã€‚æ²¡å¾— OVA è™šæ‹Ÿæœºæ¨¡æ¿åªèƒ½æ‰‹åŠ¨æ“ä¸€ä¸ªå•¦ã€‚ä¸‹è½½å®Œæˆä¹‹åå°†è¿™ä¸ªé•œåƒä¸Šä¼ åˆ° vSphere çš„æ•°æ®å­˜å‚¨ä¸­ï¼ŒæŒ‰ç…§åˆ›å»ºå¸¸è§„è™šæ‹Ÿæœºçš„æ–¹å¼æ¥åˆ›å»ºè™šæ‹Ÿæœºã€‚</p>
<h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><img data-src="https://p.k8s.li/20191231142454934.png"></p>
<p>ä½¿ç”¨ ISO å¯åŠ¨ä¹‹åè¿›å…¥å¾—æ˜¯ä¸€ä¸ª liveCD å‹å¾—ç³»ç»Ÿï¼Œå¹¶æ²¡æœ‰å®‰è£…è™šæ‹Ÿæœºå¾—ç£ç›˜å½“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°† RancherOS å®‰è£…åˆ°ç£ç›˜ä¸Šã€‚æå‰å‡†å¤‡å¥½ cloud-init çš„é…ç½®æ–‡ä»¶ï¼Œåªéœ€è¦æ‰§è¡Œ <code>ros install -c cloud-config.yml -d /dev/sda</code> å‘½ä»¤å°±è¡Œå•¦ã€‚-d å‚æ•°åé¢è·Ÿç€å®‰è£…åˆ°çš„ç£ç›˜ã€‚</p>
<p>ä¸è¿‡éœ€è¦åƒ CoreOS é‚£æ ·å‡†å¤‡ç»™ä¸€ä¸ª <code>cloud-config.yml</code> é…ç½®æ–‡ä»¶ï¼Œå°†æˆ‘ä»¬å¾— ssh å…¬é’¥å’Œç”¨æˆ·å¯†ç å¡«å†™åˆ°é‡Œé¢ï¼Œä¸è¿‡ <code>cloud-config</code> èƒ½é…ç½®å¾—é€‰é¡¹éå¸¸å¤šï¼Œåœ¨æ­¤å°±ä¸èµ˜è¿°äº†ï¼Œç­‰æŠ½ç©ºä¸“é—¨å†™ä¸€ç¯‡åšå®¢æ¥è®²è®² cloud-init çš„ä½¿ç”¨ã€‚ï¼ˆåˆæŒ–å‘ ğŸ˜‚ï¼Œä¸çŸ¥ä½•æ—¶èƒ½å¡«ä¸Š ğŸ™ƒ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># ros install -c cloud-config.yml -d /dev/sda</span>
INFO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> No <span class="token function">install</span> <span class="token builtin class-name">type</span> specified<span class="token punctuation">..</span>.defaulting to generic
Installing from rancher/os:v1.5.5
Continue <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>: y
INFO<span class="token punctuation">[</span>0002<span class="token punctuation">]</span> start <span class="token operator">!</span>isoinstallerloaded
INFO<span class="token punctuation">[</span>0002<span class="token punctuation">]</span> trying to load /bootiso/rancheros/installer.tar.gz
69b8396f5d61: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">></span><span class="token punctuation">]</span>  <span class="token number">11</span>.89MB/11.89MB
cae31a9aae74: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">></span><span class="token punctuation">]</span>  <span class="token number">1</span>.645MB/1.645MB
78885fd6d98c: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">></span><span class="token punctuation">]</span>  <span class="token number">1</span>.536kB/1.536kB
51228f31b9ce: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">></span><span class="token punctuation">]</span>   <span class="token number">2</span>.56kB/2.56kB
d8162179e708: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">></span><span class="token punctuation">]</span>   <span class="token number">2</span>.56kB/2.56kB
3ee208751cd2: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">></span><span class="token punctuation">]</span>  <span class="token number">3</span>.072kB/3.072kB
Loaded image: rancher/os-installer:latest
INFO<span class="token punctuation">[</span>0002<span class="token punctuation">]</span> Loaded images from /bootiso/rancheros/installer.tar.gz
INFO<span class="token punctuation">[</span>0002<span class="token punctuation">]</span> starting installer container <span class="token keyword">for</span> rancher/os-installer:latest <span class="token punctuation">(</span>new<span class="token punctuation">)</span>
Installing from rancher/os-installer:latest
<span class="token function">mke2fs</span> <span class="token number">1.45</span>.2 <span class="token punctuation">(</span><span class="token number">27</span>-May-2019<span class="token punctuation">)</span>
<span class="token number">64</span>-bit filesystem support is not enabled.  The larger fields afforded by this feature <span class="token builtin class-name">enable</span> full-strength checksumming.  Pass <span class="token parameter variable">-O</span> 64bit to rectify.
Creating filesystem with <span class="token number">7863808</span> 4k blocks and <span class="token number">7864320</span> inodes
Filesystem UUID: fe29cb27-b4ac-4c75-a12d-895ea7e52af9
Superblock backups stored on blocks:
        <span class="token number">32768</span>, <span class="token number">98304</span>, <span class="token number">163840</span>, <span class="token number">229376</span>, <span class="token number">294912</span>, <span class="token number">819200</span>, <span class="token number">884736</span>, <span class="token number">1605632</span>, <span class="token number">2654208</span>,
        <span class="token number">4096000</span>

Allocating group tables: <span class="token keyword">done</span>
Writing inode tables: <span class="token keyword">done</span>
Creating journal <span class="token punctuation">(</span><span class="token number">32768</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="token keyword">done</span>

Continue with <span class="token function">reboot</span> <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>:y
INFO<span class="token punctuation">[</span>0288<span class="token punctuation">]</span> Rebooting
INFO<span class="token punctuation">[</span>0288<span class="token punctuation">]</span> Setting <span class="token function">reboot</span> <span class="token function">timeout</span> to <span class="token number">60</span> <span class="token punctuation">(</span>rancher.shutdown_timeout <span class="token builtin class-name">set</span> to <span class="token number">60</span><span class="token punctuation">)</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>^<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Setting <span class="token function">reboot</span> <span class="token function">timeout</span> to <span class="token number">60</span> <span class="token punctuation">(</span>rancher.shutdown_timeout <span class="token builtin class-name">set</span> to <span class="token number">60</span><span class="token punctuation">)</span>
.<span class="token operator">=</span>.<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /docker <span class="token builtin class-name">:</span> 3d39a73e4089
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.M<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /open-vm-tools <span class="token builtin class-name">:</span> ccd97f8a7775
:.<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /ntp <span class="token builtin class-name">:</span> acf47c78a711
.<span class="token operator">></span>.<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /network <span class="token builtin class-name">:</span> 08be8ef68e27
<span class="token punctuation">..</span><span class="token operator">&lt;</span><span class="token punctuation">..</span><span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /udev <span class="token builtin class-name">:</span> 4986cd58a227
.<span class="token operator">=</span>.<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /syslog <span class="token builtin class-name">:</span> 254137c5e66a
.<span class="token operator">&lt;</span>.<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /acpid <span class="token builtin class-name">:</span> a2ededff859c
<span class="token punctuation">..</span>C<span class="token punctuation">..</span><span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Stopping /system-cron <span class="token builtin class-name">:</span> 899028a78e3a
<span class="token punctuation">..</span>H.<span class="token punctuation">[</span>            <span class="token punctuation">]</span> reboot:info: Console Stopping <span class="token punctuation">[</span>/console<span class="token punctuation">]</span> <span class="token builtin class-name">:</span> 6fc9ef66b43c
Connection to <span class="token number">10.20</span>.172.119 closed by remote host.
Connection to <span class="token number">10.20</span>.172.119 closed.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯-1"><a href="#å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯-1" class="headerlink" title="å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯"></a>å†…æ ¸ä»¥åŠå‘è¡Œç‰ˆä¿¡æ¯</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># uname -a</span>
Linux rancher <span class="token number">4.14</span>.138-rancher <span class="token comment">#1 SMP Sat Aug 10 11:25:46 UTC 2019 x86_64 GNU/Linux</span>
<span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># cat /etc/os-release</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"RancherOS"</span>
<span class="token assign-left variable">VERSION</span><span class="token operator">=</span>v1.5.5
<span class="token assign-left variable">ID</span><span class="token operator">=</span>rancheros
<span class="token assign-left variable">ID_LIKE</span><span class="token operator">=</span>
<span class="token assign-left variable">VERSION_ID</span><span class="token operator">=</span>v1.5.5
<span class="token assign-left variable">PRETTY_NAME</span><span class="token operator">=</span><span class="token string">"RancherOS v1.5.5"</span>
<span class="token assign-left variable">HOME_URL</span><span class="token operator">=</span><span class="token string">"http://rancher.com/rancher-os/"</span>
<span class="token assign-left variable">SUPPORT_URL</span><span class="token operator">=</span><span class="token string">"https://forums.rancher.com/c/rancher-os"</span>
<span class="token assign-left variable">BUG_REPORT_URL</span><span class="token operator">=</span><span class="token string">"https://github.com/rancher/os/issues"</span>
<span class="token assign-left variable">BUILD_ID</span><span class="token operator">=</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="docker-å®¹å™¨å¼•æ“-2"><a href="#docker-å®¹å™¨å¼•æ“-2" class="headerlink" title="docker å®¹å™¨å¼•æ“"></a>docker å®¹å™¨å¼•æ“</h3><p>åœ¨ RancherOS ä¸­æœ‰ä¸¤å¥— docker ï¼Œä¸€å¥—æ˜¯ç”¨æ¥å®¹å™¨åŒ–è¿è¡Œç³»ç»ŸæœåŠ¡çš„ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç©ºé—´çš„ docker ï¼Œè€Œå¦ä¸€å¥— docker å°±æ˜¯ç”¨æˆ·ç©ºé—´çš„ docker</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">root@rancher rancher</span><span class="token punctuation">]</span></span># docker info
Client:
 Debug Mode: false

Server:
 Containers: 0
  Running: 0
  Paused: 0
  Stopped: 0
 Images: 0
 Server Version: 19.03.5
 Storage Driver: overlay2
  Backing Filesystem: tmpfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: b34a5c8af56e510852c35414db4c1f4fa6172339
 runc version: 3e425f80a8c931f88e6d94a8c831b9d5aa481657
 init version: fec3683
 Security Options:
  seccomp
   Profile: default
 Kernel Version: 4.14.138-rancher
 Operating System: RancherOS v1.5.5
 OSType: linux
 Architecture: x86_64
 CPUs: 4
 Total Memory: 3.855GiB
 Name: rancher
 ID: 2256:3I2G:WFHC:ZRTL:CKG6:GXD6:3RDL:645J:CD4J:GKJ7:55SG:U32I
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false
 Product License: Community Engine<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="rancher-å¼•æ“"><a href="#rancher-å¼•æ“" class="headerlink" title="rancher å¼•æ“"></a>rancher å¼•æ“</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># du -sh /var/lib/rancher/engine/*</span>
<span class="token number">116</span>.0K  /var/lib/rancher/engine/completion
<span class="token number">33</span>.0M   /var/lib/rancher/engine/containerd
<span class="token number">5</span>.8M    /var/lib/rancher/engine/containerd-shim
<span class="token number">18</span>.0M   /var/lib/rancher/engine/ctr
<span class="token number">62</span>.6M   /var/lib/rancher/engine/docker
<span class="token number">748</span>.0K  /var/lib/rancher/engine/docker-init
<span class="token number">2</span>.7M    /var/lib/rancher/engine/docker-proxy
<span class="token number">68</span>.8M   /var/lib/rancher/engine/dockerd
<span class="token number">8</span>.3M    /var/lib/rancher/engine/runc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="èµ„æºå ç”¨"><a href="#èµ„æºå ç”¨" class="headerlink" title="èµ„æºå ç”¨"></a>èµ„æºå ç”¨</h3><h4 id="è´Ÿè½½-2"><a href="#è´Ÿè½½-2" class="headerlink" title="è´Ÿè½½"></a>è´Ÿè½½</h4><ul>
<li>å¯ä»¥çœ‹å‡º RancherOS è¿è¡Œç€å¤§é‡çš„ <code>system-docker-containerd-shim</code> è¿™æ˜¯å› ä¸ºå®ƒå°†ç³»æœåŠ¡ä¹Ÿéƒ½å®¹å™¨åŒ–æ¥è¿è¡Œï¼Œä½†å¥‡æ€ªçš„æ˜¯æ— æ³•ä½¿ç”¨ docker å‘½ä»¤æ¥ç®¡ç†è¿™äº›æœåŠ¡ã€‚</li>
</ul>
<p><img data-src="https://p.k8s.li/20191231143958024.png"></p>
<h4 id="å†…å­˜-2"><a href="#å†…å­˜-2" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h4><ul>
<li>åˆå§‹åŒ–å¯åŠ¨åå†…å­˜ä½¿ç”¨äº† 1224MBğŸ˜‚ï¼Œè¦æ¯” CoreOS å’Œ Photon OS åŠ èµ·æ¥è¿˜å¤š ğŸ˜‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>rancher@rancher ~<span class="token punctuation">]</span>$ <span class="token function">free</span> <span class="token parameter variable">-m</span>
             total       used       <span class="token function">free</span>     shared    buffers     cached
Mem:          <span class="token number">3947</span>       <span class="token number">1224</span>       <span class="token number">2722</span>        <span class="token number">993</span>          <span class="token number">0</span>        <span class="token number">993</span>
-/+ buffers/cache:        <span class="token number">231</span>       <span class="token number">3715</span>
Swap:            <span class="token number">0</span>          <span class="token number">0</span>          <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ç£ç›˜-2"><a href="#ç£ç›˜-2" class="headerlink" title="ç£ç›˜"></a>ç£ç›˜</h4><p>ç”±äºç³»ç»ŸæœåŠ¡æ˜¯ä»¥å®¹å™¨çš„æ–¹å¼æ¥è¿è¡Œçš„ï¼Œè€Œå®¹å™¨å†…çš„è¿›ç¨‹è¦è®¿é—®ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿçš„è¯å°±è¦å°†è¿™äº›æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨é‡Œå»ï¼Œæ‰€ä»¥ä¼šå‡ºç°è¿™ä¹ˆå¤šçš„åˆ†åŒºæƒ…å†µï¼Œä¸è¿‡ç»å¤§å¤šæ•°éƒ½æ˜¯å®¹å™¨æŒ‚è½½çš„æ•°æ®å·ã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># df -h</span>
Filesystem                Size      Used Available Use% Mounted on
overlay                  <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /
tmpfs                     <span class="token number">1</span>.9G         <span class="token number">0</span>      <span class="token number">1</span>.9G   <span class="token number">0</span>% /dev
tmpfs                     <span class="token number">1</span>.9G         <span class="token number">0</span>      <span class="token number">1</span>.9G   <span class="token number">0</span>% /sys/fs/cgroup
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /media
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /opt
none                      <span class="token number">1</span>.9G    <span class="token number">944</span>.0K      <span class="token number">1</span>.9G   <span class="token number">0</span>% /run
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /mnt
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /home
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/resolv.conf
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/logrotate.d
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/lib/firmware
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/sbin/iptables
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/docker
none                      <span class="token number">1</span>.9G    <span class="token number">944</span>.0K      <span class="token number">1</span>.9G   <span class="token number">0</span>% /var/run
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/log
devtmpfs                  <span class="token number">1</span>.9G         <span class="token number">0</span>      <span class="token number">1</span>.9G   <span class="token number">0</span>% /host/dev
shm                      <span class="token number">64</span>.0M         <span class="token number">0</span>     <span class="token number">64</span>.0M   <span class="token number">0</span>% /host/dev/shm
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/selinux
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/hosts
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/lib/modules
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/hostname
shm                      <span class="token number">64</span>.0M         <span class="token number">0</span>     <span class="token number">64</span>.0M   <span class="token number">0</span>% /dev/shm
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/bin/system-docker
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/boot2docker
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/share/ros
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/m-user-docker
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/waagent
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/docker
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/kubelet
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/rancher
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/bin/ros
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /usr/bin/system-docker-runc
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /etc/ssl/certs/ca-certificates.crt.rancher
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/rancher/cache
/dev/sda1                <span class="token number">28</span>.0G      <span class="token number">1</span>.0G     <span class="token number">25</span>.5G   <span class="token number">4</span>% /var/lib/rancher/conf
devtmpfs                  <span class="token number">1</span>.9G         <span class="token number">0</span>      <span class="token number">1</span>.9G   <span class="token number">0</span>% /dev
shm                      <span class="token number">64</span>.0M         <span class="token number">0</span>     <span class="token number">64</span>.0M   <span class="token number">0</span>% /dev/shm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># mount</span>
overlay on / <span class="token builtin class-name">type</span> overlay <span class="token punctuation">(</span>rw,relatime,lowerdir<span class="token operator">=</span>/var/lib/system-docker/overlay2/l/TBWLXSEPWSCBGMNSU37HJXNRO3:/var/lib/system-docker/overlay2/l/DWK2WF5FKFYZTH74WUBGHTRF4V:/var/lib/system-docker/overlay2/l/HDUW6LV2DFEIJPW3IA33YTCNWX:/var/lib/system-docker/overlay2/l/ZDK3KMGDSN5O33AR6XJJF27NFO:/var/lib/system-docker/overlay2/l/TSWFV744M2LUOSPV2N6QHON4NP:/var/lib/system-docker/overlay2/l/QZ3U27554L5LKMJDYP3DC356L7:/var/lib/system-docker/overlay2/l/D6LSXZS2UGAZ7NMKQJKMQVT24P:/var/lib/system-docker/overlay2/l/KHB3OKMEQIL2P34QMHYF3HWTLT,upperdir<span class="token operator">=</span>/var/lib/system-docker/overlay2/fc79b6b6cf5c6d0b34b5abb95a1a19d765c1a00d66d0cff1ef3778d109471522/diff,workdir<span class="token operator">=</span>/var/lib/system-docker/overlay2/fc79b6b6cf5c6d0b34b5abb95a1a19d765c1a00d66d0cff1ef3778d109471522/work<span class="token punctuation">)</span>
proc on /proc <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
tmpfs on /dev <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
devpts on /dev/pts <span class="token builtin class-name">type</span> devpts <span class="token punctuation">(</span>rw,nosuid,noexec,relatime,gid<span class="token operator">=</span><span class="token number">5</span>,mode<span class="token operator">=</span><span class="token number">620</span>,ptmxmode<span class="token operator">=</span><span class="token number">666</span><span class="token punctuation">)</span>
sysfs on /sys <span class="token builtin class-name">type</span> sysfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
tmpfs on /sys/fs/cgroup <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
none on /sys/fs/cgroup/freezer <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,freezer<span class="token punctuation">)</span>
none on /sys/fs/cgroup/devices <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,devices<span class="token punctuation">)</span>
none on /sys/fs/cgroup/net_cls,net_prio <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,net_cls,net_prio<span class="token punctuation">)</span>
none on /sys/fs/cgroup/perf_event <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,perf_event<span class="token punctuation">)</span>
none on /sys/fs/cgroup/hugetlb <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,hugetlb<span class="token punctuation">)</span>
none on /sys/fs/cgroup/cpuset <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,cpuset<span class="token punctuation">)</span>
none on /sys/fs/cgroup/cpu,cpuacct <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,cpu,cpuacct<span class="token punctuation">)</span>
none on /sys/fs/cgroup/blkio <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,blkio<span class="token punctuation">)</span>
none on /sys/fs/cgroup/memory <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,memory<span class="token punctuation">)</span>
none on /sys/fs/cgroup/pids <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,pids<span class="token punctuation">)</span>
mqueue on /dev/mqueue <span class="token builtin class-name">type</span> mqueue <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
/dev/sda1 on /media <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /opt <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
none on /run <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
nsfs on /run/docker/netns/default <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
nsfs on /run/system-docker/netns/default <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
nsfs on /run/system-docker/netns/d15f3e062bb6 <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
/dev/sda1 on /mnt <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /home <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /etc/resolv.conf <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /etc/logrotate.d <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /usr/lib/firmware <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /usr/sbin/iptables <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>ro,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /etc/docker <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
none on /var/run <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
nsfs on /var/run/docker/netns/default <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
nsfs on /var/run/system-docker/netns/default <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
nsfs on /var/run/system-docker/netns/d15f3e062bb6 <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
/dev/sda1 on /var/log <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
devtmpfs on /host/dev <span class="token builtin class-name">type</span> devtmpfs <span class="token punctuation">(</span>rw,relatime,size<span class="token operator">=</span>1949420k,nr_inodes<span class="token operator">=</span><span class="token number">487355</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
none on /host/dev/pts <span class="token builtin class-name">type</span> devpts <span class="token punctuation">(</span>rw,relatime,mode<span class="token operator">=</span><span class="token number">600</span>,ptmxmode<span class="token operator">=</span>000<span class="token punctuation">)</span>
shm on /host/dev/shm <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,size<span class="token operator">=</span>65536k<span class="token punctuation">)</span>
mqueue on /host/dev/mqueue <span class="token builtin class-name">type</span> mqueue <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
/dev/sda1 on /etc/selinux <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /etc/hosts <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /usr/lib/modules <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /etc/hostname <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
shm on /dev/shm <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,size<span class="token operator">=</span>65536k<span class="token punctuation">)</span>
/dev/sda1 on /usr/bin/system-docker <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>ro,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/boot2docker <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /usr/share/ros <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/m-user-docker <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/waagent <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/docker <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/kubelet <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/rancher <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /usr/bin/ros <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>ro,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /usr/bin/system-docker-runc <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>ro,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /etc/ssl/certs/ca-certificates.crt.rancher <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/rancher/cache <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
/dev/sda1 on /var/lib/rancher/conf <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>rw,relatime,data<span class="token operator">=</span>ordered<span class="token punctuation">)</span>
devtmpfs on /dev <span class="token builtin class-name">type</span> devtmpfs <span class="token punctuation">(</span>rw,relatime,size<span class="token operator">=</span>1949420k,nr_inodes<span class="token operator">=</span><span class="token number">487355</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
none on /dev/pts <span class="token builtin class-name">type</span> devpts <span class="token punctuation">(</span>rw,relatime,mode<span class="token operator">=</span><span class="token number">600</span>,ptmxmode<span class="token operator">=</span>000<span class="token punctuation">)</span>
shm on /dev/shm <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,size<span class="token operator">=</span>65536k<span class="token punctuation">)</span>
mqueue on /dev/mqueue <span class="token builtin class-name">type</span> mqueue <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/systemd <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,relatime,name<span class="token operator">=</span>systemd<span class="token punctuation">)</span>
none on /sys/fs/selinux <span class="token builtin class-name">type</span> selinuxfs <span class="token punctuation">(</span>ro,relatime<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ç³»ç»ŸæœåŠ¡å®¹å™¨åŒ–"><a href="#ç³»ç»ŸæœåŠ¡å®¹å™¨åŒ–" class="headerlink" title="ç³»ç»ŸæœåŠ¡å®¹å™¨åŒ–"></a>ç³»ç»ŸæœåŠ¡å®¹å™¨åŒ–</h3><p>é€šè¿‡ top å‘½ä»¤å’Œ ps å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œçš„è¿›ç¨‹å¯ä»¥å‘ç°ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„è¿›ç¨‹</p>
<h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">PID  <span class="token environment constant">PPID</span> <span class="token environment constant">USER</span>     STAT   VSZ %VSZ %CPU COMMAND
<span class="token number">1695</span>  <span class="token number">1620</span> root     S     558m  <span class="token number">14</span>%   <span class="token number">0</span>% containerd <span class="token parameter variable">--config</span> /var/run/docker/containerd/containerd.toml --log-level info
<span class="token number">1988</span>  <span class="token number">1922</span> root     S    <span class="token number">11420</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token function">top</span>
   <span class="token number">1</span>     <span class="token number">0</span> root     S    1287m  <span class="token number">32</span>%   <span class="token number">0</span>% system-dockerd --storage-driver overlay2 <span class="token parameter variable">--graph</span> /var/lib/system-docker --config-file /etc/docker/system-docker.json <span class="token parameter variable">--restart</span><span class="token operator">=</span>false <span class="token parameter variable">--group</span> root --userland-proxy<span class="token operator">=</span>false <span class="token parameter variable">--bip</span> <span class="token number">172.18</span>.42.1/16 --log-opt max-file<span class="token operator">=</span><span class="token number">2</span> --log-opt max-size
 <span class="token number">489</span>     <span class="token number">1</span> root     S     833m  <span class="token number">21</span>%   <span class="token number">0</span>% system-docker-containerd <span class="token parameter variable">-l</span> unix:///var/run/system-docker/libcontainerd/system-docker-containerd.sock --metrics-interval<span class="token operator">=</span><span class="token number">0</span> --start-timeout 2m --state-dir /var/run/system-docker/libcontainerd/containerd <span class="token parameter variable">--shim</span> system-docker-contai
<span class="token number">1370</span>  <span class="token number">1353</span> root     S     808m  <span class="token number">20</span>%   <span class="token number">0</span>% respawn <span class="token parameter variable">-f</span> /etc/respawn.conf
<span class="token number">1620</span>  <span class="token number">1415</span> root     S     658m  <span class="token number">16</span>%   <span class="token number">0</span>% dockerd <span class="token parameter variable">--group</span> <span class="token function">docker</span> <span class="token parameter variable">--host</span> unix:///var/run/docker.sock --log-opt max-file<span class="token operator">=</span><span class="token number">2</span> --log-opt max-size<span class="token operator">=</span>25m
<span class="token number">1398</span>   <span class="token number">489</span> root     S     472m  <span class="token number">12</span>%   <span class="token number">0</span>% system-docker-containerd-shim 3d39a73e4089dcbdd144277adb398d3e0d8ba62812a699be7cfeac9598539f6e /var/run/system-docker/libcontainerd/3d39a73e4089dcbdd144277adb398d3e0d8ba62812a699be7cfeac9598539f6e system-docker-runc
<span class="token number">1285</span>   <span class="token number">489</span> root     S     470m  <span class="token number">12</span>%   <span class="token number">0</span>% system-docker-containerd-shim 254137c5e66a7075c2104cca82fa2e6584509170688064fac1147fbfcda2f5c0 /var/run/system-docker/libcontainerd/254137c5e66a7075c2104cca82fa2e6584509170688064fac1147fbfcda2f5c0 system-docker-runc
<span class="token number">1588</span>  <span class="token number">1370</span> root     S     452m  <span class="token number">11</span>%   <span class="token number">0</span>% /usr/bin/autologin rancher:tty1
<span class="token number">1013</span>   <span class="token number">995</span> root     S     452m  <span class="token number">11</span>%   <span class="token number">0</span>% netconf
<span class="token number">1151</span>   <span class="token number">489</span> root     S     406m  <span class="token number">10</span>%   <span class="token number">0</span>% system-docker-containerd-shim ccd97f8a77756dcc4ae21c935dcaf35aa8f02399e9ca87811a5f4ec1d5d6d1a3 /var/run/system-docker/libcontainerd/ccd97f8a77756dcc4ae21c935dcaf35aa8f02399e9ca87811a5f4ec1d5d6d1a3 system-docker-runc
 <span class="token number">995</span>   <span class="token number">489</span> root     S     398m  <span class="token number">10</span>%   <span class="token number">0</span>% system-docker-containerd-shim 08be8ef68e27d7e3b8f9d2a62914f9b581545ed96d65a751b487e7814f2bc795 /var/run/system-docker/libcontainerd/08be8ef68e27d7e3b8f9d2a62914f9b581545ed96d65a751b487e7814f2bc795 system-docker-runc
 <span class="token number">784</span>   <span class="token number">489</span> root     S     335m   <span class="token number">8</span>%   <span class="token number">0</span>% system-docker-containerd-shim 899028a78e3a3baa42ad1e3042d49f23e9fe2d6cce8b824850aaca4270d681fd /var/run/system-docker/libcontainerd/899028a78e3a3baa42ad1e3042d49f23e9fe2d6cce8b824850aaca4270d681fd system-docker-runc
 <span class="token number">803</span>   <span class="token number">489</span> root     S     335m   <span class="token number">8</span>%   <span class="token number">0</span>% system-docker-containerd-shim a2ededff859cc3d7c1a6342eb5d92606d4da605433d03abc92cc5f6503d53c6f /var/run/system-docker/libcontainerd/a2ededff859cc3d7c1a6342eb5d92606d4da605433d03abc92cc5f6503d53c6f system-docker-runc
<span class="token number">1076</span>   <span class="token number">489</span> root     S     334m   <span class="token number">8</span>%   <span class="token number">0</span>% system-docker-containerd-shim acf47c78a71194f1ef094302846855c777ef84fe613eb1ac1cc5f7ac868d618c /var/run/system-docker/libcontainerd/acf47c78a71194f1ef094302846855c777ef84fe613eb1ac1cc5f7ac868d618c system-docker-runc
 <span class="token number">956</span>   <span class="token number">489</span> root     S     280m   <span class="token number">7</span>%   <span class="token number">0</span>% system-docker-containerd-shim 4986cd58a227547af8e4867da067cf9f066062536268bf025466f88b4b38d9c3 /var/run/system-docker/libcontainerd/4986cd58a227547af8e4867da067cf9f066062536268bf025466f88b4b38d9c3 system-docker-runc
<span class="token number">1353</span>   <span class="token number">489</span> root     S     270m   <span class="token number">7</span>%   <span class="token number">0</span>% system-docker-containerd-shim 6fc9ef66b43c9902e23cea7cfdd78b8b5842df2b981d8d7899eacb3b063294fd /var/run/system-docker/libcontainerd/6fc9ef66b43c9902e23cea7cfdd78b8b5842df2b981d8d7899eacb3b063294fd system-docker-runc
<span class="token number">1311</span>  <span class="token number">1285</span> root     S     238m   <span class="token number">6</span>%   <span class="token number">0</span>% rsyslogd <span class="token parameter variable">-n</span>
<span class="token number">1168</span>  <span class="token number">1151</span> root     S     146m   <span class="token number">4</span>%   <span class="token number">0</span>% /usr/bin/vmtoolsd
<span class="token number">1415</span>  <span class="token number">1398</span> root     S     122m   <span class="token number">3</span>%   <span class="token number">0</span>% system-docker-runc <span class="token builtin class-name">exec</span> -- 6fc9ef66b43c9902e23cea7cfdd78b8b5842df2b981d8d7899eacb3b063294fd <span class="token function">env</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin <span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span>rancher <span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/ ros docker-init <span class="token parameter variable">--group</span> <span class="token function">docker</span> <span class="token parameter variable">--host</span> unix:
 <span class="token number">907</span>   <span class="token number">784</span> root     S     109m   <span class="token number">3</span>%   <span class="token number">0</span>% container-crontab
<span class="token number">1105</span>  <span class="token number">1076</span> root     S    <span class="token number">94084</span>   <span class="token number">2</span>%   <span class="token number">0</span>% ntpd <span class="token parameter variable">--nofork</span> <span class="token parameter variable">-g</span>
 <span class="token number">973</span>   <span class="token number">956</span> root     S    <span class="token number">22544</span>   <span class="token number">1</span>%   <span class="token number">0</span>% udevd
<span class="token number">1890</span>  <span class="token number">1888</span> rancher  S    <span class="token number">22448</span>   <span class="token number">1</span>%   <span class="token number">0</span>% sshd: rancher@pts/0
<span class="token number">1586</span>  <span class="token number">1370</span> root     S    <span class="token number">22096</span>   <span class="token number">1</span>%   <span class="token number">0</span>% /usr/sbin/sshd <span class="token parameter variable">-D</span>
<span class="token number">1888</span>  <span class="token number">1586</span> root     S    <span class="token number">22096</span>   <span class="token number">1</span>%   <span class="token number">0</span>% sshd: rancher <span class="token punctuation">[</span>priv<span class="token punctuation">]</span>
<span class="token number">1989</span>  <span class="token number">1586</span> root     S    <span class="token number">22096</span>   <span class="token number">1</span>%   <span class="token number">0</span>% sshd: rancher <span class="token punctuation">[</span>priv<span class="token punctuation">]</span>
<span class="token number">1991</span>  <span class="token number">1989</span> rancher  S    <span class="token number">22096</span>   <span class="token number">1</span>%   <span class="token number">0</span>% sshd: rancher@pts/1
<span class="token number">1922</span>  <span class="token number">1891</span> root     S    <span class="token number">16244</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token function">bash</span>
<span class="token number">1641</span>  <span class="token number">1588</span> rancher  S    <span class="token number">16116</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token parameter variable">-bash</span>
<span class="token number">1885</span>  <span class="token number">1641</span> root     S    <span class="token number">16116</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token function">bash</span>
<span class="token number">1891</span>  <span class="token number">1890</span> rancher  S    <span class="token number">16116</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token parameter variable">-bash</span>
<span class="token number">1992</span>  <span class="token number">1991</span> rancher  S    <span class="token number">16116</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token parameter variable">-bash</span>
<span class="token number">1997</span>  <span class="token number">1992</span> rancher  R    <span class="token number">11420</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token function">top</span>
<span class="token number">1589</span>  <span class="token number">1370</span> root     S     <span class="token number">6404</span>   <span class="token number">0</span>%   <span class="token number">0</span>% /sbin/agetty <span class="token parameter variable">--noclear</span> tty2 linux
<span class="token number">1591</span>  <span class="token number">1370</span> root     S     <span class="token number">6404</span>   <span class="token number">0</span>%   <span class="token number">0</span>% /sbin/agetty <span class="token parameter variable">--noclear</span> tty3 linux
<span class="token number">1592</span>  <span class="token number">1370</span> root     S     <span class="token number">6404</span>   <span class="token number">0</span>%   <span class="token number">0</span>% /sbin/agetty <span class="token parameter variable">--noclear</span> tty4 linux
<span class="token number">1594</span>  <span class="token number">1370</span> root     S     <span class="token number">6404</span>   <span class="token number">0</span>%   <span class="token number">0</span>% /sbin/agetty <span class="token parameter variable">--noclear</span> tty5 linux
<span class="token number">1595</span>  <span class="token number">1370</span> root     S     <span class="token number">6404</span>   <span class="token number">0</span>%   <span class="token number">0</span>% /sbin/agetty <span class="token parameter variable">--noclear</span> tty6 linux
<span class="token number">1112</span>   <span class="token number">995</span> root     S     <span class="token number">4660</span>   <span class="token number">0</span>%   <span class="token number">0</span>% dhcpcd <span class="token parameter variable">-MA4</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">force_hostname</span><span class="token operator">=</span>true <span class="token parameter variable">--timeout</span> <span class="token number">10</span> <span class="token parameter variable">-w</span> <span class="token parameter variable">--debug</span> eth0
 <span class="token number">850</span>   <span class="token number">803</span> root     S     <span class="token number">4276</span>   <span class="token number">0</span>%   <span class="token number">0</span>% /usr/sbin/acpid <span class="token parameter variable">-f</span>
 <span class="token number">477</span>     <span class="token number">1</span> root     Z        <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>ros<span class="token punctuation">]</span>
  <span class="token number">49</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/1:1<span class="token punctuation">]</span>
   <span class="token number">8</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>rcu_sched<span class="token punctuation">]</span>
  <span class="token number">33</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/0:1<span class="token punctuation">]</span>
   <span class="token number">7</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>ksoftirqd/0<span class="token punctuation">]</span>
  <span class="token number">39</span>     <span class="token number">2</span> root     SWN      <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>khugepaged<span class="token punctuation">]</span>
<span class="token number">1317</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/3:2<span class="token punctuation">]</span>
  <span class="token number">48</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/u8:1<span class="token punctuation">]</span>
  <span class="token number">76</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>scsi_eh_1<span class="token punctuation">]</span>
<span class="token number">1244</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/2:2<span class="token punctuation">]</span>
   <span class="token number">2</span>     <span class="token number">0</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kthreadd<span class="token punctuation">]</span>
   <span class="token number">4</span>     <span class="token number">2</span> root     IW<span class="token operator">&lt;</span>      <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/0:0H<span class="token punctuation">]</span>
   <span class="token number">6</span>     <span class="token number">2</span> root     IW<span class="token operator">&lt;</span>      <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>mm_percpu_wq<span class="token punctuation">]</span>
   <span class="token number">9</span>     <span class="token number">2</span> root     IW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>rcu_bh<span class="token punctuation">]</span>
  <span class="token number">10</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>migration/0<span class="token punctuation">]</span>
  <span class="token number">11</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>watchdog/0<span class="token punctuation">]</span>
  <span class="token number">12</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>cpuhp/0<span class="token punctuation">]</span>
  <span class="token number">13</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>cpuhp/1<span class="token punctuation">]</span>
  <span class="token number">14</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>watchdog/1<span class="token punctuation">]</span>
  <span class="token number">15</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>migration/1<span class="token punctuation">]</span>
  <span class="token number">16</span>     <span class="token number">2</span> root     SW       <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>ksoftirqd/1<span class="token punctuation">]</span>
  <span class="token number">18</span>     <span class="token number">2</span> root     IW<span class="token operator">&lt;</span>      <span class="token number">0</span>   <span class="token number">0</span>%   <span class="token number">0</span>% <span class="token punctuation">[</span>kworker/1:0H<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ros"><a href="#ros" class="headerlink" title="ros"></a>ros</h3><blockquote>
<p>A system service is a container that can be run in either System Docker or Docker. Rancher provides services that are already available in RancherOS by adding them to the <a target="_blank" rel="noopener" href="https://github.com/rancher/os-services">os-services repo</a>. Anything in the <code>index.yml</code> file from the repository for the tagged release will be an available system service when using the <code>ros service list</code> command.</p>
</blockquote>
<p>RancherOS ç§»é™¤äº† systemd ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä½¿ç”¨ ros æ¥ç®¡ç†ç³»ç»ŸæœåŠ¡ã€‚è€Œç›¸åº”çš„ç³»ç»ŸæœåŠ¡ä¹Ÿæ˜¯é‡‡ç”¨ docker çš„æ–¹å¼æ¥è¿è¡Œï¼ŒåŒ…æ‹¬ç”¨æˆ·ç©ºé—´çš„ docker ä¹Ÿæ˜¯é‡‡ç”¨ docker çš„æ–¹å¼æ¥è¿è¡Œã€‚</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># ros</span>
NAME:
   ros - Control and configure RancherOS
built: <span class="token string">'2019-12-30T09:16:00Z'</span>

USAGE:
   ros <span class="token punctuation">[</span>global options<span class="token punctuation">]</span> <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>command options<span class="token punctuation">]</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

VERSION:
   v1.5.5

AUTHOR<span class="token punctuation">(</span>S<span class="token punctuation">)</span>:
   Rancher Labs, Inc.

COMMANDS:
     config, c   configure settings
     console     manage <span class="token function">which</span> console container is used
     engine      manage <span class="token function">which</span> Docker engine is used
     service, s
     os          operating system upgrade/downgrade
     tls         setup tls configuration
     <span class="token function">install</span>     <span class="token function">install</span> RancherOS to disk
     help, h     Shows a list of commands or <span class="token builtin class-name">help</span> <span class="token keyword">for</span> one <span class="token builtin class-name">command</span>

GLOBAL OPTIONS:
   --help, <span class="token parameter variable">-h</span>     show <span class="token builtin class-name">help</span>
   --version, <span class="token parameter variable">-v</span>  print the version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ç³»ç»Ÿè¿›ç¨‹"><a href="#ç³»ç»Ÿè¿›ç¨‹" class="headerlink" title="ç³»ç»Ÿè¿›ç¨‹"></a>ç³»ç»Ÿè¿›ç¨‹</h3><ul>
<li>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ <code>ros service ps</code> å‘½ä»¤æ¥æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ç³»ç»ŸæœåŠ¡ï¼Œè¿™äº›æœåŠ¡éƒ½æ˜¯ä»¥å®¹å™¨çš„æ–¹å¼æ¥è¿è¡Œçš„ã€‚æ¯”å¦‚ç”¨æˆ·ç©ºé—´é‡Œçš„ <code>user-docker</code> ã€<code>syslog</code> ã€<code>udevd</code>   ç­‰ç­‰éƒ½æ˜¯ä»¥å®¹å™¨çš„æ–¹å¼æ¥è¿è¡Œçš„ï¼Œè€Œä¸æ˜¯ä»¥ä¼ ç»Ÿè¿›ç¨‹æœåŠ¡æ¥è¿è¡Œçš„ã€‚åŒ…æ‹¬æˆ‘ä»¬å®‰è£… RancherOS åˆ°ç£ç›˜çš„æ—¶å€™  <code>starting installer container for rancher/os-installer:latest (new)</code> è¿™ä¸ªå®‰è£…ç¨‹åºä¹Ÿæ˜¯ç”±å®¹å™¨çš„æ–¹å¼æ¥è¿è¡Œçš„ï¼ŒæŠŠç£ç›˜è®¾å¤‡å’Œ <code>cloud-init</code> é…ç½®æ–‡ä»¶ä¸€å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@rancher rancher<span class="token punctuation">]</span><span class="token comment"># ros service ps</span>
Name                    Command                                                            State                     Ports
<span class="token function">docker</span>                  ros user-docker                                                    Up <span class="token number">9</span> minutes
<span class="token function">logrotate</span>               /usr/bin/entrypoint.sh /usr/sbin/logrotate <span class="token parameter variable">-v</span> /etc/logrotate.conf  Created
system-cron             container-crontab                                                  Up <span class="token number">9</span> minutes
container-data-volumes  /usr/bin/ros entrypoint <span class="token builtin class-name">echo</span>                                       Created
console                 /usr/bin/ros entrypoint ros console-init                           Up <span class="token number">9</span> minutes
system-volumes          /usr/bin/ros entrypoint <span class="token builtin class-name">echo</span>                                       Created
ntp                     /usr/bin/ros entrypoint /bin/start_ntp.sh                          Up <span class="token number">9</span> minutes
subscriber              /usr/bin/ros entrypoint os-subscriber                              Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">2</span> minutes ago
syslog                  /usr/bin/entrypoint.sh rsyslogd <span class="token parameter variable">-n</span>                                 Up <span class="token number">9</span> minutes
media-volumes           /usr/bin/ros entrypoint <span class="token builtin class-name">echo</span>                                       Created
preload-user-images     /usr/bin/ros entrypoint ros preload-images                         Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">9</span> minutes ago
udev                    /usr/bin/ros entrypoint udevd                                      Up <span class="token number">9</span> minutes
udev-cold               /usr/bin/ros entrypoint ros udev-settle                            Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">9</span> minutes ago
network                 /usr/bin/ros entrypoint netconf                                    Up <span class="token number">9</span> minutes
open-vm-tools           /usr/bin/ros entrypoint /usr/bin/vmtoolsd                          Up <span class="token number">9</span> minutes
acpid                   /usr/bin/ros entrypoint /usr/sbin/acpid <span class="token parameter variable">-f</span>                         Up <span class="token number">9</span> minutes
command-volumes         /usr/bin/ros entrypoint <span class="token builtin class-name">echo</span>                                       Created
cloud-init-execute      /usr/bin/ros entrypoint cloud-init-execute -pre-console            Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">9</span> minutes ago
user-volumes            /usr/bin/ros entrypoint <span class="token builtin class-name">echo</span>                                       Created
all-volumes             /usr/bin/ros entrypoint <span class="token builtin class-name">echo</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="åŒ…ç®¡ç†å™¨"><a href="#åŒ…ç®¡ç†å™¨" class="headerlink" title="åŒ…ç®¡ç†å™¨"></a>åŒ…ç®¡ç†å™¨</h3><p>å’Œ CoreOS ä¸€æ ·ï¼ŒRancherOS ä¹Ÿæ²¡å¾—ç›¸åº”çš„åŒ…ç®¡ç†å™¨ ğŸ˜‚ï¼Œéƒ½æ˜¯é‡‡ç”¨å®¹å™¨æ¥è¿è¡Œæ‰€éœ€çš„æœåŠ¡ï¼Œä½¿ç”¨ <code>ros</code> å‘½ä»¤æ¥ç®¡ç†ç›¸åº”çš„æœåŠ¡ã€‚å¦‚æœæƒ³è¦è¿è¡Œä¸€ä¸ªæœåŠ¡çš„è¯ï¼Œéœ€è¦ä½¿ç”¨ ros æ¥åˆ›å»ºç›¸åº”çš„å®¹å™¨æ¥è¿è¡Œæ‰å¯ä»¥ã€‚è€Œä½¿ç”¨ ros æ¥åˆ›å»ºæœåŠ¡</p>
<h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>æ–‡ç« å†™çš„å¤ªä»“ä¿ƒäº†ï¼Œæ„Ÿè§‰è¿™äº›å®¹å™¨ä¼˜åŒ–è¡Œæ“ä½œç³»ç»Ÿéƒ½å€¼å¾—ç©ä¸€ç©å¾—ï¼Œå°¤å…¶æ˜¯ RancherOS è¿™ç§å°† systemc å–ä»£æ‰ä½¿ç”¨ docker æ¥ç®¡ç†ç³»ç»ŸæœåŠ¡å¾—ç‰›çš®æŠ€æœ¯ï¼Œå€¼å¾—ç ”ç©¶ä¸€å“ˆã€‚å› ä¸ºæ—¶é—´æœ‰é™ï¼Œæ‰€ä»¥å°±æ²¡æœ‰è¯¦ç»†åœ°å±•å¼€æ¥å°†ï¼Œå°±ç­‰åˆ° 2020 å¹´å§ ğŸ˜‚ã€‚ç¥å¤§å®¶ 2020 å¹´å…ƒæ—¦å¿«ä¹ï¼Œæ–°çš„ä¸€å¹´é‡Œâ€¦â€¦çœç•¥åƒå­—ç¥ç¦ ğŸ˜</p>

    </div>

    
    
    
      


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/docker/" rel="tag"># docker</a>
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/%E5%AE%B9%E5%99%A8/" rel="tag"># å®¹å™¨</a>
              <a href="/tags/kubernees/" rel="tag"># kubernees</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/pc-e5v3-e3v3-amd2600.html" rel="prev" title="å°å¼æœºè£…æœºæ–¹æ¡ˆ">
                  <i class="fa fa-chevron-left"></i> å°å¼æœºè£…æœºæ–¹æ¡ˆ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019-reading-notes.html" rel="next" title="2019 å¹´è¯»ä¹¦ç¬”è®°å’Œæ€è€ƒ">
                  2019 å¹´è¯»ä¹¦ç¬”è®°å’Œæ€è€ƒ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Reimu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">26:46</span>
  </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"muzi","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
